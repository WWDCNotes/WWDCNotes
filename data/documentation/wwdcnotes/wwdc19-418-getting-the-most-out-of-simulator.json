{"schemaVersion":{"major":0,"minor":3,"patch":0},"metadata":{"title":"Getting the Most Out of Simulator","roleHeading":"WWDC19","role":"sampleCode","modules":[{"name":"WWDC Notes"}]},"abstract":[{"type":"text","text":"Join us for a deep dive into the world of Simulator. Find out how Simulator works, discover features you might not know exist, and get a tour of the command-line interface to Simulator for automation. Learn about native GPU acceleration in Simulator via Metal, and how to optimize your Metal code to take advantage of it."}],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc19-418-getting-the-most-out-of-simulator"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"kind":"content","content":[{"level":2,"text":"What’s a simulator?","anchor":"Whats-a-simulator","type":"heading"},{"inlineContent":[{"type":"image","identifier":"WWDC19-418-stack"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Apple simulators (iOS, watchOS, and tvOS) are completely separate ","type":"text"},{"identifier":"https:\/\/en.wikipedia.org\/wiki\/User_space","type":"reference","isActive":true},{"text":" that run on top of the macOS kernel.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"They have separate "},{"code":"launchd","type":"codeVoice"},{"type":"text","text":", separate daemons, separate darwin notifications, separate URL sessions, and separate mach bootstrap"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Same filesystem as macOS but separate "},{"code":"$HOME","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"From ","type":"text"},{"type":"codeVoice","code":"libSystem"},{"text":" and up: built for iOS, watchOS, or tvOS Uses iOS, watchOS, or tvOS ABI built natively for x86 (not an emulator)","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":2,"text":"Simulator Details","anchor":"Simulator-Details","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Memory and CPU limits are not simulated (you get the memory and cpus of your Mac machine)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Different core counts, different threading behaviors","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Application Sandbox is not enforced","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Simulates case-sensitive filesystem (most platforms are case-insensitive, but this adds a nice extra safety net)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Thread Sanitizer supported (even on platforms that don’t support them natively)"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":2,"text":"FAQ","anchor":"FAQ","type":"heading"},{"inlineContent":[{"type":"text","text":"The talk continues with different tips and tricks on what you can do in the simulator."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Interesting bits:"}],"type":"paragraph"},{"level":3,"text":"Simulator window size","anchor":"Simulator-window-size","type":"heading"},{"inlineContent":[{"type":"image","identifier":"WWDC19-418-simulatorWindow"}],"type":"paragraph"},{"level":3,"text":"Run new iOS simulators with old Xcode:","anchor":"Run-new-iOS-simulators-with-old-Xcode","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Launch new Xcode and boot its new iOS Simulator"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Leave Simulator.app open while closing new Xcode","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Launch old Xcode"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Build\/run to new Simulator (the new simulato will show as a build target in old Xcode)","type":"text"}]}]}],"type":"unorderedList"},{"level":3,"text":"Share between simulator and machine","anchor":"Share-between-simulator-and-machine","type":"heading"},{"inlineContent":[{"text":"The most common way is just drag and drop, however you can also use the share sheet:","type":"text"}],"type":"paragraph"},{"inlineContent":[{"identifier":"WWDC19-418-share","type":"image"},{"text":" ","type":"text"},{"text":"￼","type":"text"},{"text":" ","type":"text"},{"text":"You can then target a single simulator or to all the simulator at once.","type":"text"}],"type":"paragraph"},{"level":3,"text":"Use the Simulator via Command Line","anchor":"Use-the-Simulator-via-Command-Line","type":"heading"},{"inlineContent":[{"text":"The talk then goes through an overview of the ","type":"text"},{"code":"xcrun simctl","type":"codeVoice"},{"text":" command line:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"$ xcrun simctl list"},{"type":"text","text":" shows installed devices and their statuses"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"code":"$ xcrun simctl create <name> <device type> <runtime>","type":"codeVoice"},{"type":"text","text":"  creates a new device"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"e.g. ","type":"text"},{"type":"codeVoice","code":"$ xcrun simctl create \"Test Watch\" \"Apple Watch Series 4 - 44mm\" watchOS6.0"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"$ xcrun simctl spawn <device> <command> <arguments>","type":"codeVoice"},{"type":"text","text":" lets you launch and change the simulator behavior (logs, inject user defaults..)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"$ xcrun simctl diagnose","type":"codeVoice"},{"type":"text","text":" captures logs and states useful especially on CI when a test fails"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"$ xcrun simctl launch <device> <command> <arguments>","type":"codeVoice"},{"text":" launches the app","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"e.g: "},{"code":"$ xcrun simctl launch --console-pty booted com.apple.example -MyDefaultKey YES","type":"codeVoice"},{"type":"text","text":" launches the app, connect the logs to the terminal, writes the usersDefault value true for key “MyDefaultKey”"}]}]},{"content":[{"inlineContent":[{"code":"$ xcrun simctl boot","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"$ xcrun simctl shutdown"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"$ xcrun simctl delete"},{"text":" deletes a device","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"$ xcrun simctl delete unavailable","type":"codeVoice"},{"text":" removes all simulators that are not available any longer (old Xcode installs)","type":"text"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"…and more"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The talk ends with an overview of Metal being available to the simulator and reasons why it is awesome, for us we will see all the places where we use it (a.k.a. UIKit) run smoothly in the simulator."}],"type":"paragraph"},{"inlineContent":[{"text":"While cool, this might make things go well on the simulator, but lag on the real device (because now we can have better performance in the mac). Therefore always test on the real device when we have computation heavy tasks at hand.","type":"text"}],"type":"paragraph"},{"level":2,"text":"Written By","anchor":"Written-By","type":"heading"},{"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"zntfdr"}]}]},{"size":4,"content":[{"anchor":"Federico-Zanetello","text":"Federico Zanetello","level":3,"type":"heading"},{"inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","isActive":true,"type":"reference","overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}]},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/github.com\/zntfdr","isActive":true,"type":"reference"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/zntfdr.dev","isActive":true,"type":"reference"}],"type":"paragraph"}]}],"numberOfColumns":5,"type":"row"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference"}],"type":"paragraph"},{"level":2,"text":"Related Sessions","anchor":"Related-Sessions","type":"heading"},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10647-Become-a-Simulator-expert","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-401-Whats-New-in-Xcode-11"],"type":"links","style":"list"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}]}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"overridingTitle":"Watch Video (43 min)","isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc19\/418","type":"reference"}},"kind":"article","identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-418-Getting-the-Most-Out-of-Simulator"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19"]]},"sections":[],"references":{"zntfdr.jpeg":{"alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"identifier":"zntfdr.jpeg"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-401-Whats-New-in-Xcode-11":{"title":"What’s New in Xcode 11","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-401-Whats-New-in-Xcode-11","abstract":[{"text":"Start the week with a tour of new features in Xcode 11, designed to help you get from idea to product faster than ever. Discover new ways to edit and organize your source code, new capabilities for designing and previewing user interfaces, and great improvements for debugging and testing. Get an overview for sessions covering developer tools this year.","type":"text"}],"role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc19-401-whats-new-in-xcode-11","kind":"article"},"WWDC19-Icon.png":{"alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDC19-Icon.png"}],"identifier":"WWDC19-Icon.png"},"WWDC19-418-share":{"alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDC19-418-share.png"}],"identifier":"WWDC19-418-share"},"zntfdr":{"alt":"Profile image of Federico Zanetello","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"identifier":"zntfdr"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"title":"Contributions are welcome!","type":"link","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"WWDCNotes.png":{"alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes.png"}],"identifier":"WWDCNotes.png"},"WWDC19.jpeg":{"alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDC19.jpeg"}],"identifier":"WWDC19.jpeg"},"https://en.wikipedia.org/wiki/User_space":{"url":"https:\/\/en.wikipedia.org\/wiki\/User_space","titleInlineContent":[{"type":"text","text":"user spaces"}],"title":"user spaces","type":"link","identifier":"https:\/\/en.wikipedia.org\/wiki\/User_space"},"https://developer.apple.com/wwdc19/418":{"url":"https:\/\/developer.apple.com\/wwdc19\/418","type":"download","checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc19\/418"},"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"title":"WWDC Notes","type":"topic","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"kind":"symbol","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","role":"collection"},"WWDC19-418-stack":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC19-418-stack.png"}],"alt":null,"type":"image","identifier":"WWDC19-418-stack"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19":{"title":"WWDC19","abstract":[{"text":"Xcode 11, Swift 5.1, iOS 13, macOS 10.15 (Catalina), tvOS 13, watchOS 6.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"Combine","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Core Haptics","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Create ML","type":"codeVoice"},{"text":", and more.","type":"text"}],"images":[{"type":"icon","identifier":"WWDC19-Icon.png"},{"type":"card","identifier":"WWDC19.jpeg"}],"type":"topic","role":"collectionGroup","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19","url":"\/documentation\/wwdcnotes\/wwdc19","kind":"article"},"https://zntfdr.dev":{"title":"Blog","titleInlineContent":[{"type":"text","text":"Blog"}],"type":"link","identifier":"https:\/\/zntfdr.dev","url":"https:\/\/zntfdr.dev"},"WWDC19-418-simulatorWindow":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC19-418-simulatorWindow.png"}],"alt":null,"type":"image","identifier":"WWDC19-418-simulatorWindow"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","kind":"article","url":"\/documentation\/wwdcnotes\/zntfdr","images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"role":"sampleCode","title":"Federico Zanetello (332 notes)","type":"topic","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}]},"https://github.com/zntfdr":{"title":"GitHub","titleInlineContent":[{"type":"text","text":"GitHub"}],"type":"link","identifier":"https:\/\/github.com\/zntfdr","url":"https:\/\/github.com\/zntfdr"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10647-Become-a-Simulator-expert":{"role":"sampleCode","title":"Become a Simulator expert","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10647-Become-a-Simulator-expert","kind":"article","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc20-10647-become-a-simulator-expert","abstract":[{"text":"Simulator runs your iOS, iPadOS, tvOS, or watchOS apps directly on your Mac — no separate device required. We’ll give you a tour of the app’s latest tools and features and show you how to sharpen your Simulator skills. Discover how to test pointer and trackpad support, adjust Simulator preferences, and use command line tools like simctl to help you simulate push notifications in a development environment.","type":"text"}]}}}