{"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10171-Demystify-explicitly-built-modules","interfaceLanguage":"swift"},"sections":[],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24"]]},"metadata":{"title":"Demystify explicitly built modules","modules":[{"name":"WWDC Notes"}],"role":"sampleCode","roleHeading":"WWDC24"},"primaryContentSections":[{"content":[{"type":"heading","text":"Modules","level":2,"anchor":"Modules"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Modules are units of code distribution that describe the interface of a framework."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Modules in Swift are built by code interfaces that are marked as "},{"type":"codeVoice","code":"public"},{"type":"text","text":" (or "},{"type":"codeVoice","code":"open"},{"type":"text","text":")."}]},{"type":"paragraph","inlineContent":[{"text":"In Objective-C, the modules interface is hand-authored with ","type":"text"},{"code":".h","type":"codeVoice"},{"text":" (header) files and a module map.","type":"text"}]},{"type":"heading","text":"Using modules","level":2,"anchor":"Using-modules"},{"type":"paragraph","inlineContent":[{"type":"text","text":"There are two high-level kind of modules: "},{"type":"strong","inlineContent":[{"type":"text","text":"Implicitly"}]},{"type":"text","text":" built modules and "},{"type":"strong","inlineContent":[{"type":"text","text":"Explicitly"}]},{"type":"text","text":" built modules."}]},{"type":"paragraph","inlineContent":[{"text":"This animation shows the difference between the structure of tasks during building between implicitly (start) and explicitly (end) built modules:","type":"text"}]},{"type":"video","identifier":"WWDC24-10171-Implicit-to-Explicit"},{"type":"paragraph","inlineContent":[{"text":"Implicit means that compilers coordinate among themselves to decide which modules to build – without Xcode being aware. Swift and Clang work that way.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Explicit means that Xcode scans the source graph, builds the required modules it detected, and then builds the source.","type":"text"}]},{"type":"paragraph","inlineContent":[{"identifier":"WWDC24-10171-Steps-for-Explicit-Builds","type":"image"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This makes builds faster overall thanks to more efficient use of available execution lanes:"}]},{"type":"tabNavigator","tabs":[{"title":"Implicit Timing","content":[{"type":"paragraph","inlineContent":[{"identifier":"WWDC24-10171-Implicit-Timing","type":"image"}]}]},{"title":"Explicit Timing","content":[{"type":"paragraph","inlineContent":[{"identifier":"WWDC24-10171-Explicit-Timing","type":"image"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"Explicitly built modules also ensure that builds are more reliable thanks to precise dependencies and determinstic build graphs. No implicit state maintained elsewhere, which improves reproducability of build issues.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"This also means that clean builds also rebuild modules. And, the debugger no longer has a separate build graph, so it can reuse the already built modules. This improves debugging performance, such as when using ","type":"text"},{"type":"codeVoice","code":"p"},{"text":" or ","type":"text"},{"type":"codeVoice","code":"po"},{"text":".","type":"text"}]},{"type":"heading","text":"Module build log","level":2,"anchor":"Module-build-log"},{"type":"paragraph","inlineContent":[{"text":"In Xcode 16 explicitly built modules are used fo all C and Objective-C code. It can be enabled as a preview for Swift. Just set the build setting “Explicitly Built Modules” to “Yes”.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Some modules like "},{"type":"codeVoice","code":"UIKit"},{"type":"text","text":" may need to be built multiple times when different combinations of build settings are needed. This happened with implicitly built modules as well, but was more difficult to notice."}]},{"type":"heading","text":"Optimize your build","level":2,"anchor":"Optimize-your-build"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To detect multiple variants built for your modules, clean your project and choose “Build with Timing Summary” in the “Product -> Perform Action” menu. Then your build logs will show entries like “Generate Clang modules report” which list how many variants of each module was built."}]},{"type":"paragraph","inlineContent":[{"text":"Common reasons for multiple variants of a module needing to be built are:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Pre-processore macros"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Language modes or versions","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Disabling of Automatic Reference Counting (ARC)","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This means, you can improve your build times by making sure all your targets have the same settings for these, such as for pre-processor macros. For example, move settings from a specific target to the entire project (or even workspace) level instead like so:"}]},{"type":"video","identifier":"WWDC24-10171-Project-wide-Settings"},{"type":"heading","text":"Written By","level":2,"anchor":"Written-By"},{"type":"row","columns":[{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"Jeehut"}]}],"size":1},{"content":[{"text":"Cihat Gündüz","level":3,"type":"heading","anchor":"Cihat-Gündüz"},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/Jeehut","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/x.com\/Jeehut","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/fline.dev","isActive":true,"type":"reference"}]}],"size":4}],"numberOfColumns":5},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"type":"heading","text":"Related Sessions","level":2,"anchor":"Related-Sessions"},{"type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110364-Demystify-parallelization-in-Xcode-builds"],"style":"list"},{"type":"small","inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}],"kind":"content"}],"sampleCodeDownload":{"action":{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc24\/10171","overridingTitle":"Watch Video"},"kind":"sampleDownload"},"abstract":[{"text":"Explore how builds are changing in Xcode 16 with explicitly built modules. Discover how modules are used to build your code, how explicitly built modules improve transparency in compilation tasks, and how you can optimize your build by sharing modules across targets.","type":"text"}],"schemaVersion":{"patch":0,"minor":3,"major":0},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc24-10171-demystify-explicitly-built-modules"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","references":{"doc://WWDCNotes/documentation/WWDCNotes/Jeehut":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","role":"sampleCode","images":[{"type":"card","identifier":"Jeehut.jpeg"},{"type":"icon","identifier":"Jeehut.jpeg"}],"url":"\/documentation\/wwdcnotes\/jeehut","abstract":[{"type":"text","text":"Spatial-first Indie Developer for  Platforms. Actively contributing to Open Source since 2011!"}],"kind":"article","title":"Cihat Gündüz (61 notes)"},"WWDC24-10171-Explicit-Timing":{"alt":null,"type":"image","identifier":"WWDC24-10171-Explicit-Timing","variants":[{"url":"\/images\/WWDC24-10171-Explicit-Timing.jpeg","traits":["1x","light"]}]},"https://fline.dev":{"title":"Blog","titleInlineContent":[{"text":"Blog","type":"text"}],"url":"https:\/\/fline.dev","type":"link","identifier":"https:\/\/fline.dev"},"Jeehut.jpeg":{"alt":null,"type":"image","identifier":"Jeehut.jpeg","variants":[{"url":"\/images\/Jeehut.jpeg","traits":["1x","light"]}]},"WWDC24-10171-Implicit-to-Explicit":{"alt":null,"poster":null,"type":"video","identifier":"WWDC24-10171-Implicit-to-Explicit","variants":[{"url":"\/videos\/WWDC24-10171-Implicit-to-Explicit.mp4","traits":["1x","light"]}]},"https://github.com/Jeehut":{"title":"GitHub","titleInlineContent":[{"text":"GitHub","type":"text"}],"url":"https:\/\/github.com\/Jeehut","type":"link","identifier":"https:\/\/github.com\/Jeehut"},"https://x.com/Jeehut":{"title":"X\/Twitter","titleInlineContent":[{"text":"X\/Twitter","type":"text"}],"url":"https:\/\/x.com\/Jeehut","type":"link","identifier":"https:\/\/x.com\/Jeehut"},"WWDC24-10171-Implicit-Timing":{"alt":null,"type":"image","identifier":"WWDC24-10171-Implicit-Timing","variants":[{"url":"\/images\/WWDC24-10171-Implicit-Timing.jpeg","traits":["1x","light"]}]},"WWDC24-10171-Project-wide-Settings":{"alt":null,"poster":null,"type":"video","identifier":"WWDC24-10171-Project-wide-Settings","variants":[{"url":"\/videos\/WWDC24-10171-Project-wide-Settings.mp4","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC24":{"type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc24","role":"collectionGroup","title":"WWDC24","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24","abstract":[{"text":"Xcode 16, Swift 6, iOS 18, macOS 15 (Sequoia), tvOS 18, visionOS 2, watchOS 11.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: Swift Testing, ","type":"text"},{"type":"codeVoice","code":"FinanceKit"},{"text":", ","type":"text"},{"type":"codeVoice","code":"TabletopKit"},{"text":", and more.","type":"text"}],"images":[{"type":"icon","identifier":"WWDC24-Icon.png"},{"type":"card","identifier":"WWDC24.jpeg"}]},"WWDC24.jpeg":{"alt":null,"type":"image","identifier":"WWDC24.jpeg","variants":[{"url":"\/images\/WWDC24.jpeg","traits":["1x","light"]}]},"WWDC24-Icon.png":{"alt":null,"type":"image","identifier":"WWDC24-Icon.png","variants":[{"url":"\/images\/WWDC24-Icon.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes":{"title":"WWDC Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","type":"topic","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes","role":"collection","kind":"symbol","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-110364-Demystify-parallelization-in-Xcode-builds":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110364-Demystify-parallelization-in-Xcode-builds","type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc22-110364-demystify-parallelization-in-xcode-builds","abstract":[{"text":"Learn how the Xcode build system extracts maximum parallelism from your builds. We’ll explore how you can structure your project to improve build efficiency, take you through the process for resolving relationships between targets’ build phases in Xcode, and share how you can take full advantage of available hardware resources when compiling in Swift. We’ll also introduce you to Build Timeline — a powerful tool to help you monitor your build efficiency and performance.","type":"text"}],"title":"Demystify parallelization in Xcode builds","role":"sampleCode"},"Jeehut":{"alt":"Profile image of Cihat Gündüz","type":"image","identifier":"Jeehut","variants":[{"url":"\/images\/Jeehut.jpeg","traits":["1x","light"]}]},"https://developer.apple.com/wwdc24/10171":{"checksum":null,"url":"https:\/\/developer.apple.com\/wwdc24\/10171","type":"download","identifier":"https:\/\/developer.apple.com\/wwdc24\/10171"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"WWDC24-10171-Steps-for-Explicit-Builds":{"alt":null,"type":"image","identifier":"WWDC24-10171-Steps-for-Explicit-Builds","variants":[{"url":"\/images\/WWDC24-10171-Steps-for-Explicit-Builds.jpeg","traits":["1x","light"]}]},"WWDCNotes.png":{"alt":null,"type":"image","identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]}}}