{"primaryContentSections":[{"content":[{"anchor":"What-building-a-server-application-in-Swift-looks-like","text":"What building a server application in Swift looks like","type":"heading","level":2},{"inlineContent":[{"text":"Server applications are modeled as Swift packages, here’s a simple manifest file:","type":"text"}],"type":"paragraph"},{"code":["\/\/ swift-tools-version: 5.7","","import PackageDescription","","let package = Package(","  name: \"MyServer\",","  platforms: [.macOS(\"12.0\")],","  products: [","    .executable(name: \"MyServer\", targets: [\"MyServer\"]),","  ],","  dependencies: [","    \/\/ 👇🏻 Web framework, helps us structure our code and provides basic utilities like routing","    .package(url: \"https:\/\/github.com\/vapor\/vapor.git\", .upToNextMajor(from: \"4.0.0\")),","  ],","  targets: [","    \/\/ 👇🏻 This executable target maps the server application entry point","    .executableTarget(","      name: \"MyServer\",","      dependencies: [","        .product(name: \"Vapor\", package: \"vapor\")","      ]","    ),","    .testTarget(","      name: \"MyServerTests\",","      dependencies: [\"MyServer\"]),","  ]",")"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here’s what our framework entry point might look like:"}]},{"code":["import Vapor","","@main","public struct MyServer {","  public static func main() async throws {","    let webapp = Application()","","    \/\/ 👇🏻 our server endpoints","    webapp.get(\"greet\", use: Self.greet) ","    webapp.post(\"echo\", use: Self.echo)","","    \/\/ 👇🏻 server bootstrap code (provided by Vapor) 🚀","    try webapp.run()","  }","","  static func greet(request: Request) async throws -> String {","    return \"Hello from Swift Server\"","  }","","  static func echo(request: Request) async throws -> String {","    if let body = request.body.string {","      return body","    }","    return \"\"","  }","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"To run this server in our local machine via Xcode, we can:","type":"text"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"select the ","type":"text"},{"text":"MyServer","type":"text"},{"text":" scheme (generated for us by Xcode)","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"select the ","type":"text"},{"text":"My Mac","type":"text"},{"text":" as the destination","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"hit "},{"type":"text","text":"run"}]}]}],"type":"orderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Once the application has launched, we can use Xcode console to examine log messages emitted by the server. In the logs we can also see at which ip\/port the server is listening (typically "},{"code":"127.0.0.1:8080","type":"codeVoice"},{"type":"text","text":")"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For this demo code you can test it via terminal"}]},{"code":["curl http:\/\/127.0.0.1:8080\/greet; echo","curl http:\/\/127.0.0.1:8080\/echo --data \"Hello from WWDC 2022\"; echo"],"type":"codeListing","syntax":"shell"},{"level":2,"text":"App side (Client side)","anchor":"App-side-Client-side","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To communicate with the server we just created, we can use code similar to:"}]},{"code":["import Foundation","","struct MyServerClient {","  let baseURL = URL(string: \"http:\/\/127.0.0.1:8080\")!","","  func greet() async throws -> String {","    let url = baseURL.appendingPathComponent(\"greet\")","    let (data, _) = try await URLSession.shared.data(for: URLRequest(url: url))","    guard let responseBody = String(data: data, encoding: .utf8) else {","      throw Errors.invalidResponseEncoding","    }","    return responseBody","  }","","  enum Errors: Error {","    case invalidResponseEncoding","  }","}"],"type":"codeListing","syntax":"swift"},{"level":2,"text":"Deploying our server to the cloud","anchor":"Deploying-our-server-to-the-cloud","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"There are many cloud providers to choose from: AWS, Google Cloud, Azure, Heroku, and many others"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"most services offer a git push to deploy system"}]}]},{"content":[{"inlineContent":[{"text":"to make it possible to just ","type":"text"},{"code":"git push","type":"codeVoice"},{"text":" to deploy, cloud services use technologies like ","type":"text"},{"identifier":"https:\/\/buildpacks.io","isActive":true,"type":"reference"},{"text":" to compile the application remotely and then deploy the binary artifacts to an ephemeral host","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":2,"text":"Storage options","anchor":"Storage-options","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"Strategies:","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"text":"files for static data","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"good if application data is static or changes very slowly and manually"}]}]}]}]},{"content":[{"inlineContent":[{"text":"iCloud","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"for user-centric data or global datasets (no need dedicated server)","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"databases"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"for transactional data","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"the Swift open source community developed database drivers that help interact natively with most databases technologies:","type":"text"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"https:\/\/github.com\/kirilltitov\/FDBSwift","isActive":true},{"type":"text","text":", "},{"type":"reference","identifier":"https:\/\/github.com\/vapor\/redis","isActive":true},{"type":"text","text":", Cassandra, "},{"type":"reference","identifier":"https:\/\/github.com\/vapor\/fluent-postgres-driver","isActive":true},{"type":"text","text":", "},{"type":"reference","identifier":"https:\/\/github.com\/amzn\/smoke-dynamodb","isActive":true},{"type":"text","text":", "},{"type":"reference","identifier":"https:\/\/github.com\/mongodb\/mongo-swift-driver\/","isActive":true},{"type":"text","text":", "},{"type":"reference","identifier":"https:\/\/github.com\/vapor\/fluent-sqlite-driver","isActive":true}]}]}],"type":"unorderedList"}]}]}]}],"type":"unorderedList"},{"level":2,"text":"Written By","anchor":"Written-By","type":"heading"},{"numberOfColumns":5,"type":"row","columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"https:\/\/avatars.githubusercontent.com\/u\/6942160?v=4"}]}]},{"size":4,"content":[{"text":"Cihat Gündüz","type":"heading","level":3,"anchor":"Cihat-Gündüz"},{"inlineContent":[{"type":"reference","isActive":true,"overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/Jeehut"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/fline.dev"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/x.com\/Jeehut"}],"type":"paragraph"}]}]},{"numberOfColumns":5,"type":"row","columns":[{"content":[{"inlineContent":[{"identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","type":"image"}],"type":"paragraph"}],"size":1},{"content":[{"type":"heading","level":3,"text":"Federico Zanetello","anchor":"Federico-Zanetello"},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","isActive":true,"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"type":"reference","overridingTitle":"Contributed Notes"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/zntfdr","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/zntfdr.dev","isActive":true,"type":"reference"}]}],"size":4}]},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","type":"reference","isActive":true}]},{"level":2,"text":"Related Sessions","anchor":"Related-Sessions","type":"heading"},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10171-Meet-Swift-OpenAPI-Generator","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110356-Meet-distributed-actors-in-Swift","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10132-Meet-asyncawait-in-Swift","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10133-Protect-mutable-state-with-Swift-actors","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10644-Use-Swift-on-AWS-Lambda-with-Xcode","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-410-Creating-Swift-Packages"],"type":"links","style":"list"},{"type":"small","inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22"]]},"metadata":{"roleHeading":"WWDC22","role":"sampleCode","title":"Use Xcode for server-side development","modules":[{"name":"WWDC Notes"}]},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc22-110360-use-xcode-for-serverside-development"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110360-Use-Xcode-for-serverside-development","interfaceLanguage":"swift"},"schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"type":"text","text":"Discover how you can create, build, and deploy a Swift server app alongside your pre-existing Xcode projects within the same workspace. We’ll show you how to create your own local app and test endpoints using Xcode, and explore how you can structure and share code between server and client apps to ease your development process"}],"sections":[],"sampleCodeDownload":{"action":{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc22\/110360","overridingTitle":"Watch Video (17 min)","isActive":true},"kind":"sampleDownload"},"kind":"article","references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10133-Protect-mutable-state-with-Swift-actors":{"title":"Protect mutable state with Swift actors","abstract":[{"type":"text","text":"Data races occur when two separate threads concurrently access the same mutable state. They are trivial to construct, but are notoriously hard to debug."}],"kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10133-Protect-mutable-state-with-Swift-actors","url":"\/documentation\/wwdcnotes\/wwdc21-10133-protect-mutable-state-with-swift-actors","role":"sampleCode"},"https://buildpacks.io":{"type":"link","title":"buildpacks","identifier":"https:\/\/buildpacks.io","url":"https:\/\/buildpacks.io","titleInlineContent":[{"type":"text","text":"buildpacks"}]},"https://github.com/kirilltitov/FDBSwift":{"type":"link","title":"FoundationDB","identifier":"https:\/\/github.com\/kirilltitov\/FDBSwift","url":"https:\/\/github.com\/kirilltitov\/FDBSwift","titleInlineContent":[{"type":"text","text":"FoundationDB"}]},"WWDCNotes.png":{"alt":null,"type":"image","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"identifier":"WWDCNotes.png"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22":{"role":"collectionGroup","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22","url":"\/documentation\/wwdcnotes\/wwdc22","title":"WWDC22","kind":"article","abstract":[{"type":"text","text":"Xcode 14, Swift 5.7, iOS 16, macOS 13 (Ventura), tvOS 16, watchOS 9."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"WeatherKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"ScreenCaptureKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"Swift Regex"},{"type":"text","text":", and more."}],"type":"topic"},"https://github.com/Jeehut":{"type":"link","title":"GitHub","identifier":"https:\/\/github.com\/Jeehut","url":"https:\/\/github.com\/Jeehut","titleInlineContent":[{"type":"text","text":"GitHub"}]},"https://x.com/Jeehut":{"type":"link","title":"X\/Twitter","identifier":"https:\/\/x.com\/Jeehut","url":"https:\/\/x.com\/Jeehut","titleInlineContent":[{"type":"text","text":"X\/Twitter"}]},"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"type":"link","title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}]},"https://github.com/amzn/smoke-dynamodb":{"type":"link","title":"DynamoDB","identifier":"https:\/\/github.com\/amzn\/smoke-dynamodb","url":"https:\/\/github.com\/amzn\/smoke-dynamodb","titleInlineContent":[{"type":"text","text":"DynamoDB"}]},"Jeehut.jpeg":{"alt":null,"type":"image","variants":[{"url":"\/images\/Jeehut.jpeg","traits":["1x","light"]}],"identifier":"Jeehut.jpeg"},"https://developer.apple.com/wwdc22/110360":{"type":"download","identifier":"https:\/\/developer.apple.com\/wwdc22\/110360","url":"https:\/\/developer.apple.com\/wwdc22\/110360","checksum":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-110356-Meet-distributed-actors-in-Swift":{"title":"Meet distributed actors in Swift","url":"\/documentation\/wwdcnotes\/wwdc22-110356-meet-distributed-actors-in-swift","type":"topic","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110356-Meet-distributed-actors-in-Swift","abstract":[{"text":"Discover distributed actors — an extension of Swift’s actor model that simplifies development of distributed systems. We’ll explore how distributed actor isolation and location transparency can help you avoid the accidental complexity of networking, serialization, and other transport concerns when working with distributed apps and systems.","type":"text"}],"kind":"article"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-410-Creating-Swift-Packages":{"type":"topic","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-410-Creating-Swift-Packages","abstract":[{"text":"Whether you want to publish code to share with the community, or you just want a convenient way to organize the code in your apps, Swift packages are here to help. Learn how to create local packages for your own development, how to customize your package via the manifest file, and how to go about publishing a package for others to use.","type":"text"}],"title":"Creating Swift Packages","role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc19-410-creating-swift-packages"},"https://github.com/mongodb/mongo-swift-driver/":{"type":"link","title":"MongoDB","identifier":"https:\/\/github.com\/mongodb\/mongo-swift-driver\/","url":"https:\/\/github.com\/mongodb\/mongo-swift-driver\/","titleInlineContent":[{"type":"text","text":"MongoDB"}]},"doc://WWDCNotes/documentation/WWDCNotes/Jeehut":{"images":[{"identifier":"Jeehut.jpeg","type":"card"},{"identifier":"Jeehut.jpeg","type":"icon"}],"role":"sampleCode","kind":"article","url":"\/documentation\/wwdcnotes\/jeehut","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","abstract":[{"type":"text","text":"Spatial-first Indie Developer for  Platforms. Actively contributing to Open Source since 2011!"}],"title":"Cihat Gündüz (56 notes)","type":"topic"},"https://github.com/vapor/fluent-postgres-driver":{"type":"link","title":"Postgres","identifier":"https:\/\/github.com\/vapor\/fluent-postgres-driver","url":"https:\/\/github.com\/vapor\/fluent-postgres-driver","titleInlineContent":[{"type":"text","text":"Postgres"}]},"https://github.com/vapor/redis":{"type":"link","title":"Redis","identifier":"https:\/\/github.com\/vapor\/redis","url":"https:\/\/github.com\/vapor\/redis","titleInlineContent":[{"type":"text","text":"Redis"}]},"https://avatars.githubusercontent.com/u/5277837?v=4":{"variants":[{"url":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","traits":["1x","light"]}],"type":"image","identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","alt":"Profile image of Federico Zanetello"},"https://fline.dev":{"titleInlineContent":[{"type":"text","text":"Blog"}],"title":"Blog","type":"link","identifier":"https:\/\/fline.dev","url":"https:\/\/fline.dev"},"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","title":"WWDC Notes","kind":"symbol","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"role":"collection"},"https://github.com/vapor/fluent-sqlite-driver":{"titleInlineContent":[{"type":"text","text":"SQLite"}],"title":"SQLite","type":"link","identifier":"https:\/\/github.com\/vapor\/fluent-sqlite-driver","url":"https:\/\/github.com\/vapor\/fluent-sqlite-driver"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10132-Meet-asyncawait-in-Swift":{"abstract":[{"type":"text","text":"Swift now supports asynchronous functions — a pattern commonly known as async\/await. Discover how the new syntax can make your code easier to read and understand. Learn what happens when a function suspends, and find out how to adapt existing completion handlers to asynchronous functions."}],"type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc21-10132-meet-asyncawait-in-swift","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10132-Meet-asyncawait-in-Swift","title":"Meet async\/await in Swift"},"zntfdr.jpeg":{"variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}],"type":"image","identifier":"zntfdr.jpeg","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"type":"topic","title":"Federico Zanetello (332 notes)","kind":"article","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}],"url":"\/documentation\/wwdcnotes\/zntfdr","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"role":"sampleCode"},"https://github.com/zntfdr":{"titleInlineContent":[{"type":"text","text":"GitHub"}],"title":"GitHub","type":"link","identifier":"https:\/\/github.com\/zntfdr","url":"https:\/\/github.com\/zntfdr"},"https://zntfdr.dev":{"titleInlineContent":[{"type":"text","text":"Blog"}],"title":"Blog","type":"link","identifier":"https:\/\/zntfdr.dev","url":"https:\/\/zntfdr.dev"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10171-Meet-Swift-OpenAPI-Generator":{"kind":"article","title":"Meet Swift OpenAPI Generator","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10171-Meet-Swift-OpenAPI-Generator","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc23-10171-meet-swift-openapi-generator","role":"sampleCode","abstract":[{"text":"Discover how Swift OpenAPI Generator can help you work with HTTP server APIs whether you’re extending an iOS app or writing a server in Swift. We’ll show you how this package plugin can streamline your workflow and simplify your codebase by generating code from an OpenAPI document.","type":"text"}]},"https://avatars.githubusercontent.com/u/6942160?v=4":{"variants":[{"url":"https:\/\/avatars.githubusercontent.com\/u\/6942160?v=4","traits":["1x","light"]}],"type":"image","identifier":"https:\/\/avatars.githubusercontent.com\/u\/6942160?v=4","alt":"Profile image of Cihat Gündüz"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10644-Use-Swift-on-AWS-Lambda-with-Xcode":{"title":"Use Swift on AWS Lambda with Xcode","type":"topic","abstract":[{"text":"Serverless functions are increasingly becoming popular for running event-driven or otherwise ad-hoc compute tasks in the cloud, allowing developers to more easily scale and control compute costs. Discover how to use the new Swift AWS Lambda Runtime package to build serverless functions in Swift, debug locally using Xcode, and deploy these functions to the AWS Lambda platform. We’ll show you how Swift shines on AWS Lambda thanks to its low memory footprint, deterministic performance, and quick start time.","type":"text"}],"role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10644-Use-Swift-on-AWS-Lambda-with-Xcode","url":"\/documentation\/wwdcnotes\/wwdc20-10644-use-swift-on-aws-lambda-with-xcode","kind":"article"}}}