{"abstract":[{"type":"text","text":"App Clips give people the power to discover and download a small part of your app at a moment’s notice to complete tasks and transactions. Explore tips and best practices to help you create compact App Clips that emphasize modern features and elegant design. Learn how you can build reliable and secure App Clips to ensure that people can always access your experience when scanning a physical App Clip Code or viewing it through your website. And we’ll take you through specific strategies for testing an App Clip before releasing it to the world."}],"schemaVersion":{"major":0,"minor":3,"patch":0},"metadata":{"title":"Build light and fast App Clips","roleHeading":"WWDC21","role":"sampleCode","modules":[{"name":"WWDC Notes"}]},"sections":[],"sampleCodeDownload":{"kind":"sampleDownload","action":{"identifier":"https:\/\/developer.apple.com\/wwdc21\/10013","isActive":true,"overridingTitle":"Watch Video (29 min)","type":"reference"}},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10013-Build-light-and-fast-App-Clips"},"kind":"article","primaryContentSections":[{"kind":"content","content":[{"text":"App Clip size","anchor":"App-Clip-size","level":2,"type":"heading"},{"text":"How to generate a size report","anchor":"How-to-generate-a-size-report","level":3,"type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"Select the main app scheme","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Product > Archive"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Select newly created archive and click ","type":"text"},{"code":"Distribute App","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Choose "},{"code":"Development","type":"codeVoice"},{"type":"text","text":" as method of distribution"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Select app clip"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Select "},{"type":"codeVoice","code":"All compatible device variants"},{"type":"text","text":" in the "},{"type":"codeVoice","code":"App Thinning"},{"type":"text","text":" menu, make sure that "},{"type":"codeVoice","code":"Rebuild from bitcode"},{"type":"text","text":" is checked"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"when the archive is done preparing, click ","type":"text"},{"type":"codeVoice","code":"Export"}]}]},{"content":[{"inlineContent":[{"text":"Once exported, open the exported package and open the ","type":"text"},{"type":"codeVoice","code":"App Thinning Size Report.txt"}],"type":"paragraph"}]}],"type":"orderedList"},{"inlineContent":[{"text":"This report has a different section for each device variant, with the uncompressed size for each variant (should be less 10MB)","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"You can unpack each ","type":"text"},{"code":".ipa","type":"codeVoice"},{"text":" and inspect  what’s inside to understand why the size might exceed the limit.","type":"text"}],"type":"paragraph"},{"text":"Basic optimizations","anchor":"Basic-optimizations","level":3,"type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"make sure Xcode will build using the smallest, fastest optimization setting when archiving","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"use asset catalog, move assets not used in the App Clip in another catalog"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"remove unused code from AppClip target"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"remove unused strings from your localization, if needed, make an ad-hoc localization ","type":"text"},{"type":"codeVoice","code":".strings"},{"type":"text","text":" file just for AppClip"}]}]}],"type":"unorderedList"},{"text":"Advanced optimizations","anchor":"Advanced-optimizations","level":3,"type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"make sure you link only dependencies that are needed by App Clip, use system framework instead of 3rd parties"}]}]},{"content":[{"inlineContent":[{"text":"optimize media:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"use lossy compression images, PNG8 for non-photographic material","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"use HEVC for videos","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"compress audio using AAC or MP3 codecs, and experiment with a reduced bit rate"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"use SVG or SF Symbols for glyphs","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"text":"image variations: instead of including several variations of an image in your asset catalog, include one base image and build the variations needed at runtime","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"lazy loading: fetch images from the web instead of pre-packaging them","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"text":"App Clip invocation","anchor":"App-Clip-invocation","level":2,"type":"heading"},{"inlineContent":[{"text":"Two types of registration in Apple Store Connect","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"default - for website and iMessage"}]}]},{"content":[{"inlineContent":[{"text":"advanced - QR\/NFC","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"Registration takes time to propagate to devices, so changes made in App Store Connect won’t be instantly available."}],"type":"paragraph"},{"inlineContent":[{"text":"Prior to displaying UI that surfaces your App Clip, the OS checks to make sure that the invocation domain is verifiably associated with your App Clip:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"the URL viewed in Safari or encoded in a QR code must have a secure association via entitlements and an AASA file with your app and App Clip.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"if this is not configured properly, your clip will not be surfaced."}]}]}]},{"inlineContent":[{"type":"text","text":"Make sure the website metdata is similar to:"}],"type":"paragraph"},{"code":["<meta name=\"apple-itunes-app\" content=\"app-id=myAppStoreID, app-clip-bundle-id=appClipBundleID, app-clip-display=card\">"],"syntax":"html","type":"codeListing"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"note that https:\/\/example.com is different than https:\/\/www.example.com"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"for QR urls, you need to provide a AASA file for the exact domain of the QR code"}],"type":"paragraph"}]}]},{"text":"Testing","anchor":"Testing","level":2,"type":"heading"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When building and running in Xcode, set the "},{"code":"_XCAppClipURL","type":"codeVoice"},{"type":"text","text":" environment variable to an invocation URL of your choice. When you run your clip, the URL will be passed through to your clip just as it would be on a customer’s device."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"To see your in-development clip surfaced by the OS similar to production devices:"},{"type":"text","text":"\n"},{"code":"Settings.app","type":"codeVoice"},{"type":"text","text":" > "},{"code":"Developer settings","type":"codeVoice"},{"type":"text","text":" > "},{"code":"Local experiences","type":"codeVoice"},{"type":"text","text":" > create a new one"}],"type":"paragraph"}]}]},{"text":"Written By","anchor":"Written-By","level":2,"type":"heading"},{"numberOfColumns":5,"columns":[{"content":[{"inlineContent":[{"type":"image","identifier":"zntfdr"}],"type":"paragraph"}],"size":1},{"content":[{"level":3,"anchor":"Federico-Zanetello","text":"Federico Zanetello","type":"heading"},{"inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","isActive":true,"overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/zntfdr","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/zntfdr.dev","isActive":true,"type":"reference"}],"type":"paragraph"}],"size":4}],"type":"row"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"type":"reference","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","isActive":true}],"type":"paragraph"},{"text":"Related Sessions","anchor":"Related-Sessions","level":2,"type":"heading"},{"style":"list","type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10097-Whats-new-in-App-Clips","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10012-Whats-new-in-App-Clips","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10073-Explore-ARKit-5","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10098-Whats-new-in-Universal-Links","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10146-Configure-and-link-your-App-Clips","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10651-Whats-new-in-App-Store-Connect","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-419-Optimizing-Storage-in-Your-App"]},{"type":"small","inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc21-10013-build-light-and-fast-app-clips"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10097-Whats-new-in-App-Clips":{"type":"topic","title":"What’s new in App Clips","url":"\/documentation\/wwdcnotes\/wwdc22-10097-whats-new-in-app-clips","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10097-Whats-new-in-App-Clips","kind":"article","role":"sampleCode","abstract":[{"type":"text","text":"Explore the latest updates to App Clips! Discover how we’ve made your App Clip even easier to build with improvements to the size limit as well as CloudKit and keychain usage. We’ll also show you how to use our validation tool to verify your App Clip and automate workflows for your advanced App Clip experiences using App Store Connect."}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10651-Whats-new-in-App-Store-Connect":{"type":"topic","title":"What’s new in App Store Connect","url":"\/documentation\/wwdcnotes\/wwdc20-10651-whats-new-in-app-store-connect","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10651-Whats-new-in-App-Store-Connect","kind":"article","role":"sampleCode","abstract":[{"type":"text","text":"Discover the latest improvements to App Store Connect, your suite of tools to upload, submit, and manage apps on the App Store. Learn about enhancements to the App Store Connect API, in-app purchase and subscriptions, Game Center, and more."}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10073-Explore-ARKit-5":{"type":"topic","title":"Explore ARKit 5","url":"\/documentation\/wwdcnotes\/wwdc21-10073-explore-arkit-5","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10073-Explore-ARKit-5","kind":"article","role":"sampleCode","abstract":[{"type":"text","text":"Build the next generation of augmented reality apps with ARKit 5. Explore how you can use Location Anchors in additional regions and more easily onboard people into your location-based AR experience. Learn more about Face Tracking and Motion Capture. And discover best practices for placing your AR content in the real world. We’ll also show you how you can integrate App Clip Codes into your AR app for easy discovery and precise positioning of your virtual content."}]},"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"type":"link","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing"},"zntfdr.jpeg":{"alt":null,"type":"image","identifier":"zntfdr.jpeg","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}]},"https://github.com/zntfdr":{"url":"https:\/\/github.com\/zntfdr","title":"GitHub","titleInlineContent":[{"type":"text","text":"GitHub"}],"type":"link","identifier":"https:\/\/github.com\/zntfdr"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-419-Optimizing-Storage-in-Your-App":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-419-Optimizing-Storage-in-Your-App","title":"Optimizing Storage in Your App","url":"\/documentation\/wwdcnotes\/wwdc19-419-optimizing-storage-in-your-app","role":"sampleCode","abstract":[{"type":"text","text":"How you store data in your app affects not only disk footprint, but also the performance of your app and the battery life of the device. Learn techniques for optimizing data serialization, working with images, and syncing to disk. Find out how to take advantage of features in SQLite to improve performance and safety."}],"kind":"article"},"doc://WWDCNotes/documentation/WWDCNotes":{"title":"WWDC Notes","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"role":"collection","type":"topic","kind":"symbol","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","url":"\/documentation\/wwdcnotes"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10098-Whats-new-in-Universal-Links":{"kind":"article","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10098-Whats-new-in-Universal-Links","type":"topic","title":"What’s new in Universal Links","url":"\/documentation\/wwdcnotes\/wwdc20-10098-whats-new-in-universal-links","abstract":[{"type":"text","text":"Universal Links help people access your content, whether or not they have your app installed. Get the details on the latest updates for the Universal Links API, including support for Apple Watch and SwiftUI. Learn how you can reduce the size and complexity of your app-site-association file with enhanced pattern matching features like wildcards, substitution variables, and Unicode support. And discover how cached associated domains data will improve the initial launch experience for people using your app."}]},"WWDCNotes.png":{"alt":null,"type":"image","identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"zntfdr":{"alt":"Profile image of Federico Zanetello","type":"image","identifier":"zntfdr","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"url":"\/documentation\/wwdcnotes\/zntfdr","type":"topic","kind":"article","title":"Federico Zanetello (332 notes)","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}]},"https://developer.apple.com/wwdc21/10013":{"url":"https:\/\/developer.apple.com\/wwdc21\/10013","checksum":null,"type":"download","identifier":"https:\/\/developer.apple.com\/wwdc21\/10013"},"WWDC21.jpeg":{"alt":null,"type":"image","identifier":"WWDC21.jpeg","variants":[{"url":"\/images\/WWDC21.jpeg","traits":["1x","light"]}]},"WWDC21-Icon.png":{"alt":null,"type":"image","identifier":"WWDC21-Icon.png","variants":[{"url":"\/images\/WWDC21-Icon.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21":{"url":"\/documentation\/wwdcnotes\/wwdc21","type":"topic","kind":"article","title":"WWDC21","abstract":[{"text":"Xcode 13, Swift 5.5, iOS 15, macOS 12 (Monterey), tvOS 15, watchOS 8.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"MusicKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"DocC"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit 2"},{"type":"text","text":", and more."}],"role":"collectionGroup","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21","images":[{"identifier":"WWDC21-Icon.png","type":"icon"},{"identifier":"WWDC21.jpeg","type":"card"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10146-Configure-and-link-your-App-Clips":{"type":"topic","title":"Configure and link your App Clips","url":"\/documentation\/wwdcnotes\/wwdc20-10146-configure-and-link-your-app-clips","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10146-Configure-and-link-your-App-Clips","kind":"article","role":"sampleCode","abstract":[{"type":"text","text":"App Clips are small parts of an app that offer a streamlined, direct experience and help people get what they need at the right time. Learn how you can invoke an App Clip through real-world experiences like App Clip Codes, NFC, and QR codes, or have them appear digitally through apps like Maps or Safari. We’ll show you how to handle links in your App Clip and demonstrate how to set up your associated domains. And discover how you can configure App Clip experiences in App Store Connect, add App Clip banners to your website, and thoroughly test your App Clips through TestFlight."}]},"https://zntfdr.dev":{"url":"https:\/\/zntfdr.dev","title":"Blog","titleInlineContent":[{"type":"text","text":"Blog"}],"type":"link","identifier":"https:\/\/zntfdr.dev"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10012-Whats-new-in-App-Clips":{"url":"\/documentation\/wwdcnotes\/wwdc21-10012-whats-new-in-app-clips","title":"What’s new in App Clips","kind":"article","role":"sampleCode","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10012-Whats-new-in-App-Clips","abstract":[{"text":"Discover how App Clips can elevate quick and focused experiences for specific tasks, the moment your customer needs them. We’ll take you through some of the latest improvements to App Clips, including launching an experience directly from an app, testing your App Clip locally, and creating App Clip Codes to make it easy to access your experience in the real world. We’ll also share some great examples of App Clips from our developer community that provide innovative ways to interact with people and beautiful designs.","type":"text"}]}}}