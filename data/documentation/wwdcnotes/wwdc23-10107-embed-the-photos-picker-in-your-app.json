{"sampleCodeDownload":{"action":{"overridingTitle":"Watch Video (14 min)","isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc23\/10107"},"kind":"sampleDownload"},"metadata":{"modules":[{"name":"WWDC Notes"}],"title":"Embed the Photos Picker in your app","role":"sampleCode","roleHeading":"WWDC23"},"schemaVersion":{"minor":3,"major":0,"patch":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10107-Embed-the-Photos-Picker-in-your-app"},"primaryContentSections":[{"content":[{"type":"heading","level":2,"anchor":"overview","text":"Overview"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"The redesigned picker UI in iOS 14 has many great features like search and a zoomable grid.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Request any photo library access to use it."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Replace custom picker with the system one whenever possible.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Easy and consice API to present the picker and receive user selected images."}],"type":"paragraph"}]}]},{"type":"codeListing","syntax":"swift","code":["","import SwiftUI","import PhotosUI","","struct ContentView: View {","","\t@Binding var selection: [PhotosPickerItem]","\tvar body: some View {","\t\tPhotosPicker(","\t\t\tselection: $selection,","\t\t\tmatching: .images","\t\t\t) {","\t\t\t\tText(“Select Photos”)","    }","  }","}",""]},{"type":"heading","level":2,"anchor":"Embedded-picker","text":"Embedded picker"},{"type":"heading","level":3,"anchor":"Privacy-Photos-picker-is-out-of-process","text":"Privacy: Photos picker is out of process"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"It’s really running in a separate process, rendered on top of your app."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Your app can’t access the picker directly and not even take screenshots of the picker content."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Only what the user actually selected is passed back to your app."}],"type":"paragraph"}]}]},{"type":"heading","level":3,"anchor":"Disabling-capabilities","text":"Disabling capabilities"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"A new ","type":"text"},{"code":".photosPickerDisabledCapabilities","type":"codeVoice"},{"text":" modifier allows you to disable certain picker capabilities, to implement your own version of it.","type":"text"}],"type":"paragraph"}]}]},{"type":"heading","level":3,"anchor":"Hiding-accessories","text":"Hiding accessories"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A new "},{"code":".photosPickerAccessoryVisibility","type":"codeVoice"},{"type":"text","text":" modifier allows you to hide accessory UI around the picker content, like the navigation bar and the toolbar."}]}]}]},{"type":"heading","level":3,"anchor":"Setting-frame","text":"Setting frame"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"specify the size and position of the picker using standard SwiftUI modifiers like "},{"type":"codeVoice","code":".frame"},{"type":"text","text":" and "},{"type":"codeVoice","code":".padding"}]}]}]},{"type":"heading","level":3,"anchor":"Changing-selection","text":"Changing selection"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"You can now set selection behavior to "},{"type":"codeVoice","code":".continuous"},{"type":"text","text":" to receive live selection updates."}],"type":"paragraph"}]}]},{"type":"heading","level":3,"anchor":"Embedding-picker","text":"Embedding picker"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Use the new ","type":"text"},{"type":"codeVoice","code":".photosPickerStyle(.inline)"},{"text":" modifier to embed the picker in your app, instead of having it presented as a separate sheet.","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"though the picker is embedded, it is still rendered in a separate process.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"As embedded picker is displayed, an onboarding UI will automatically appear explaining that your app can only access selected photos.","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"The Photos privacy badge indicates that the picker is private and out of process.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"If your app already presents the full size picker, a dismissible banner will appear when users upgrade to iOS 17.","type":"text"}]}]}]},{"type":"heading","level":3,"anchor":"Explained-Settings","text":"Explained Settings"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Help users understand what your app can access."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The Privacy Settings UI is also updated with more detailed explanation."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Changes to the library access permission prompt.","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"For more check ","type":"text"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc23\/10053","type":"reference"}],"type":"paragraph"}]}]},{"type":"heading","level":3,"anchor":"Embedded-picker","text":"Embedded picker"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"If you want to embed the out-of-process picker, use the ","type":"text"},{"type":"codeVoice","code":".photosPickerStyle"},{"text":" modifier.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To place your own UI around the picker, "},{"code":".photosPickerAccessoryVisibility","type":"codeVoice"},{"type":"text","text":" is the one to use."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"It also has an optional argument allowing you to control accessories around specified edges."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"The default value is all edges."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"To implement the replacement for some picker features, use the "},{"type":"codeVoice","code":".photosPicker DisabledCapabilities"},{"type":"text","text":" modifier."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"To adjust or respond to selection updates in real time, make sure ","type":"text"},{"type":"codeVoice","code":"selectionBehavior"},{"text":" is set to ","type":"text"},{"type":"codeVoice","code":".continuous"}],"type":"paragraph"}]}]},{"type":"heading","level":3,"anchor":"Picker-capabilities","text":"Picker capabilities"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"The search bar will be hidden if the search capability is disabled."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"If collection navigation is disabled, the albums tab will be hidden.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"On iPadOS and macOS, the sidebar will be hidden as well."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"If the staging area is disabled, the toolbar button will be replaced with the status label."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"If you disabled selection actions without continuous selection, only the ","type":"text"},{"code":"Cancel","type":"codeVoice"},{"text":" button will be hidden and the ","type":"text"},{"code":"Add","type":"codeVoice"},{"text":" button will still be visible.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Else, your app won’t be able to receive any user selection."}]}]},{"content":[{"inlineContent":[{"text":"Both buttons will be hidden if you also set the selection behavior to ","type":"text"},{"code":".continuous","type":"codeVoice"}],"type":"paragraph"}]}]},{"type":"heading","level":3,"anchor":"Picker-styles","text":"Picker styles"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Supports the "},{"code":".presentation","type":"codeVoice"},{"type":"text","text":" style ,the "},{"code":".inline","type":"codeVoice"},{"type":"text","text":" style, and the "},{"code":".compact","type":"codeVoice"},{"type":"text","text":" style."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"The single row picker allows you to embed it in more places where the available vertical space is seriously constrained.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"API is available on iOS, iPadOS, and macOS for SwiftUI, UIKit and AppKit apps.","type":"text"}],"type":"paragraph"}]}]},{"inlineContent":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Embedded configuration","type":"text"}]}],"type":"emphasis"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["","\/\/ Create a normal picker","var configuration = PHPickerConfiguration(photoLibrary: .shared()) ","","","\/\/ Specify selection behaviors","configuration.selectionLimit = 0","configuration.selection = .continuous  \/\/ or .continuousAndOrdered","","","\/\/ Specify the mode of the picker","continuous.mode = compact \/\/ or .default","","","\/\/ Set edges without content margins","continuous.edgesWithoutContentMargins = .all","","","\/\/ Disable certain picker capabilities ","continuous.disabledCapabilities = .selectionActions",""]},{"inlineContent":[{"type":"emphasis","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Embedding picker"}]}]}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["","\/\/ create a picker using a configuration","let picker = PHPickerViewController(configuration: configuration)","","\/\/ Add the picker as a child view controller","containerViewController.addChild(picker)","","\/\/ Set the frame of the picker, or use Auto Layout constraints","picker.view.frame = _","","\/\/ Add the picker’s view as a subview","containerViewController.view.addSubview(picker.view)","","\/\/ Notify the picker that it has been added","picker.didMove(toParent: containerViewController)",""]},{"inlineContent":[{"inlineContent":[{"inlineContent":[{"text":"Updating picker","type":"text"}],"type":"strong"}],"type":"emphasis"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["","\/\/Update picker configurations","var update = PHPickerConfiguration.Update()","update.edgesWithoutContentMargins = []","picker.update(using: update)","","\/\/ Deselect or reorder assets in the picker","picker.deselectAssets(withIdentifiers: [identifiers])","picker.moveAsset(withIdentifiers: identifiers, afterAssetWithIdentifier: afterIdentifier)",""]},{"type":"heading","level":2,"anchor":"Options-menu","text":"Options menu"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The new Options menu gives users more control over what they can share with your app."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"By default, all image metadata are included, but users can now choose to remove sensitive metadata, like location, from selected photos.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"With "},{"type":"codeVoice","code":"PhotosPicker"},{"type":"text","text":" and "},{"type":"codeVoice","code":"Transferable"},{"type":"text","text":" API, no need to do any adoption work to support the new Options menu."}]}]},{"content":[{"inlineContent":[{"text":"No adoption work is needed if you are using the ","type":"text"},{"code":"PHPickerViewController","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"NSItemProvider API","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Options menu will not be supported for apps that use the legacy "},{"type":"codeVoice","code":"UIImagePickerController"},{"type":"text","text":" API or have full library access."}]}]}]},{"type":"heading","level":2,"anchor":"HDR-and-Cinematic","text":"HDR and Cinematic"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"The picker may automatically transcode assets to compatible formats, like JPEG, by default. However, the transcoded asset may not contain all information included in the original asset. So if you want to receive HDR content, it’s best to avoid automatic transcoding.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Avoid transcoding:"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":".current"},{"type":"text","text":" encoding policy"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Use ","type":"text"},{"code":".image","type":"codeVoice"},{"text":" or ","type":"text"},{"code":".movie","type":"codeVoice"},{"text":" content type","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Cinematic mode videos:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Picker gives the rendered version."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Request library access and use "},{"type":"codeVoice","code":"PhotoKit"},{"type":"text","text":" to get decision points."}]}]}]}]}]},{"type":"heading","level":2,"anchor":"Written-By","text":"Written By"},{"numberOfColumns":5,"type":"row","columns":[{"content":[{"inlineContent":[{"identifier":"https:\/\/avatars.githubusercontent.com\/u\/20319411?v=4","type":"image"}],"type":"paragraph"}],"size":1},{"content":[{"type":"heading","level":3,"anchor":"Ramit-Sharma","text":"Ramit Sharma"},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/RamitSharma991","isActive":true,"type":"reference","overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}]},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/RamitSharma991","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/x.com\/iosDev_ramit","isActive":true,"type":"reference"}]}],"size":4}]},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","isActive":true}],"type":"paragraph"},{"type":"heading","level":2,"anchor":"Related-Sessions","text":"Related Sessions"},{"style":"list","type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10053-Whats-new-in-privacy","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10023-Whats-new-in-the-Photos-picker","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10132-Discover-PhotoKit-change-history","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10652-Meet-the-new-Photos-picker"]},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}],"kind":"content"}],"kind":"article","sections":[],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23"]]},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc23-10107-embed-the-photos-picker-in-your-app"],"traits":[{"interfaceLanguage":"swift"}]}],"abstract":[{"text":"Discover how you can simply, safely, and securely access the Photos Library in your app. Learn how to get started with the embedded picker and explore the options menu and HDR still image support. We’ll also show you how to take advantage of UI customization options to help the picker blend into your existing interface.","type":"text"}],"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10132-Discover-PhotoKit-change-history":{"role":"sampleCode","title":"Discover PhotoKit change history","kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10132-Discover-PhotoKit-change-history","abstract":[{"type":"text","text":"PhotoKit can help you build rich, photo-centric features. Learn how you can easily track changes to image assets with the latest APIs in PhotoKit. We’ll introduce you to the PHPhotoLibrary change history API and demonstrate how you can persist change tokens across launches to help your app recognize additions, deletions, and updates to someone’s photo library."}],"url":"\/documentation\/wwdcnotes\/wwdc22-10132-discover-photokit-change-history"},"https://developer.apple.com/wwdc23/10107":{"url":"https:\/\/developer.apple.com\/wwdc23\/10107","type":"download","identifier":"https:\/\/developer.apple.com\/wwdc23\/10107","checksum":null},"doc://WWDCNotes/documentation/WWDCNotes/RamitSharma991":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/RamitSharma991","role":"sampleCode","url":"\/documentation\/wwdcnotes\/ramitsharma991","type":"topic","kind":"article","title":"Ramit Sharma (14 notes)","abstract":[{"type":"text","text":"Indie iOS Dev. Swift, SwiftUI, Obj-C, UX and related."}]},"https://github.com/RamitSharma991":{"url":"https:\/\/github.com\/RamitSharma991","type":"link","identifier":"https:\/\/github.com\/RamitSharma991","titleInlineContent":[{"text":"GitHub","type":"text"}],"title":"GitHub"},"https://developer.apple.com/wwdc23/10053":{"url":"https:\/\/developer.apple.com\/wwdc23\/10053","type":"link","identifier":"https:\/\/developer.apple.com\/wwdc23\/10053","titleInlineContent":[{"text":"What’s new in privacy","type":"text"}],"title":"What’s new in privacy"},"WWDCNotes.png":{"alt":null,"type":"image","identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10652-Meet-the-new-Photos-picker":{"role":"sampleCode","title":"Meet the new Photos picker","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10652-Meet-the-new-Photos-picker","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc20-10652-meet-the-new-photos-picker","abstract":[{"type":"text","text":"Let people select photos and videos to use in your app without requiring full Photo Library access. Discover how the PHPicker API for iOS and Mac Catalyst ensures privacy while providing your app the features you need."}]},"https://avatars.githubusercontent.com/u/20319411?v=4":{"alt":"Profile image of Ramit Sharma","type":"image","identifier":"https:\/\/avatars.githubusercontent.com\/u\/20319411?v=4","variants":[{"url":"https:\/\/avatars.githubusercontent.com\/u\/20319411?v=4","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes":{"kind":"symbol","title":"WWDC Notes","url":"\/documentation\/wwdcnotes","type":"topic","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"images":[{"identifier":"WWDCNotes.png","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","role":"collection"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10053-Whats-new-in-privacy":{"role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10053-Whats-new-in-privacy","abstract":[{"type":"text","text":"At Apple, we believe that privacy is a fundamental human right. Learn about new technologies on Apple platforms that make it easier for you to implement essential privacy patterns that build customer trust in your app. Discover privacy improvements for Apple’s platforms, as well as a study of how privacy shaped the software architecture and design for the input model on visionOS."}],"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc23-10053-whats-new-in-privacy","title":"What’s new in privacy","type":"topic"},"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","type":"link","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"title":"Contributions are welcome!"},"https://x.com/iosDev_ramit":{"url":"https:\/\/x.com\/iosDev_ramit","type":"link","identifier":"https:\/\/x.com\/iosDev_ramit","titleInlineContent":[{"text":"X\/Twitter","type":"text"}],"title":"X\/Twitter"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23":{"abstract":[{"type":"text","text":"Xcode 15, Swift 5.9, iOS 17, macOS 14 (Sonoma), tvOS 17, visionOS 1, watchOS 10."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"SwiftData"},{"type":"text","text":", "},{"type":"codeVoice","code":"Observation"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit"},{"type":"text","text":" views, and more."}],"url":"\/documentation\/wwdcnotes\/wwdc23","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23","role":"collectionGroup","title":"WWDC23","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"kind":"article","type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10023-Whats-new-in-the-Photos-picker":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10023-Whats-new-in-the-Photos-picker","title":"What’s new in the Photos picker","abstract":[{"text":"PHPicker provides simple and secure integration between your app and the system Photos library. Learn how SwiftUI and Transferable can help you offer integration across iOS, iPadOS, macOS, and watchOS.","type":"text"}],"url":"\/documentation\/wwdcnotes\/wwdc22-10023-whats-new-in-the-photos-picker","type":"topic","kind":"article","role":"sampleCode"},"https://":{"url":"https:\/\/","type":"link","identifier":"https:\/\/","titleInlineContent":[{"text":"Blog","type":"text"}],"title":"Blog"}}}