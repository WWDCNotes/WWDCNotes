{"schemaVersion":{"minor":3,"major":0,"patch":0},"kind":"article","metadata":{"modules":[{"name":"WWDC Notes"}],"title":"Symbolication: Beyond the basics","roleHeading":"WWDC21","role":"sampleCode"},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10211-Symbolication-Beyond-the-basics","interfaceLanguage":"swift"},"primaryContentSections":[{"kind":"content","content":[{"text":"What is symbolication?","type":"heading","anchor":"What-is-symbolication","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Mechanism to convert\/translate how our devices see our apps at runtime — which is in terms of memory addresses and instructions — back to how we as developers see our apps — which is in terms of functions, names, and files."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A crash without symbols just tell us that a crash occurred, to make sense of it we need to reprocess the crash log with the build "},{"code":"dSYM","type":"codeVoice"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Thanks to "},{"type":"codeVoice","code":"dSYM"},{"type":"text","text":", Xcode applies the concepts of symbolication, so that I can diagnose the issue with a much nicer crash log, where I can not only see all of my functions actually being called, but I can also determine the file and line number to refer back to in my code."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Alternatively, If I already have the dSYM, I can use the "},{"type":"codeVoice","code":"atos"},{"type":"text","text":" command to get the same information:"}]},{"type":"codeListing","syntax":"cli","code":["atos -o MyApp.dSYM\/Contents\/Resources\/DWARF\/MyApp -arch arm64 -l 0x10045c000 -i 0x16045fb70"]},{"text":"Two-steps process for symbolication","type":"heading","anchor":"Two-steps-process-for-symbolication","level":2},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"text":"Going back to the file - here we convert\/translate runtime memory addresses into a more stable, usable form","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Consult debug information"}]}]}]},{"text":"Going back to the file","type":"heading","anchor":"Going-back-to-the-file","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Goal: translate a runtime memory address to a corresponding address in your binary on disk (a.k.a. file addresses)"}]},{"text":"On disk address space","type":"heading","anchor":"On-disk-address-space","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Your app has an address space on disk."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"assigned by the linker"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"the linker groups the file into segments","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"each segment has certain properties, such as a name, a size, and their assigned addresses"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC21-10211-diskSpace"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"code":"__TEXT","type":"codeVoice"},{"text":" segment of your binary contains all of the functions and methods you’ve written","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"__DATA","type":"codeVoice"},{"text":" segment contains program-wide state such as global variables","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"each of these segments gets assigned a different address such that they don’t overlap"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the linker records this information at the very beginning of your executables as part of the Mach-O header"}]}]}]},{"text":"Mach-O","type":"heading","anchor":"Mach-O","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Mach-O is the format used for all executable binaries and libraries, and the system knows that it needs to read this header to run your apps."}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"the Mach-O header contains a number of load commands that hold the segment properties"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"the system uses these load commands to load the segments into memory","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"if your apps are Universal 2, then the app will have one header and a set of segments for each architecture"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"We can inspect these load commands by using ","type":"text"},{"code":"otool -l","type":"codeVoice"},{"text":" in the terminal, which prints the load commands for a specified file","type":"text"}]},{"text":"ASLR slide","type":"heading","anchor":"ASLR-slide","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Before the kernel actually loads the segments, it initializes a random value known as the ASLR slide"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"this is to randomize the addresses values, it’s a safety feature","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"all runtime addresses will be shifted by this ASLR slide","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"the difference between a runtime address and the linker address is the ASLR slide"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"we can always go back to the file address space once we know the ASLR slide","type":"text"}]}]}]},{"text":"Crash example","type":"heading","anchor":"Crash-example","level":3},{"type":"paragraph","inlineContent":[{"text":"This is the crash report that we will use in this session:","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["Thread 0 Crashed:: Dispatch queue: com.apple.main-thread ","","0 MyApp                    0x000080010045fb70 0x16045c600 + 15216 ","1 libdyld.dylib            0x000008018248d420 start + 423","","Thread 0 crashed with ARM Thread State (64-bit): ","  xO: 0x0000000159e113a0 x1: 0x0000080000080103 x2: 0x0000000000000103 x3: 0x00000001ed6a1608 ","  x4: 0x0000090159e11300 x5: 0x0000000000000004 x6: 0x1b56e56ab0142e5a x7: 0x0000000000000000","  x8: 0x000009006006000a x9: 0x0000000159e11308 x10: 0x0600800000008054 x11: 0x0080000008179f41","  x12: 0x0000000159000000 x13: 0x00000000770b8226 x14: 0x00000000770b8201 x15: 0x00000000000625eb","  x16: 0x000000018e48ee2c x17: 0x00000001f0cbfe70 x18: 0x0000000000090999 x19: 0x0000000159e111b0 ","  x20: 0x000000016ef26940 x21: 9x0000000800000000 x22: 0x0000000000008888 x23: 0x000000000009d0 ","  x24: 0x0000009000008600 x25: 0x0000000000000800 x26: 0x0000600880000000 x27: 0x0000000000000000 ","  x28: 0x000600016ef2b930 fp: 04000000016ef2b970 lr: 0x0000000100ed7a50 ","  sp: 0x000000016ef2b930 pc: 0x0000080100ed7ae0: cpsr: 0x80000000","  far: 0x000001ed8b3068 esr: 0xf2000001 ","","Binary Images: ","  0x10045c000 - 0x10045ffff +MyApp <C061EE83-B61D-3352-8EE5-655491DB1D16> \/Users\/USER\/MyApp"]},{"text":"Computing the ASLR slide","type":"heading","anchor":"Computing-the-ASLR-slide","level":3},{"type":"paragraph","inlineContent":[{"text":"The ASLR slide equation requires two addresses:","type":"text"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the load address"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"the linker address","type":"text"}]}]}]},{"type":"codeListing","syntax":"swift","code":["ASLR slide + linker address = load address"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We can get the load address by looking at the mach-o load commands via "},{"type":"codeVoice","code":"otool"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To know the runtime address, the system queries your app either at the point of a crash, or as its being profiled by Instruments for its runtime address space."}]},{"name":"Note","type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You can also see the load addresses interactively with the "},{"type":"codeVoice","code":"vmmap"},{"type":"text","text":" tool, which enumerates the active memory regions in your program"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We can see the load address from the crashlog ("},{"type":"codeVoice","code":"0x10045c000"},{"type":"text","text":", in the "},{"type":"codeVoice","code":"Binary images"},{"type":"text","text":" section):"}]},{"type":"codeListing","syntax":"cli","code":["0x10045c000 - 0x10045ffff +MyApp <C061EE83-B61D-3352-8EE5-655491DB1D16>"]},{"type":"paragraph","inlineContent":[{"text":"We can see the linker address from ","type":"text"},{"code":"otool","type":"codeVoice"},{"text":" (","type":"text"},{"code":"0x0000000100000000","type":"codeVoice"},{"text":" or ","type":"text"},{"code":"0x100000000","type":"codeVoice"},{"text":"):","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["$ otool -l MyApp | grep LC_SEGMENT -A8 ","","     cmd LC_SEGMENT_64      # segment load command"," cmdsize 712"," segname __TEXT             # name and ","  vmaddr 0x0000000100000000 # address","  vmsize 0x0000000000004000 # range"," fileoff 0 ","filesize 16384 "," maxprot 0x00000005 ","initprot 0x00000005 "]},{"type":"paragraph","inlineContent":[{"text":"Subtracting these two yields (","type":"text"},{"type":"codeVoice","code":"0x10045c000 - 0x100000000"},{"text":") an ASLR slide value of ","type":"text"},{"type":"codeVoice","code":"0x45c000"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"This means that every address in my program’s runtime ","type":"text"},{"code":"__TEXT","type":"codeVoice"},{"text":" segment is ","type":"text"},{"code":"0x45c000","type":"codeVoice"},{"text":" bytes away from the linker ","type":"text"},{"code":"__TEXT","type":"codeVoice"},{"text":" segment address","type":"text"}],"type":"paragraph"}]}]},{"text":"Back to the file address space","type":"heading","anchor":"Back-to-the-file-address-space","level":3},{"type":"paragraph","inlineContent":[{"text":"Now that we have the ASLR slide value, we can see what a backtrace address from the crash log corresponds to in the file:","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["Thread 0 Crashed:: Dispatch queue: com.apple.main-thread ","0 MyApp              0x000000010045fb70 0x10045c000 + 15216"]},{"type":"codeListing","syntax":"cli","code":["ASLR slide = 0x45c000 ","Backtrace address = 0x000000010045fb70","0x10045fb70 - 0x45c000 = 0x100003b70 "]},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"0x100003b70"},{"type":"text","text":" is the address on disk"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Since this address is now part of the on-disk address space, I can inspect my app to see what resides there."}]},{"type":"paragraph","inlineContent":[{"text":"We can use ","type":"text"},{"type":"codeVoice","code":"otool"},{"text":" too see where the crash occurred:","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["otool -tV MyApp -arch arm64"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This will print the disassembly where the crask occurred:"}]},{"type":"codeListing","syntax":"cli","code":["\/\/ ASLR slide = 0x45c000","\/\/ 0x10045fb70 - 0x45c000 = 0x100003B70 ","","0000000100003b6c      ret","0000000100003670      brk #0x1 "]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"code":"brk","type":"codeVoice"},{"type":"text","text":" signals an exception or a problem in the app"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Other ways to calculate ASLR slide:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"code":"atos","type":"codeVoice"},{"type":"text","text":" will read the load commands for the file segment address indicated by the "},{"code":"-o","type":"codeVoice"},{"type":"text","text":" flag, and we tell it about the load address with the "},{"code":"-l","type":"codeVoice"},{"type":"text","text":" flag"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"vmmap"},{"type":"text","text":" can also tell us about the load addresses of a running app (run this before it crashes)"}]}]}]},{"type":"codeListing","syntax":"cli","code":["vmmap MyApp | grep __TEXT"]},{"text":"Debug information","type":"heading","anchor":"Debug-information","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"created during build","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"either embedded directly into your app binaries, or stored as a separate file, such as a ","type":"text"},{"type":"codeVoice","code":".dSYM"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"There are different categories\/types of debug info","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"each offers a different level of detail for a given file address:"}]}]}]},{"rows":[[[{"inlineContent":[],"type":"paragraph"}],[{"inlineContent":[{"text":"Function addresses","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Function names"}],"type":"paragraph"}],[{"inlineContent":[{"text":"File and line numbers","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Optimizations"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Function starts"}],"type":"paragraph"}],[{"inlineContent":[{"text":"✅","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"❌"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"❌"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"❌"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Nlist symbol table"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"✅"}],"type":"paragraph"}],[{"inlineContent":[{"text":"✅","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"❌"}],"type":"paragraph"}],[{"inlineContent":[{"text":"❌","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"DWARF"}],"type":"paragraph"}],[{"inlineContent":[{"text":"✅","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"✅"}],"type":"paragraph"}],[{"inlineContent":[{"text":"✅","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"✅","type":"text"}],"type":"paragraph"}]]],"type":"table","header":"row"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Since DWARF offers the most detail, we really want to strive to have this type of debug info whenever possible","type":"text"}]}]}]},{"text":"Function starts","type":"heading","anchor":"Function-starts","level":4},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"offers the least source code detail"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"only tells us about the first address — or the literal start — of our functions"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"this would tell us that a function begins and exists at a certain address. However, it doesn’t tell us which functions begin at those addresses, only that they exist","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC21-10211-functionStarts"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The function starts debug info does this by encoding the list of addresses in your app’s "},{"code":"__LINKEDIT","type":"codeVoice"},{"type":"text","text":" segment."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Since this is embedded directly in your app, the Mach-O header also has a load command to inform us where we can find it, which is "},{"type":"codeVoice","code":"LC_FUNCTION_STARTS"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"text":"We can obtain the function starts with the ","type":"text"},{"code":"symbols","type":"codeVoice"},{"text":" command and the ","type":"text"},{"code":"-onlyFuncStartsData","type":"codeVoice"},{"text":" flag","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["symbols -onlyFuncStartsData -arch arm64 MyApp"]},{"type":"codeListing","syntax":"swift","code":["0x0000000100003a68 (    0x3c4) TEXT _text ","  0x0000000100003a68 (   0x10c) (null) [FUNC, FunctionStarts]","  0x0000000100003674 (    0x3c) (null) [FUNC, FunctionStarts] ","  0x0000000100003bb0 (   0x114) (null) [FUNC, FunctionStarts] ","  0x0000000100003cc4 (    0x40) (null) [FUNC, FunctionStarts] ","  0x0000000100003d04 (    0x98) (null) [FUNC, FunctionStarts] ","  0x0000000100003d9c (    0x8c) (null) [FUNC, FunctionStarts] ","  0x0000000100003e28 (     0x4) (null) [FUNC, FunctionStarts] "]},{"type":"paragraph","inlineContent":[{"text":"Here we get back a list of addresses and ","type":"text"},{"code":"null","type":"codeVoice"},{"text":" placeholders","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"These placeholders would ideally have function and method names instead of null, but the function starts data doesn’t provide names.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"However, it does allow for a slight update to the crash log."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We can now view the file addresses as offsets from a function."}]},{"type":"paragraph","inlineContent":[{"text":"For example:","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["Thread 0 Crashed:: Dispatch queue: com.apple.main-thread ","0 MyApp              0x000000010045fb70 0x10045c000 + 15216"]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"first we go back to the file by subtracting the ASLR slide value:","type":"text"}]}]}]},{"type":"codeListing","syntax":"cli","code":["Thread 0 Crashed:: Dispatch queue: com.apple.main-thread ","0 MyApp              0x100003b70 0x100003a68 + 264"]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Then we find the function starts value that could contain the file address:","type":"text"}]}]}],"start":2},{"type":"codeListing","syntax":"swift","code":["0x0000000100003a68 (    0x3c4) TEXT _text ","  0x0000000100003a68 (   0x10c) (null) [FUNC, FunctionStarts] \/\/ 👈🏻","  0x0000000100003674 (    0x3c) (null) [FUNC, FunctionStarts] ","  ..."]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In this case, only the first value could contain the address because all of the other values are larger than the address."}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"text":"Finally we can claim that our file address is actually 264 bytes into this function","type":"text"}],"type":"paragraph"}]}],"start":3},{"type":"paragraph","inlineContent":[{"text":"This is primarily useful for debuggers, since they can understand the details of how this function was set up and which registers were modified.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This is all we get from Function starts."}]},{"text":"Nlist symbol table","type":"heading","anchor":"Nlist-symbol-table","level":4},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"builds on the idea of function starts","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"encode a list of information in the ","type":"text"},{"code":"__LINKEDIT","type":"codeVoice"},{"text":" segment (described by ","type":"text"},{"code":"LC_SYMTAB","type":"codeVoice"},{"text":")","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"more than just encoding addresses, they encode ","type":"text"},{"type":"codeVoice","code":"nlist_62"},{"text":" C structs","type":"text"}]}]}]},{"type":"codeListing","syntax":"c","code":["struct nlist_64 {","  union {","    uint32_t  n_strx;","  } n_un;","  uint8_t n_type; \/\/ Determines values and properties","  uint8_t n_sect;","  uint16_t n_desc;","  uint64_t n_value; ","};"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"There are two primary "},{"type":"codeVoice","code":"n_type"},{"type":"text","text":"s:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"direct symbols","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"indirect symbols","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The way we distinguish them is via "},{"type":"codeVoice","code":"n_type"},{"type":"text","text":" value:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"direct symbols:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"000001110"},{"text":" - second, third, and fourth least significant bits set","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"this bit pattern is also known as "},{"type":"codeVoice","code":"N_SECT"},{"type":"text","text":" ("},{"type":"codeVoice","code":"0xe"},{"type":"text","text":")"}],"type":"paragraph"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"indirect symbols:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"000000001","type":"codeVoice"},{"type":"text","text":" - only the least significant bit is set"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"this bit pattern is also known as ","type":"text"},{"code":"N_EXT","type":"codeVoice"},{"text":" (","type":"text"},{"code":"0x01","type":"codeVoice"},{"text":")","type":"text"}]}]}]}]}]},{"text":"Direct symbols","type":"heading","anchor":"Direct-symbols","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"functions and methods defined in your apps and frameworks"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"have a name and address in the "},{"type":"codeVoice","code":"nlist_64"},{"type":"text","text":" struct"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We can list all direct symbols via "},{"type":"codeVoice","code":"nm"},{"type":"text","text":" ("},{"type":"codeVoice","code":"nm"},{"type":"text","text":" stands for name - it’s the display symbol name list tool):"}]},{"type":"codeListing","syntax":"cli","code":["nm -arch arm64 --defined-only --numeric-sort MyApp"]},{"type":"paragraph","inlineContent":[{"text":"Output:","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["0000000100000000 T __mh_execute_header 0000000100003a68 T _main ","0000000100003674 t ___swift_instantiateConcreteTypeFromMangledName","0000000100003bb0 t _$s12MyApp13numberChoicesSaySiGyF ","0000000100003cc4 t _$sS2iSzsWl","0000000100003d04 t _$ss12_ArrayBufferV20_consumeAndCreateNew14bufferIsUnique15minimumCapacity","0000000100003d9c t _$ss22_ContiguousArrayBufferV19_uninitializedCount15minimumCapacityAByxGSi","0000000100003e28 t __swift_stdlib_malloc_size ","0000000100003ef0 s ___swift_reflection_version "]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"nm"},{"text":" walked through the defined symbols of the app program and listed them in address order","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"the names stored in the symbol tables are mangled names","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"these mangled names help the compiler and linker to uniquely identify a function, but they aren’t easy to understand unless they’re demangled"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"For a better output, we can pass ","type":"text"},{"code":"nm","type":"codeVoice"},{"text":" output to ","type":"text"},{"code":"swift-demangle","type":"codeVoice"},{"text":":","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["nm -arch arm64 —defined-only --numeric-sort MyApp | xcrun swift-demangle"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Output:"}]},{"type":"codeListing","syntax":"cli","code":["0000000100000000 T __mh_execute_header","0000000100003a68 T _main","0000000100003674 t ___swift_instantiateConcreteTypeFromMangledName","0000000100003bb0 t MyApp.numberChoices() -> [Swift.Int]","0000000100003cc4 t lazy protocol witness table accessor for type Swift.Int and conformance Swift","0000000100003d04 t t generic specialization <Swift.Int> of Swift._ArrayBuffer._consumeAndCreateNew.Bool) -> Swift._ArrayBuffer<A> "]},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"symbols"},{"type":"text","text":" tool also has an option to show Nlist data, it demangles names automatically:"}]},{"type":"codeListing","syntax":"cli","code":["symbols -arch arm64 -onlyNListData MyApp"]},{"type":"codeListing","syntax":"cli","code":["0x0000000100003a68 (0x3c4) _TEXT __text ","  0x0000000100003a68 (  0x10c) main [FUNC, EXT, NameNList, MangledNameNList, Merged, List, FunctionStarts]","  0x0000000100003b74 (   0x3c) __swift_instantiateConcreteTypeFromMangledName [FUNC, PEXT, NameNList, MangledNameNList ","  0x0000000100003bb0 (  0x114) numberChoices () [FUNC, PEXT, NameNList, MangledNameNList, Merged, NList, FunctionStarts ","  0x0000000100003cc4 (   0x40) lazy protocol witness table accessor for type Int and conformance Int [FUNC, PEXT, Name ","  0x0000000100003d04 (   0x98) specialized _ArrayBuffer._consumeAndCreateNew(bufferIsUnique:minimumCapacity:growForApp","  0x0000000100003d9c (   0x8c) specialized _ContiguousArrayBuffer.init(_uninitializedCount:minimumCapacity:)[FUNC,PE ","  0x0000000100003e28 (    0x4) _swift_stdlib_malloc_size [FUNC, NameNList, MangledNameNList, Merged, NList, FunctionSt "]},{"type":"paragraph","inlineContent":[{"text":"Going back to our crashlog:","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["Thread 0 Crashed:: Dispatch queue: com.apple.main-thread ","0 MyApp              0x100003b70 0x10003a68 + 264"]},{"type":"paragraph","inlineContent":[{"text":"Here we can observe that our offset expression (","type":"text"},{"code":"0x10003a68 + 264","type":"codeVoice"},{"text":") that we got from the function starts data also matches an entry from the direct symbols. That entry has a name:","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["0x0000000100003a68 (  0x10c) main"]},{"type":"paragraph","inlineContent":[{"text":"Putting these two together, we can now say that our crash happened at 264 bytes into ","type":"text"},{"type":"codeVoice","code":"main"},{"text":":","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["Thread 0 Crashed:: Dispatch queue: com.apple.main-thread ","0 MyApp              0x100003b70 main + 264"]},{"type":"paragraph","inlineContent":[{"text":"This still doesn’t tell us a lot, because direct symbols have some limitations such as missing some functions names.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"One reason for this is that the symbol table only has direct symbol entries for functions that are involved in linking:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"these are functions that you use across modules or functions that you export from your frameworks","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"this makes it useful for identifying API boundaries","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"it has the necessary data to power dynamic loading with functions such as ","type":"text"},{"code":"dlsym()","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"dladdr()","type":"codeVoice"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"Direct symbols gaps in information:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"local, static functions are not represented","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"can omit implementation functions","type":"text"}],"type":"paragraph"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"stripped in release configurations"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"primary app executables left practically empty"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"helps reduce the size of our app","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"frameworks left with only exported functions","type":"text"}]}]}]}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC21-10211-stripXcode"}]},{"type":"paragraph","inlineContent":[{"text":"Xcode has various build settings around stripping symbols such as:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"code":"Strip Linked Product","type":"codeVoice"},{"type":"text","text":" - if enabled, then the binary is stripped according to Strip Style"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"Strip Style"},{"text":" - three options:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"All Symbols - Most invasive; preserve essentials"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Non Global - Remove locally shared functions"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Debugging Symbols - Remove debug list entry, keep direct symbols"}]}]}],"type":"unorderedList"}]}]},{"text":"Indirect symbols","type":"heading","anchor":"Indirect-symbols","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"These are functions and methods that you’re using from other frameworks or libraries, such as "},{"type":"codeVoice","code":"print()"}]},{"type":"paragraph","inlineContent":[{"text":"You can see them via ","type":"text"},{"code":"nm","type":"codeVoice"},{"text":":","type":"text"}]},{"type":"codeListing","syntax":"cli","code":["nm -m —arch arm64 --undefined-only --numeric-sort MyApp"]},{"name":"Note","type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"m"},{"type":"text","text":" flag asks "},{"type":"codeVoice","code":"nm"},{"type":"text","text":" to print from which frameworks the symbols come from"}]}]},{"type":"codeListing","syntax":"cli","code":["(undefined) external Swift._allocateUninitializedArray<A>(Builtin.Word) -> ([A], Builtin.RawPointer) (from libswiftCore)","(undefined) external Swift.print(_: ","Any..., separator: Swift.String, terminator: Swift. String) -> () (from libswiftCore)","(undefined) external type metadata for Any (from libswiftCore) "]},{"text":"Function starts, nlist recap","type":"heading","anchor":"Function-starts-nlist-recap","level":3},{"type":"paragraph","inlineContent":[{"text":"Function starts are a list of addresses (they lack names, but do allow us to determine offsets)","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"NList symbols tables:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"add names to addresses","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"direct and indirect symbols"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"reserved for functions involved in linking"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"strip build settings influence which direct symbols are available."}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"Both are embedded in ","type":"text"},{"code":"__LINKEDIT","type":"codeVoice"},{"text":" (in debug mode)","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"What we haven’t seen yet is the richer levels of detail, such as file names and line numbers. This is provided to us by DWARF.","type":"text"}]},{"text":"DWARF","type":"heading","anchor":"DWARF","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"DWARF strives to describe everything","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"DWARD adds relationships to nlist symbols data"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"primarily found in dSYM bundles","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"When we’re analyzing DWARF, we’re primarily referring to a dSYM bundle.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In addition to other metadata such as plists, the dSYM bundle contains a binary with DWARF."}]},{"text":"DWARF binary","type":"heading","anchor":"DWARF-binary","level":4},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC21-10211-dwarfBinary"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The DWARF specification mentions three streams of data within the segment:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"debug_info","type":"codeVoice"},{"text":" contains the raw data","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"debug_abbrev"},{"type":"text","text":" assigns structure to the data"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"debug_line","type":"codeVoice"},{"text":" contains the file names and line numbers","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"DWARF also defines two vocabulary types:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the compile unit"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"a single source file that went into building the product"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"contains assigned attributes and properties (name of the file, the SDKs, the portion of the "},{"type":"codeVoice","code":"__TEXT"},{"type":"text","text":" segment its functions occupy, and much more)"}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the subprogram"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"represents a defined function","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"not limited to exported or shared functions","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"name and ","type":"text"},{"type":"codeVoice","code":"__TEXT"},{"text":" segment range","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"defined in compile units"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"DWARD represents this with a tree"}],"type":"paragraph"}]}],"type":"unorderedList"}]}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We can observe this in detail with the "},{"type":"codeVoice","code":"dwarfdump"},{"type":"text","text":" command:"}]},{"type":"codeListing","syntax":"cli","code":["dwarfdump -v -debug-info -arch arm64 MyApp.dSYM"]},{"type":"codeListing","syntax":"cli","code":["DW_TAG_compile_unit [154] *","  DW_AT_producer [DW_FORM_strp]    (.debug_str[0x000b656e] = \"Apple Swift version 5.5 (swiftlang-1300.0.16.7 clang-1300.0.18.1)\")","  DW_AT_language [DW_FORM_data2]   (DW_ LANG Swift)","  DW_AT_name [DW_FORM_strp] ( .debug_str[0x000b65b0] = '\/Users\/USER\/Projects\/MyApp\/main.swift\")","  DW_AT_stmt_list [DW_FORM_sec_offset] (0x0000a7be)","  DW_AT_comp_dir [DW_FORM_strp] debug_st[0x000b65f2] = \"\/Users\/USER\/Projects\/MyApp\")","  DW_AT_APPLE_optimized [DW_FORM_flag_present] (true)","  DW_AT_APPLE_major_runtime_vers [DW_FORM_data1] (0x05)","  DW_AT_low_pc [DW_FORM_addr] (0x0000000100003a68) ","  DW_AT_high_pc [DW_FORM_data4] (0x000003c0) "]},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"dwarfdump"},{"type":"text","text":" helpfully combines the "},{"type":"codeVoice","code":"debug_ info"},{"type":"text","text":" and "},{"type":"codeVoice","code":"debug _abbrev"},{"type":"text","text":" contents to show you the structure and content of the data in your dSYMs."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"File names and line numbers come from the "},{"type":"codeVoice","code":"debug_line"},{"type":"text","text":" stream"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"this stream defines a line table program where the individual file addresses can be mapped back to an exact line of code"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"generates a list of source code details which we can search to find the file and line"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"Given a crash log and a DWARF, we can map back to the specific line of code where the crash has happened via ","type":"text"},{"code":"atos","type":"codeVoice"},{"text":":","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["atos -o MyApp.dSYM\/Contents\/Resources\/DWARF\/MyApp -arch arm64 —l 0x10045c000 0x10045fb70"]},{"type":"paragraph","inlineContent":[{"text":"Output:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["main (in MyApp) (main.swift:36)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"DWARF also takes care of inline functions"}]},{"text":"DWARF recap","type":"heading","anchor":"DWARF-recap","level":4},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"function and file relationships"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"inlined functions impact the quality of symbolication (DWARF can take care of this)"}]}]},{"content":[{"inlineContent":[{"text":"can be found in dSYMs and static libraries (prefer dSYM, as you can easily transfer them to others and have built-in support from several tools)","type":"text"}],"type":"paragraph"}]}]},{"text":"Tools and tips","type":"heading","anchor":"Tools-and-tips","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"in Xcode build settings, make sure that the "},{"code":"Debug Information Format","type":"codeVoice"},{"type":"text","text":" is set to "},{"code":"DWARF with dSYM File","type":"codeVoice"},{"type":"text","text":" for your Release mode"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"you can download your dSYMs through App Store Connect","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you want to check that a certain dSYM is already on your device, you can use the "},{"type":"codeVoice","code":"mdfind"},{"type":"text","text":" command"}]},{"type":"codeListing","syntax":"swift","code":["mdfind \"com_apple_xcode_dsyms_uuids == C061EE83-B61D-3352-8EE5-655491DB1D16\" \/User\/USER\/Documents\/MyApp.dSYM"]},{"name":"Note","type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"text":"The alphanumeric string here is your binary’s UUID, which is a unique identifier defined in a load command","type":"text"}]}]},{"type":"paragraph","inlineContent":[{"text":"You can see the UUID for your dSYMs with ","type":"text"},{"code":"symbols -uuid","type":"codeVoice"},{"text":":","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["symbols -uuid MyApp.dSYM"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The app’s UUID is in the "},{"code":"Binary Images","type":"codeVoice"},{"type":"text","text":" list section of crash reports and you can also see it with the "},{"code":"symbols","type":"codeVoice"},{"type":"text","text":" command:"}]},{"type":"codeListing","syntax":"cli","code":["symbols -uuid MyApp"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A toolchain could generate invalid DWARF. You can check this with:"}]},{"type":"codeListing","syntax":"swift","code":["dwarfdump —verify MyApp.dSYM"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can use "},{"code":"symbols","type":"codeVoice"},{"type":"text","text":" to check the types of debug information your app has available:"}]},{"type":"codeListing","syntax":"swift","code":["symbols -arch arm64 MyApp"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Output:"}]},{"type":"codeListing","syntax":"cli","code":["0x0000000100003a68 (  Ox10c) main [FUNC, EXT, LENGTH, NameNList, MangledNameNList, Merged, NList, Dwarf, FunctionStarts] # 👈🏻","  0x0000000100003a68 (   0x74) main. swift:0","  0x0000000100003adc (    0x4) main. swift:29","  0x0000000100003ae0 (   0x44) <compiler-generated>:0","  0x0000000100003638 (   0x14) main.swift:36","  0x0000000100003624 (   0x38) main.swift:36","  0x0000000100003b70 (    0x4) <compiler-generated>:0","0x0000000100003674 (   0x3c) __swift_instantiateConcreteTypeFromMangledName [FUNC, OMIT-FP, PEXT, LENGTH, NameDwarfMIPSLinkag. # 👈🏻","  0x0000000100003674 (   0x3c) <compiler-generated>:0","0x0000000100003bb0 (  0x114) numberChoices () [FUNC, PEXT, LENGTH, NameDwarfMIPSLinkage, MangledNameNList, Merged, NList, Dwar. "]},{"name":"Note","type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"These tags in square brackets tell you the information source"}]}]},{"text":"Verify entitlements","type":"heading","anchor":"Verify-entitlements","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you’re certain that you have dSYMs available but still aren’t getting names for your functions in Instruments traces, check your entitlements and code signing:"}]},{"type":"codeListing","syntax":"cli","code":["codesign --display -v  --entitlements :- MyApp.app"]},{"type":"codeListing","syntax":"xml","code":["Format=app bundle with Mach-O universal (×86_64 arm64) ","CodeDirectory v=20500 size=909 flags=0x10000 (runtime) hashes=17+7 location=embedded ","Signature size=4810                     # 👈🏻","Signed Time=May 15, 2021 at 4:46:02 PM  # 👈🏻","Info.plist entries=23                   # 👈🏻","TeamIdentifier=59GAB85EFG               # 👈🏻","Runtime Version=12.0.0 ","Sealed Resources version=2 rules=13 files=4","Internal requirements count=1 size=200 ","<?xml version=\"1.0\" encoding=\"UTF-8\"?>","<!DOCTYPE plist PUBLIC \"-\/\/Apple\/\/DTD PLIST 1.0\/\/EN\" \"https:\/\/www.apple.com\/DTDs\/PropertyList-1.0.dtd\">","<plist version= \"1.0\">","  <dict>","    <key>com.apple.security.app-sandbox<\/key>","    <true\/> ","    <key>com.apple-security.get-task-allow<\/key> # 👈🏻","    <true\/>                                      # 👈🏻","    ..."]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You should also verify that locally built apps for development have the "},{"code":"get-task-allow","type":"codeVoice"},{"type":"text","text":" entitlement."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This entitlement grants permissions to tools such as Instruments to symbolicate your app."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you don’t have the "},{"type":"codeVoice","code":"get-task-allow"},{"type":"text","text":" entitlement enabled, you should check your "},{"type":"codeVoice","code":"Code Signing Inject Base Entitlements"},{"type":"text","text":" build setting and make sure that it’s enabled as you’re developing."}]},{"text":"DWARF size limits","type":"heading","anchor":"DWARF-size-limits","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"limited to 4GB"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"consider splitting the project into separate components\/modules so that each one has its own smaller dSYM","type":"text"}]}]}]},{"text":"Written By","type":"heading","anchor":"Written-By","level":2},{"numberOfColumns":5,"type":"row","columns":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"zntfdr","type":"image"}]}],"size":1},{"content":[{"type":"heading","level":3,"text":"Federico Zanetello","anchor":"Federico-Zanetello"},{"inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"overridingTitle":"Contributed Notes","type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","isActive":true},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","identifier":"https:\/\/github.com\/zntfdr","isActive":true},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","identifier":"https:\/\/zntfdr.dev","isActive":true}],"type":"paragraph"}],"size":4}]},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"text":"Related Sessions","type":"heading","anchor":"Related-Sessions","level":2},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110370-Debug-Swift-debugging-with-LLDB","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC17-413-App-Startup-Time-Past-Present-and-Future"]},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}]},{"type":"small","inlineContent":[{"text":"All content copyright © 2012 – 2025 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}]}]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"]]},"abstract":[{"text":"Discover how you can achieve maximum performance and insightful debugging with your app. Symbolication is at the center of tools such as Instruments and LLDB to help bridge the layers between your application’s runtime and your source code. Learn how this process works and the steps you can take to gain the most insight into your app.","type":"text"}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"overridingTitle":"Watch Video (37 min)","isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc21\/10211"}},"sections":[],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc21-10211-symbolication-beyond-the-basics"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"WWDC21-10211-diskSpace":{"type":"image","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC21-10211-diskSpace.png","traits":["1x","light"]}],"identifier":"WWDC21-10211-diskSpace"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21","url":"\/documentation\/wwdcnotes\/wwdc21","type":"topic","abstract":[{"text":"Xcode 13, Swift 5.5, iOS 15, macOS 12 (Monterey), tvOS 15, watchOS 8.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"MusicKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"DocC","type":"codeVoice"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit 2"},{"type":"text","text":", and more."}],"title":"WWDC21","images":[{"identifier":"WWDC21-Icon.png","type":"icon"},{"identifier":"WWDC21.jpeg","type":"card"}],"kind":"article","role":"collectionGroup"},"WWDC21-10211-functionStarts":{"variants":[{"url":"\/images\/WWDCNotes\/WWDC21-10211-functionStarts.png","traits":["1x","light"]}],"identifier":"WWDC21-10211-functionStarts","type":"image","alt":null},"WWDC21-10211-dwarfBinary":{"type":"image","identifier":"WWDC21-10211-dwarfBinary","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC21-10211-dwarfBinary.png"}]},"https://developer.apple.com/wwdc21/10211":{"type":"download","identifier":"https:\/\/developer.apple.com\/wwdc21\/10211","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc21\/10211"},"doc://WWDCNotes/documentation/WWDCNotes":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","role":"collection","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"type":"topic","url":"\/documentation\/wwdcnotes","kind":"symbol","images":[{"identifier":"WWDCNotes.png","type":"icon"}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","type":"topic","url":"\/documentation\/wwdcnotes\/zntfdr","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"title":"Federico Zanetello (332 notes)","images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"kind":"article","role":"sampleCode"},"WWDC21.jpeg":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC21.jpeg"}],"identifier":"WWDC21.jpeg","type":"image","alt":null},"https://zntfdr.dev":{"titleInlineContent":[{"type":"text","text":"Blog"}],"type":"link","identifier":"https:\/\/zntfdr.dev","title":"Blog","url":"https:\/\/zntfdr.dev"},"zntfdr.jpeg":{"type":"image","identifier":"zntfdr.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC17-413-App-Startup-Time-Past-Present-and-Future":{"role":"sampleCode","abstract":[{"text":"Learn about the dyld dynamic linker used on Apple platforms, how it’s changed over the years, and where it’s headed next. Find out how improved tooling makes it easier to optimize your app’s launch time, and see how new changes coming in dyld will bring even further launch time improvements.","type":"text"}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC17-413-App-Startup-Time-Past-Present-and-Future","url":"\/documentation\/wwdcnotes\/wwdc17-413-app-startup-time-past-present-and-future","title":"App Startup Time: Past, Present, and Future","type":"topic"},"WWDC21-Icon.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC21-Icon.png"}],"identifier":"WWDC21-Icon.png","type":"image","alt":null},"WWDC21-10211-stripXcode":{"type":"image","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC21-10211-stripXcode.png","traits":["1x","light"]}],"identifier":"WWDC21-10211-stripXcode"},"https://github.com/zntfdr":{"type":"link","identifier":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"text":"GitHub","type":"text"}],"title":"GitHub","url":"https:\/\/github.com\/zntfdr"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","type":"link","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}]},"zntfdr":{"type":"image","alt":"Profile image of Federico Zanetello","variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}],"identifier":"zntfdr"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-110370-Debug-Swift-debugging-with-LLDB":{"type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc22-110370-debug-swift-debugging-with-lldb","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110370-Debug-Swift-debugging-with-LLDB","abstract":[{"type":"text","text":"Learn how you can set up complex Swift projects for debugging. We’ll take you on a deep dive into the internals of LLDB and debug info. We’ll also share best practices for complex scenarios such as debugging code built on build servers or code from custom build systems."}],"title":"Debug Swift debugging with LLDB"},"WWDCNotes.png":{"type":"image","identifier":"WWDCNotes.png","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}]}}}