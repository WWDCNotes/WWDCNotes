{"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23"]]},"metadata":{"modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC23","role":"sampleCode","title":"Meet ActivityKit"},"sampleCodeDownload":{"kind":"sampleDownload","action":{"type":"reference","isActive":true,"overridingTitle":"Watch Video (17 min)","identifier":"https:\/\/developer.apple.com\/wwdc23\/10184"}},"sections":[],"kind":"article","primaryContentSections":[{"kind":"content","content":[{"text":"Overview","type":"heading","level":2,"anchor":"overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Live Activities are an immersive and glanceable way to keep track of an event or the progress of a task. They have a discrete start and end and provides real-time updates from background app on runtime or remotely using Push Notifications."}]},{"text":"Live Activity overview","type":"heading","level":2,"anchor":"Live-Activity-overview"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Works with "},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"ActivityKit framework","type":"text"}]}],"type":"emphasis"},{"type":"text","text":", empowering apps to request, update, and manage their lifecycles."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Declarative programmatic layout with SwiftUI and WidgetKit.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Explicit user action to begin a Live Activity."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A Live Activity can be requested when your app is in the foreground."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Live Activities are user-moderated similar to Notifications."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Someone can easily dismiss or turn them off for your app altogether.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Must support Lock Screen and the Dynamic Island.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Update remotely using push notifications.","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Dynamic Island displays Live Activities throughout the system when the app is in the background.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"When one Live Activity is active, it’s rendered using its "},{"code":"variable-width","type":"codeVoice"},{"type":"text","text":", compact presentation."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The Dynamic Island displays up to two live activities at a time."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"One of these Live Activities appears attached to the TrueDepth camera, while the other renders in its own detached view."}]}]},{"content":[{"inlineContent":[{"text":"Both of these Live Activities use their ","type":"text"},{"code":"minimal","type":"codeVoice"},{"text":" presentation.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Long press a Live Activity to display its ","type":"text"},{"code":"expanded","type":"codeVoice"},{"text":" presentation, giving even more glanceable information.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"In the expanded presentation, views can deep link to different areas within the app."}],"type":"paragraph"}]}],"type":"unorderedList"},{"text":"New experiences for Live Activities in iOS 17","type":"heading","level":3,"anchor":"New-experiences-for-Live-Activities-in-iOS-17"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"In addition to the Lock screen and Dynamic Island, Live Activities appear in StandBy.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Now iPad supports Live Activities."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Interactive Live Activities","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"Leverage widget enhancements","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Add buttons or toggles","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]}],"type":"unorderedList"},{"text":"Lifecycle of Live Activities","type":"heading","level":2,"anchor":"Lifecycle-of-Live-Activities"},{"type":"paragraph","inlineContent":[{"text":"The Lifecycle of a Live Activity contains four main steps:","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"text":"Request","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"swift","code":["\/\/ Request Live Activity with initial content state","let adventure = AdventureAttributes(hero: hero)","","let initialState = AdventureAttributes.ContentState(","    currentHealthLevel: hero.healthLevel,","    eventDescription: \"Adventure has begun!\"",")","let content = ActivityContent(state: initialState, staleDate: nil, relevanceScore: 0.0)","","let activity = try Activity.request(","    attributes: adventure,","    content: content,","    pushType: nil",")"]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Update","type":"text"}]}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"swift","code":["\/\/ Update Live activity with new content","let heroName = activity.attributes.hero.name               ","let contentState = AdventureAttributes.ContentState(","    currentHealthLevel: hero.healthLevel,","    eventDescription: \"\\(heroName) has taken a critical hit!\"",")","","var alertConfig = AlertConfiguration(","    title: \"\\(heroName) has taken a critical hit!\",","    body: \"Open the app and use a potion to heal \\(heroName)\",","    sound: .default",")  ","activity.update(","    ActivityContent<AdventureAttributes.ContentState>(","        state: contentState,","        staleDate: nil","    ),","    alertConfiguration: alertConfig",")"]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Observe activity state","type":"text"}]}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"swift","code":["\/\/ Observe activity state asynchronously","func observeActivity(activity: Activity<AdventureAttributes>) {","    Task {","        for await activityState in activity.activityStateUpdates {","            if activityState == .dismissed {","                self.cleanUpDismissedActivity()","            }","        }","    }","}","","\/\/ Observe activity state synchronously","let activityState = activity.activityState","if activityState == .dismissed {","    self.cleanUpDismissedActivity()","}"]},{"items":[{"content":[{"inlineContent":[{"text":"End","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"swift","code":["\/\/ Dismiss Live activity with final content.","let hero = activity.attributes.hero","","let finalContent = AdventureAttributes.ContentState(","    currentHealthLevel: hero.healthLevel,","    eventDescription: \"Adventure over! \\(hero.name) has defeated the boss! Congrats!\"",")","","let dismissalPolicy: ActivityUIDismissalPolicy = .default","","activity.end(","    ActivityContent(state: finalContent, staleDate: nil),","    dismissalPolicy: dismissalPolicy)","}"]},{"text":"Building Live Activity UI","type":"heading","level":2,"anchor":"Building-Live-Activity-UI"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Show most essential content","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Simple design","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Show additional details in the application","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"text":"Dynamic Island presentations.","type":"heading","level":3,"anchor":"Dynamic-Island-presentations"},{"items":[{"content":[{"inlineContent":[{"text":"There are three presentations: ","type":"text"},{"type":"emphasis","inlineContent":[{"inlineContent":[{"text":"compact, minimal and expanded.","type":"text"}],"type":"strong"}]}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"When an app’s Live Activity is the only one running on the system, it’ll be displayed using the compact presentation.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"The compact presentation has two areas, ","type":"text"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"leading and trailing."}]}],"type":"emphasis"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"They appear together to form a cohesive presentation in the Dynamic Island.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Choose essential content to show in the leading and trailing space.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Users should be able to identify the specific activity by looking at the content."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Create a Dynamic Island view builder to represent each of those presentations.","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"When more than one app starts a Live Activity, the system chooses which Live Activities are visible and displays both of them using the minimal presentation for each:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"one minimal presentation appears attached to the Dynamic Island","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the other appears detached."}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"text":"Your minimal view should only have the most critical information, as you have very limited space to work with.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"When users touch and hold a Live Activity in a compact or minimal presentation, the system displays the content in an expanded presentation."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"For the expanded presentation, the system divides the expanded presentation into different areas."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The first closure of the DynamicIsland view builder represents the expanded content."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Within that closure, each section content can be defined with the expanded region passing the specific position."}],"type":"paragraph"}]}],"type":"unorderedList"},{"text":"Related Sessions","type":"heading","level":2,"anchor":"Related-Sessions"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/developer.apple.com\/wwdc23\/10028","type":"reference","isActive":true}]}]},{"content":[{"inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc23\/10185","isActive":true}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/developer.apple.com\/wwdc23\/10194","isActive":true,"type":"reference"}]}]}],"type":"unorderedList"},{"text":"Written By","type":"heading","level":2,"anchor":"Written-By"},{"type":"row","columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"RamitSharma991"}]}]},{"size":4,"content":[{"anchor":"Ramit-Sharma","level":3,"type":"heading","text":"Ramit Sharma"},{"inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"overridingTitle":"Contributed Notes","isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/RamitSharma991","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/RamitSharma991","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/x.com\/iosDev_ramit","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/","type":"reference"}],"type":"paragraph"}]}],"numberOfColumns":5},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"text":"Related Sessions","type":"heading","level":2,"anchor":"Related-Sessions"},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10028-Bring-widgets-to-life","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10185-Update-Live-Activities-with-push-notifications"],"type":"links","style":"list"},{"type":"small","inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"abstract":[{"text":"Live Activities are a glanceable way for someone to keep track of the progress of a task within your app. We’ll teach you how you can create helpful experiences for the Lock Screen, the Dynamic Island, and StandBy. Learn how to update your app’s Live Activities, monitor activity state, and take advantage of WidgetKit and SwiftUI to build richer experiences.","type":"text"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10184-Meet-ActivityKit"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc23-10184-meet-activitykit"]}],"references":{"RamitSharma991.jpeg":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/RamitSharma991.jpeg","traits":["1x","light"]}],"type":"image","identifier":"RamitSharma991.jpeg"},"https://developer.apple.com/wwdc23/10194":{"title":"Design Dynamic Live Activities - WWDC23","identifier":"https:\/\/developer.apple.com\/wwdc23\/10194","url":"https:\/\/developer.apple.com\/wwdc23\/10194","type":"link","titleInlineContent":[{"type":"text","text":"Design Dynamic Live Activities - WWDC23"}]},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","title":"Contributions are welcome!","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}]},"doc://WWDCNotes/documentation/WWDCNotes/RamitSharma991":{"title":"Ramit Sharma (15 notes)","type":"topic","role":"sampleCode","url":"\/documentation\/wwdcnotes\/ramitsharma991","kind":"article","abstract":[{"type":"text","text":"Indie iOS Dev. Swift, SwiftUI, Obj-C, UX and related."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/RamitSharma991","images":[{"identifier":"RamitSharma991.jpeg","type":"card"},{"identifier":"RamitSharma991.jpeg","type":"icon"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10185-Update-Live-Activities-with-push-notifications":{"url":"\/documentation\/wwdcnotes\/wwdc23-10185-update-live-activities-with-push-notifications","abstract":[{"type":"text","text":"Discover how you can remotely update Live Activities in your app when you push content through Apple Push Notification service (APNs). We’ll show you how to configure your first Live Activity push locally so you can quickly iterate on your implementation. Learn best practices for determining your push priority and configuring alerting updates, and explore how to further improve your Live Activities with relevance score and stale date."}],"type":"topic","kind":"article","title":"Update Live Activities with push notifications","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10185-Update-Live-Activities-with-push-notifications","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes":{"abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"title":"WWDC Notes","type":"topic","kind":"symbol","role":"collection","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes"},"WWDCNotes.png":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}],"type":"image","identifier":"WWDCNotes.png"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10028-Bring-widgets-to-life":{"url":"\/documentation\/wwdcnotes\/wwdc23-10028-bring-widgets-to-life","kind":"article","title":"Bring widgets to life","role":"sampleCode","type":"topic","abstract":[{"type":"text","text":"Learn how to make animated and interactive widgets for your apps and games. We’ll show you how to tweak animations for entry transitions and add interactivity using SwiftUI Button and Toggle so that you can create powerful moments right from the Home Screen and Lock Screen."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10028-Bring-widgets-to-life"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23":{"abstract":[{"text":"Xcode 15, Swift 5.9, iOS 17, macOS 14 (Sonoma), tvOS 17, visionOS 1, watchOS 10.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"type":"codeVoice","code":"SwiftData"},{"text":", ","type":"text"},{"type":"codeVoice","code":"Observation"},{"text":", ","type":"text"},{"type":"codeVoice","code":"StoreKit"},{"text":" views, and more.","type":"text"}],"title":"WWDC23","type":"topic","kind":"article","role":"collectionGroup","images":[{"type":"icon","identifier":"WWDC23-Icon.png"},{"type":"card","identifier":"WWDC23.jpeg"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23","url":"\/documentation\/wwdcnotes\/wwdc23"},"https://developer.apple.com/wwdc23/10185":{"title":"Update Live Activities with Push Notifications - WWDC23","identifier":"https:\/\/developer.apple.com\/wwdc23\/10185","url":"https:\/\/developer.apple.com\/wwdc23\/10185","type":"link","titleInlineContent":[{"type":"text","text":"Update Live Activities with Push Notifications - WWDC23"}]},"WWDC23-Icon.png":{"identifier":"WWDC23-Icon.png","type":"image","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC23-Icon.png","traits":["1x","light"]}]},"WWDC23.jpeg":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC23.jpeg","traits":["1x","light"]}],"type":"image","identifier":"WWDC23.jpeg"},"https://github.com/RamitSharma991":{"title":"GitHub","identifier":"https:\/\/github.com\/RamitSharma991","url":"https:\/\/github.com\/RamitSharma991","type":"link","titleInlineContent":[{"type":"text","text":"GitHub"}]},"https://x.com/iosDev_ramit":{"identifier":"https:\/\/x.com\/iosDev_ramit","url":"https:\/\/x.com\/iosDev_ramit","type":"link","title":"X\/Twitter","titleInlineContent":[{"text":"X\/Twitter","type":"text"}]},"https://":{"title":"Blog","titleInlineContent":[{"text":"Blog","type":"text"}],"url":"https:\/\/","type":"link","identifier":"https:\/\/"},"https://developer.apple.com/wwdc23/10184":{"identifier":"https:\/\/developer.apple.com\/wwdc23\/10184","url":"https:\/\/developer.apple.com\/wwdc23\/10184","type":"download","checksum":null},"RamitSharma991":{"identifier":"RamitSharma991","type":"image","alt":"Profile image of Ramit Sharma","variants":[{"url":"\/images\/WWDCNotes\/RamitSharma991.jpeg","traits":["1x","light"]}]},"https://developer.apple.com/wwdc23/10028":{"title":"Bring widgets to life - WWDC23","identifier":"https:\/\/developer.apple.com\/wwdc23\/10028","url":"https:\/\/developer.apple.com\/wwdc23\/10028","type":"link","titleInlineContent":[{"text":"Bring widgets to life - WWDC23","type":"text"}]}}}