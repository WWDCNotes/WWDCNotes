{"metadata":{"title":"Build document-based apps in SwiftUI","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC20","role":"sampleCode"},"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","anchor":"overview","type":"heading","level":2},{"inlineContent":[{"text":"Document-based apps are apps whose primary workflow is opening user’s files of a specific type from the disk, editing them and saving them back to disk - as opposed to apps that work with data kept in their own internal databases.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"There are also apps of mixed type, where document-focused features are a part of the UI, e.g.:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Xcode is primarily document-based, but it also has non-document parts like documentation, organizer","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Mail generally works with an internally managed database, but can also open single email files from any place on disk","type":"text"}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"text","text":"For document-based apps, use the "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/documentgroup","isActive":true},{"type":"text","text":" scene as the main scene of the app:"}],"type":"paragraph"},{"code":["DocumentGroup(newDocument: MyDocument()) { file in","    TextEditor(text: file.$document.text)","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"You can also mix "},{"code":"DocumentGroup","type":"codeVoice"},{"type":"text","text":" and "},{"code":"WindowGroup","type":"codeVoice"},{"type":"text","text":" in apps that should have both document-based and non-document-based windows."}],"type":"paragraph"},{"inlineContent":[{"code":"DocumentGroup","type":"codeVoice"},{"type":"text","text":" automatically provides various document management features expected on the given platform:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"menu items like File > Open\/Save in the macOS menu"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"state tracking and file renaming\/moving using the titlebar popup on macOS","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Handoff between devices"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"a document browser and a navigation bar with search field on iOS","type":"text"}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"text","text":"The "},{"code":"DocumentGroup","type":"codeVoice"},{"type":"text","text":" initializer takes a document object which represents a single document of a type handled by the given document group, and a view closure that describes the view hierarchy to be rendered for each document’s scene. The closure’s argument ("},{"code":"file","type":"codeVoice"},{"type":"text","text":") gives you a binding that provides read-write data to the document’s data model. The binding lets SwiftUI know when you update the document contents through the binding, so it can automatically handle things like registering undo actions and marking the document state as dirty."}],"type":"paragraph"},{"inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/texteditor","type":"reference","isActive":true},{"type":"text","text":" - a new built-in text view type kind of like "},{"type":"codeVoice","code":"UITextView"}],"type":"paragraph"},{"text":"Document types","anchor":"Document-types","type":"heading","level":2},{"inlineContent":[{"text":"Document-based apps have a “Document Types” section in the ","type":"text"},{"code":"Info.plist","type":"codeVoice"},{"text":", where you declare Uniform Type Identifiers of document types associated with your app:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Imported types ⭢ documents from other apps or sources that your app is able to open","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Exported types ⭢ document types owned by your app"}]}]}]},{"inlineContent":[{"type":"text","text":"The type that implements the document model conforms to "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/filedocument","isActive":true},{"type":"text","text":" (for value types) and declares its own "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uniformtypeidentifiers\/uttype","isActive":true},{"type":"text","text":" instances that represent imported and exported file types:"}],"type":"paragraph"},{"code":["import UniformTypeIdentifiers","","extension UTType {","    static var exampleText: UTType {","        UTType(importedAs: \"com.example.plain-text\")","    }","","    static let shapeEditDocument =","        UTType(exportedAs: \"com.example.ShapeEdit.shapes\")","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"An imported type needs to be a computed property, because the value returned from the constructor may change between calls while the app is running, depending on system configuration. Exported type can just be assigned once and stored. (This is also explained in a tech talk video which talks specifically about UTIs, “"},{"type":"reference","identifier":"https:\/\/developer.apple.com\/videos\/play\/tech-talks\/10696\/","isActive":true},{"type":"text","text":"”.)"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The document type provides a list of types (public types and app’s own types) that it can accept:"}],"type":"paragraph"},{"code":["static var readableContentTypes: [UTType] { [.exampleText] }"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"It also has methods for reading and writing its document to\/from a file, which you need to implement, using e.g. Codable to encode\/decode the value into your chosen format:"}],"type":"paragraph"},{"code":["init(fileWrapper: FileWrapper, contentType: UTType) throws { ... }","","func write(to fileWrapper: inout FileWrapper, contentType: UTType) throws { ... }"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"In those methods, you can assume that the content type is one of those you declared as accepted by your app.","type":"text"}],"type":"paragraph"},{"text":"Written By","anchor":"Written-By","type":"heading","level":2},{"numberOfColumns":5,"type":"row","columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"mackuba"}]}]},{"size":4,"content":[{"type":"heading","text":"Kuba Suder","level":3,"anchor":"Kuba-Suder"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/mackuba"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/mackuba"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/mackuba.eu"}]}]}]},{"type":"thematicBreak"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference"}],"type":"paragraph"},{"text":"Related Sessions","anchor":"Related-Sessions","type":"heading","level":2},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10056-Build-better-documentbased-apps","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10037-App-essentials-in-SwiftUI","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10041-Whats-new-in-SwiftUI"],"type":"links","style":"list"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10039-Build-documentbased-apps-in-SwiftUI"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"]]},"kind":"article","sampleCodeDownload":{"kind":"sampleDownload","action":{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc20\/10039","isActive":true,"overridingTitle":"Watch Video (12 min)"}},"abstract":[{"text":"Learn how to build a document-based app entirely in SwiftUI! We’ll walk you through the DocumentGroup API and how it composes with your App and Scenes, allowing you to add out-of-the-box support for document management — such as document browsing and standard commands — no heavy lifting required. You’ll learn to set up Universal Type Identifiers as well as gain understanding into what makes a top-notch document-based app.","type":"text"}],"sections":[],"schemaVersion":{"patch":0,"major":0,"minor":3},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc20-10039-build-documentbased-apps-in-swiftui"]}],"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10056-Build-better-documentbased-apps":{"kind":"article","title":"Build better document-based apps","url":"\/documentation\/wwdcnotes\/wwdc23-10056-build-better-documentbased-apps","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10056-Build-better-documentbased-apps","role":"sampleCode","abstract":[{"text":"Discover how you can use the latest features in iPadOS to improve your document-based apps. We’ll show you how to take advantage of UIDocument as well as existing desktop-class iPad and document-based APIs to add new features in your app. Find out how to convert data models to UIDocument, present documents with UIDocumentViewController, learn how to migrate your apps to the latest APIs, and explore best practices.","type":"text"}],"type":"topic"},"https://developer.apple.com/documentation/swiftui/documentgroup":{"identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/documentgroup","titleInlineContent":[{"type":"codeVoice","code":"DocumentGroup"}],"url":"https:\/\/developer.apple.com\/documentation\/swiftui\/documentgroup","type":"link","title":"DocumentGroup"},"doc://WWDCNotes/documentation/WWDCNotes":{"abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"title":"WWDC Notes","type":"topic","kind":"symbol","role":"collection","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes"},"WWDC20-Icon.png":{"type":"image","alt":null,"identifier":"WWDC20-Icon.png","variants":[{"url":"\/images\/WWDCNotes\/WWDC20-Icon.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/mackuba":{"url":"\/documentation\/wwdcnotes\/mackuba","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/mackuba","images":[{"type":"card","identifier":"mackuba.jpeg"},{"type":"icon","identifier":"mackuba.jpeg"}],"kind":"article","role":"sampleCode","title":"Kuba Suder (16 notes)","abstract":[{"type":"text","text":"Independent Mac & iOS developer. Sometimes freelancing, mostly working on my own stuff these days."}]},"WWDCNotes.png":{"type":"image","alt":null,"identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}]},"https://mackuba.eu":{"title":"Blog","identifier":"https:\/\/mackuba.eu","type":"link","url":"https:\/\/mackuba.eu","titleInlineContent":[{"type":"text","text":"Blog"}]},"https://developer.apple.com/documentation/swiftui/texteditor":{"identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/texteditor","titleInlineContent":[{"type":"codeVoice","code":"TextEditor()"}],"url":"https:\/\/developer.apple.com\/documentation\/swiftui\/texteditor","type":"link","title":"TextEditor()"},"https://developer.apple.com/wwdc20/10039":{"checksum":null,"type":"download","url":"https:\/\/developer.apple.com\/wwdc20\/10039","identifier":"https:\/\/developer.apple.com\/wwdc20\/10039"},"https://github.com/mackuba":{"title":"GitHub","identifier":"https:\/\/github.com\/mackuba","type":"link","url":"https:\/\/github.com\/mackuba","titleInlineContent":[{"text":"GitHub","type":"text"}]},"https://developer.apple.com/documentation/uniformtypeidentifiers/uttype":{"url":"https:\/\/developer.apple.com\/documentation\/uniformtypeidentifiers\/uttype","type":"link","title":"UTType","identifier":"https:\/\/developer.apple.com\/documentation\/uniformtypeidentifiers\/uttype","titleInlineContent":[{"type":"codeVoice","code":"UTType"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20":{"url":"\/documentation\/wwdcnotes\/wwdc20","abstract":[{"type":"text","text":"Xcode 12, Swift 5.3, iOS 14, macOS 11 (Big Sur), tvOS 14, watchOS 7."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"WidgetKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit Testing"},{"type":"text","text":", and more."}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20","role":"collectionGroup","type":"topic","images":[{"type":"icon","identifier":"WWDC20-Icon.png"},{"type":"card","identifier":"WWDC20.jpeg"}],"title":"WWDC20"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10041-Whats-new-in-SwiftUI":{"kind":"article","title":"What’s new in SwiftUI","url":"\/documentation\/wwdcnotes\/wwdc20-10041-whats-new-in-swiftui","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10041-Whats-new-in-SwiftUI","role":"sampleCode","abstract":[{"text":"SwiftUI can help you build better and more powerful apps for iPhone, iPad, Mac, Apple Watch, and Apple TV.  Learn more about the latest refinements to SwiftUI, including interface improvements like outlines, grids, and toolbars. Take advantage of SwiftUI’s enhanced support across Apple frameworks to enable features like Sign In with Apple. Discover new visual effects, as well as new controls and styles. And find out how the new app and scene APIs enable you to create apps entirely in SwiftUI, as well as custom complications and all new widgets.","type":"text"}],"type":"topic"},"mackuba":{"type":"image","alt":"Profile image of Kuba Suder","identifier":"mackuba","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/mackuba.jpeg"}]},"mackuba.jpeg":{"identifier":"mackuba.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/mackuba.jpeg","traits":["1x","light"]}],"type":"image"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10037-App-essentials-in-SwiftUI":{"url":"\/documentation\/wwdcnotes\/wwdc20-10037-app-essentials-in-swiftui","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10037-App-essentials-in-SwiftUI","kind":"article","role":"sampleCode","abstract":[{"type":"text","text":"Thanks to the new App protocol, SwiftUI now supports building entire apps! See how Apps, Scenes, and Views fit together. Learn how easy it is to implement the features people expect from a best-in-class product while saving time and reducing complexity. Easily add expected functionality to your interface using the new commands modifier, and explore the ins and outs of the new WindowGroup API."}],"title":"App essentials in SwiftUI"},"https://developer.apple.com/documentation/swiftui/filedocument":{"title":"FileDocument","identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/filedocument","type":"link","url":"https:\/\/developer.apple.com\/documentation\/swiftui\/filedocument","titleInlineContent":[{"type":"codeVoice","code":"FileDocument"}]},"https://developer.apple.com/videos/play/tech-talks/10696/":{"url":"https:\/\/developer.apple.com\/videos\/play\/tech-talks\/10696\/","type":"link","title":"Uniform Type Identifiers — a reintroduction","identifier":"https:\/\/developer.apple.com\/videos\/play\/tech-talks\/10696\/","titleInlineContent":[{"type":"text","text":"Uniform Type Identifiers — a reintroduction"}]},"WWDC20.jpeg":{"identifier":"WWDC20.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC20.jpeg","traits":["1x","light"]}],"type":"image"}}}