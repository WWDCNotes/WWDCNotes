{"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24"]]},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10179-Meet-Swift-Testing","interfaceLanguage":"swift"},"sampleCodeDownload":{"action":{"overridingTitle":"Watch Video (23 min)","type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc24\/10179","isActive":true},"kind":"sampleDownload"},"schemaVersion":{"major":0,"patch":0,"minor":3},"sections":[],"abstract":[{"text":"Introducing Swift Testing: a new package for testing your code using Swift. Explore the building blocks of its powerful new API, discover how it can be applied in common testing workflows, and learn how it relates to XCTest and open source Swift.","type":"text"}],"metadata":{"title":"Meet Swift Testing","modules":[{"name":"WWDC Notes"}],"role":"sampleCode","roleHeading":"WWDC24"},"kind":"article","primaryContentSections":[{"content":[{"anchor":"Key-takeaways","type":"heading","level":2,"text":"Key takeaways"},{"type":"paragraph","inlineContent":[{"text":"üß™ Use ","type":"text"},{"type":"codeVoice","code":"@Test"},{"text":" annotation for functions with test.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"‚òëÔ∏è Use "},{"code":"#expect","type":"codeVoice"},{"type":"text","text":" macro for conditional check and "},{"code":"#require","type":"codeVoice"},{"type":"text","text":" for early exit."}]},{"type":"paragraph","inlineContent":[{"text":"‚öôÔ∏è Traits for test customization.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"üíª Support for Linux and Windows.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"ü´• UI, performance and Objective-C are not supported.","type":"text"}]},{"anchor":"Presenters","type":"heading","level":2,"text":"Presenters"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Stuart Montgomery, Xcode Engineer"}]}]}],"type":"unorderedList"},{"anchor":"Building-Blocks","type":"heading","level":2,"text":"Building Blocks"},{"anchor":"Getting-started-Test","type":"heading","level":3,"text":"Getting started: @Test"},{"type":"paragraph","inlineContent":[{"text":"In order to use the new testing framework we need to import the ","type":"text"},{"code":"Testing","type":"codeVoice"},{"text":" framework in your unit test file.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Adding the ","type":"text"},{"type":"strong","inlineContent":[{"type":"codeVoice","code":"@Test"}]},{"text":" annotation any of our functions, and the function will automatically change to a test case.","type":"text"}]},{"code":["import Testing","","@Test func simpleTest() {","    var a = 2","    #expect(a < 1)","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"In case of test validation error, after clicking on the red error bar, the new ","type":"text"},{"type":"codeVoice","code":"Show"},{"text":" button appears. Clicking on it reveals the result view, where the expressions passed to the macro are shown.","type":"text"}]},{"anchor":"Validation-macros-expect-and-require","type":"heading","level":3,"text":"Validation macros: #expect and #require"},{"type":"paragraph","inlineContent":[{"text":"There are 2 validation macros introduced to test any expression.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"inlineContent":[{"code":"#expect","type":"codeVoice"}],"type":"strong"},{"text":" macro can be used as a default case, and it has great flexibility in terms of the evaluation expressions.","type":"text"}]},{"inlineContent":[{"type":"text","text":"The "},{"type":"strong","inlineContent":[{"code":"#require","type":"codeVoice"}]},{"type":"text","text":" macro is more strict: when it fails, it exit from the current test case. Since it throws an error, needs to be invoked via the "},{"type":"strong","inlineContent":[{"code":"try","type":"codeVoice"}]},{"type":"text","text":" invocation. It can be useful for "},{"type":"strong","inlineContent":[{"type":"codeVoice","code":"nil"}]},{"type":"text","text":" check and other checks that might imply early exit from the test function in case of failure."}],"type":"paragraph"},{"text":"Traits and Suite","level":3,"anchor":"Traits-and-Suite","type":"heading"},{"inlineContent":[{"type":"text","text":"Traits are great for test customization. Here are some examples:"}],"type":"paragraph"},{"rows":[[[{"inlineContent":[{"type":"text","text":"Trait"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Description"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"@Test(\"Custom Name\")"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Custom name for the test case. It is used in Xcode and the reports too.","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"@Test(.bug(\"http:\/\/bugtracker.my\/bugs\/33344\" , \"Title\"))","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Reference issue from a bug tracker"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"@Test(.enabled(if: serverIsOnline))","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Specify a runtime condition for the test","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"@Test(.disabled(\"FIXME: Currently broken\"))","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Unconditional disable test (test will marked as skipped)","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"@Test() @available(macOS 15, *)"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Limit a test to certain OS versions"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"@Test(.timeLimit(.minutes(3)))"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Set a maximum time limit for the test","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"@Suite(.serialized)"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Run the tests in a suite one at time, without parallelization.","type":"text"}],"type":"paragraph"}]]],"header":"row","type":"table"},{"inlineContent":[{"text":"Although we are able to write test functions in the global scope, as a standalone function, putting the test cases in structure is encouraged.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Suite is one of the structure to group the tests into an entity. The "},{"inlineContent":[{"type":"codeVoice","code":"@Suite"}],"type":"strong"},{"type":"text","text":" annotation can be added to any Swift type, however types containing "},{"inlineContent":[{"type":"codeVoice","code":"@Test"}],"type":"strong"},{"type":"text","text":" functions or suites will be implicitly annotated. The "},{"inlineContent":[{"type":"codeVoice","code":"struct"}],"type":"strong"},{"type":"text","text":" type is recommended by Apple to define a suite, due to its value type nature, for state isolation."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"For set-up and tear-down logic the "},{"type":"strong","inlineContent":[{"code":"init","type":"codeVoice"}]},{"type":"text","text":" and "},{"type":"strong","inlineContent":[{"code":"deinit","type":"codeVoice"}]},{"type":"text","text":" functions can be used. During the test run a new instance of the suite initialized for each "},{"type":"codeVoice","code":"@Test"},{"type":"text","text":" method."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Suites can also be nested into each other."}],"type":"paragraph"},{"text":"Common Workflows","level":2,"anchor":"Common-Workflows","type":"heading"},{"text":"Tests with conditions","level":3,"anchor":"Tests-with-conditions","type":"heading"},{"inlineContent":[{"text":"Using the .disabled trait is recommended, instead of commenting out the code. Adding the .bug trait in cases when test is disabled due to a known issue makes it more elegant.","type":"text"}],"type":"paragraph"},{"text":"Tests with common characteristics","level":3,"anchor":"Tests-with-common-characteristics","type":"heading"},{"inlineContent":[{"text":"Tags are another traits that can be used to group tests with common characteristics. Based on the tag the test cases can be grouped together. One test function can belong more than one tag.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"The tags needs to be defined before we can start to use them:","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["import Testing","","extension Tag {","    @Tag static var formatting: Self","    @Tag static var networking: Self","}","","struct myTests {","    @Test(.tags(.formatting))","    func sampleTest()  {","        let a = 2","        #expect(a < 3)","    }","","    @Test(.tags(.networking, .formatting))","    func sampleTestThrows() throws {","        let a = 2","        try #require(a < 3)","    }","}"]},{"text":"Repeating tests with different parameters","level":3,"anchor":"Repeating-tests-with-different-parameters","type":"heading"},{"inlineContent":[{"text":"Instead of using the ","type":"text"},{"inlineContent":[{"code":"for","type":"codeVoice"}],"type":"strong"},{"text":" loop to run tests with different parameters the recommended method is to pass arguments to the test. The parameters are passed as a function argument to the test function.","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["import Testing","","struct myTests {","    @Test(\"Test for repeating integers\", arguments:","    [","        1,","        2,","        3,","        4","    ])","    func sampleTest(number: Int) {","        #expect(number < 9)","    }","}"]},{"inlineContent":[{"type":"text","text":"In the example above the "},{"type":"strong","inlineContent":[{"type":"codeVoice","code":"number"}]},{"type":"text","text":" variable carries the current value passed from the argument list."}],"type":"paragraph"},{"inlineContent":[{"text":"In Xcode each test parameter can be re-run independently.","type":"text"}],"type":"paragraph"},{"text":"Swift Testing vs XCTest","level":2,"anchor":"Swift-Testing-vs-XCTest","type":"heading"},{"rows":[[[{"inlineContent":[{"type":"text","text":"Function"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Swift Testing","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"XCTest","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"Test function declaration","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"inlineContent":[{"code":"@Test","type":"codeVoice"}],"type":"strong"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Name begins with ‚Äútest‚Äù"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"Supported types","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Instance methods, Static\/class methods, Global functions","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Instance methods","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Traits support"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Yes"}],"type":"paragraph"}],[{"inlineContent":[{"text":"No","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"Parallel execution","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"In-process parallel execution (via Swift concurrency)","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Multi process parallel execution","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Runs on"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Supports device execution","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"macOS and simulator only","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Expectations"}],"type":"paragraph"}],[{"inlineContent":[{"type":"strong","inlineContent":[{"code":"#expect(...)","type":"codeVoice"}]},{"type":"text","text":", "},{"type":"strong","inlineContent":[{"type":"codeVoice","code":"try #required(...)"}]}],"type":"paragraph"}],[{"inlineContent":[{"type":"strong","inlineContent":[{"code":"XCTAssert","type":"codeVoice"}]},{"type":"text","text":" functions"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Types"}],"type":"paragraph"}],[{"inlineContent":[{"inlineContent":[{"code":"struct","type":"codeVoice"},{"text":", ","type":"text"},{"code":"actor","type":"codeVoice"},{"text":", ","type":"text"},{"code":"class","type":"codeVoice"}],"type":"strong"}],"type":"paragraph"}],[{"inlineContent":[{"type":"strong","inlineContent":[{"code":"class","type":"codeVoice"}]}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"Suite declaration","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"inlineContent":[{"type":"codeVoice","code":"@Suite"}],"type":"strong"},{"text":" (before a type)","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"codeVoice","code":"XCTestCase"}]},{"type":"text","text":" subclassing"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Before each test"}],"type":"paragraph"}],[{"inlineContent":[{"inlineContent":[{"type":"codeVoice","code":"init() async throws"}],"type":"strong"}],"type":"paragraph"}],[{"inlineContent":[{"type":"strong","inlineContent":[{"code":"setUp()","type":"codeVoice"},{"text":", ","type":"text"},{"code":"setUpWithError() throws","type":"codeVoice"},{"text":", ","type":"text"},{"code":"setUp() async throws","type":"codeVoice"}]}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"After each test"}],"type":"paragraph"}],[{"inlineContent":[{"inlineContent":[{"code":"deinit","type":"codeVoice"}],"type":"strong"}],"type":"paragraph"}],[{"inlineContent":[{"inlineContent":[{"code":"tearDown() async throws","type":"codeVoice"},{"type":"text","text":", "},{"code":"tearDownWithError() throws","type":"codeVoice"},{"type":"text","text":", "},{"code":"tearDown()","type":"codeVoice"}],"type":"strong"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"Sub-groups","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Via typed nesting"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Not supported"}],"type":"paragraph"}]]],"header":"row","type":"table"},{"inlineContent":[{"type":"text","text":"Migration: Swift Testing and XCTests can co-exist and share a singe unit test target. Can be migrated granularly (don‚Äôt forget to remove "},{"type":"codeVoice","code":"test"},{"type":"text","text":" prefix from the function name)."}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Exceptions, can not be migrated:"}]}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"UI Automation test cases (like using ","type":"text"},{"type":"codeVoice","code":"XCUIApplication"},{"text":")","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Performance testing API (like using ","type":"text"},{"type":"codeVoice","code":"XCTMetric"},{"text":")","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Tests can be only written in Objective-C"}],"type":"paragraph"}]}]},{"inlineContent":[{"text":"Avoid calling ","type":"text"},{"code":"XCTAssert","type":"codeVoice"},{"text":" from Swift Testing tests, or ","type":"text"},{"code":"#expect","type":"codeVoice"},{"text":" from XCTests.","type":"text"}],"type":"paragraph"},{"text":"Avaliability","level":2,"anchor":"Avaliability","type":"heading"},{"inlineContent":[{"type":"text","text":"Swift Testing is integrated with Swift Package Manager CLI, Xcode 16 and VS Code Swift Extension."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Swift Testing is Open Source."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Learn more in the session: ‚ÄúGo further with Swift Testing‚Äù"}],"type":"paragraph"},{"text":"Written By","level":2,"anchor":"Written-By","type":"heading"},{"columns":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/avatars.githubusercontent.com\/u\/3090905?v=4","type":"image"}]}],"size":1},{"content":[{"text":"Peter Molnar","level":3,"anchor":"Peter-Molnar","type":"heading"},{"inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/petermolnar-dev","type":"reference","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"isActive":true,"overridingTitle":"Contributed Notes"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/github.com\/petermolnar-dev","type":"reference","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"http:\/\/petermolnar.dev","type":"reference","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/x.com\/petermolnar_hu","type":"reference","isActive":true}],"type":"paragraph"}],"size":4}],"numberOfColumns":5,"type":"row"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","type":"reference","isActive":true}],"type":"paragraph"},{"text":"Related Sessions","level":2,"anchor":"Related-Sessions","type":"heading"},{"style":"list","type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10195-Go-further-with-Swift-Testing"]},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}],"type":"small"},{"inlineContent":[{"text":"All content copyright ¬© 2012 ‚Äì 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}],"kind":"content"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc24-10179-meet-swift-testing"]}],"references":{"https://x.com/petermolnar_hu":{"url":"https:\/\/x.com\/petermolnar_hu","title":"X\/Twitter","identifier":"https:\/\/x.com\/petermolnar_hu","titleInlineContent":[{"text":"X\/Twitter","type":"text"}],"type":"link"},"WWDCNotes.png":{"alt":null,"identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"type":"image"},"https://github.com/petermolnar-dev":{"url":"https:\/\/github.com\/petermolnar-dev","title":"GitHub","identifier":"https:\/\/github.com\/petermolnar-dev","titleInlineContent":[{"text":"GitHub","type":"text"}],"type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/petermolnar-dev":{"url":"\/documentation\/wwdcnotes\/petermolnar-dev","title":"Peter Molnar (2 notes)","kind":"article","abstract":[{"text":"iOS Developer @Parallels","type":"text"}],"images":[{"type":"card","identifier":"petermolnar-dev.jpeg"},{"type":"icon","identifier":"petermolnar-dev.jpeg"}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/petermolnar-dev","role":"sampleCode"},"petermolnar-dev.jpeg":{"alt":null,"identifier":"petermolnar-dev.jpeg","variants":[{"url":"\/images\/petermolnar-dev.jpeg","traits":["1x","light"]}],"type":"image"},"https://avatars.githubusercontent.com/u/3090905?v=4":{"alt":"Profile image of Peter Molnar","identifier":"https:\/\/avatars.githubusercontent.com\/u\/3090905?v=4","variants":[{"url":"https:\/\/avatars.githubusercontent.com\/u\/3090905?v=4","traits":["1x","light"]}],"type":"image"},"http://petermolnar.dev":{"url":"http:\/\/petermolnar.dev","title":"Blog","identifier":"http:\/\/petermolnar.dev","titleInlineContent":[{"text":"Blog","type":"text"}],"type":"link"},"https://developer.apple.com/wwdc24/10179":{"url":"https:\/\/developer.apple.com\/wwdc24\/10179","identifier":"https:\/\/developer.apple.com\/wwdc24\/10179","checksum":null,"type":"download"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC24":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24","type":"topic","title":"WWDC24","url":"\/documentation\/wwdcnotes\/wwdc24","role":"collectionGroup","kind":"article","abstract":[{"type":"text","text":"Xcode 16, Swift 6, iOS 18, macOS 15 (Sequoia), tvOS 18, visionOS 2, watchOS 11."},{"type":"text","text":" "},{"type":"text","text":"New APIs: Swift Testing, "},{"type":"codeVoice","code":"FinanceKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"TabletopKit"},{"type":"text","text":", and more."}],"images":[{"type":"icon","identifier":"WWDCNotes.png"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC24-10195-Go-further-with-Swift-Testing":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10195-Go-further-with-Swift-Testing","abstract":[{"type":"text","text":"Learn how to write a sweet set of (test) suites using Swift Testing‚Äôs baked-in features. Discover how to take the building blocks further and use them to help expand tests to cover more scenarios, organize your tests across different suites, and optimize your tests to run in parallel."}],"title":"Go further with Swift Testing","url":"\/documentation\/wwdcnotes\/wwdc24-10195-go-further-with-swift-testing","kind":"article","type":"topic","role":"sampleCode"},"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","title":"WWDC Notes","kind":"symbol","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"role":"collection"}}}