{"kind":"article","schemaVersion":{"minor":3,"major":0,"patch":0},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-502-Introducing-LowLatency-HLS","interfaceLanguage":"swift"},"sections":[],"primaryContentSections":[{"content":[{"text":"Overview","type":"heading","anchor":"overview","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Crucial for "},{"type":"codeVoice","code":"Sports"},{"type":"text","text":", "},{"type":"codeVoice","code":"Late-breaking news"},{"type":"text","text":", "},{"type":"codeVoice","code":"Game Streaming"},{"type":"text","text":", "},{"type":"codeVoice","code":"Award ceremonies"},{"type":"text","text":", …"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"2-8 seconds is "},{"inlineContent":[{"type":"text","text":"gold standard"}],"type":"strong"},{"type":"text","text":" and matches cable\/satellite TV"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"HLS targets ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"1-2 seconds"}]},{"text":" delay","type":"text"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Regular HLS"}],"type":"strong"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Simple and robust BUT comes with a cost (20-30s behind live)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"This comes due to ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2019\/502\/?time=225","type":"reference","isActive":true},{"text":" and [too much caching] (https:\/\/developer.apple.com\/videos\/play\/wwdc2019\/502\/?time=342)","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Considerations"}]}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"HTTP is still king - but keeping it means keeping segment encode delay","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"CDNs are essentially to scale","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Runway to react is much shorter"}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Changes"}],"type":"strong"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Reduce Publishing Latency"}],"type":"strong"},{"text":" by allowing the server to publish small parts of the main segment before the main segment itself is ready","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Leverage "},{"type":"strong","inlineContent":[{"type":"text","text":"Partial Segments"}]}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Subset of regular segment - appear in parallel to them in playlist"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Playlists update every partial segment"}]}]},{"content":[{"inlineContent":[{"text":"Publishing latency becomes the partial segment duration","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Disappear quickly from playlist and are replaced\/updated frequently"}],"type":"paragraph"}]}],"type":"unorderedList"}]}]}]},{"content":[{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Optimize Segment Discovery"}]},{"type":"text","text":" by allow asking for a particular playlist update in advance before it’s actually ready on the server"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Features enabled by "},{"type":"strong","inlineContent":[{"text":"EXT-X-SERVER-CONTROL","type":"text"}]}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Small number of server directives","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Carried as query parameters on playlist URL (reserved in m3u8 URLs)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Sorted within URL to improve CDN hit ratio"}]}]}]}]}],"type":"unorderedList"}]}]}]},{"content":[{"items":[{"content":[{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Blocking Playlist Reload","type":"text"}],"type":"strong"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"EXT-X-SERVER-CONTROL"}]},{"type":"text","text":" with "},{"type":"strong","inlineContent":[{"type":"text","text":"CAN-BLOCK-RELOAD"}]},{"type":"text","text":" control"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Clients ask for playlist update in advance","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Server holds reuqest until next (partial) segment appears"}]}]}]}]}]}]}],"type":"unorderedList"}]},{"content":[{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Improve caching behavior","type":"text"}]},{"type":"text","text":" by allowing to have a different URL for each update"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Eleminate Segment Round Trip","type":"text"}]},{"text":" by returning segments via push (HTTP\/2)","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A playlist GET request also pushes new segment which eleminates additional rount trip"}]}]}],"type":"unorderedList"}]}]}]},{"content":[{"items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Reduce Playlist Transfer Overhead"}],"type":"strong"},{"text":" by transmitting only delta updates if requested","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Realized via "},{"code":"CAN-SKIP-UNTIL","type":"codeVoice"},{"type":"text","text":" control"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Clients ask for delta updates explicitly"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Update skips the earlier part of playlist"}]}]}]}]}],"type":"unorderedList"}]},{"content":[{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Switch Bitrate Tiers Quickly"}],"type":"strong"},{"text":" by transmitting additional information with the updates","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Playlist carry up-to-date reports on peer playlists"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Last media sequence number and last partial segment number"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Allows client to load latest playlist when switching bit rates"}],"type":"paragraph"}]}]}]}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"How Do Get Started?","type":"text"}]}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Deliver HLS via HTTP\/2 and support "},{"inlineContent":[{"text":"Push","type":"text"}],"type":"strong"},{"type":"text","text":" + "},{"inlineContent":[{"text":"Dependency and Weighting","type":"text"}],"type":"strong"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Each server must vend all bit rate tiers","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"CDN must aggregate duplicate pending requests to origin"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Start implementing your origin - Spec for Low-Latency HLS is available now"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"During Beta period use App Entitlement "},{"code":"com.apple.developer.coremedia.hls.low-latency","type":"codeVoice"}],"type":"paragraph"}]}],"type":"unorderedList"}]}]},{"text":"Written By","type":"heading","anchor":"Written-By","level":2},{"columns":[{"content":[{"inlineContent":[{"identifier":"Blackjacx","type":"image"}],"type":"paragraph"}],"size":1},{"content":[{"type":"heading","text":"Stefan Herold","anchor":"Stefan-Herold","level":3},{"inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Blackjacx","overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}]},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/Blackjacx"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/x.com\/blackjacxxx"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/www.stefan-herold.net"}],"type":"paragraph"}],"size":4}],"numberOfColumns":5,"type":"row"},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference","isActive":true}],"type":"paragraph"},{"text":"Related Sessions","type":"heading","anchor":"Related-Sessions","level":2},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10225-Improve-stream-authoring-with-HLS-Tools","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-507-HLS-Authoring-for-AirPlay-2-Video"]},{"inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}],"kind":"content"}],"abstract":[{"type":"text","text":"Since its introduction in 2009, HTTP Live Streaming (HLS) has enabled the delivery of countless live and on‐demand audio and video streams globally. With the introduction of a new Low-Latency mode, latencies of less than two seconds are now achievable over public networks at scale, while still offering backwards compatibility to existing clients. Learn about how to develop and configure your content delivery systems to take advantage of this new technology."}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19"]]},"sampleCodeDownload":{"action":{"overridingTitle":"Watch Video (42 min)","type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc19\/502","isActive":true},"kind":"sampleDownload"},"metadata":{"roleHeading":"WWDC19","modules":[{"name":"WWDC Notes"}],"role":"sampleCode","title":"Introducing Low-Latency HLS"},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc19-502-introducing-lowlatency-hls"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"https://www.stefan-herold.net":{"identifier":"https:\/\/www.stefan-herold.net","type":"link","titleInlineContent":[{"type":"text","text":"Blog"}],"title":"Blog","url":"https:\/\/www.stefan-herold.net"},"WWDC19.jpeg":{"identifier":"WWDC19.jpeg","alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDC19.jpeg"}]},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"title":"Contributions are welcome!","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"https://github.com/Blackjacx":{"identifier":"https:\/\/github.com\/Blackjacx","type":"link","titleInlineContent":[{"type":"text","text":"GitHub"}],"title":"GitHub","url":"https:\/\/github.com\/Blackjacx"},"WWDCNotes.png":{"identifier":"WWDCNotes.png","alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes.png"}]},"doc://WWDCNotes/documentation/WWDCNotes/Blackjacx":{"url":"\/documentation\/wwdcnotes\/blackjacx","images":[{"identifier":"Blackjacx.jpeg","type":"card"},{"identifier":"Blackjacx.jpeg","type":"icon"}],"kind":"article","title":"Stefan Herold (28 notes)","abstract":[{"type":"text","text":"iOS Engineer a.d. 2009 • iOS \/ OSX Enthusiast • WWDC19 • Past: flinc, Deutsche Telekom, NOLTE&LAUTH • Passionate Mountainbiker"}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Blackjacx","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19":{"images":[{"identifier":"WWDC19-Icon.png","type":"icon"},{"identifier":"WWDC19.jpeg","type":"card"}],"role":"collectionGroup","url":"\/documentation\/wwdcnotes\/wwdc19","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19","abstract":[{"text":"Xcode 11, Swift 5.1, iOS 13, macOS 10.15 (Catalina), tvOS 13, watchOS 6.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"Combine","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Core Haptics","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Create ML","type":"codeVoice"},{"text":", and more.","type":"text"}],"kind":"article","type":"topic","title":"WWDC19"},"https://developer.apple.com/videos/play/wwdc2019/502/?time=225":{"identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2019\/502\/?time=225","type":"link","titleInlineContent":[{"type":"text","text":"client - server roundtrips"}],"title":"client - server roundtrips","url":"https:\/\/developer.apple.com\/videos\/play\/wwdc2019\/502\/?time=225"},"https://developer.apple.com/wwdc19/502":{"checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc19\/502","type":"download","url":"https:\/\/developer.apple.com\/wwdc19\/502"},"Blackjacx":{"identifier":"Blackjacx","alt":"Profile image of Stefan Herold","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/Blackjacx.jpeg"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10225-Improve-stream-authoring-with-HLS-Tools":{"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10225-Improve-stream-authoring-with-HLS-Tools","abstract":[{"text":"Deliver live and on-demand audio and video to iPhone, iPad, Apple Watch, Mac, PC, and Apple TV with HTTP Live Streaming (HLS). Learn about tools and features to help improve the authoring of your HLS streams and provide low-latency delivery and better audio performance to people watching or listening to your content. We’ll also walk you through creating Low-Latency HLS test streams, integrating audio codecs, and creating master playlists.","type":"text"}],"title":"Improve stream authoring with HLS Tools","type":"topic","role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc20-10225-improve-stream-authoring-with-hls-tools"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-507-HLS-Authoring-for-AirPlay-2-Video":{"type":"topic","title":"HLS Authoring for AirPlay 2 Video","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-507-HLS-Authoring-for-AirPlay-2-Video","url":"\/documentation\/wwdcnotes\/wwdc19-507-hls-authoring-for-airplay-2-video","abstract":[{"type":"text","text":"AirPlay 2 Video lets you share video from Apple devices to popular smart TVs. Learn about the special considerations for seamless delivery of high quality video to these TVs, and how to utilize the validation tools to ensure your content is ready for primetime."}],"role":"sampleCode","kind":"article"},"https://x.com/blackjacxxx":{"identifier":"https:\/\/x.com\/blackjacxxx","type":"link","titleInlineContent":[{"type":"text","text":"X\/Twitter"}],"title":"X\/Twitter","url":"https:\/\/x.com\/blackjacxxx"},"WWDC19-Icon.png":{"identifier":"WWDC19-Icon.png","alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDC19-Icon.png"}]},"Blackjacx.jpeg":{"identifier":"Blackjacx.jpeg","alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/Blackjacx.jpeg"}]},"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","role":"collection","type":"topic","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","kind":"symbol","title":"WWDC Notes"}}}