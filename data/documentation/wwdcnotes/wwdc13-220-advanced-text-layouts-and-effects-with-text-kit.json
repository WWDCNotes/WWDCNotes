{"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC13"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC13-220-Advanced-Text-Layouts-and-Effects-with-Text-Kit"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc13-220-advanced-text-layouts-and-effects-with-text-kit"]}],"kind":"article","sections":[],"metadata":{"title":"Advanced Text Layouts and Effects with Text Kit","modules":[{"name":"WWDC Notes"}],"role":"sampleCode","roleHeading":"WWDC13"},"primaryContentSections":[{"kind":"content","content":[{"level":2,"text":"Text Effects (iOS 7)","anchor":"Text-Effects-iOS-7","type":"heading"},{"inlineContent":[{"type":"text","text":"We can obtain many text effects via the attribute (of a "},{"type":"codeVoice","code":"NSAttrributedString"},{"type":"text","text":") NSTextEffectAttributeName."}],"type":"paragraph"},{"style":"note","name":"Just checked","content":[{"inlineContent":[{"text":"It‚Äôs 2018 (5 years later) and the only effect is still just ","type":"text"},{"code":"NSAttributedString.TextEffectStyle.letterpressStyle","type":"codeVoice"}],"type":"paragraph"}],"type":"aside"},{"level":2,"text":"The Trio","anchor":"The-Trio","type":"heading"},{"inlineContent":[{"type":"text","text":"In TextKit, there are three classes that are used to represent the text in the app and turn it into glyphs which users will see on screen."}],"type":"paragraph"},{"level":3,"text":"NSTextStorage","anchor":"NSTextStorage","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Provides the backing store for the text in the app."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"It‚Äôs a "},{"code":"NSMutableAttributedString","type":"codeVoice"},{"type":"text","text":" subclass: it controls the text unicode characters, attributes etc"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":3,"text":"NSLayoutManager","anchor":"NSLayoutManager","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Manages how that text gets turned into glyphs and has customizable override points."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"It takes the given text (from "},{"code":"NSTextStorage","type":"codeVoice"},{"type":"text","text":") and translates it into glyphs on screen."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"(Via delegation) We can accomplish advanced layout techniques such as folding lines or other advanced text rendering."}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":3,"text":"NSTextContainer","anchor":"NSTextContainer","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Describes the geometry about which the flow lines and line fragments in your text view."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Represents one area on the display in which you‚Äôd like to draw a text."}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"What is a text container?","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"A text container defines a coordinate system and geometry for an "},{"type":"codeVoice","code":"NSLayoutManager"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Exclusion paths live entirely in the "},{"type":"codeVoice","code":"NSTextContainer"},{"type":"text","text":"‚Äôs coordinate space."}],"type":"paragraph"},{"inlineContent":[{"type":"image","identifier":"WWDC13-220-paths"}],"type":"paragraph"},{"style":"note","name":"Note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"It does not do the actual drawing, that‚Äôs up to your text view."}]}],"type":"aside"},{"inlineContent":[{"type":"text","text":"Hit-testing is also done in the "},{"type":"codeVoice","code":"NSTextContainer"},{"type":"text","text":"‚Äôs coordinate space."},{"type":"text","text":"\n"},{"type":"text","text":"Hit testing returns the glyph that was tapped:"}],"type":"paragraph"},{"inlineContent":[{"type":"image","identifier":"WWDC13-220-glyph"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Above: Three characters, one glyph."}],"type":"paragraph"},{"inlineContent":[{"text":"Note: one glyph is not a one-to-one mapping from a glyph to a set of characters or vice-versa.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Therefore we need to use the ","type":"text"},{"code":"NSLayoutManager","type":"codeVoice"},{"text":" conversion:","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"image","identifier":"WWDC13-220-conversion"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"This works chars to glyphs, too."}],"type":"paragraph"},{"inlineContent":[{"identifier":"WWDC13-220-trio","type":"image"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"One "},{"code":"NSLayoutManager","type":"codeVoice"},{"type":"text","text":" can have multiple "},{"code":"NSTextContainer","type":"codeVoice"},{"type":"text","text":", this is how we get multipage and multi column support almost for free."}],"type":"paragraph"},{"inlineContent":[{"text":"With ","type":"text"},{"code":"NSLayoutManager","type":"codeVoice"},{"text":" we can:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"get the exact position and "},{"type":"codeVoice","code":"sizeof"},{"type":"text","text":" each single character üòç (more precisely, of the glyph, which is font + character) and line"}]}]},{"content":[{"inlineContent":[{"text":"Modifying line spacing","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Validating soft line breaking"}]}]},{"content":[{"inlineContent":[{"text":"Custom glyph mapping","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"More info "},{"identifier":"https:\/\/developer.apple.com\/library\/archive\/documentation\/TextFonts\/Conceptual\/CocoaTextArchitecture\/TextSystemArchitecture\/ArchitectureOverview.html","type":"reference","isActive":true},{"type":"text","text":"."}],"type":"paragraph"},{"level":2,"text":"Written By","anchor":"Written-By","type":"heading"},{"columns":[{"size":1,"content":[{"inlineContent":[{"type":"image","identifier":"zntfdr"}],"type":"paragraph"}]},{"size":4,"content":[{"type":"heading","level":3,"text":"Federico Zanetello","anchor":"Federico-Zanetello"},{"type":"paragraph","inlineContent":[{"overridingTitle":"Contributed Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/zntfdr","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/zntfdr.dev","isActive":true,"type":"reference"}]}]}],"numberOfColumns":5,"type":"row"},{"type":"thematicBreak"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference"}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}],"type":"small"},{"inlineContent":[{"text":"All content copyright ¬© 2012 ‚Äì 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}]}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"isActive":true,"type":"reference","identifier":"http:\/\/developer.apple.com\/wwdc13\/220","overridingTitle":"Watch Video"}},"abstract":[{"type":"text","text":"Move beyond the basics and unlock the full power of Text Kit for advanced text handling in your apps. Understand how to use hit detection and pixel-perfect layout information for responding to user touches. Discover new text effects, including a sophisticated letterpress look, and dive deeper into the mechanics of Text Kit for displaying multi-page documents and custom layouts."}],"schemaVersion":{"patch":0,"minor":3,"major":0},"references":{"doc://WWDCNotes/documentation/WWDCNotes":{"role":"collection","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","type":"topic","kind":"symbol","url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC13":{"url":"\/documentation\/wwdcnotes\/wwdc13","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC13","title":"WWDC13","abstract":[{"type":"text","text":"Xcode 5, iOS 7, macOS 10.9 (Mavericks)."}],"role":"collectionGroup","type":"topic","images":[{"type":"icon","identifier":"WWDC13-Icon.png"},{"type":"card","identifier":"WWDC13.jpeg"}]},"WWDC13-220-conversion":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC13-220-conversion.png"}],"identifier":"WWDC13-220-conversion","type":"image","alt":null},"https://github.com/zntfdr":{"titleInlineContent":[{"type":"text","text":"GitHub"}],"url":"https:\/\/github.com\/zntfdr","identifier":"https:\/\/github.com\/zntfdr","title":"GitHub","type":"link"},"WWDC13-220-glyph":{"identifier":"WWDC13-220-glyph","type":"image","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC13-220-glyph.png","traits":["1x","light"]}]},"https://developer.apple.com/library/archive/documentation/TextFonts/Conceptual/CocoaTextArchitecture/TextSystemArchitecture/ArchitectureOverview.html":{"title":"here","identifier":"https:\/\/developer.apple.com\/library\/archive\/documentation\/TextFonts\/Conceptual\/CocoaTextArchitecture\/TextSystemArchitecture\/ArchitectureOverview.html","url":"https:\/\/developer.apple.com\/library\/archive\/documentation\/TextFonts\/Conceptual\/CocoaTextArchitecture\/TextSystemArchitecture\/ArchitectureOverview.html","titleInlineContent":[{"text":"here","type":"text"}],"type":"link"},"https://zntfdr.dev":{"titleInlineContent":[{"type":"text","text":"Blog"}],"url":"https:\/\/zntfdr.dev","identifier":"https:\/\/zntfdr.dev","title":"Blog","type":"link"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}]},"WWDC13-220-trio":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC13-220-trio.png"}],"identifier":"WWDC13-220-trio","type":"image","alt":null},"WWDCNotes.png":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}],"identifier":"WWDCNotes.png","type":"image"},"zntfdr.jpeg":{"identifier":"zntfdr.jpeg","type":"image","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}]},"WWDC13.jpeg":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC13.jpeg"}],"identifier":"WWDC13.jpeg","type":"image","alt":null},"WWDC13-Icon.png":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC13-Icon.png","traits":["1x","light"]}],"identifier":"WWDC13-Icon.png","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"title":"Federico Zanetello (332 notes)","type":"topic","role":"sampleCode","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","kind":"article","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}],"url":"\/documentation\/wwdcnotes\/zntfdr"},"zntfdr":{"identifier":"zntfdr","type":"image","alt":"Profile image of Federico Zanetello","variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}]},"http://developer.apple.com/wwdc13/220":{"identifier":"http:\/\/developer.apple.com\/wwdc13\/220","url":"http:\/\/developer.apple.com\/wwdc13\/220","checksum":null,"type":"download"},"WWDC13-220-paths":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC13-220-paths.png","traits":["1x","light"]}],"identifier":"WWDC13-220-paths","type":"image"}}}