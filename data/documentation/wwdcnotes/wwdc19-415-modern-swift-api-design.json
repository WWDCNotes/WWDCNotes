{"kind":"article","variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc19-415-modern-swift-api-design"]}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-415-Modern-Swift-API-Design","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19"]]},"abstract":[{"text":"Every programming language has a set of conventions that people come to expect. Learn about the patterns that are common to Swift API design, with examples from new APIs like SwiftUI, Combine, and RealityKit. Whether you‚Äôre developing an app as part of a team, or you‚Äôre publishing a library for others to use, find out how to use new features of Swift to ensure clarity and correct use of your APIs.","type":"text"}],"primaryContentSections":[{"content":[{"text":"Overview","level":2,"type":"heading","anchor":"overview"},{"inlineContent":[{"text":"The most important goal as an API designer: ","type":"text"},{"inlineContent":[{"text":"Clarity at the point of use","type":"text"}],"type":"emphasis"},{"text":".","type":"text"}],"type":"paragraph"},{"text":"`@DynamicMemberLookup`","level":2,"type":"heading","anchor":"DynamicMemberLookup"},{"inlineContent":[{"text":"It can be used to expose all the properties of a hidden object as if they belonged to the main object.","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["@dynamicMemberLookup","struct Material { ","  public var roughness: Float","  public var color: Color ","","  private var _texture: Texture ","","  public subscript<T>(","  \tdynamicMember keyPath: ReferenceWritableKeyPath<Texture, T>","  ) -> T { ","  \tget { _texture[keyPath: keyPath] }","  \tset { ","      if !isKnownUniquelyReferenced(&_texture) { ","      \t_texture = Texture (copying: _texture) ","      }","      _texture[keyPath: keyPath] = newValue ","    }","  }","}"]},{"text":"`@PropertyWrapper`","level":2,"type":"heading","anchor":"PropertyWrapper"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Provides similar benefits to the built-in lazy"}]}]},{"content":[{"inlineContent":[{"text":"Eliminates boilerplate.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Documents semantics at the point of definition.","type":"text"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"Property Wrappers can be seen as generic getters and setters:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["\/\/ Implementing a Property Wrapper ","","@propertyWrapper ","public struct LateInitialized<Value> { ","\tprivate var storage: Value?","","  public init() { ","    storage = nil ","  }","","  public var value: Value {","  \tget { ","      guard let value = storage else {","      \tfatalError(\"value has not yet been set!\") ","      } ","      return value ","    }","    set { ","      storage = newValue ","    }","  }","}"]},{"syntax":"swift","type":"codeListing","code":["\/\/ Uses of property wrappers expand into a stored property and a computed property public ","","public struct MyType {","  @LateInitialized public var text: String ","}","","\/\/ Compiler-synthesized code üëáüèª","public struct MyType {","  var $text: LateInitialized<String> = LateInitialized<String>()","","  public var text: String { ","  \tget { $text. value } ","  \tset { $text. value = newValue }","  }","}"]},{"inlineContent":[{"text":"We can even pass values to the property initializer:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["\/\/ Defensive Copying ","","@propertyWrapper ","public struct DefensiveCopying<Value: NSCopying> {","\tprivate var storage: Value ","","  public init(initialValue value: Value) {","\t  storage = value. copy () as! Value ","  }","","  public var value: Value {","  \tget { storage } ","  \tset { ","      storage = newValue.copy() as! Value ","    }","  }","}"]},{"syntax":"swift","type":"codeListing","code":["\/\/ Initializing the backing storage property: ","","public struct MyType { ","  @DefensiveCopying(withoutCopying: UIBezierPath())","  public var path: UIBezierPath ","}"]},{"text":"Written By","level":2,"type":"heading","anchor":"Written-By"},{"columns":[{"content":[{"inlineContent":[{"identifier":"zntfdr","type":"image"}],"type":"paragraph"}],"size":1},{"content":[{"level":3,"type":"heading","anchor":"Federico-Zanetello","text":"Federico Zanetello"},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","type":"reference","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"overridingTitle":"Contributed Notes","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/github.com\/zntfdr","type":"reference","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/zntfdr.dev","type":"reference","isActive":true}]}],"size":4}],"type":"row","numberOfColumns":5},{"type":"thematicBreak"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference","isActive":true}],"type":"paragraph"},{"text":"Related Sessions","level":2,"type":"heading","anchor":"Related-Sessions"},{"style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10253-Write-a-DSL-in-Swift-using-result-builders","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-216-SwiftUI-Essentials","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-226-Data-Flow-Through-SwiftUI","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-237-Building-Custom-Views-with-SwiftUI","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-603-Introducing-RealityKit-and-Reality-Composer","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-721-Combine-in-Practice"],"type":"links"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright ¬© 2012 ‚Äì 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}],"kind":"content"}],"schemaVersion":{"major":0,"patch":0,"minor":3},"metadata":{"roleHeading":"WWDC19","modules":[{"name":"WWDC Notes"}],"role":"sampleCode","title":"Modern Swift API Design"},"sampleCodeDownload":{"kind":"sampleDownload","action":{"identifier":"https:\/\/developer.apple.com\/wwdc19\/415","type":"reference","isActive":true,"overridingTitle":"Watch Video (41 min)"}},"sections":[],"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-216-SwiftUI-Essentials":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-216-SwiftUI-Essentials","role":"sampleCode","abstract":[{"type":"text","text":"Take your first deep-dive into building an app with SwiftUI. Learn about Views and how they work. From basic controls to sophisticated containers like lists and navigation stacks, SwiftUI enables the creation of great user interfaces, faster and more easily. See how basic controls like Button are both simple yet versatile. Discover how to compose these pieces into larger, full-featured user interfaces that facilitate building great apps with SwiftUI. Build your SwiftUI skills as you learn the essentials of Apple‚Äôs new declarative framework."}],"kind":"article","title":"SwiftUI Essentials","url":"\/documentation\/wwdcnotes\/wwdc19-216-swiftui-essentials","type":"topic"},"WWDC19.jpeg":{"identifier":"WWDC19.jpeg","variants":[{"url":"\/images\/WWDCNotes\/WWDC19.jpeg","traits":["1x","light"]}],"type":"image","alt":null},"WWDCNotes.png":{"identifier":"WWDCNotes.png","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}],"type":"image"},"https://developer.apple.com/wwdc19/415":{"checksum":null,"url":"https:\/\/developer.apple.com\/wwdc19\/415","identifier":"https:\/\/developer.apple.com\/wwdc19\/415","type":"download"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19":{"role":"collectionGroup","images":[{"type":"icon","identifier":"WWDC19-Icon.png"},{"type":"card","identifier":"WWDC19.jpeg"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19","title":"WWDC19","type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc19","abstract":[{"text":"Xcode 11, Swift 5.1, iOS 13, macOS 10.15 (Catalina), tvOS 13, watchOS 6.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"type":"codeVoice","code":"Combine"},{"text":", ","type":"text"},{"type":"codeVoice","code":"Core Haptics"},{"text":", ","type":"text"},{"type":"codeVoice","code":"Create ML"},{"text":", and more.","type":"text"}]},"WWDC19-Icon.png":{"identifier":"WWDC19-Icon.png","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC19-Icon.png"}],"type":"image","alt":null},"zntfdr":{"alt":"Profile image of Federico Zanetello","variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}],"identifier":"zntfdr","type":"image"},"zntfdr.jpeg":{"identifier":"zntfdr.jpeg","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/zntfdr.jpeg"}],"type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-721-Combine-in-Practice":{"role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc19-721-combine-in-practice","title":"Combine in Practice","kind":"article","abstract":[{"text":"Expand your knowledge of Combine, Apple‚Äôs new unified, declarative framework for processing values over time. Learn about how to correctly handle errors, schedule work and integrate Combine into your app today.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-721-Combine-in-Practice","type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10253-Write-a-DSL-in-Swift-using-result-builders":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10253-Write-a-DSL-in-Swift-using-result-builders","kind":"article","abstract":[{"type":"text","text":"Some problems are easier to solve by creating a customized programming language, or ‚Äúdomain-specific language.‚Äù While creating a DSL traditionally requires writing your own compiler, you can instead use result builders with Swift 5.4 to make your code both easier to read and maintain. We‚Äôll take you through best practices for designing a custom language for Swift: Learn about result builders and trailing closure arguments, explore modifier-style methods and why they work well, and discover how you can extend Swift‚Äôs normal language rules to turn Swift into a DSL."}],"url":"\/documentation\/wwdcnotes\/wwdc21-10253-write-a-dsl-in-swift-using-result-builders","role":"sampleCode","title":"Write a DSL in Swift using result builders"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-603-Introducing-RealityKit-and-Reality-Composer":{"abstract":[{"text":"Architected for AR, RealityKit provides developers access to world-class capabilities for rendering, animation, physics, and spatial audio. See how RealityKit reimagines the traditional 3D engine to make AR development faster and easier for developers than ever before. Understand the building blocks of developing RealityKit based apps and games, and learn about prototyping and producing content for AR experiences with Reality Composer.","type":"text"}],"url":"\/documentation\/wwdcnotes\/wwdc19-603-introducing-realitykit-and-reality-composer","title":"Introducing RealityKit and Reality Composer","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-603-Introducing-RealityKit-and-Reality-Composer","role":"sampleCode","kind":"article"},"https://github.com/zntfdr":{"titleInlineContent":[{"text":"GitHub","type":"text"}],"identifier":"https:\/\/github.com\/zntfdr","url":"https:\/\/github.com\/zntfdr","type":"link","title":"GitHub"},"https://zntfdr.dev":{"title":"Blog","url":"https:\/\/zntfdr.dev","identifier":"https:\/\/zntfdr.dev","titleInlineContent":[{"text":"Blog","type":"text"}],"type":"link"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-237-Building-Custom-Views-with-SwiftUI":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-237-Building-Custom-Views-with-SwiftUI","role":"sampleCode","abstract":[{"text":"Learn how to build custom views and controls in SwiftUI with advanced composition, layout, graphics, and animation. See a demo of a high performance, animatable control and watch it made step by step in code. Gain a deeper understanding of the layout system of SwiftUI.","type":"text"}],"kind":"article","title":"Building Custom Views with SwiftUI","url":"\/documentation\/wwdcnotes\/wwdc19-237-building-custom-views-with-swiftui","type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"title":"Federico Zanetello (332 notes)","type":"topic","role":"sampleCode","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","kind":"article","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}],"url":"\/documentation\/wwdcnotes\/zntfdr"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-226-Data-Flow-Through-SwiftUI":{"role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-226-Data-Flow-Through-SwiftUI","title":"Data Flow Through SwiftUI","type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc19-226-data-flow-through-swiftui","abstract":[{"type":"text","text":"SwiftUI was built from the ground up to let you write beautiful and correct user interfaces free of inconsistencies. Learn how to connect your data as dependencies while keeping the UI fully predictable and error free. Familiarize yourself with SwiftUI‚Äôs powerful data flow tools and understand what the best tool is for each situation."}]},"doc://WWDCNotes/documentation/WWDCNotes":{"role":"collection","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","type":"topic","kind":"symbol","url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}]}}}