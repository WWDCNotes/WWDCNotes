{"metadata":{"title":"Streamline sign-in with passkey upgrades and credential managers","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC24","role":"sampleCode"},"schemaVersion":{"patch":0,"minor":3,"major":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10125-Streamline-signin-with-passkey-upgrades-and-credential-managers"},"abstract":[{"type":"text","text":"Learn how to automatically upgrade existing, password-based accounts to use passkeys. We‚Äôll share why and how to improve account security and ease of sign-in, information about new features available for credential manager apps, and how to make your app information shine in the new Passwords app."}],"primaryContentSections":[{"content":[{"level":2,"type":"heading","text":"Key Takeaways","anchor":"Key-Takeaways"},{"type":"paragraph","inlineContent":[{"type":"text","text":"üöÄ Deploy Passkeys."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"üîõ Enable automatic passkey upgrade."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"üîÑ Update website metadata."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"‚ôªÔ∏è Refresh verification code setup."}]},{"level":2,"type":"heading","text":"Presenter","anchor":"Presenter"},{"type":"paragraph","inlineContent":[{"text":"Garret Davidson, Authentication Experience Engineer","type":"text"}]},{"level":2,"type":"heading","text":"Automatic passkey upgrades","anchor":"Automatic-passkey-upgrades"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Enhance security and streamline sign-ins with automatic passkey upgrades."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Simplified Sign-In","type":"text"}],"type":"strong"},{"text":": Traditional sign-ins require multiple steps (username, password, SMS verification), whereas passkeys offer a seamless, one-tap process.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"User-Friendly Transition","type":"text"}]},{"type":"text","text":": Automatic upgrades create passkeys without interruptions, making the transition to secure sign-ins effortless."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Improved Security","type":"text"}]},{"type":"text","text":": Passkeys provide a faster, more secure alternative to traditional multi-step authentication."}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Broad Applicability"}]},{"type":"text","text":": This feature works seamlessly for both apps and websites."}],"type":"paragraph"}]}]},{"level":3,"type":"heading","text":"The Passkey journey","anchor":"The-Passkey-journey"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Phishing Risks","type":"text"}],"type":"strong"},{"text":": Phishing and stolen credential attacks are common forms of account compromise.","type":"text"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Passkey Advantages"}],"type":"strong"},{"text":": Passkeys prevent phishing, can‚Äôt be forgotten, rarely need resets, and offer one-tap sign-ins.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Current Vulnerabilities","type":"text"}],"type":"strong"},{"text":": Most existing accounts rely on phishable factors like passwords, SMS, and email codes.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Transition Period"}]},{"type":"text","text":": The industry is shifting from phishable sign-ins to secure methods like passkeys."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Gradual Introduction","type":"text"}],"type":"strong"},{"text":": Adding passkeys as an alternative sign-in method helps users transition at their own pace.","type":"text"}],"type":"paragraph"}]}]},{"level":3,"type":"heading","text":"Automatic passkey upgrades","anchor":"Automatic-passkey-upgrades"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"System Request"}],"type":"strong"},{"text":": Your app requests the system to create a passkey.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Internal Checks"}],"type":"strong"},{"text":": The system checks if creating a passkey makes sense, ensuring conditions like credential manager setup and passkey support are met.","type":"text"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Credential Manager"}],"type":"strong"},{"text":": If the system approves, the request goes to the credential manager, which checks if it recently filled a username and password for the same account.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Passkey Creation"}],"type":"strong"},{"text":": If conditions are met, a new passkey is returned to your app; otherwise, an error is returned.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Error Handling","type":"text"}]},{"type":"text","text":": An error indicates that a passkey wasn‚Äôt created this time, not necessarily a problem."}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Note:"}]},{"text":" Automatic passkey upgrades act as a progressive enhancement, creating passkeys smoothly without requiring additional user prompts or interrupting app usage. While not guaranteed to register a passkey every time, it enhances user experience when it does.","type":"text"}]}],"type":"aside","name":"Note","style":"note"},{"type":"codeListing","syntax":"swift","code":["\/\/ example of a password-based sign-in flow, which offers to create a passkey. ","","func signIn() async throws {","let userInfo = try await signInWithPassword()","guard !userInfo.hasPasskey else { return }","let provider = ASAuthorizationPlatformPublicKeyCredentialProvider(relyingPartyIdentifier: \"example\")",""," guard try offerPasskeyUpsell() else { return }","    let request = provider.createCredentialRegistrationRequest(","        challenge: try await fetchChallenge(),","        name: userInfo.user,","        userID: userInfo.accountID)","","    do {","        let passkey = try await authorizationController.performRequest(request)","        \/\/ Save new passkey to the backend","    } catch { ‚Ä¶ }","}"]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Current Practice"}]},{"type":"text","text":": Many apps offer passkey upgrades via a dialog after sign-in."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Automatic Upgrades"}],"type":"strong"},{"text":": With automatic passkey upgrades, this dialog is unnecessary.","type":"text"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Conditional Request","type":"text"}],"type":"strong"},{"text":": Use ","type":"text"},{"type":"codeVoice","code":".conditional"},{"text":" request style; if conditions are met, a passkey is created, and a notification is shown without interrupting the app.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Error Handling"}]},{"text":": If conditions aren‚Äôt met, you receive an error with no UI shown; you can then show an upsell dialog or try again later.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Transition to Passkeys"}],"type":"strong"},{"text":": The industry is moving from passwords to passkeys, with automatic upgrades accelerating this shift.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Enhanced Security"}],"type":"strong"},{"text":": Passkeys improve account security by eliminating password vulnerabilities.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Development Phases","type":"text"}]},{"type":"text","text":": Implementing passkeys involves typical development stages: learning, building, testing, and shipping."}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Simplified Sign-Ins","type":"text"}],"type":"strong"},{"text":": Passkeys make sign-ins easier while bolstering security.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Eliminate Phishable Factors"}]},{"type":"text","text":": Fully protect accounts by removing all phishable sign-in options, including passwords and many multi-factor authentication methods."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Faster Sign-Ins"}]},{"text":": Passkeys significantly speed up the sign-in process.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Enhanced Security"}]},{"type":"text","text":": They provide stronger security compared to common multi-factor methods."}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Ultimate Goal"}],"type":"strong"},{"text":": Eliminating passwords is the ultimate aim of deploying passkeys.","type":"text"}],"type":"paragraph"}]}]},{"level":2,"type":"heading","text":"Improvements for credential managers","anchor":"Improvements-for-credential-managers"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Autofill passkey upgrades.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Autofill for verification codes."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"AutoFill text from editing menu.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"New Features","type":"text"}],"type":"strong"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Additions to the existing credential manager API.","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Support"}],"type":"strong"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"New keys for "},{"type":"codeVoice","code":"Info.plist"},{"type":"text","text":" and matching APIs detailed in the Authentication Services documentation."}],"type":"paragraph"}]}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Credential Provider"}],"type":"strong"},{"type":"text","text":": Now handles passwords, passkeys, and verification codes."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"AutoFill","type":"text"}]},{"text":": Select up to three apps for use with AutoFill.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Improvements"}],"type":"strong"},{"text":": Enhancements for credential managers.","type":"text"}],"type":"paragraph"}]}]},{"level":2,"type":"heading","text":"Passwords app","anchor":"Passwords-app"},{"type":"paragraph","inlineContent":[{"text":"In the app, your website‚Äôs name and icon are prominently displayed, reflecting its personality. You can customize the display of your website and app using existing standards.","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"The passkeys section highlights apps and websites with phishing-resistant sign-ins, and there‚Äôs a section for easy access to verification codes, similar to a dedicated authenticator app.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"The Security section lists weak, reused, or leaked passwords, and offers a Change Password button if the well-known URL is adopted."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"On macOS, users can enable a menu bar item for quick access to passwords and verification codes, and easily import or export passwords from another credential manager.","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Updating Website Appearance(e.g.)","type":"text"}],"type":"strong"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Account Display"}],"type":"strong"},{"text":": The Passwords app combines passkeys and passwords for the same account into a single entry.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"OpenGraph Metadata"}],"type":"strong"},{"text":": If adopted, the Passwords app displays your sitename; otherwise, it defaults to the domain name.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"<meta name = \"og:sitename\" content=\"shiny\">"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Metadata Declaration","type":"text"}],"type":"strong"},{"text":": Use OpenGraph meta tags in the page‚Äôs head tag for proper website representation across all pages, subdomains, and user agents.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"High-Resolution Icons","type":"text"}]},{"type":"text","text":": Ensure your website has high-resolution icons for better display."}],"type":"paragraph"}]}]},{"level":3,"type":"heading","text":"Verificication code setup","anchor":"Verificication-code-setup"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Offer an ","type":"text"},{"type":"codeVoice","code":"otpauth:"},{"text":" link for one-tap setup of time-based verification codes, in addition to the standard QR code.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When suggesting apps for verification code setup, consider ‚ÄúApple Passwords‚Äù"}]}]}]},{"level":2,"type":"heading","text":"Written By","anchor":"Written-By"},{"type":"row","columns":[{"content":[{"inlineContent":[{"identifier":"RamitSharma991","type":"image"}],"type":"paragraph"}],"size":1},{"content":[{"type":"heading","level":3,"anchor":"Ramit-Sharma","text":"Ramit Sharma"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"type":"reference","isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/RamitSharma991","overridingTitle":"Contributed Notes"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/RamitSharma991"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/x.com\/iosDev_ramit"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/"}]}],"size":4}],"numberOfColumns":5},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true}]},{"level":2,"type":"heading","text":"Related Sessions","anchor":"Related-Sessions"},{"type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10092-Meet-passkeys","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10263-Deploy-passkeys-at-work","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10105-Secure-login-with-iCloud-Keychain-verification-codes"],"style":"list"},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright ¬© 2012 ‚Äì 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}],"kind":"content"}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"identifier":"https:\/\/developer.apple.com\/wwdc24\/10125","overridingTitle":"Watch Video","type":"reference","isActive":true}},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24"]]},"kind":"article","variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc24-10125-streamline-signin-with-passkey-upgrades-and-credential-managers"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"references":{"https://x.com/iosDev_ramit":{"url":"https:\/\/x.com\/iosDev_ramit","identifier":"https:\/\/x.com\/iosDev_ramit","type":"link","title":"X\/Twitter","titleInlineContent":[{"type":"text","text":"X\/Twitter"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10105-Secure-login-with-iCloud-Keychain-verification-codes":{"title":"Secure login with iCloud Keychain verification codes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10105-Secure-login-with-iCloud-Keychain-verification-codes","url":"\/documentation\/wwdcnotes\/wwdc21-10105-secure-login-with-icloud-keychain-verification-codes","type":"topic","role":"sampleCode","abstract":[{"text":"Learn how you can support on-device verification codes in your app or website for a more secure sign-in experience. We‚Äôll explore the latest updates to the iCloud Keychain password manager and discover how verification codes, AutoFill, iCloud Keychain sync, and two-tap setup simplify the multi-step sign-in process. We‚Äôll show you how to support this process in your apps and websites.","type":"text"}],"kind":"article"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10263-Deploy-passkeys-at-work":{"type":"topic","kind":"article","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10263-Deploy-passkeys-at-work","url":"\/documentation\/wwdcnotes\/wwdc23-10263-deploy-passkeys-at-work","title":"Deploy passkeys at work","abstract":[{"type":"text","text":"Discover how you can take advantage of passkeys in managed environments at work. We‚Äôll explore how passkeys can work well in enterprise environments through Managed Apple ID support for iCloud Keychain. We‚Äôll also share how administrators can manage passkeys for specific devices using Access Management controls in Apple Business Manager and Apple School Manager."}]},"doc://WWDCNotes/documentation/WWDCNotes":{"abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"type":"topic","url":"\/documentation\/wwdcnotes","kind":"symbol","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"title":"WWDC Notes","role":"collection"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10092-Meet-passkeys":{"url":"\/documentation\/wwdcnotes\/wwdc22-10092-meet-passkeys","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10092-Meet-passkeys","title":"Meet passkeys","abstract":[{"text":"It‚Äôs time for a security upgrade: Learn how to add support for passkeys to create a quick and easy sign in experience for people, all while offering a radical increase to account security. Passkeys are simple and strong credentials built to eliminate phishing attacks. We‚Äôll share how passkeys are designed with security in mind, show you how people will use them, go over how to integrate passkeys in your log in flow, and explore the platform and web APIs you need to adopt this feature.","type":"text"}],"kind":"article","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC24":{"kind":"article","type":"topic","role":"collectionGroup","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24","images":[{"identifier":"WWDC24-Icon.png","type":"icon"},{"identifier":"WWDC24.jpeg","type":"card"}],"title":"WWDC24","url":"\/documentation\/wwdcnotes\/wwdc24","abstract":[{"type":"text","text":"Xcode 16, Swift 6, iOS 18, macOS 15 (Sequoia), tvOS 18, visionOS 2, watchOS 11."},{"type":"text","text":" "},{"text":"New APIs: Swift Testing, ","type":"text"},{"type":"codeVoice","code":"FinanceKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"TabletopKit"},{"type":"text","text":", and more."}]},"WWDC24-Icon.png":{"identifier":"WWDC24-Icon.png","type":"image","variants":[{"url":"\/images\/WWDC24-Icon.png","traits":["1x","light"]}],"alt":null},"doc://WWDCNotes/documentation/WWDCNotes/RamitSharma991":{"role":"sampleCode","abstract":[{"text":"Indie iOS Dev. Swift, SwiftUI, Obj-C, UX and related.","type":"text"}],"kind":"article","images":[{"identifier":"RamitSharma991.jpeg","type":"card"},{"identifier":"RamitSharma991.jpeg","type":"icon"}],"type":"topic","title":"Ramit Sharma (15 notes)","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/RamitSharma991","url":"\/documentation\/wwdcnotes\/ramitsharma991"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","title":"Contributions are welcome!","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}]},"WWDC24.jpeg":{"identifier":"WWDC24.jpeg","type":"image","variants":[{"url":"\/images\/WWDC24.jpeg","traits":["1x","light"]}],"alt":null},"https://":{"url":"https:\/\/","identifier":"https:\/\/","type":"link","title":"Blog","titleInlineContent":[{"type":"text","text":"Blog"}]},"https://github.com/RamitSharma991":{"url":"https:\/\/github.com\/RamitSharma991","identifier":"https:\/\/github.com\/RamitSharma991","type":"link","title":"GitHub","titleInlineContent":[{"type":"text","text":"GitHub"}]},"WWDCNotes.png":{"identifier":"WWDCNotes.png","type":"image","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"alt":null},"RamitSharma991.jpeg":{"identifier":"RamitSharma991.jpeg","type":"image","variants":[{"url":"\/images\/RamitSharma991.jpeg","traits":["1x","light"]}],"alt":null},"RamitSharma991":{"identifier":"RamitSharma991","type":"image","variants":[{"url":"\/images\/RamitSharma991.jpeg","traits":["1x","light"]}],"alt":"Profile image of Ramit Sharma"},"https://developer.apple.com/wwdc24/10125":{"url":"https:\/\/developer.apple.com\/wwdc24\/10125","checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc24\/10125","type":"download"}}}