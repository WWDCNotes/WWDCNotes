{"kind":"article","metadata":{"modules":[{"name":"WWDC Notes"}],"title":"What‚Äôs new in AppKit","roleHeading":"WWDC23","role":"sampleCode"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23"]]},"primaryContentSections":[{"kind":"content","content":[{"level":2,"text":"Presenters","type":"heading","anchor":"Presenters"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Aasim Kandrikar, AppKit Engineer"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Raleigh Ledet, AppKit Engineer"}],"type":"paragraph"}]}]},{"level":2,"text":"NSTableView\/NSOutlineView improvements","type":"heading","anchor":"NSTableViewNSOutlineView-improvements"},{"level":3,"text":"Easier column visibility üÜï","type":"heading","anchor":"Easier-column-visibility-%F0%9F%86%95"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A new delegate API method on "},{"type":"codeVoice","code":"NSTableViewDelegate"},{"type":"text","text":" to present column customization menus."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The menu allows users to toggle visibility of "},{"type":"strong","inlineContent":[{"type":"text","text":"columns"}]},{"type":"text","text":" in your table"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Specify which columns the user can hide, and AppKit will handle the rest (including localization and state restoration)","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"identifier":"WWDC23-10054-column","type":"image"}]},{"syntax":"swift","code":["func tableView(_ tableView: NSTableView, userCanChangeVisibilityOf column: TableColumn) -> Bool {","   return column.identifier != \"Name\"","}"],"type":"codeListing"},{"level":2,"text":"Progress","type":"heading","anchor":"Progress"},{"type":"paragraph","inlineContent":[{"code":"NSProgressIndicator","type":"codeVoice"},{"text":" now works automatically with the ","type":"text"},{"code":"Progress","type":"codeVoice"},{"text":" type in Foundation","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Assign the progress to the new "},{"code":"observedProgress","type":"codeVoice"},{"type":"text","text":" property on "},{"code":"NSProgressIndicator","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"progress indicator will automatically update its value as the progress changes, even on background threads","type":"text"}],"type":"paragraph"}]}]},{"syntax":"swift","code":["func fetchData() {","   let url = URL(string: \"https:\/\/developer.apple.com\/wwdc23\/\")!","   let task = URLSession.shared.dataTask(with: .init(url: url))","   progressIndicator.observedProgress = task.progress","   task.resume()","}"],"type":"codeListing"},{"level":2,"text":"NSButton updates","type":"heading","anchor":"NSButton-updates"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"‚ö†Ô∏è All previously ","type":"text"},{"inlineContent":[{"text":"discouraged","type":"text"}],"type":"strong"},{"text":" bezel styles are now ","type":"text"},{"inlineContent":[{"type":"text","text":"deprecated"}],"type":"strong"},{"text":".","type":"text"}],"type":"paragraph"}]}]},{"level":3,"text":"‚ö†Ô∏è Bevel style names have changed","type":"heading","anchor":"%E2%9A%A0%EF%B8%8F-Bevel-style-names-have-changed"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Existing bezel style names have changed - no longer using appearance descriptions. Names are now "},{"type":"emphasis","inlineContent":[{"type":"text","text":"semantic"}]},{"type":"text","text":", based on their semantic use."}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Rounded ‚ûî Push","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Regular Square ‚ûî Flexible Push"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Textured Rounded ‚ûî Toolbar","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Recessed ‚ûî Accessory Bar"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Round Rect ‚ûî Accessory Bar Action","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Inline ‚ûî Badge"}],"type":"paragraph"}]}],"type":"unorderedList"}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10054-nsbutton-naming"}]},{"level":3,"text":"New bezel style ‚Äòautomatic‚Äô üÜï","type":"heading","anchor":"New-bezel-style-automatic-%F0%9F%86%95"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"New bezel style "},{"type":"codeVoice","code":".automatic"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Adopts the most appropriate style depending on the contents and view hierarchy position of the button","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"‚ö†Ô∏è Is the "},{"type":"strong","inlineContent":[{"text":"default","type":"text"}]},{"type":"text","text":" style now for all "},{"code":"NSButton","type":"codeVoice"},{"type":"text","text":" initializers"}]}]}],"type":"unorderedList"}]}]},{"level":2,"text":"Inspector split view type üÜï","type":"heading","anchor":"Inspector-split-view-type-%F0%9F%86%95"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"New split view item type like Xcode‚Äôs Inspector pane","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Is a "},{"type":"strong","inlineContent":[{"type":"text","text":"trailing"}]},{"type":"text","text":" split view item"}]}]},{"content":[{"inlineContent":[{"text":"Displays contextual information about content that is currently selected in a document","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"‚ö†Ô∏è Deployable back to Big Sur."}]}]}]},{"syntax":"swift","code":["let inspectorItem = NSSplitViewItem(inspectorWithViewController: inspectorViewController)","splitViewController.addSplitViewItem(inspectorItem)","","func toolbarDefaultItemIdentifiers(_ toolbar: NSToolbar) -> [NSToolbarItem.Identifier] {","    [.toggleSidebar, .sidebarTrackingSeparator, .flexibleSpace, .addPlant, ","     .inspectorTrackingSeparator, .flexibleSpace, .toggleInspector]","}"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10054-inspector-panel"}]},{"level":2,"text":"NSPopover","type":"heading","anchor":"NSPopover"},{"level":3,"text":"Anchoring to a toolbar item üÜï","type":"heading","anchor":"Anchoring-to-a-toolbar-item-%F0%9F%86%95"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Can now anchor a popover to a toolbar item using the ","type":"text"},{"code":"popover.show(relativeTo: toolbarItem)","type":"codeVoice"},{"text":" method","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"If the item is in the toolbar‚Äôs overflow menu the popover appears anchored to the overflow chevron","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10054-toolbar-popover"}]},{"syntax":"swift","code":["func toolbarAction(_ toolbarItem: NSToolbarItem) {","    let popover = NSPopover()","    popover.contentViewController = PopoverViewController()","    popover.show(relativeTo: toolbarItem)","}"],"type":"codeListing"},{"level":3,"text":"Full size content (FINALLY!!!) üÜï","type":"heading","anchor":"Full-size-content-FINALLY-%F0%9F%86%95"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Set "},{"type":"codeVoice","code":".hasFullSizeContent"},{"type":"text","text":" on the popover to extend content into the popover‚Äôs chevron area"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Use the safe area rect to layout content that shouldn‚Äôt be obscured inside the popover","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10054-popover-full-size-content"}]},{"level":2,"text":"Menus","type":"heading","anchor":"Menus"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Completely re-written to take advantage of Cocoa"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"improved performance"}]}]}]},{"level":3,"text":"Section headers üÜï","type":"heading","anchor":"Section-headers-%F0%9F%86%95"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Easily add section headers to your menu using ","type":"text"},{"code":".sectionHeader","type":"codeVoice"},{"text":" class method on ","type":"text"},{"code":"NSMenuItem","type":"codeVoice"},{"text":".","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Used for conveying groups in your menu","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"identifier":"WWDC23-10054-section-headers","type":"image"}]},{"syntax":"swift","code":["menu.items = [","   .sectionHeader(title: \"Section 1\"), .init(title: \"Item 1\"),","   .init(title: \"Item 1\", ‚Ä¶),","   .init(title: \"Item 2\", ‚Ä¶),","","   .sectionHeader(title: \"Section 2\"), .init(title: \"Item 2\"),","   .init(title: \"Item 1\", ‚Ä¶),","   .init(title: \"Item 2\", ‚Ä¶),","   ","   .sectionHeader(title: \"Section 3\"), .init(title: \"Item 3\"),","   .init(title: \"Item 1\", ‚Ä¶),","   .init(title: \"Item 2\", ‚Ä¶)","]"],"type":"codeListing"},{"level":2,"text":"Palette menus üÜï","type":"heading","anchor":"Palette-menus-%F0%9F%86%95"},{"type":"paragraph","inlineContent":[{"text":"An ","type":"text"},{"code":"NSMenu","type":"codeVoice"},{"text":" laying out its items as a horizontal series.","type":"text"}]},{"type":"paragraph","inlineContent":[{"identifier":"WWDC23-10054-palette-menu","type":"image"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Set the menu‚Äôs ","type":"text"},{"type":"codeVoice","code":".presentationStyle"},{"text":" to ","type":"text"},{"type":"codeVoice","code":"palette"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"For each menu item in the palette menu"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"set its image (template images will automatically tint)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"alternatively, set the "},{"type":"codeVoice","code":"onStateImage"},{"type":"text","text":" and "},{"type":"codeVoice","code":"offStateImage"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"text":"The title is used for accessibility ‚Äì ","type":"text"},{"inlineContent":[{"text":"USE IT","type":"text"}],"type":"strong"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Two selection modes, "},{"code":".selectAny","type":"codeVoice"},{"type":"text","text":" and "},{"code":".selectOne","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"You can get\/set item selection via the ","type":"text"},{"code":".selectedItems","type":"codeVoice"},{"text":" property on the menu","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"selectionMode"},{"text":" and ","type":"text"},{"type":"codeVoice","code":"selectedItems"},{"text":" work by organizing menu items that have the ","type":"text"},{"inlineContent":[{"text":"same target\/action pair","type":"text"}],"type":"strong"},{"text":" into a logical group","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"When manually creating palette menu items, give each item the same target\/action pair to take advantage of the new selectionMode and selectedItems behavior","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"NSMenu"},{"type":"text","text":" provides some convenience functions to create common palette menus."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Optional closure parameter that gets called whenever the selection changes"}]}]}]},{"level":4,"text":"Using tinted images","type":"heading","anchor":"Using-tinted-images"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Template images will automatically tint to indicate selection","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10054-palette-menu-tinted"}]},{"syntax":"swift","code":["paletteMenu.presentationStyle = .palette","let item = NSMenuItem(title: \"Fishing\", action: #selector(action(_:)), keyEquivalent: \"\")","item. image = NSImage (systemSymbolName: \"figure.fishing\", accessibilityDescription: \"Fishing\")","paletteMenu.addItem(item)"],"type":"codeListing"},{"level":4,"text":"Using OnState\/OffState images","type":"heading","anchor":"Using-OnStateOffState-images"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":".offStateImage"},{"type":"text","text":" indicates no selection"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":".onStateImage","type":"codeVoice"},{"text":" indicates selection","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10054-palette-menu-on-off-image"}]},{"syntax":"swift","code":["paletteMenu.presentationStyle = .palette","let item = NSMenuItem(title: \"Tag\", action: #selector(action(_:)), keyEquivalent: \"\")","item.offStateImage = flagImage","item.onStateImage = checkImage","paletteMenu.addItem(item)"],"type":"codeListing"},{"level":2,"text":"Menu badges üÜï","type":"heading","anchor":"Menu-badges-%F0%9F%86%95"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Menu items can be easily badged"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A simple string, or a count"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Three specialized count badges that automatically take care of badge localization :-"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"new items"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"alerts"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"updates"}]}]}],"type":"unorderedList"}]}]},{"syntax":"swift","code":["item.badge = NSMenuItemBadge (string: \"#WWDC23\")","item.badge = NSMenuItemBadge (count: 6)","item.badge = newItems (count: 3)","item.badge = .alerts (count: 4)","item.badge = .updates (count: 5)"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"identifier":"WWDC23-10054-menu-badges","type":"image"}]},{"level":2,"text":"Cooperative app activation üÜï","type":"heading","anchor":"Cooperative-app-activation-%F0%9F%86%95"},{"type":"paragraph","inlineContent":[{"text":"In macOS Sonoma, cooperative app activation reduces unexpected application switches, for example, an app switch while you are in the middle of typing.","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Activate is now a ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"request"}]},{"text":", ","type":"text"},{"type":"strong","inlineContent":[{"text":"NOT","type":"text"}]},{"text":" a command","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"ignoringOtherApps"},{"type":"text","text":" parameter is now ignored"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"‚ö†Ô∏è ","type":"text"},{"code":"activate(ignoringOtherApps:)","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"activateIgnoringOtherApps","type":"codeVoice"},{"text":" are now ","type":"text"},{"type":"strong","inlineContent":[{"text":"deprecated","type":"text"}]}],"type":"paragraph"}]}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Only the active application can influence the activate context"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"The currently active application will be asked to yield, and it can choose whether to honor the request."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"To manually hand activation to another application, ","type":"text"},{"code":"yieldActivation","type":"codeVoice"},{"text":" to the target ","type":"text"},{"code":"NSRunningApplication","type":"codeVoice"},{"text":" or bundle identifier","type":"text"}],"type":"paragraph"}]}]},{"level":2,"text":"NSBezierPath\/CGPath","type":"heading","anchor":"NSBezierPathCGPath"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"You can now create an ","type":"text"},{"code":"NSBezierPath","type":"codeVoice"},{"text":" from a ","type":"text"},{"code":"CGPath","type":"codeVoice"},{"text":" and vice versa","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"NOT toll free bridged (always creates a "},{"type":"emphasis","inlineContent":[{"type":"text","text":"copy"}]},{"type":"text","text":" of the path)"}],"type":"paragraph"}]}]},{"level":2,"text":"CADisplayLink üÜï","type":"heading","anchor":"CADisplayLink-%F0%9F%86%95"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Now available on macOS"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"You can get a "},{"type":"codeVoice","code":"CADisplayLink"},{"type":"text","text":" from an "},{"type":"codeVoice","code":"NSView"},{"type":"text","text":", "},{"type":"codeVoice","code":"NSWindow"},{"type":"text","text":" or "},{"type":"codeVoice","code":"NSScreen"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Follows views across screens","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Best approach is to get a CADisplayLink from the most specific applicable element, usually a view"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Automatically suspends when the view is not on a display"}],"type":"paragraph"}]}]},{"syntax":"swift","code":["var displayLink: CADisplayLink?","","func startAnimating() {","   displayLink = displayLink(target: self, selector: #selector (stepAnimation))","   displayLink?.add(to: main, forMode: .common)","}","func stopAnimating() {","   displayLink?.invalidate ()","   displayLink = nil","}"],"type":"codeListing"},{"level":2,"text":"NSColor","type":"heading","anchor":"NSColor"},{"type":"paragraph","inlineContent":[{"identifier":"WWDC23-10054-system-fill-colors","type":"image"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Five new color variations for macOS Sonoma"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":".systemFill"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":".secondarySystemFill"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":".tertiarySystemFill"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":".quaternarySystemFill"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":".quinarySystemFill","type":"codeVoice"}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Automatically adapt to different appearances, such as dark mode and high contrast."}]}]}]},{"level":2,"text":"NSView Clipping ‚ÄºÔ∏è","type":"heading","anchor":"NSView-Clipping-%EF%B8%8F"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Prior to macOS Sonoma, "},{"type":"codeVoice","code":"NSView"},{"type":"text","text":" clips to its bounds"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Starting in macOS Sonoma, ","type":"text"},{"inlineContent":[{"type":"codeVoice","code":"NSView"},{"type":"text","text":" does NOT explicitly clip to its bounds (!!!)"}],"type":"strong"}]}]},{"content":[{"inlineContent":[{"text":"New property ","type":"text"},{"code":"NSView.clipsToBounds","type":"codeVoice"},{"text":" to ","type":"text"},{"text":"explicitly","type":"text"},{"text":" set whether a view clips to bounds.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Supported back to Mavericks 10.9 (!!!). Earlier systems may have problems with "},{"type":"codeVoice","code":".clipsToBounds = false"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"‚ö†Ô∏è An "},{"type":"codeVoice","code":"NSView"},{"type":"text","text":"s calculated "},{"type":"codeVoice","code":"visibleRect"},{"type":"text","text":" "},{"type":"strong","inlineContent":[{"type":"text","text":"may extend past its bounds"}]}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"‚ö†Ô∏è "},{"type":"codeVoice","code":"dirtyRect"},{"type":"text","text":" is "},{"type":"strong","inlineContent":[{"type":"text","text":"no longer constrained to the view‚Äôs bounds"}]}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Drawing outside the "},{"type":"codeVoice","code":"dirtyRect"},{"type":"text","text":" is "},{"type":"strong","inlineContent":[{"text":"always","type":"text"}]},{"type":"text","text":" safe"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"‚ö†Ô∏è In macOS Sonoma, "},{"type":"strong","inlineContent":[{"type":"text","text":"most "},{"type":"codeVoice","code":"NSView"},{"type":"text","text":"s no longer clip to their bounds"}]}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Hit testing "},{"inlineContent":[{"type":"text","text":"remains unchanged"}],"type":"strong"}]}]}]},{"level":4,"text":"Important takeaways","type":"heading","anchor":"Important-takeaways"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"text":"AppKit reserves the right to pass a dirtyRect that is larger than the view‚Äôs bounds","type":"text"}],"type":"strong"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"AppKit also reserves the right to subdivide drawing into as many rectangles as it needs"}]}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"This means that you should use the ","type":"text"},{"code":"dirtyRect","type":"codeVoice"},{"text":" to decide ","type":"text"},{"inlineContent":[{"type":"text","text":"what to draw"}],"type":"strong"},{"text":", not where to draw!","type":"text"}]},{"level":2,"text":"Symbols üÜï","type":"heading","anchor":"Symbols-%F0%9F%86%95"},{"level":3,"text":"Symbol Effects","type":"heading","anchor":"Symbol-Effects"},{"type":"paragraph","inlineContent":[{"text":"Symbol effects are great way to emphasize an action that has occurred or state change in your apps.","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Set an "},{"type":"codeVoice","code":"NSImageView"},{"type":"text","text":"‚Äôs image property to a symbol image"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"call addSymbolEffect to the image view"}],"type":"paragraph"}]}]},{"syntax":"swift","code":["wifiImageView.image = NSImage(systemSymbolName: \"wifi\", accessibilityDescription: \"wifi icon\")","wifiImageView.addSymbolEffect(.variableColor.iterative, options: .repeating)"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"text":"See: ","type":"text"},{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc23\/10258","isActive":true}]},{"level":3,"text":"Symbol Localization","type":"heading","anchor":"Symbol-Localization"},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10054-locale-specific-images"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Asset catalog images and symbols now automatically adapt to the system locale language"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Access alternate variants using "},{"type":"codeVoice","code":"image(locale: Locale)"}]}]}]},{"level":2,"text":"High Dynamic Range (HDR) content üÜï","type":"heading","anchor":"High-Dynamic-Range-HDR-content-%F0%9F%86%95"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Starting with macOS Sonoma, "},{"type":"codeVoice","code":"NSImageView"},{"type":"text","text":" now displays HDR images in HDR on Extended Dynamic Range capable hardware."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"To display HDR content in standard dynamic range, use the "},{"type":"codeVoice","code":"preferredImageDynamicRange"},{"type":"text","text":" property"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"See: "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc23\/10181","isActive":true}]},{"level":2,"text":"Asset Catalog static names üÜï","type":"heading","anchor":"Asset-Catalog-static-names-%F0%9F%86%95"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Starting in Xcode 15, Images and colors in your asset catalog are automatically reflected into your code as static properties on "},{"type":"codeVoice","code":"NSImage"},{"type":"text","text":" and "},{"type":"codeVoice","code":"NSColor"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Static properties are non optional, so can use simple .dot notation"}]}]}]},{"syntax":"swift","code":["let imageView = NSImageView(image: .tree)"],"type":"codeListing"},{"level":2,"text":"Typing experience üÜï","type":"heading","anchor":"Typing-experience-%F0%9F%86%95"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Starting with macOS Sonoma, text entry has a new look."}]},{"level":3,"text":"Changes to the editing cursor","type":"heading","anchor":"Changes-to-the-editing-cursor"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Text entry cursor adapts to the current accent color"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Has a cursor accessory view UNDER the cursor which tracks the cursor."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Cursor accessory shows useful information (such as input mode, dictation state, and caps lock state)","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Cursor accessory is pinned to the bottom of the document if the cursor isn‚Äôt visible"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"All apps using standard AppKit text views get this for free"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"‚ö†Ô∏è API is available for custom text views for adoption (add ","type":"text"},{"code":"NSTextInsertionIndicator","type":"codeVoice"},{"text":" as a subview of your custom text view to adopt the behaviour)","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10054-cursor-accessory"}]},{"level":3,"text":"Dictation","type":"heading","anchor":"Dictation"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Leaves a glow as you dictate text (!!!)"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10054-text-entry-glow"}]},{"level":3,"text":"Non-english languages","type":"heading","anchor":"Non-english-languages"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Text entry now uses text styles (like "},{"type":"codeVoice","code":".title1"},{"type":"text","text":", "},{"type":"codeVoice","code":".body"},{"type":"text","text":" etc) to provide custom word wrapping behaviour in different languages to improve language legibility."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Important to start adopting text style in your app."}],"type":"paragraph"}]}]},{"level":2,"text":"Better SwiftUI interaction","type":"heading","anchor":"Better-SwiftUI-interaction"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"SwiftUI has also been updated to allow you to use SwiftUI views and modifiers in more places in your AppKit app.","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Most AppKit classes are now marked as ","type":"text"},{"code":"@MainActor","type":"codeVoice"},{"text":" (restricted to the main thread)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Transferable is a Swift protocol to describe how objects can be serialized and deserialized. This powers features like Drag and Drop and Sharing in SwiftUI. In macOS Sonoma NSImage, NSColor, and NSSound conform to the Transferable protocol. This makes it easier for AppKit apps to adopt features like Drag and Drop or Sharing in SwiftUI Views.","type":"text"}],"type":"paragraph"}]}]},{"level":2,"text":"@ViewLoading","type":"heading","anchor":"ViewLoading"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"In macOS Ventura 13.3 we introduced a new property wrapper for ","type":"text"},{"type":"codeVoice","code":"NSViewController"},{"text":", ","type":"text"},{"type":"codeVoice","code":"@ViewLoading"},{"text":".","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Use ","type":"text"},{"code":"@ViewLoading","type":"codeVoice"},{"text":" on properties that are initialized in ","type":"text"},{"code":"loadView","type":"codeVoice"},{"text":". If these properties were previously optional, you can remove the optionality and any related checks","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A similar property wrapper, "},{"code":"@WindowLoading","type":"codeVoice"},{"type":"text","text":", is also available for properties on "},{"code":"NSWindowController","type":"codeVoice"}]}]}]},{"syntax":"swift","code":["class ViewController: NSViewController {","    @ViewLoading var datePicker: NSDatePicker","    var date = Date() {","        didSet {","            datePicker.dateValue = date","        }","    }","","    override func loadView() {","        super.loadView()","        datePicker = NSDatePicker()","        datePicker.dateValue = date","        view.addSubview(datePicker)","    }","}"],"type":"codeListing"},{"level":2,"text":"Written By","type":"heading","anchor":"Written-By"},{"columns":[{"content":[{"inlineContent":[{"type":"image","identifier":"dagronf"}],"type":"paragraph"}],"size":1},{"content":[{"text":"Darren Ford","type":"heading","level":3,"anchor":"Darren-Ford"},{"inlineContent":[{"type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/dagronf","isActive":true,"overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}]},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/github.com\/dagronf","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/www.linkedin.com\/in\/darren-ford-dev","isActive":true}],"type":"paragraph"}],"size":4}],"type":"row","numberOfColumns":5},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"level":2,"text":"Related Sessions","type":"heading","anchor":"Related-Sessions"},{"style":"list","type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10181-Support-HDR-images-in-your-app","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10252-Build-programmatic-UI-with-Xcode-Previews","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10258-Animate-symbols-in-your-app"]},{"type":"small","inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright ¬© 2012 ‚Äì 2025 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc23\/10054","overridingTitle":"Watch Video (27 min)"}},"schemaVersion":{"major":0,"minor":3,"patch":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10054-Whats-new-in-AppKit"},"sections":[],"abstract":[{"text":"Discover the latest advances in Mac app development. We‚Äôll share improvements to controls and menus and explore the tools that can help you break free from your (view) bounds. Learn how to add motion to your user interface, take advantage of improvements to text input, and integrate your existing code with Swift and SwiftUI.","type":"text"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc23-10054-whats-new-in-appkit"]}],"references":{"WWDC23-10054-section-headers":{"type":"image","identifier":"WWDC23-10054-section-headers","alt":"A menu containing section headers","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10054-section-headers.jpg"}]},"WWDC23-10054-nsbutton-naming":{"alt":"An image showing the mapping between the old naming style for NSButton bezel styles and the new semantic naming","identifier":"WWDC23-10054-nsbutton-naming","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10054-nsbutton-naming.jpg"}]},"WWDC23-10054-popover-full-size-content":{"identifier":"WWDC23-10054-popover-full-size-content","alt":"An image showing how full size content expands into a popover‚Äôs chevron","variants":[{"url":"\/images\/WWDCNotes\/WWDC23-10054-popover-full-size-content.jpg","traits":["1x","light"]}],"type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/dagronf":{"abstract":[{"type":"text","text":"No Bio on GitHub"}],"type":"topic","kind":"article","images":[{"identifier":"dagronf.jpeg","type":"card"},{"identifier":"dagronf.jpeg","type":"icon"}],"role":"sampleCode","title":"Darren Ford (6 notes)","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/dagronf","url":"\/documentation\/wwdcnotes\/dagronf"},"WWDCNotes.png":{"type":"image","identifier":"WWDCNotes.png","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}]},"WWDC23-10054-inspector-panel":{"alt":"An image showing Xcode‚Äôs inspector panel as an example of the new Inspector split-view type","identifier":"WWDC23-10054-inspector-panel","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10054-inspector-panel.jpg"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10252-Build-programmatic-UI-with-Xcode-Previews":{"url":"\/documentation\/wwdcnotes\/wwdc23-10252-build-programmatic-ui-with-xcode-previews","title":"Build programmatic UI with Xcode Previews","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10252-Build-programmatic-UI-with-Xcode-Previews","type":"topic","role":"sampleCode","kind":"article","abstract":[{"text":"Learn how you can use the #Preview macro on Xcode 15 to quickly iterate on your UI code written in SwiftUI, UIKit, or AppKit. Explore a collage of unique workflows for interacting with views right in the canvas, find out how to view multiple variations of UI simultaneously, and discover how you can travel through your widget‚Äôs timeline in seconds to test the transitions between entries. We‚Äôll also show you how to add previews to libraries, provide sample assets, and preview your views in your physical devices to leverage their capabilities and existing data.","type":"text"}]},"WWDC23-10054-menu-badges":{"identifier":"WWDC23-10054-menu-badges","alt":"A menu showing the new badge types","variants":[{"url":"\/images\/WWDCNotes\/WWDC23-10054-menu-badges.jpg","traits":["1x","light"]}],"type":"image"},"dagronf":{"type":"image","identifier":"dagronf","alt":"Profile image of Darren Ford","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/dagronf.jpeg"}]},"https://www.linkedin.com/in/darren-ford-dev":{"url":"https:\/\/www.linkedin.com\/in\/darren-ford-dev","identifier":"https:\/\/www.linkedin.com\/in\/darren-ford-dev","type":"link","title":"Blog","titleInlineContent":[{"text":"Blog","type":"text"}]},"WWDC23-10054-palette-menu-tinted":{"identifier":"WWDC23-10054-palette-menu-tinted","alt":"A palette menu showing a series of templated images","variants":[{"url":"\/images\/WWDCNotes\/WWDC23-10054-palette-menu-tinted.jpg","traits":["1x","light"]}],"type":"image"},"WWDC23-10054-cursor-accessory":{"type":"image","identifier":"WWDC23-10054-cursor-accessory","alt":"Shows the new cursor accessory view underneath the editing cursor","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10054-cursor-accessory.jpg"}]},"WWDC23-Icon.png":{"alt":null,"identifier":"WWDC23-Icon.png","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-Icon.png"}]},"WWDC23.jpeg":{"identifier":"WWDC23.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC23.jpeg","traits":["1x","light"]}],"type":"image"},"WWDC23-10054-locale-specific-images":{"type":"image","identifier":"WWDC23-10054-locale-specific-images","alt":"Shows different locale variations for a SF Symbol","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10054-locale-specific-images.jpg"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23":{"abstract":[{"type":"text","text":"Xcode 15, Swift 5.9, iOS 17, macOS 14 (Sonoma), tvOS 17, visionOS 1, watchOS 10."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"SwiftData"},{"type":"text","text":", "},{"type":"codeVoice","code":"Observation"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit"},{"type":"text","text":" views, and more."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23","url":"\/documentation\/wwdcnotes\/wwdc23","type":"topic","images":[{"type":"icon","identifier":"WWDC23-Icon.png"},{"type":"card","identifier":"WWDC23.jpeg"}],"role":"collectionGroup","title":"WWDC23","kind":"article"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10258-Animate-symbols-in-your-app":{"kind":"article","abstract":[{"text":"Bring delight to your app with animated symbols. Explore the new Symbols framework, which features a unified API to create and configure symbol effects. Learn how SwiftUI, AppKit, and UIKit make it easy to animate symbols in user interfaces. Discover tips and tricks to seamlessly integrate the new animations alongside other app content. To get the most from this session, we recommend first watching ‚ÄúWhat‚Äôs new in SF Symbols 5.‚Äù","type":"text"}],"title":"Animate symbols in your app","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10258-Animate-symbols-in-your-app","role":"sampleCode","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc23-10258-animate-symbols-in-your-app"},"WWDC23-10054-system-fill-colors":{"alt":"The new system fill colors with 5 panels of varying shades","identifier":"WWDC23-10054-system-fill-colors","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10054-system-fill-colors.jpg"}]},"dagronf.jpeg":{"identifier":"dagronf.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/dagronf.jpeg","traits":["1x","light"]}],"type":"image"},"WWDC23-10054-palette-menu-on-off-image":{"type":"image","identifier":"WWDC23-10054-palette-menu-on-off-image","alt":"A palette menu showing a series of on-off images","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10054-palette-menu-on-off-image.jpg"}]},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","title":"Contributions are welcome!","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}]},"https://developer.apple.com/wwdc23/10054":{"identifier":"https:\/\/developer.apple.com\/wwdc23\/10054","type":"download","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc23\/10054"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10181-Support-HDR-images-in-your-app":{"kind":"article","abstract":[{"type":"text","text":"Learn how to identify, load, display, and create High Dynamic Range (HDR) still images in your app. Explore common HDR concepts and find out about the latest updates to the ISO specification. Learn how to identify and display HDR images with SwiftUI and UIKit, create them from ProRAW and RAW captures, and display them in CALayers. We‚Äôll also take you through CoreGraphics support for ISO HDR and share best practices for HDR adoption."}],"title":"Support HDR images in your app","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10181-Support-HDR-images-in-your-app","role":"sampleCode","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc23-10181-support-hdr-images-in-your-app"},"WWDC23-10054-palette-menu":{"type":"image","identifier":"WWDC23-10054-palette-menu","alt":"A menu containing a palette menu containing a series of colored circles","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10054-palette-menu.jpg"}]},"https://developer.apple.com/wwdc23/10181":{"identifier":"https:\/\/developer.apple.com\/wwdc23\/10181","titleInlineContent":[{"type":"text","text":"Support HDR images in your apps"}],"type":"link","title":"Support HDR images in your apps","url":"https:\/\/developer.apple.com\/wwdc23\/10181"},"https://github.com/dagronf":{"url":"https:\/\/github.com\/dagronf","identifier":"https:\/\/github.com\/dagronf","type":"link","title":"GitHub","titleInlineContent":[{"type":"text","text":"GitHub"}]},"WWDC23-10054-column":{"type":"image","identifier":"WWDC23-10054-column","alt":"Image showing the column hiding menu UI","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10054-column.jpg"}]},"doc://WWDCNotes/documentation/WWDCNotes":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","role":"collection","url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"images":[{"identifier":"WWDCNotes.png","type":"icon"}],"title":"WWDC Notes","type":"topic","kind":"symbol"},"WWDC23-10054-text-entry-glow":{"identifier":"WWDC23-10054-text-entry-glow","alt":"Shows text being entered into a text view via dictation and the subtle glow that follows the cursor as the text is entered","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10054-text-entry-glow.jpg"}],"type":"image"},"WWDC23-10054-toolbar-popover":{"alt":"An NSPopover attached to a toolbar item","identifier":"WWDC23-10054-toolbar-popover","type":"image","variants":[{"url":"\/images\/WWDCNotes\/WWDC23-10054-toolbar-popover.jpg","traits":["1x","light"]}]},"https://developer.apple.com/wwdc23/10258":{"type":"link","identifier":"https:\/\/developer.apple.com\/wwdc23\/10258","titleInlineContent":[{"text":"Animate symbols in your app","type":"text"}],"url":"https:\/\/developer.apple.com\/wwdc23\/10258","title":"Animate symbols in your app"}}}