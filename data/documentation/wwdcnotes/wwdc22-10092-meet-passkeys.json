{"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc22-10092-meet-passkeys"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"kind":"content","content":[{"text":"Introduction","anchor":"Introduction","type":"heading","level":2},{"items":[{"content":[{"inlineContent":[{"type":"emphasis","inlineContent":[{"type":"text","text":"next generation authentication technology"}]}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Passwords","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Difficult to use correctly","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Security vs convenience tradeoffs","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Phishable and reusable"}],"type":"paragraph"}]}]}]},{"content":[{"inlineContent":[{"text":"Currently 2-factor authentication takes several steps:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"add passkey button after being signed in"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"system sheet for creating a passkey"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"device generates a passkey","type":"text"}],"type":"paragraph"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"With passkey: just select the user name, Face ID, and you’re signed in!"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Passkeys works on the web, too"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"With FIDO alliance the passkeys work cross-platform"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When on a friends computer, just scan QR code with the phone, it recognizes that it’s for sign in with passkey"}]}]},{"content":[{"inlineContent":[{"text":"Looks simple, but does lots of steps in the background, including proximity check and agreements","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Sharing passkey possible, e.g. via AirDrop","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"text":"Designing for passkeys","anchor":"Designing-for-passkeys","type":"heading","level":2},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Passkeys are replacements for passwords"}]}]},{"content":[{"inlineContent":[{"text":"Refer to them with the noun “passkey”, pluralizes to “passkeys”","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Don’t design new interfaces for logins, just remove the password text field, but keep the user name field"}]}]}],"type":"unorderedList"},{"text":"Passkeys and AutoFill","anchor":"Passkeys-and-AutoFill","type":"heading","level":2},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Built on WebAuthn standard, use public key cryptopgraphy"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Require WebAuthn backend adoption"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Part of ASAuthorization API"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Supports many different credential types, new flexible UI options"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Setup associated domains first:","type":"text"}]}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"json","code":["{","  \"webcredentials\": {","    \"apps\": [ \"A1B2C3D4E5.com.example.Shiny\" ]","  }","}"]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Make sure to use the ","type":"text"},{"code":".username","type":"codeVoice"},{"text":" text content type on text field","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Sign in logic via creating a request and starting the controller"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"swift","code":["func signIn() {","  let challenge: Data = … \/\/ Fetched from server","  let provider =","    ASAuthorizationPlatformPublicKeyCredentialProvider(","      relyingPartyIdentifier: \"example.com\")","  let request =","    provider.createCredentialAssertionRequest(","      challenge: challenge)","","  let controller =","    ASAuthorizationController(","      authorizationRequests: [request])","  controller.delegate = self","  controller.presentationContextProvider = self","","  \/\/ Start the request","  controller.performAutoFillAssistedRequests()","}"]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"System will offer autofill when this logic has been run before the text field is clicked by user"}]}]},{"content":[{"inlineContent":[{"text":"Nothing gets filled in text field, instead this callback will trigger:","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"swift","code":["func authorizationController(controller: ASAuthorizationController,","   didCompleteWithAuthorization authorization: ASAuthorization) {","  ","  guard let passkeyAssertion = authorization.credential as?","    ASAuthorizationPlatformPublicKeyCredentialAssertion","  else { … }","","  let signature = passkeyAssertion.signature","  let clientDataJSON = passkeyAssertion.rawClientDataJSON","","  \/\/ Pass these values to your server, and complete the sign in","  …","}"]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"make sure to verify sign in on the backend using the signature & data","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Same code also allows passkey sign in from nearby devices","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Apple was not showing the password field, only when no passkey (maybe a new best practice?)","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"there’s also a modal request, just call ","type":"text"},{"code":"performRequests","type":"codeVoice"},{"text":" instead, it will present a modal sheet with all available keys","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"On web, annotate your username field with "},{"code":"WebAuthn","type":"codeVoice"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"html","code":["<input type=\"text\" id=\"username-field\" autocomplete=\"username webauthn\" > "]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"AutoFill-assisted WebAuthn request (JavaScript)"}]}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"js","code":["function signIn() {","  if (!PublicKeyCredential.isConditionalMediationAvailable || !PublicKeyCredential.isConditionalMediationAvailable()) {","    \/\/ Browser doesn't support AutoFill-assisted requests.","    return;","  }","","  const options = {","    \"publicKey\": {","      challenge: … \/\/ Fetched from server","    },","    mediation: \"conditional\"","  };","","  navigator.credentials.get(options)","    .then(assertion => { ","      \/\/ Pass the assertion to your server.","    });","}"]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Switching to a modal request by removing the "},{"type":"codeVoice","code":"mediation"},{"type":"text","text":" parameter"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Streamlining sign-in","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Modal request with allow lists:","type":"text"}]}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"js","code":["func signIn(userName: String) {","  let challenge: Data = … \/\/ Fetched from server","  let provider = ASAuthorizationPlatformPublicKeyCredentialProvider(","    relyingPartyIdentifier:\"example.com\")","  let request = provider.createCredentialAssertionRequest(","    challenge: challenge)","","  let credentialIDs: [Data] = … \/\/ Fetched from server for provided userName","  request.allowedCredentials = credentialIDs.map(","    ASAuthorizationPlatformPublicKeyCredentialDescriptor.init(credentialID:))","","  let controller = ASAuthorizationController(authorizationRequests: [request])","  controller.delegate = self","  controller.presentationContextProvider = self","","  \/\/ Start the request","  controller.performRequests()","}"]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Apple platforms always require UV when biometrics are available, always use "},{"type":"codeVoice","code":"userVerification: \"preferred\""}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Using passkeys on the web"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Make AutoFill requests early"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Modal requests require a user gesture"}]}]},{"content":[{"inlineContent":[{"text":"Passkeys replace Safari’s legacy platform authenticator","type":"text"}],"type":"paragraph"}]}]}]}],"type":"unorderedList"},{"text":"Written By","anchor":"Written-By","type":"heading","level":2},{"columns":[{"size":1,"content":[{"inlineContent":[{"type":"image","identifier":"Jeehut"}],"type":"paragraph"}]},{"size":4,"content":[{"level":3,"anchor":"Cihat-G%C3%BCnd%C3%BCz","type":"heading","text":"Cihat Gündüz"},{"type":"paragraph","inlineContent":[{"overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"type":"reference","isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/Jeehut"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/fline.dev"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/x.com\/Jeehut"}]}]}],"type":"row","numberOfColumns":5},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"text":"Related Sessions","anchor":"Related-Sessions","type":"heading","level":2},{"style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10120-Whats-new-in-web-apps","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10263-Deploy-passkeys-at-work","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10096-Whats-new-in-privacy","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10122-Enhance-your-Sign-in-with-Apple-experience","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110384-Support-multiple-users-in-tvOS-apps","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10098-Whats-new-in-Universal-Links"],"type":"links"},{"type":"small","inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}]},{"type":"small","inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}]}]}],"schemaVersion":{"minor":3,"patch":0,"major":0},"abstract":[{"text":"It’s time for a security upgrade: Learn how to add support for passkeys to create a quick and easy sign in experience for people, all while offering a radical increase to account security. Passkeys are simple and strong credentials built to eliminate phishing attacks. We’ll share how passkeys are designed with security in mind, show you how people will use them, go over how to integrate passkeys in your log in flow, and explore the platform and web APIs you need to adopt this feature.","type":"text"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10092-Meet-passkeys"},"metadata":{"modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC22","role":"sampleCode","title":"Meet passkeys"},"kind":"article","sampleCodeDownload":{"kind":"sampleDownload","action":{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc22\/10092","overridingTitle":"Watch Video (33 min)"}},"sections":[],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22"]]},"references":{"WWDC22.jpeg":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC22.jpeg","traits":["1x","light"]}],"identifier":"WWDC22.jpeg","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22":{"url":"\/documentation\/wwdcnotes\/wwdc22","abstract":[{"text":"Xcode 14, Swift 5.7, iOS 16, macOS 13 (Ventura), tvOS 16, watchOS 9.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"WeatherKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"ScreenCaptureKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Swift Regex","type":"codeVoice"},{"text":", and more.","type":"text"}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22","role":"collectionGroup","type":"topic","images":[{"type":"icon","identifier":"WWDC22-Icon.png"},{"type":"card","identifier":"WWDC22.jpeg"}],"title":"WWDC22"},"doc://WWDCNotes/documentation/WWDCNotes":{"abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"title":"WWDC Notes","type":"topic","kind":"symbol","role":"collection","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10120-Whats-new-in-web-apps":{"title":"What’s new in web apps","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10120-Whats-new-in-web-apps","role":"sampleCode","abstract":[{"text":"Discover web apps for Mac — a powerful way to experience your website from the Dock. Learn how you can customize your web app to give people the best experience when they add your site. We’ll also share how to take advantage of push notifications and badging for web apps for Mac and Home Screen web apps for iOS and iPadOS.","type":"text"}],"type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc23-10120-whats-new-in-web-apps"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10096-Whats-new-in-privacy":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10096-Whats-new-in-privacy","role":"sampleCode","title":"What’s new in privacy","url":"\/documentation\/wwdcnotes\/wwdc22-10096-whats-new-in-privacy","type":"topic","abstract":[{"text":"At Apple, we believe that privacy is a fundamental human right, and protecting people’s privacy is at the center of everything we do. Discover how our engineering teams build privacy into all of our products and developer frameworks, and learn about the technologies and patterns you can adopt in your apps to build trust and protect your customers.","type":"text"}],"kind":"article"},"doc://WWDCNotes/documentation/WWDCNotes/Jeehut":{"kind":"article","title":"Cihat Gündüz (61 notes)","url":"\/documentation\/wwdcnotes\/jeehut","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","images":[{"type":"card","identifier":"Jeehut.jpeg"},{"type":"icon","identifier":"Jeehut.jpeg"}],"role":"sampleCode","abstract":[{"text":"Spatial-first Indie Developer for  Platforms. Actively contributing to Open Source since 2011!","type":"text"}],"type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10122-Enhance-your-Sign-in-with-Apple-experience":{"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc22-10122-enhance-your-sign-in-with-apple-experience","role":"sampleCode","abstract":[{"text":"Learn how you can provide safe and fast authentication in your app using Sign in with Apple. We’ll show you how you can upgrade password-based accounts into secure, single-tap login credentials, and explore how you can seamlessly handle changes to user sessions in your app. We’ll also help you take advantage of Sign In with Apple across the web and on other platforms.","type":"text"}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10122-Enhance-your-Sign-in-with-Apple-experience","title":"Enhance your Sign in with Apple experience"},"https://developer.apple.com/wwdc22/10092":{"checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc22\/10092","url":"https:\/\/developer.apple.com\/wwdc22\/10092","type":"download"},"WWDC22-Icon.png":{"variants":[{"url":"\/images\/WWDCNotes\/WWDC22-Icon.png","traits":["1x","light"]}],"identifier":"WWDC22-Icon.png","alt":null,"type":"image"},"https://github.com/Jeehut":{"titleInlineContent":[{"text":"GitHub","type":"text"}],"identifier":"https:\/\/github.com\/Jeehut","url":"https:\/\/github.com\/Jeehut","title":"GitHub","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10263-Deploy-passkeys-at-work":{"role":"sampleCode","title":"Deploy passkeys at work","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10263-Deploy-passkeys-at-work","type":"topic","abstract":[{"type":"text","text":"Discover how you can take advantage of passkeys in managed environments at work. We’ll explore how passkeys can work well in enterprise environments through Managed Apple ID support for iCloud Keychain. We’ll also share how administrators can manage passkeys for specific devices using Access Management controls in Apple Business Manager and Apple School Manager."}],"url":"\/documentation\/wwdcnotes\/wwdc23-10263-deploy-passkeys-at-work"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link"},"Jeehut":{"variants":[{"url":"\/images\/WWDCNotes\/Jeehut.jpeg","traits":["1x","light"]}],"identifier":"Jeehut","alt":"Profile image of Cihat Gündüz","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10098-Whats-new-in-Universal-Links":{"kind":"article","title":"What’s new in Universal Links","abstract":[{"type":"text","text":"Universal Links help people access your content, whether or not they have your app installed. Get the details on the latest updates for the Universal Links API, including support for Apple Watch and SwiftUI. Learn how you can reduce the size and complexity of your app-site-association file with enhanced pattern matching features like wildcards, substitution variables, and Unicode support. And discover how cached associated domains data will improve the initial launch experience for people using your app."}],"url":"\/documentation\/wwdcnotes\/wwdc20-10098-whats-new-in-universal-links","type":"topic","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10098-Whats-new-in-Universal-Links"},"Jeehut.jpeg":{"identifier":"Jeehut.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/Jeehut.jpeg","traits":["1x","light"]}],"type":"image"},"https://fline.dev":{"titleInlineContent":[{"text":"Blog","type":"text"}],"url":"https:\/\/fline.dev","title":"Blog","identifier":"https:\/\/fline.dev","type":"link"},"https://x.com/Jeehut":{"identifier":"https:\/\/x.com\/Jeehut","title":"X\/Twitter","titleInlineContent":[{"text":"X\/Twitter","type":"text"}],"type":"link","url":"https:\/\/x.com\/Jeehut"},"WWDCNotes.png":{"identifier":"WWDCNotes.png","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}],"type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-110384-Support-multiple-users-in-tvOS-apps":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110384-Support-multiple-users-in-tvOS-apps","title":"Support multiple users in tvOS apps","abstract":[{"type":"text","text":"Discover how you can create personalized, individual experiences in your tvOS app. We’ll show you how you can offer a single checkbox to store profile data, game save states, and more, providing each person with the same level of data separation they’d have on a personal device like iPhone. We’ll also explore how the new user-independent keychain can help you maintain your existing sign on experience for multiple people in the same household."}],"url":"\/documentation\/wwdcnotes\/wwdc22-110384-support-multiple-users-in-tvos-apps","type":"topic","role":"sampleCode","kind":"article"}}}