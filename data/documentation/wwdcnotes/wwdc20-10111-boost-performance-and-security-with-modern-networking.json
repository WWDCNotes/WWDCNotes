{"metadata":{"roleHeading":"WWDC20","modules":[{"name":"WWDC Notes"}],"title":"Boost performance and security with modern networking","role":"sampleCode"},"kind":"article","sampleCodeDownload":{"kind":"sampleDownload","action":{"isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc20\/10111","type":"reference","overridingTitle":"Watch Video (13 min)"}},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc20-10111-boost-performance-and-security-with-modern-networking"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"]]},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10111-Boost-performance-and-security-with-modern-networking","interfaceLanguage":"swift"},"schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"type":"text","text":"Speed up your app and make it more nimble, private and secure with modern networking APIs. Learn about networking protocols like IPv6, HTTP\/2, TLS 1.3 and Encrypted DNS, and how incorporating these within your app and server can provide faster performance and reduce both your power consumption and thermal impact. In addition, discover how adopting the latest security protocols can help you better protect privacy within your app."}],"sections":[],"primaryContentSections":[{"kind":"content","content":[{"type":"heading","level":2,"text":"Overview","anchor":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Topics covered:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Performance","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Security"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Mobility","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Privacy"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"Note that the technologies discussed in this talk must be supported on both the client and the server. Client-side, if you’re using Apple APIs like ","type":"text"},{"code":"URLSession","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"Network.framework","type":"codeVoice"},{"text":", you will get most of this built-in.","type":"text"}]},{"type":"heading","level":2,"text":"1. Performance","anchor":"1-Performance"},{"type":"heading","level":3,"text":"IPv6","anchor":"IPv6"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This is the latest version of the Internet Protocol. Connections using IPv6 have lower latency."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Test that your app works on IPv6-only networks with NAT64 support because this is an App Store submission requirement. You can test this with Internet Sharing on your Mac. If you use "},{"code":"URLSession","type":"codeVoice"},{"type":"text","text":" or "},{"code":"Network.framework","type":"codeVoice"},{"type":"text","text":", your app will already have this capability."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here are some stats:"}]},{"type":"paragraph","inlineContent":[{"identifier":"WWDC20-10111-ipv6_stats","type":"image"}]},{"type":"paragraph","inlineContent":[{"text":"An important take-away is that 20% of applications could get performance gains if their server enabled IPv6.","type":"text"}]},{"type":"heading","level":3,"text":"HTTP\/2","anchor":"HTTP2"},{"type":"paragraph","inlineContent":[{"code":"URLSession","type":"codeVoice"},{"type":"text","text":" has HTTP\/2 built-in, and it will automatically use it on the client if the server also uses HTTP\/2."}]},{"type":"paragraph","inlineContent":[{"text":"HTTP\/2 improves load performance by multiplexing multiple requests to a server on a single connection. This means you don’t need to wait for the end of one response before launching another request.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"HTTP\/2 also provides performance improvements through connection coalescing. This is when the framework recognizes that the next request is to the same server, so it can reuse an existing connection and save setup costs."}]},{"type":"paragraph","inlineContent":[{"text":"Header compression removes extraneous bytes on requests and responses, which means there’s less data to send over the network.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"To learn more about how HTTP\/2 can benefit your app, see ","type":"text"},{"type":"reference","identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/714\/","isActive":true},{"text":".","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"HTTP\/2 statistics:","type":"text"},{"text":" ","type":"text"},{"type":"image","identifier":"WWDC20-10111-http2_stats"}]},{"type":"heading","level":2,"text":"2. Security","anchor":"2-Security"},{"type":"paragraph","inlineContent":[{"type":"text","text":"TLS 1.3 provides faster handshakes and improved security. It is enabled by default in "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" and "},{"type":"codeVoice","code":"Network.framework"},{"type":"text","text":" starting with iOS 13.4 and macOS Mojave (as long as it’s enabled on your server)."}]},{"type":"paragraph","inlineContent":[{"text":"Stats:","type":"text"},{"text":" ","type":"text"},{"type":"image","identifier":"WWDC20-10111-tls_stats"}]},{"type":"heading","level":2,"text":"3. Mobility","anchor":"3-Mobility"},{"type":"paragraph","inlineContent":[{"text":"Multipath TCP allows a single TCP connection from your app to switch between networks. This way, you can reuse one connection instead of starting new ones if the network is flaky or the user is moving between service areas.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Use the ","type":"text"},{"code":"multipathServiceType","type":"codeVoice"},{"text":" property on ","type":"text"},{"code":"URLSessionConfiguration","type":"codeVoice"},{"text":" (if using ","type":"text"},{"code":"URLSession","type":"codeVoice"},{"text":") or ","type":"text"},{"code":"NWParameters","type":"codeVoice"},{"text":" (if using ","type":"text"},{"code":"Network.framework","type":"codeVoice"},{"text":").","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Apple integrated Multipath TCP in the Music app and got these stats:","type":"text"}]},{"type":"paragraph","inlineContent":[{"identifier":"WWDC20-10111-tcp_stats","type":"image"}]},{"type":"paragraph","inlineContent":[{"text":"To find instructions for enabling Multipath TCP on your server, visit ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/multipath-tcp.org\/"},{"text":".","type":"text"}]},{"type":"heading","level":2,"text":"4. Privacy","anchor":"4-Privacy"},{"type":"heading","level":3,"text":"Overview","anchor":"Overview"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"iOS 14 improves privacy protections."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"System services (AirPlay, AirPrint, HomeKit, etc.) don’t give apps private information about your network.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Directly accessing any local network resources, including the use of multicast and broadcast, requires explicit user permission."}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"For more information, see ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2020\/10110\/","isActive":true,"type":"reference"},{"text":".","type":"text"}]},{"type":"heading","level":3,"text":"DNS Privacy","anchor":"DNS-Privacy"},{"type":"paragraph","inlineContent":[{"type":"text","text":"New in iOS 14 and macOS Big Sur is support for secure DNS."}]},{"type":"paragraph","inlineContent":[{"identifier":"WWDC20-10111-dns","type":"image"}]},{"type":"paragraph","inlineContent":[{"text":"For details on how to take advantage of new DNS APIs, see ","type":"text"},{"identifier":"..\/10047","isActive":true,"type":"reference"},{"text":".","type":"text"}]},{"type":"heading","level":3,"text":"Looking Forward","anchor":"Looking-Forward"},{"type":"paragraph","inlineContent":[{"identifier":"WWDC20-10111-encrypted_tls_handshakes","type":"image"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Also, HTTP\/3 is coming out. This is built on top of the new QUIC transport protocol, which has built-in TLS 1.3 security."}]},{"type":"paragraph","inlineContent":[{"text":"HTTP\/3 has:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Multiplexed stream support, but with further reductions to head-of-line blocking than in HTTP\/2. This means losses of any individual requests\/responses won’t hold up other, potentially unrelated, requests.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Improved congestion control and loss recovery.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Built-in mobility so you can move from network to network without interruption."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"IETF standardization in progress."}]}]}]},{"type":"paragraph","inlineContent":[{"text":"iOS 14 and macOS Big Sur include an experimental preview of HTTP\/3 support. In iOS, you can enable this in Developer Settings for apps that use ","type":"text"},{"code":"URLSession","type":"codeVoice"},{"text":". You can also enable it in Safari under “Experimental WebKit Features”.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC20-10111-experimental_http3"}]},{"type":"paragraph","inlineContent":[{"text":"In macOS Big Sur, you can also enable HTTP\/3 for apps that use ","type":"text"},{"type":"codeVoice","code":"URLSession"},{"text":":","type":"text"}]},{"type":"paragraph","inlineContent":[{"identifier":"WWDC20-10111-experimental_http3_mac","type":"image"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Apple is looking for developers to try out HTTP\/3 and file bugs!"}]},{"type":"heading","level":2,"text":"Written By","anchor":"Written-By"},{"type":"row","numberOfColumns":5,"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"identifier":"skhillon","type":"image"}]}]},{"size":4,"content":[{"text":"Sarthak Khillon","anchor":"Sarthak-Khillon","type":"heading","level":3},{"inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/skhillon","overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"type":"reference","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/github.com\/skhillon","type":"reference","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/x.com\/SarthakKhillon","type":"reference","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/www.linkedin.com\/in\/sarthakkhillon\/","type":"reference","isActive":true}],"type":"paragraph"}]}]},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"type":"heading","level":2,"text":"Related Sessions","anchor":"Related-Sessions"},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10047-Enable-encrypted-DNS","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10110-Support-local-network-privacy-in-your-app","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-712-Advances-in-Networking-Part-1"]},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"references":{"WWDC20-10111-experimental_http3":{"identifier":"WWDC20-10111-experimental_http3","type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20-10111-experimental_http3.png"}]},"skhillon":{"alt":"Profile image of Sarthak Khillon","variants":[{"url":"\/images\/WWDCNotes\/skhillon.jpeg","traits":["1x","light"]}],"identifier":"skhillon","type":"image"},"https://developer.apple.com/videos/play/wwdc2020/10110/":{"title":"Support Local Network Privacy In Your App","url":"https:\/\/developer.apple.com\/videos\/play\/wwdc2020\/10110\/","identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2020\/10110\/","type":"link","titleInlineContent":[{"type":"text","text":"Support Local Network Privacy In Your App"}]},"https://x.com/SarthakKhillon":{"titleInlineContent":[{"text":"X\/Twitter","type":"text"}],"identifier":"https:\/\/x.com\/SarthakKhillon","type":"link","title":"X\/Twitter","url":"https:\/\/x.com\/SarthakKhillon"},"skhillon.jpeg":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/skhillon.jpeg","traits":["1x","light"]}],"identifier":"skhillon.jpeg","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10110-Support-local-network-privacy-in-your-app":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10110-Support-local-network-privacy-in-your-app","title":"Support local network privacy in your app","role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc20-10110-support-local-network-privacy-in-your-app","abstract":[{"type":"text","text":"Local network privacy provides added transparency when apps connect to devices on a person’s home network. If your app interacts with devices using Bonjour or other local networking protocols, you must add support for local network privacy permissions in iOS 14. Learn more about the new permission flow and follow along as we guide you through the necessary steps to update your app. We’ll also provide you with some best practices to help you create a frictionless privacy experience."}],"type":"topic","kind":"article"},"https://www.linkedin.com/in/sarthakkhillon/":{"title":"Blog","url":"https:\/\/www.linkedin.com\/in\/sarthakkhillon\/","identifier":"https:\/\/www.linkedin.com\/in\/sarthakkhillon\/","type":"link","titleInlineContent":[{"type":"text","text":"Blog"}]},"doc://WWDCNotes/documentation/WWDCNotes/skhillon":{"images":[{"identifier":"skhillon.jpeg","type":"card"},{"identifier":"skhillon.jpeg","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/skhillon","url":"\/documentation\/wwdcnotes\/skhillon","role":"sampleCode","abstract":[{"text":"No Bio on GitHub","type":"text"}],"type":"topic","title":"Sarthak Khillon (19 notes)","kind":"article"},"WWDC20-10111-ipv6_stats":{"identifier":"WWDC20-10111-ipv6_stats","type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20-10111-ipv6_stats.png"}]},"https://multipath-tcp.org/":{"url":"https:\/\/multipath-tcp.org\/","titleInlineContent":[{"text":"https:\/\/multipath-tcp.org","type":"text"}],"identifier":"https:\/\/multipath-tcp.org\/","title":"https:\/\/multipath-tcp.org","type":"link"},"WWDCNotes.png":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}],"identifier":"WWDCNotes.png","type":"image"},"WWDC20-10111-tcp_stats":{"identifier":"WWDC20-10111-tcp_stats","type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20-10111-tcp_stats.png"}]},"WWDC20-10111-tls_stats":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC20-10111-tls_stats.png","traits":["1x","light"]}],"identifier":"WWDC20-10111-tls_stats","type":"image"},"https://developer.apple.com/videos/play/wwdc2018/714/":{"title":"Optimizing Your App for Today’s Internet","url":"https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/714\/","identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/714\/","type":"link","titleInlineContent":[{"type":"text","text":"Optimizing Your App for Today’s Internet"}]},"../10047":{"titleInlineContent":[{"text":"Enable Encrypted DNS","type":"text"}],"identifier":"..\/10047","type":"link","title":"Enable Encrypted DNS","url":"..\/10047"},"https://github.com/skhillon":{"url":"https:\/\/github.com\/skhillon","titleInlineContent":[{"text":"GitHub","type":"text"}],"identifier":"https:\/\/github.com\/skhillon","title":"GitHub","type":"link"},"WWDC20-10111-experimental_http3_mac":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20-10111-experimental_http3_mac.png"}],"identifier":"WWDC20-10111-experimental_http3_mac","type":"image"},"WWDC20-10111-http2_stats":{"identifier":"WWDC20-10111-http2_stats","type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20-10111-http2_stats.png"}]},"doc://WWDCNotes/documentation/WWDCNotes":{"kind":"symbol","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","role":"collection","url":"\/documentation\/wwdcnotes","type":"topic","title":"WWDC Notes","images":[{"type":"icon","identifier":"WWDCNotes.png"}]},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","type":"link"},"WWDC20-10111-encrypted_tls_handshakes":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20-10111-encrypted_tls_handshakes.png"}],"identifier":"WWDC20-10111-encrypted_tls_handshakes","type":"image"},"WWDC20.jpeg":{"identifier":"WWDC20.jpeg","type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20.jpeg"}]},"https://developer.apple.com/wwdc20/10111":{"checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc20\/10111","url":"https:\/\/developer.apple.com\/wwdc20\/10111","type":"download"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20":{"kind":"article","abstract":[{"text":"Xcode 12, Swift 5.3, iOS 14, macOS 11 (Big Sur), tvOS 14, watchOS 7.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"type":"codeVoice","code":"WidgetKit"},{"text":", ","type":"text"},{"type":"codeVoice","code":"StoreKit Testing"},{"text":", and more.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20","role":"collectionGroup","url":"\/documentation\/wwdcnotes\/wwdc20","type":"topic","title":"WWDC20","images":[{"identifier":"WWDC20-Icon.png","type":"icon"},{"identifier":"WWDC20.jpeg","type":"card"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-712-Advances-in-Networking-Part-1":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-712-Advances-in-Networking-Part-1","abstract":[{"type":"text","text":"Keep up with new and evolving networking protocols and standards by leveraging the modern networking frameworks on all Apple platforms and following best practices for efficiency and performance. In this session, learn about Low Data Mode, Combine in URLSession, WebSocket, and improvements to network mobility."}],"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc19-712-advances-in-networking-part-1","role":"sampleCode","kind":"article","title":"Advances in Networking, Part 1"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10047-Enable-encrypted-DNS":{"title":"Enable encrypted DNS","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc20-10047-enable-encrypted-dns","role":"sampleCode","abstract":[{"text":"When people access the web within your app, their privacy is paramount. Safeguard that information by leveraging encrypted DNS across our platforms to deliver private and secure connectivity within your app. Discover how you can use system DNS settings to connect to encrypted servers or enable encrypted DNS within an app using standard networking APIs.","type":"text"}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10047-Enable-encrypted-DNS"},"WWDC20-Icon.png":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20-Icon.png"}],"identifier":"WWDC20-Icon.png","type":"image"},"WWDC20-10111-dns":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20-10111-dns.png"}],"identifier":"WWDC20-10111-dns","type":"image"}}}