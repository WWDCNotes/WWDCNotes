{"metadata":{"modules":[{"name":"WWDC Notes"}],"title":"Swan’s Quest, Chapter 3: The notable scroll","role":"sampleCode","roleHeading":"WWDC20"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc20-10683-swans-quest-chapter-3-the-notable-scroll"]}],"sections":[],"sampleCodeDownload":{"action":{"overridingTitle":"Watch Video (5 min)","isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc20\/10683"},"kind":"sampleDownload"},"schemaVersion":{"minor":3,"patch":0,"major":0},"abstract":[{"text":"Swift Playgrounds presents “Swan’s Quest,” an interactive adventure in four chapters for all ages. Calling all musicians! In this chapter, our Hero has found a mysterious scroll of music, and only you can help decode it. (Don’t worry if you can’t read music, our clever Lizard is standing by to assist. It’s sure to be a note-worthy experience.)","type":"text"}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10683-Swans-Quest-Chapter-3-The-notable-scroll","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"]]},"primaryContentSections":[{"kind":"content","content":[{"level":2,"type":"heading","text":"Overview","anchor":"overview"},{"content":[{"inlineContent":[{"text":"Swan’s Quest is a series of challenges where each chapter has a specific programming challenge for you that will build on the prior chapters.","type":"text"}],"type":"paragraph"}],"name":"Note","type":"aside","style":"note"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Download the "},{"type":"codeVoice","code":".playgroundbook"},{"type":"text","text":" "},{"identifier":"https:\/\/developer.apple.com\/sample-code\/swift\/swans-quest\/the-notable-scroll.zip","isActive":true,"type":"reference"},{"type":"text","text":"."}]},{"level":2,"type":"heading","text":"Melody","anchor":"Melody"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In this challenge we will play a melody with different length of tones, and we will need to implement this ourselves."}]},{"level":2,"type":"heading","text":"Solution","anchor":"Solution"},{"level":3,"type":"heading","text":"Advice from the Lizard","anchor":"Advice-from-the-Lizard"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"main","type":"text"}],"type":"paragraph"}]}]},{"type":"codeListing","code":["let notes: [Note] = [.quarter(.a4), .quarter(.b4), .quarter(.c4)]"],"syntax":"swift"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"music"}]}]}]},{"type":"codeListing","code":["public protocol PitchProtocol {","    ","    \/\/\/ The sonic frequency of this Pitch","    var frequency: Double { get }","    ","}","","public protocol NoteProtocol {","    associatedtype PitchType: PitchProtocol","    ","    \/\/\/ Play this Note through a ToneOutput","    var tone: Tone { get }","    ","    \/\/\/ The duration of this Note as a multiple of quarter notes, e.g., a half note would equal 2.0, an eight note","    var length: Float { get }","    ","    \/\/\/ Length of the smallest Note supported","    static var shortestSupportedNoteLength: Float { get }","    ","    \/\/\/ Subdivide into a series pitches, according to the shortest supported note","    func subdivide() -> [PitchType]","}","","public enum Note : NoteProtocol {","    case quarter(Pitch)","    case half(Pitch)","    ","    \/\/\/ Play this Note through a ToneOutput","    public var tone: Tone {","        switch self {","        case .quarter(let pitch), .half(let pitch):","            return Tone(pitch: pitch.frequency, volume: 0.3)","        }","    }","    ","    \/\/\/ The duration of this Note as a multiple of quarter notes, e.g., a half note would equal 2.0, an eight note","    public var length: Float {","        switch self {","        case .quarter:","            return 1.0","        case .half:","            return 2.0","        }","    }","    ","    \/\/\/ Length of the smallest Note supported","    public static var shortestSupportedNoteLength: Float {","        return Note.quarter(.a4).length","    }","    ","    \/\/\/ Subdivide into a series pitches, according to the shortest supported note","    public func subdivide() -> [Pitch] {","        switch self {","        case .quarter(let pitch):","            return [pitch]","        case .half(let pitch):","            return [pitch, pitch]","        }","    }","}","","public enum Pitch : Double, PitchProtocol {","    case c3 = 261.63","    case d3 = 293.66","    case e3 = 329.63","    case f3 = 349.23","    case g3 = 392.00","    case a4 = 440.0","    case b4 = 493.88","    case c4 = 523.25","    ","    \/\/\/ The sonic frequency of this Pitch","    public var frequency: Double {","        return self.rawValue","    }","}",""],"syntax":"swift"},{"level":3,"type":"heading","text":"Perdomance at Swan Hall","anchor":"Perdomance-at-Swan-Hall"},{"type":"codeListing","code":["func performance(owner: Assessable) {","    let toneOutput = ToneOutput()","    let quarterPitches: [Pitch] = [.e3, .e3, .f3, .g3, .g3, .f3, .e3, .d3, .c3, .c3, .d3, .e3, .e3, .d3]","    let halfNotePitch: Pitch = .d3","    let notes: [Note] = quarterPitches.map{ Note.quarter($0) } + [Note.half(halfNotePitch)]","    ","    var pitches: [Pitch] = notes","        .flatMap { $0.subdivide() }","        .reversed()","    ","    let interval = TimeInterval(Note.shortestSupportedNoteLength * 0.5)","    Timer.scheduledTimer(withTimeInterval: interval, repeats: true) { timer in","        guard let pitch = pitches.popLast() else {","            toneOutput.stopTones()","            timer.invalidate()","            owner.endPerformance()","            return","        }","        ","        toneOutput.play(tone: Tone(pitch: pitch.frequency, volume: 0.3))","    }","    owner.endPerformance()","}"],"syntax":"swift"},{"level":2,"type":"heading","text":"Written By","anchor":"Written-By"},{"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"identifier":"zntfdr","type":"image"}]}]},{"size":4,"content":[{"level":3,"text":"Federico Zanetello","type":"heading","anchor":"Federico-Zanetello"},{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"overridingTitle":"Contributed Notes"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/zntfdr"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/zntfdr.dev"}]}]}],"type":"row","numberOfColumns":5},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"level":2,"type":"heading","text":"Related Sessions","anchor":"Related-Sessions"},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10643-Build-a-SwiftUI-view-in-Swift-Playgrounds","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10654-Create-Swift-Playgrounds-content-for-iPad-and-Mac","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10681-Swans-Quest-Chapter-1-Voices-in-the-dark","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10682-Swans-Quest-Chapter-2-A-time-for-tones","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10684-Swans-Quest-Chapter-4-The-sequence-completes"]},{"type":"small","inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}]},{"type":"small","inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}]}]}],"kind":"article","references":{"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","kind":"symbol","url":"\/documentation\/wwdcnotes","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"title":"WWDC Notes","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"role":"collection"},"WWDC20-Icon.png":{"identifier":"WWDC20-Icon.png","type":"image","variants":[{"url":"\/images\/WWDC20-Icon.png","traits":["1x","light"]}],"alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10682-Swans-Quest-Chapter-2-A-time-for-tones":{"title":"Swan’s Quest, Chapter 2: A time for tones","role":"sampleCode","kind":"article","abstract":[{"type":"text","text":"Swift Playgrounds presents “Swan’s Quest,” an interactive adventure in four chapters for all ages. In this chapter, our Hero needs your help decoding the Swan’s scroll. Call forth the best of your audio abilities on this one — you’re going to need them."}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10682-Swans-Quest-Chapter-2-A-time-for-tones","url":"\/documentation\/wwdcnotes\/wwdc20-10682-swans-quest-chapter-2-a-time-for-tones"},"WWDCNotes.png":{"identifier":"WWDCNotes.png","type":"image","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"alt":null},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","kind":"article","url":"\/documentation\/wwdcnotes\/zntfdr","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"title":"Federico Zanetello (332 notes)","images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"role":"sampleCode"},"https://github.com/zntfdr":{"identifier":"https:\/\/github.com\/zntfdr","url":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"text":"GitHub","type":"text"}],"title":"GitHub","type":"link"},"https://zntfdr.dev":{"identifier":"https:\/\/zntfdr.dev","url":"https:\/\/zntfdr.dev","titleInlineContent":[{"text":"Blog","type":"text"}],"title":"Blog","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10684-Swans-Quest-Chapter-4-The-sequence-completes":{"title":"Swan’s Quest, Chapter 4: The sequence completes","role":"sampleCode","kind":"article","abstract":[{"type":"text","text":"Swift Playgrounds presents “Swan’s Quest,” an interactive adventure in four chapters for all ages. It’s time for the grand finale: You’ve honed your skills with tones, but in this chapter our Hero needs to sequence multi-part harmony."}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10684-Swans-Quest-Chapter-4-The-sequence-completes","url":"\/documentation\/wwdcnotes\/wwdc20-10684-swans-quest-chapter-4-the-sequence-completes"},"WWDC20.jpeg":{"identifier":"WWDC20.jpeg","type":"image","variants":[{"url":"\/images\/WWDC20.jpeg","traits":["1x","light"]}],"alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10681-Swans-Quest-Chapter-1-Voices-in-the-dark":{"title":"Swan’s Quest, Chapter 1: Voices in the dark","role":"sampleCode","kind":"article","abstract":[{"type":"text","text":"Swift Playgrounds presents “Swan’s Quest,” an interactive adventure in four chapters for all ages. In this chapter, our Hero must navigate a dark cave — and the only way to light the torches is to make them accessible."}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10681-Swans-Quest-Chapter-1-Voices-in-the-dark","url":"\/documentation\/wwdcnotes\/wwdc20-10681-swans-quest-chapter-1-voices-in-the-dark"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"title":"Contributions are welcome!","type":"link"},"zntfdr":{"identifier":"zntfdr","type":"image","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}],"alt":"Profile image of Federico Zanetello"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10654-Create-Swift-Playgrounds-content-for-iPad-and-Mac":{"title":"Create Swift Playgrounds content for iPad and Mac","role":"sampleCode","kind":"article","abstract":[{"type":"text","text":"Learn how to create Swift Playgrounds books that work fluidly across both Mac and iPad and help people of all ages explore the fun of coding in Swift. We’ll walk you through how to customize content for each platform while considering platform settings, and help you take advantage of them in your playgrounds while still providing a smooth cross-platform experience."}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10654-Create-Swift-Playgrounds-content-for-iPad-and-Mac","url":"\/documentation\/wwdcnotes\/wwdc20-10654-create-swift-playgrounds-content-for-ipad-and-mac"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10643-Build-a-SwiftUI-view-in-Swift-Playgrounds":{"kind":"article","type":"topic","abstract":[{"type":"text","text":"Easily prototype and play around with SwiftUI views when you use them with Swift Playgrounds. We’ll show you how to build a SwiftUI view in a Xcode-compatible playground, and explore tools to help you easily edit and preview your code."}],"role":"sampleCode","title":"Build a SwiftUI view in Swift Playgrounds","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10643-Build-a-SwiftUI-view-in-Swift-Playgrounds","url":"\/documentation\/wwdcnotes\/wwdc20-10643-build-a-swiftui-view-in-swift-playgrounds"},"zntfdr.jpeg":{"type":"image","identifier":"zntfdr.jpeg","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}],"alt":null},"https://developer.apple.com/wwdc20/10683":{"type":"download","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc20\/10683","identifier":"https:\/\/developer.apple.com\/wwdc20\/10683"},"https://developer.apple.com/sample-code/swift/swans-quest/the-notable-scroll.zip":{"title":"here","url":"https:\/\/developer.apple.com\/sample-code\/swift\/swans-quest\/the-notable-scroll.zip","titleInlineContent":[{"text":"here","type":"text"}],"identifier":"https:\/\/developer.apple.com\/sample-code\/swift\/swans-quest\/the-notable-scroll.zip","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc20","abstract":[{"type":"text","text":"Xcode 12, Swift 5.3, iOS 14, macOS 11 (Big Sur), tvOS 14, watchOS 7."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"WidgetKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit Testing"},{"type":"text","text":", and more."}],"title":"WWDC20","images":[{"identifier":"WWDC20-Icon.png","type":"icon"},{"identifier":"WWDC20.jpeg","type":"card"}],"role":"collectionGroup"}}}