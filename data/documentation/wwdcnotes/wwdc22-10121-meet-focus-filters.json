{"schemaVersion":{"patch":0,"major":0,"minor":3},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10121-Meet-Focus-filters"},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc22-10121-meet-focus-filters"],"traits":[{"interfaceLanguage":"swift"}]}],"abstract":[{"text":"Discover how you can customize app behaviors based on someone‚Äôs currently enabled Focus. We‚Äôll show you how to use App Intents to define your app‚Äôs Focus filters, act on changes from the system, and present your app‚Äôs views in different ways. We‚Äôll also explore how you can filter notifications and update badge counts.","type":"text"}],"metadata":{"role":"sampleCode","roleHeading":"WWDC22","modules":[{"name":"WWDC Notes"}],"title":"Meet Focus filters"},"primaryContentSections":[{"content":[{"level":2,"anchor":"Focus-filter","text":"Focus filter","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"new way for users to customize app behavior based on the currently enabled Focus"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"Examples:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Calendar.app can show different calendars based if it‚Äôs weekend (Weekend focus) or if it‚Äôs work time (Work focus)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Mail.app can show different mailboxes and notifications based on the active focus"}]}]}],"type":"unorderedList"},{"inlineContent":[{"text":"When to adopt focus filters","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"when your app manages multiple accounts (e.g., for leisure and work)","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"when your app has lots of content that can be filtered"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"when your app should be less distracting (e.g., by turning of badges) for certain focus modes"}]}]}],"type":"unorderedList"},{"inlineContent":[{"text":"How Focus filter work:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Your app defines what can be customized via AppIntents"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"The system exposes to the user what can be configured as a Focus filter"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"The user will configure Focus filter settings in your app"}],"type":"paragraph"}]}],"type":"orderedList"},{"level":2,"anchor":"Defining-a-Focus-filter-in-your-app","text":"Defining a Focus filter in your app","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"implement "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/appintents\/setfocusfilterintent","isActive":true},{"type":"text","text":" - this tells the system that your app is interested in having custom settings per Focus"}],"type":"paragraph"}]}],"type":"orderedList"},{"code":["import AppIntents","","struct ExampleChatAppFocusFilter: SetFocusFilterIntent {","  \/\/\/ Title and description help users discover what your Focus is about.","  \/\/\/","  \/\/\/ Title and description are static and are ready by the system when ","  \/\/\/ your app is installed.","  static var title: LocalizedStringResource = \"Set account, status & look\"","  static var description: LocalizedStringResource? = \"...\"","}"],"syntax":"swift","type":"codeListing"},{"items":[{"content":[{"inlineContent":[{"text":"define your app parameters - these will represent what can be configured within your app by the user","type":"text"}],"type":"paragraph"}]}],"start":2,"type":"orderedList"},{"items":[{"content":[{"inlineContent":[{"text":"each parameter must have a name and a data type (","type":"text"},{"type":"codeVoice","code":"Bool"},{"text":", ","type":"text"},{"type":"codeVoice","code":"String"},{"text":", etc.)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"custom data types are supported via App Intents entities (","type":"text"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/appintents\/appentity","type":"reference"},{"text":")","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"parameter can be marked optionals, meaning that they do not have to be configured"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"non-optional parameters should provide default values","type":"text"}]}]}],"type":"unorderedList"},{"code":["import AppIntents","","struct ExampleChatAppFocusFilter: SetFocusFilterIntent {","  \/\/ ...","","  @Parameter(title: \"Use Dark Mode\", default: false)","  var alwaysUseDarkMode: Bool","","  @Parameter(title: \"Status Message\")","  var status: String?","","  @Parameter(title: \"Selected Account\")","  var account: AccountEntity?","","  \/\/ ...","}"],"syntax":"swift","type":"codeListing"},{"start":3,"items":[{"content":[{"inlineContent":[{"type":"text","text":"set display representation - making your Focus filter appears in system settings with the correct content"}],"type":"paragraph"}]}],"type":"orderedList"},{"code":["struct ExampleChatAppFocusFilter: SetFocusFilterIntent {","  \/\/ ...","","  \/\/\/ This should return a dynamic representation of the current user configuration to ","  \/\/\/ be displayed in the Settings.app.","  var displayRepresentation: DisplayRepresentation {","    ...","","    return DisplayRepresentation(title: title, subtitle: subtitle)","  }","  ","  \/\/ ...","}"],"syntax":"swift","type":"codeListing"},{"anchor":"Acting-on-a-Focus-filter","level":2,"type":"heading","text":"Acting on a Focus filter"},{"inlineContent":[{"text":"The system will deliver relevant focus updates to your app in two ways:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"If the app is running, you will receive a call to the perform method in your "},{"type":"codeVoice","code":"FocusFilterIntent"},{"type":"text","text":" (if you‚Äôve implemented it)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"If the app is not running, you can implement an extension that will be triggered when needed","type":"text"}]}]}],"type":"orderedList"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"at the end, "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/appintents\/openentityintent\/perform()"},{"type":"text","text":" in your FocusFilterIntent will get called (in your extension)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"an AppIntent extension is not necessary if you only need to act upon the changes in your main app"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"however, if you need to control widgets, notifications and\/or badges, you should implement the extension"}]}]}],"type":"unorderedList"},{"code":["struct ExampleChatAppFocusFilter: SetFocusFilterIntent {","  \/\/ ...","","  func perform() async throws -> some IntentResult {","    let myData = AppData(","      alwaysUseDarkMode: self.alwaysUseDarkMode, \/\/ üëàüèª you access to the user configuration","      status: self.status,                       \/\/ by accessing the @Parameter properties","      account: self.account                      \/\/ values","    )","    myModel.shared.updateAppWithData(myData)","    return .result()","  }","}"],"syntax":"swift","type":"codeListing"},{"anchor":"Written-By","level":2,"type":"heading","text":"Written By"},{"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"zntfdr"}]}]},{"size":4,"content":[{"type":"heading","level":3,"anchor":"Federico-Zanetello","text":"Federico Zanetello"},{"type":"paragraph","inlineContent":[{"overridingTitle":"Contributed Notes","isActive":true,"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/zntfdr"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/zntfdr.dev"}]}]}],"type":"row","numberOfColumns":5},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}],"type":"paragraph"},{"anchor":"Related-Sessions","level":2,"type":"heading","text":"Related Sessions"},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10032-Dive-into-App-Intents"],"type":"links","style":"list"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}],"type":"small"},{"inlineContent":[{"text":"All content copyright ¬© 2012 ‚Äì 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}],"kind":"content"}],"kind":"article","sampleCodeDownload":{"action":{"overridingTitle":"Watch Video (15 min)","isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc22\/10121","type":"reference"},"kind":"sampleDownload"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22"]]},"sections":[],"references":{"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"url":"\/documentation\/wwdcnotes\/zntfdr","role":"sampleCode","kind":"article","title":"Federico Zanetello (332 notes)","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10032-Dive-into-App-Intents":{"url":"\/documentation\/wwdcnotes\/wwdc22-10032-dive-into-app-intents","role":"sampleCode","abstract":[{"text":"Learn how you can make your app more discoverable and increase app engagement when you use the App Intents framework. We‚Äôll take you through the powerful capabilities of this Swift framework, explore the differences between App Intents and SiriKit Intents, and show you how you can expose your app‚Äôs functionality to the system. We‚Äôll also share how you can build entities and queries to create rich App Shortcuts experiences.","type":"text"}],"kind":"article","title":"Dive into App Intents","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10032-Dive-into-App-Intents","type":"topic"},"WWDC22-Icon.png":{"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDC22-Icon.png"}],"alt":null,"identifier":"WWDC22-Icon.png"},"https://zntfdr.dev":{"type":"link","title":"Blog","titleInlineContent":[{"text":"Blog","type":"text"}],"url":"https:\/\/zntfdr.dev","identifier":"https:\/\/zntfdr.dev"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","title":"Contributions are welcome!","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22":{"kind":"article","role":"collectionGroup","url":"\/documentation\/wwdcnotes\/wwdc22","type":"topic","abstract":[{"type":"text","text":"Xcode 14, Swift 5.7, iOS 16, macOS 13 (Ventura), tvOS 16, watchOS 9."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"code":"WeatherKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"ScreenCaptureKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Swift Regex","type":"codeVoice"},{"text":", and more.","type":"text"}],"images":[{"identifier":"WWDC22-Icon.png","type":"icon"},{"identifier":"WWDC22.jpeg","type":"card"}],"title":"WWDC22","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22"},"https://developer.apple.com/documentation/appintents/setfocusfilterintent":{"type":"link","title":"SetFocusFilterIntent","titleInlineContent":[{"type":"codeVoice","code":"SetFocusFilterIntent"}],"url":"https:\/\/developer.apple.com\/documentation\/appintents\/setfocusfilterintent","identifier":"https:\/\/developer.apple.com\/documentation\/appintents\/setfocusfilterintent"},"zntfdr":{"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"alt":"Profile image of Federico Zanetello","identifier":"zntfdr"},"WWDCNotes.png":{"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes.png"}],"alt":null,"identifier":"WWDCNotes.png"},"https://developer.apple.com/documentation/appintents/appentity":{"type":"link","title":"AppEntity","titleInlineContent":[{"type":"codeVoice","code":"AppEntity"}],"url":"https:\/\/developer.apple.com\/documentation\/appintents\/appentity","identifier":"https:\/\/developer.apple.com\/documentation\/appintents\/appentity"},"https://github.com/zntfdr":{"type":"link","title":"GitHub","titleInlineContent":[{"text":"GitHub","type":"text"}],"url":"https:\/\/github.com\/zntfdr","identifier":"https:\/\/github.com\/zntfdr"},"https://developer.apple.com/wwdc22/10121":{"type":"download","url":"https:\/\/developer.apple.com\/wwdc22\/10121","identifier":"https:\/\/developer.apple.com\/wwdc22\/10121","checksum":null},"https://developer.apple.com/documentation/appintents/openentityintent/perform()":{"type":"link","title":"perform()","titleInlineContent":[{"type":"codeVoice","code":"perform()"}],"url":"https:\/\/developer.apple.com\/documentation\/appintents\/openentityintent\/perform()","identifier":"https:\/\/developer.apple.com\/documentation\/appintents\/openentityintent\/perform()"},"zntfdr.jpeg":{"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"alt":null,"identifier":"zntfdr.jpeg"},"WWDC22.jpeg":{"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDC22.jpeg"}],"alt":null,"identifier":"WWDC22.jpeg"},"doc://WWDCNotes/documentation/WWDCNotes":{"images":[{"type":"icon","identifier":"WWDCNotes.png"}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","kind":"symbol","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"url":"\/documentation\/wwdcnotes","role":"collection"}}}