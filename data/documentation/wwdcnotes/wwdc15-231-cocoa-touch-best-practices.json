{"kind":"article","identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC15-231-Cocoa-Touch-Best-Practices","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC15"]]},"sections":[],"schemaVersion":{"major":0,"patch":0,"minor":3},"metadata":{"title":"Cocoa Touch Best Practices","role":"sampleCode","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC15"},"abstract":[{"text":"Small improvements can make a big impact on your iOS app’s performance and launch time. Learn best practices to optimize your UIKit-based applications. See how to future-proof your app for what may be next, and walk through numerous real world examples for more responsive and dynamic collection and table views.","type":"text"}],"primaryContentSections":[{"kind":"content","content":[{"text":"App Lifecycle","type":"heading","anchor":"App-Lifecycle","level":2},{"text":"Beyond App Launch, Being responsive to every input","type":"heading","anchor":"Beyond-App-Launch-Being-responsive-to-every-input","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Put on the work to the background queue, when you are done with it, put it back to main queue."}]}]}]},{"text":"Leverage Frameworks","type":"heading","anchor":"Leverage-Frameworks","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Target two most recent major releases"}],"type":"paragraph"}]}]},{"text":"Views and View Controllers","type":"heading","anchor":"Views-and-View-Controllers","level":2},{"text":"Layout to Proportions","type":"heading","anchor":"Layout-to-Proportions","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Avoid hard-coded layout values","type":"text"}],"type":"paragraph"}]}]},{"text":"Size Classes","type":"heading","anchor":"Size-Classes","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Some size thresholds trigger major change","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Properties, not Tags. Keep a property instead."}]}]}]},{"text":"Leverage `UIViewControllerTransitionCoordinator`","type":"heading","anchor":"Leverage-UIViewControllerTransitionCoordinator","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Animate alongside a transition"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Get accurate completion timing"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Support interactive and cancelable animations","type":"text"}]}]}]},{"text":"Auto Layout","type":"heading","anchor":"Auto-Layout","level":2},{"text":"Modify Constraints Efficiently","type":"heading","anchor":"Modify-Constraints-Efficiently","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Identify constraints that get changed, added, or removed","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Unchanged constraints are optimized","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Avoid removing all constraints"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use explicit constraint references"}]}]}]},{"text":"Constraint Specificity","type":"heading","anchor":"Constraint-Specificity","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"De-duplicating constraints"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Duplicates are implied by existing constraints"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Duplicates cause excess work in layout engine"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"text":"Create flexible constraints","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"Avoid hard-coded values","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Describe constraints using bounds"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"text","text":"Fully specify constraints"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Testing and debugging","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"-[UIView hasAmbiguousLayout]","type":"codeVoice"},{"type":"text","text":", when called on "},{"code":"UIWindow","type":"codeVoice"},{"type":"text","text":", returns result for entire view tree"}]}]}]}]},{"content":[{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"-[UIView _autolayoutTrace]"},{"type":"text","text":", Call this method on a view. It returns a string with diagnostic information about the entire view hierarchy containing that view. Ambiguous views are labeled, and so are views that have translatesAutoresizingMaskIntoConstraints set to YES."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This could be used in Unit Test, try call "},{"type":"codeVoice","code":"-[UIView hasAmbiguousLayout]"},{"type":"text","text":" first, if it returns "},{"type":"codeVoice","code":"YES"},{"type":"text","text":", then call "},{"type":"codeVoice","code":"-[UIView _autolayoutTrace]"},{"type":"text","text":" to help figure out the cause."}]}]}]}]}]},{"text":"Table and Collection Views","type":"heading","anchor":"Table-and-Collection-Views","level":2},{"text":"Self-Sizing Cells","type":"heading","anchor":"Self-Sizing-Cells","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Fully specify constraints"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Width = input; height = output."}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Add a constraint to cell’s content view, height","type":"text"}]}],"type":"aside","style":"tip","name":"Tip"},{"text":"Animating Height Changes","type":"heading","anchor":"Animating-Height-Changes","level":3},{"inlineContent":[{"type":"text","text":"Naive way: update the model, then call "},{"type":"codeVoice","code":"tableView.reloadData()"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Promoted way:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"code":"tableView.beginUpdates","type":"codeVoice"}]}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Update model"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Update cell contents, might just "},{"type":"strong","inlineContent":[{"text":"call ","type":"text"},{"type":"codeVoice","code":"tableView.cellForRowAtIndexPath"},{"text":" and update the content with corresponding model.","type":"text"}]}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"codeVoice","code":"tableView.endUpdates"}]}]}]}]},{"text":"Fast CollectionView Layout Invalidation","type":"heading","anchor":"Fast-CollectionView-Layout-Invalidation","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Invalidate on bounds change"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Build ","type":"text"},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uicollectionviewlayoutinvalidationcontext","isActive":true}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Repeat as necessary"}]}]}]},{"text":"Written By","type":"heading","anchor":"Written-By","level":2},{"columns":[{"size":1,"content":[{"inlineContent":[{"identifier":"antonio081014","type":"image"}],"type":"paragraph"}]},{"size":4,"content":[{"text":"Yi","anchor":"Yi","type":"heading","level":3},{"inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"isActive":true,"overridingTitle":"Contributed Notes","type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/antonio081014"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/antonio081014"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/x.com\/antonio081014"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/medium.com\/@antonio081014"}],"type":"paragraph"}]}],"type":"row","numberOfColumns":5},{"type":"thematicBreak"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference","isActive":true}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2025 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}]}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc15\/231","overridingTitle":"Watch Video (36 min)","type":"reference"}},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc15-231-cocoa-touch-best-practices"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://WWDCNotes/documentation/WWDCNotes/antonio081014":{"title":"Yi (16 notes)","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/antonio081014","type":"topic","abstract":[{"type":"text","text":"Reveal a brilliant idea in a very mobile engineer way."}],"kind":"article","url":"\/documentation\/wwdcnotes\/antonio081014","images":[{"identifier":"antonio081014.jpeg","type":"card"},{"identifier":"antonio081014.jpeg","type":"icon"}],"role":"sampleCode"},"WWDC15.jpeg":{"type":"image","identifier":"WWDC15.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC15.jpeg"}],"alt":null},"WWDC15-Icon.png":{"type":"image","identifier":"WWDC15-Icon.png","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC15-Icon.png"}]},"https://x.com/antonio081014":{"identifier":"https:\/\/x.com\/antonio081014","type":"link","url":"https:\/\/x.com\/antonio081014","title":"X\/Twitter","titleInlineContent":[{"text":"X\/Twitter","type":"text"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC15":{"abstract":[{"type":"text","text":"Xcode 7, Swift 2.0, iOS 9, macOS 10.11 (El Capitan), watchOS 2."}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC15","kind":"article","title":"WWDC15","role":"collectionGroup","images":[{"identifier":"WWDC15-Icon.png","type":"icon"},{"identifier":"WWDC15.jpeg","type":"card"}],"url":"\/documentation\/wwdcnotes\/wwdc15"},"antonio081014":{"type":"image","identifier":"antonio081014","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/antonio081014.jpeg"}],"alt":"Profile image of Yi"},"https://medium.com/@antonio081014":{"titleInlineContent":[{"type":"text","text":"Blog"}],"type":"link","identifier":"https:\/\/medium.com\/@antonio081014","url":"https:\/\/medium.com\/@antonio081014","title":"Blog"},"antonio081014.jpeg":{"identifier":"antonio081014.jpeg","type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/antonio081014.jpeg"}]},"WWDCNotes.png":{"type":"image","identifier":"WWDCNotes.png","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}],"alt":null},"https://developer.apple.com/wwdc15/231":{"type":"download","identifier":"https:\/\/developer.apple.com\/wwdc15\/231","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc15\/231"},"https://developer.apple.com/documentation/uikit/uicollectionviewlayoutinvalidationcontext":{"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uicollectionviewlayoutinvalidationcontext","type":"link","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uicollectionviewlayoutinvalidationcontext","title":"targeted invalidation context","titleInlineContent":[{"type":"text","text":"targeted invalidation context"}]},"https://github.com/antonio081014":{"titleInlineContent":[{"text":"GitHub","type":"text"}],"type":"link","identifier":"https:\/\/github.com\/antonio081014","url":"https:\/\/github.com\/antonio081014","title":"GitHub"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"doc://WWDCNotes/documentation/WWDCNotes":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","role":"collection","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"type":"topic","url":"\/documentation\/wwdcnotes","kind":"symbol","images":[{"identifier":"WWDCNotes.png","type":"icon"}]}}}