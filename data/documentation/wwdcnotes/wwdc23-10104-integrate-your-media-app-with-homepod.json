{"metadata":{"title":"Integrate your media app with HomePod","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC23","role":"sampleCode"},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc23-10104-integrate-your-media-app-with-homepod"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"schemaVersion":{"minor":3,"major":0,"patch":0},"primaryContentSections":[{"content":[{"text":"Overview","anchor":"Overview","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Overview of the data flow when requesting Siri to play a song via HomePod:"}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10104-dataflow"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"The device must be connected to the same network as the HomePod."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"The device doesn’t need to be physically near the person who is speaking."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Any app supporting SiriKit Media Intents today will be able to use this capability with no additional changes."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Supported options:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Play media","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Music, audiobooks, podcasts, radio, meditation, and more.","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"text":"Add to playlist or library","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Show affinity (e.g. like\/dislike)","type":"text"}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"“Add to playlist” and “like\/dislike” actions will use voice recognition to identify the user, and the user’s primary device (as configured on Find My) will be used to perform the action."}]}]}]},{"text":"Example requests","anchor":"Example-requests","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"identifier":"WWDC23-10104-music-and-radio-examples","type":"image"}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10104-podcasts-and-audiobooks-examples"}]},{"text":"Example code to resolve intents","anchor":"Example-code-to-resolve-intents","type":"heading","level":2},{"type":"codeListing","syntax":"swift","code":["class IntentHandler: INExtension, INPlayMediaIntentHandling {","    \/\/ INPlayMediaIntent methods","    func resolveMediaItems(for intent: INPlayMediaIntent, with completion: @escaping ([INPlayMediaMediaItemResolutionResult]) -> Void) {","        guard intent.mediaSearch?.mediaType != .genre else {","            return completion([INPlayMediaMediaItemResolutionResult.unsupported(forReason: .unsupportedMediaType) ])","        }","        if intent.mediaSearch?.mediaName == \"push it\" {","            let item = INMediaItem(identifier: \"sample\", title: \"Push it\", type: song, artwork: nil)","            return completion(INPlayMediaMediaItemResolutionResult.successes(with: [item]))","        }","        completion([INPlayMediaMediaItemResolutionResult.unsupported()])","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When handling intent, you can return two types of responses, "},{"type":"codeVoice","code":".handleInApp"},{"type":"text","text":", which will instruct the system to start the app and play in the background, and "},{"type":"codeVoice","code":".continueInApp"},{"type":"text","text":", which does the same in foreground. To offer a better experience, handle the request in backgroud using "},{"type":"codeVoice","code":".handleInApp"},{"type":"text","text":" since it doesn’t require the user to unlock their phone."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Make sure your app responds all intents as fast as possible. Requests will timeout after 10 seconds."}]},{"text":"Related Sessions","anchor":"Related-Sessions","type":"heading","level":1},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/wwdcnotes.com\/notes\/wwdc19\/207\/","isActive":true,"type":"reference"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"https:\/\/wwdcnotes.com\/notes\/wwdc20\/10061\/","type":"reference"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/wwdcnotes.com\/notes\/wwdc23\/10238\/","type":"reference","isActive":true}]}]}]},{"text":"Written By","anchor":"Written-By","type":"heading","level":2},{"type":"row","numberOfColumns":5,"columns":[{"content":[{"inlineContent":[{"type":"image","identifier":"rogerluan"}],"type":"paragraph"}],"size":1},{"content":[{"level":3,"anchor":"Roger-Oba","text":"Roger Oba","type":"heading"},{"inlineContent":[{"isActive":true,"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"overridingTitle":"Contributed Notes","type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/rogerluan"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/rogerluan"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/x.com\/rogerluan_"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/www.roger.ml"}],"type":"paragraph"}],"size":4}]},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"text":"Related Sessions","anchor":"Related-Sessions","type":"heading","level":2},{"style":"list","type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10238-Tune-up-your-AirPlay-audio-experience"]},{"type":"small","inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}],"kind":"content"}],"kind":"article","hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23"]]},"abstract":[{"type":"text","text":"Learn how people can interact with your media app directly from HomePod. We’ll show you how to add a media intent to your iPhone or iPad app and help people stream your content to a HomePod speaker over AirPlay simply by using their voice. Explore implementation details and get tips and best practices on how to create a great experience for music, audiobooks, podcasts, meditations, or other media types."}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10104-Integrate-your-media-app-with-HomePod","interfaceLanguage":"swift"},"sampleCodeDownload":{"action":{"overridingTitle":"Watch Video (13 min)","identifier":"https:\/\/developer.apple.com\/wwdc23\/10104","type":"reference","isActive":true},"kind":"sampleDownload"},"references":{"WWDC23-10104-music-and-radio-examples":{"variants":[{"url":"\/images\/WWDC23-10104-music-and-radio-examples.png","traits":["1x","light"]}],"type":"image","identifier":"WWDC23-10104-music-and-radio-examples","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/rogerluan":{"role":"sampleCode","url":"\/documentation\/wwdcnotes\/rogerluan","type":"topic","title":"Roger Oba (7 notes)","kind":"article","abstract":[{"text":"Core contributor @fastlane 🚀","type":"text"}],"images":[{"type":"card","identifier":"rogerluan.jpeg"},{"type":"icon","identifier":"rogerluan.jpeg"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/rogerluan"},"rogerluan.jpeg":{"variants":[{"url":"\/images\/rogerluan.jpeg","traits":["1x","light"]}],"type":"image","identifier":"rogerluan.jpeg","alt":null},"doc://WWDCNotes/documentation/WWDCNotes":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","role":"collection","title":"WWDC Notes","type":"topic","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"kind":"symbol","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"url":"\/documentation\/wwdcnotes"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23":{"role":"collectionGroup","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23","title":"WWDC23","abstract":[{"text":"Xcode 15, Swift 5.9, iOS 17, macOS 14 (Sonoma), tvOS 17, visionOS 1, watchOS 10.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"SwiftData"},{"type":"text","text":", "},{"type":"codeVoice","code":"Observation"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit"},{"type":"text","text":" views, and more."}],"type":"topic","images":[{"type":"icon","identifier":"WWDC23-Icon.png"},{"type":"card","identifier":"WWDC23.jpeg"}],"url":"\/documentation\/wwdcnotes\/wwdc23"},"https://www.roger.ml":{"url":"https:\/\/www.roger.ml","type":"link","identifier":"https:\/\/www.roger.ml","titleInlineContent":[{"text":"Blog","type":"text"}],"title":"Blog"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"title":"Contributions are welcome!"},"WWDCNotes.png":{"variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"type":"image","identifier":"WWDCNotes.png","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10238-Tune-up-your-AirPlay-audio-experience":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10238-Tune-up-your-AirPlay-audio-experience","abstract":[{"type":"text","text":"Learn how you can upgrade your app’s AirPlay audio experience to be more robust and responsive. We’ll show you how to adopt enhanced audio buffering with AVQueuePlayer, explore alternatives when building a custom player in your app, and share best practices."}],"title":"Tune up your AirPlay audio experience","url":"\/documentation\/wwdcnotes\/wwdc23-10238-tune-up-your-airplay-audio-experience","kind":"article","type":"topic","role":"sampleCode"},"https://developer.apple.com/wwdc23/10104":{"url":"https:\/\/developer.apple.com\/wwdc23\/10104","checksum":null,"type":"download","identifier":"https:\/\/developer.apple.com\/wwdc23\/10104"},"rogerluan":{"variants":[{"url":"\/images\/rogerluan.jpeg","traits":["1x","light"]}],"type":"image","identifier":"rogerluan","alt":"Profile image of Roger Oba"},"https://wwdcnotes.com/notes/wwdc23/10238/":{"url":"https:\/\/wwdcnotes.com\/notes\/wwdc23\/10238\/","type":"link","identifier":"https:\/\/wwdcnotes.com\/notes\/wwdc23\/10238\/","titleInlineContent":[{"text":"Tune up your AirPlay audio experience - WWDC23","type":"text"}],"title":"Tune up your AirPlay audio experience - WWDC23"},"WWDC23-Icon.png":{"variants":[{"url":"\/images\/WWDC23-Icon.png","traits":["1x","light"]}],"type":"image","identifier":"WWDC23-Icon.png","alt":null},"https://github.com/rogerluan":{"url":"https:\/\/github.com\/rogerluan","type":"link","identifier":"https:\/\/github.com\/rogerluan","titleInlineContent":[{"text":"GitHub","type":"text"}],"title":"GitHub"},"WWDC23-10104-dataflow":{"variants":[{"url":"\/images\/WWDC23-10104-dataflow.png","traits":["1x","light"]}],"type":"image","identifier":"WWDC23-10104-dataflow","alt":null},"WWDC23-10104-podcasts-and-audiobooks-examples":{"variants":[{"url":"\/images\/WWDC23-10104-podcasts-and-audiobooks-examples.png","traits":["1x","light"]}],"type":"image","identifier":"WWDC23-10104-podcasts-and-audiobooks-examples","alt":null},"https://wwdcnotes.com/notes/wwdc19/207/":{"url":"https:\/\/wwdcnotes.com\/notes\/wwdc19\/207\/","type":"link","identifier":"https:\/\/wwdcnotes.com\/notes\/wwdc19\/207\/","titleInlineContent":[{"text":"Introducing SiriKit Media Intents - WWDC19","type":"text"}],"title":"Introducing SiriKit Media Intents - WWDC19"},"https://x.com/rogerluan_":{"url":"https:\/\/x.com\/rogerluan_","type":"link","identifier":"https:\/\/x.com\/rogerluan_","titleInlineContent":[{"text":"X\/Twitter","type":"text"}],"title":"X\/Twitter"},"WWDC23.jpeg":{"variants":[{"url":"\/images\/WWDC23.jpeg","traits":["1x","light"]}],"type":"image","identifier":"WWDC23.jpeg","alt":null},"https://wwdcnotes.com/notes/wwdc20/10061/":{"url":"https:\/\/wwdcnotes.com\/notes\/wwdc20\/10061\/","type":"link","identifier":"https:\/\/wwdcnotes.com\/notes\/wwdc20\/10061\/","titleInlineContent":[{"text":"Expand your SiriKit Media Intents to more platforms - WWDC20","type":"text"}],"title":"Expand your SiriKit Media Intents to more platforms - WWDC20"}}}