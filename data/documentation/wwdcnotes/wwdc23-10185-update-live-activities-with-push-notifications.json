{"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23"]]},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10185-Update-Live-Activities-with-push-notifications","interfaceLanguage":"swift"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc23-10185-update-live-activities-with-push-notifications"]}],"kind":"article","sections":[],"metadata":{"title":"Update Live Activities with push notifications","modules":[{"name":"WWDC Notes"}],"role":"sampleCode","roleHeading":"WWDC23"},"primaryContentSections":[{"kind":"content","content":[{"level":2,"text":"Overview","anchor":"overview","type":"heading"},{"inlineContent":[{"type":"text","text":"Live Activities are a great way to display glanceable information to someone about an ongoing activity. ActivityKit enables your app to start, update, and end Live Activities. Then, by utilizing WidgetKit and SwiftUI, you can build the UI that displays the information to the user. Check out "},{"identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2023\/10184","type":"reference","isActive":true},{"type":"text","text":" session to learn more about these technologies. Live Activities can now be updated with push notifications, providing real-time updates without significantly impacting battery life."}],"type":"paragraph"},{"level":2,"text":"Preparation for push updates","anchor":"Preparation-for-push-updates","type":"heading"},{"inlineContent":[{"type":"text","text":"To start updating Live Activities with push notifications, the interaction between the app, server, and Apple Push Notification service (APNs) must be understood. When a new Live Activity begins, ActivityKit obtains a unique push token from APNs, which the app must send to the server to enable push updates."}],"type":"paragraph"},{"tabs":[{"title":"Receive token","content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10185-1"}]}]},{"title":"Send to server","content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10185-2"}]}]},{"title":"Send payload","content":[{"inlineContent":[{"identifier":"WWDC23-10185-3","type":"image"}],"type":"paragraph"}]},{"title":"Receive payload","content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC23-10185-4"}]}]}],"type":"tabNavigator"},{"level":4,"text":"APNs connection","anchor":"APNs-connection","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"New APNs "},{"type":"codeVoice","code":"liveactivity"},{"type":"text","text":" push type"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Token-based connection only"}]}]}],"type":"unorderedList"},{"inlineContent":[{"text":"Learn more in the ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/usernotifications\/sending-notification-requests-to-apns","type":"reference","isActive":true},{"text":" and ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/usernotifications\/establishing-a-token-based-connection-to-apns","type":"reference","isActive":true},{"text":" documentation","type":"text"}],"type":"paragraph"},{"level":4,"text":"Configure an app","anchor":"Configure-an-app","type":"heading"},{"inlineContent":[{"type":"text","text":"Under the “Signing & Capabilities” tab, add the push notifications capability. This will allow ActivityKit to request push tokens on the app’s behalf."}],"type":"paragraph"},{"inlineContent":[{"type":"image","identifier":"WWDC23-10185-5"}],"type":"paragraph"},{"level":4,"text":"Handle push tokens","anchor":"Handle-push-tokens","type":"heading"},{"inlineContent":[{"type":"text","text":"To support receiving push updates, add the "},{"type":"codeVoice","code":"pushType"},{"type":"text","text":" parameter to the method and set its value to "},{"type":"codeVoice","code":"token"},{"type":"text","text":". This will let ActivityKit know to request a push token for the Live Activity upon its creation."}],"type":"paragraph"},{"code":["\/\/ Handling push tokens","","func startActivity(hero: EmojiRanger) throws {","  let adventure = AdventureAttributes(hero: hero)","  let initialState = AdventureAttributes.ContentState(","    currentHealthLevel: hero.healthLevel,","    eventDescription: \"Adventure has begun!\"","  )","  ","  let activity = try Activity.request(","    attributes: adventure,","    content: .init(state: initialState, staleDate: nil),","    pushType: .token","  )","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"Do not access "},{"code":"pushToken","type":"codeVoice"},{"type":"text","text":" property on the Activity type immediately after the activity’s creation. The value will be "},{"code":"nil","type":"codeVoice"},{"type":"text","text":" most of the time, because requesting a push token is an asynchronous process and it is possible for the system to update the push token throughout the lifetime of the activity"}],"type":"paragraph"},{"code":["\/\/ Handling push tokens","","func startActivity(hero: EmojiRanger) throws {","  ...","  ","  \/\/ ❌ Will return nil","  let pushToken = activity.pushToken ","","  \/\/ ✅ Proper way to handle push tokens with an asynchronous Task ","  Task {","    for await pushToken in activity.pushTokenUpdates {","","      \/\/ Convert the token to a hexadecimal string","      let pushTokenString = pushToken.reduce(\"\") { $0 + String(format: \"%02x\", $1) }","      ","      \/\/ Log the push token to the debug console, this will come in handy during testing","      Logger().log(\"New push token: \\(pushTokenString)\")","      ","      \/\/ Send the push token to the server alongside any other data that is required for the app","      try await self.sendPushToken(hero: hero, pushTokenString: pushTokenString)","    }","  }","}"],"syntax":"swift","type":"codeListing"},{"style":"important","content":[{"type":"paragraph","inlineContent":[{"text":"Push tokens are unique for each activity, it’s important to keep track of them for each Live Activity. When the system requests a new push token for an existing activity, the app will be given foreground runtime to handle it accordingly","type":"text"}]}],"name":"Important","type":"aside"},{"level":2,"text":"First push update","anchor":"First-push-update","type":"heading"},{"inlineContent":[{"text":"HTTP request must contain appropriate APNs headers and APNs payload.","type":"text"}],"type":"paragraph"},{"level":4,"text":"APNs headers","anchor":"APNs-headers","type":"heading"},{"code":["apns-push-type: liveactivity","apns-topic: <BUNDLE_ID>.push-type.liveactivity","apns-priority: 5 (low priority) or 10 (high priority)"],"syntax":"swift","type":"codeListing"},{"style":"tip","content":[{"inlineContent":[{"text":"Use high priority during testing because it makes the Live Activity update immediately","type":"text"}],"type":"paragraph"}],"name":"Tip","type":"aside"},{"level":4,"text":"APNs payload","anchor":"APNs-payload","type":"heading"},{"code":["{","  \"aps\": {","","    \/\/ Time interval in seconds since 1970","    \/\/ The system uses timestamp to make sure it's always rendering the latest content state","    \"timestamp\": 1685952000,","","    \/\/ Action to perform on the Live Activity","    \/\/ Its value is either \"update\" or \"end\"","    \"event\": \"update\",","","    \/\/ JSON object that can be decoded into activity's content state type","    \"content-state\": {","      \"currentHealthLevel\": 0.941,","      \"eventDescription\": \"Power Panda found a sword!\"","    }","  }","}"],"syntax":"json","type":"codeListing"},{"style":"important","content":[{"inlineContent":[{"text":"Content state JSON will always be decoded using a JSONDecoder with default decoding strategies. So don’t use any custom encoding strategies, like snake_case keys for example. Otherwise, JSON will be mismatched, and the system will fail to update Live Activity.","type":"text"}],"type":"paragraph"}],"name":"Important","type":"aside"},{"level":4,"text":"Configure terminal for APNs pushes","anchor":"Configure-terminal-for-APNs-pushes","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Set up with authentication token","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Check everything is set up correctly with","type":"text"}]}]}],"type":"unorderedList"},{"code":["echo $AUTHENTICATION_TOKEN"],"syntax":"sh","type":"codeListing"},{"inlineContent":[{"text":"Check more info in the ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/usernotifications\/sending-push-notifications-using-command-line-tools"},{"text":" documentation.","type":"text"}],"type":"paragraph"},{"level":4,"text":"Set push token","anchor":"Set-push-token","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Get push token from the debug console","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Set as environment variable","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"code":["$ ACTIVITY_PUSH_TOKEN = \"ABC1234567890ABCDEF\""],"syntax":"sh","type":"codeListing"},{"level":4,"text":"Send APNs request from terminal","anchor":"Send-APNs-request-from-terminal","type":"heading"},{"code":["# Constructing curl command","","curl \\","  --header \"apns-topic: com.example.apple-samplecode.Emoji-Rangers.push-type.liveactivity\" \\","  --header \"apns-push-type: liveactivity\" \\","  --header \"apns-priority: 10\" \\","  --header \"authorization: bearer $AUTHENTICATION_TOKEN\" \\","  --data '{","    \"aps\": {","      \"timestamp\": '$(date +%s)',","      \"event\": \"update\",","      \"content-state\": {","        \"currentHealthLevel\": 0.941,","        \"eventDescription\": \"Power Panda found a sword!\"","      }","    }","  }' \\","  --http2 https:\/\/api.sandbox.push.apple.com\/3\/device\/$ACTIVITY_PUSH_TOKEN"],"syntax":"sh","type":"codeListing"},{"inlineContent":[{"type":"text","text":"When you execute this curl command, your Live Activity will be updated with the new content state provided in the payload."}],"type":"paragraph"},{"level":4,"text":"Debugging update failures","anchor":"Debugging-update-failures","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Ensure curl command was successful","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"View device logs in Console app","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"liveactivitiesd"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"apsd","type":"codeVoice"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"chronod"}],"type":"paragraph"}]}],"type":"unorderedList"}]}],"type":"unorderedList"},{"level":2,"text":"Priority and alerts","anchor":"Priority-and-alerts","type":"heading"},{"inlineContent":[{"text":"To ensure the best user experience, it’s important to choose the correct push priority for each update. The priority to always consider using first is low priority.","type":"text"}],"type":"paragraph"},{"level":4,"text":"Low update priority","anchor":"Low-update-priority","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Opportunistic delivery"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Less time-sensitive updates"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"No limit"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"Low priority updates are delivered opportunistically, which lowers the impact on the user’s battery life. However, this means the Live Activities might not be updated immediately when the push request is sent, making it suitable for updates that are less time-sensitive. Another benefit of using low priority is that there is no limit on how many updates can be sent.","type":"text"}],"type":"paragraph"},{"level":4,"text":"High update priority","anchor":"High-update-priority","type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"Immediate delivery","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Time-sensitive updates","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Budget depending on device condition","type":"text"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"Certain updates require the user’s immediate attention. For these updates, high priority is preferred. High priority updates are delivered immediately, making them perfect for time-sensitive updates."}],"type":"paragraph"},{"style":"important","content":[{"inlineContent":[{"text":"Due to their impact on the user’s battery life, the system imposes a budget depending on the device condition. If the app exceeds its budget, the system will throttle the push updates, dramatically impacting the user experience.","type":"text"}],"type":"paragraph"}],"name":"Important","type":"aside"},{"inlineContent":[{"text":"It is important to carefully consider which priority to use for which updates.","type":"text"}],"type":"paragraph"},{"level":4,"text":"Enable frequent updates","anchor":"Enable-frequent-updates","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Requires frequent high-priority updates"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Get higher update budget","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Can still get throttled"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"Add "},{"type":"codeVoice","code":"NSSupportsLiveActivitiesFrequentUpdates=YES"},{"type":"text","text":" to Info.plist"}],"type":"paragraph"},{"level":4,"text":"Detecting frequent updates","anchor":"Detecting-frequent-updates","type":"heading"},{"inlineContent":[{"text":"Users can disable frequent updates independently of Live Activities in Settings. The status of the frequent updates feature can be detected by accessing the ","type":"text"},{"code":"ActivityAuthorizationInfo","type":"codeVoice"},{"text":" property.","type":"text"}],"type":"paragraph"},{"code":["ActivityAuthorizationInfo().frequentPushesEnabled"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"The server should adjust its update frequency according to this value, ensuring it is "},{"type":"strong","inlineContent":[{"text":"sent to the server before it starts sending push updates","type":"text"}]},{"type":"text","text":". This value only needs to be checked once after an activity has started. If this value changes, the system will end all ongoing activities, so the server doesn’t need to worry about frequent updates being toggled during the lifetime of an activity."}],"type":"paragraph"},{"level":4,"text":"Alerts","anchor":"Alerts","type":"heading"},{"inlineContent":[{"type":"text","text":"In addition to updating the Live Activity, it is also possible to send alerts to the user by adding an additional alert object to the APNs payload"}],"type":"paragraph"},{"code":["\/\/ Adding alert to APNs request","","{","  \"aps\": {","    \"timestamp\": 1685952000,","    \"event\": \"update\",","    \"content-state\": {","      \"currentHealthLevel\": 0.0,","      \"eventDescription\": \"Power Panda has been knocked down!\"","    },","    \"alert\": {","      \"title\": \"Power Panda is knocked down!\",","      \"body\": \"Use a potion to heal Power Panda!\",","      \"sound\": \"default\"","    }","  }","}"],"syntax":"json","type":"codeListing"},{"inlineContent":[{"type":"text","text":"Alert title and body can be localized depending on the user’s locale."}],"type":"paragraph"},{"code":["\/\/ Alert localization","","{","  \"aps\": {","    ...","    },","    \"alert\": {","      \"title\": {","        \"loc-key\": \"%@ is knocked down!\",","        \"loc-args\": [\"Power Panda\"]","      },","      \"body\": {","        \"loc-key\": \"Use a potion to heal %@!\",","        \"loc-args\": [\"Power Panda\"]","      },","      \"sound\": \"default\"","    }","  }","}"],"syntax":"json","type":"codeListing"},{"inlineContent":[{"type":"text","text":"Custom sounds can be used for alerts by adding sound files to the app’s target as a resource."}],"type":"paragraph"},{"code":["\/\/ Alert localization","","{","  \"aps\": {","    ...","    },","    \"alert\": {","      ...","      \"sound\": \"HeroDown.mp4\"","    }","  }","}"],"syntax":"json","type":"codeListing"},{"level":2,"text":"Enhancements","anchor":"Enhancements","type":"heading"},{"level":4,"text":"End Live Activity","anchor":"End-Live-Activity","type":"heading"},{"inlineContent":[{"text":"To end the Live Activity and dismiss it after a certain amount of time provide ","type":"text"},{"code":"end","type":"codeVoice"},{"text":" event and optional ","type":"text"},{"code":"dismissal-date","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"content-state","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"},{"code":["\/\/ Ending a Live Activity","","{","  \"aps\": {","    \"timestamp\": 1685952000,","    ","    \/\/ End event","    \"event\": \"end\",","    ","    \/\/ Custom dismissal date to control when the Live Activity","    \/\/ should be removed from the lock screen","    \"dismissal-date\": 1685959200,","","    \/\/ Final content state for the Live Activity","    \/\/ Optional - if left out, the activity will continue","    \/\/ to display the previous content state until it's dismissed","    \"content-state\": {","      \"currentHealthLevel\": 0.23,","      \"eventDescription\": \"Adventure over! Power Panda is taking a nap.\"","    }","  }","}"],"syntax":"json","type":"codeListing"},{"level":4,"text":"Mark as outdated","anchor":"Mark-as-outdated","type":"heading"},{"inlineContent":[{"type":"text","text":"If the user’s device fails to receive push notifications, the Live Activity might be displaying an out-of-date state. In these scenarios, it is possible to warn the user in the Live Activity UI that it might be displaying inaccurate information."}],"type":"paragraph"},{"inlineContent":[{"identifier":"WWDC23-10185-6","type":"image"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"To achieve this, add a "},{"type":"codeVoice","code":"stale-date"},{"type":"text","text":" field to the payload. The system will use this date to decide when to render your stale view."}],"type":"paragraph"},{"code":["\/\/ Adding stale date","","{","  \"aps\": {","    \"timestamp\": 1685952000,","    \"event\": \"update\",","    ","    \/\/ Date after which the state will be considered out of date","    \"stale-date\": 1685959200,","","    \"content-state\": {","      \"currentHealthLevel\": 0.79,","      \"eventDescription\": \"Egghead is in the woods and lost connection.\"","    }","  }","}"],"syntax":"json","type":"codeListing"},{"inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"isStale"},{"type":"text","text":" property on "},{"type":"codeVoice","code":"ActivityViewContext"},{"type":"text","text":" to provide stale view from the "},{"type":"codeVoice","code":"ActivityConfiguration"},{"type":"text","text":" declared in the widget extension."}],"type":"paragraph"},{"code":["\/\/ Showing stale content","","struct AdventureActivityConfiguration: Widget {","  var body: some WidgetConfiguration {","    ActivityConfiguration(for: AdventureAttributes.self) { context in","      AdventureLiveActivityView(","        hero: context.attributes.hero,","        isStale: context.isStale, \/\/ Mark UI as out of date","        contentState: context.state","      )","      .activityBackgroundTint(Color.gameWidgetBackground)","    } dynamicIsland: { context in","      ...","    }","  }","}"],"syntax":"swift","type":"codeListing"},{"level":4,"text":"Order multiple Live Activities","anchor":"Order-multiple-Live-Activities","type":"heading"},{"inlineContent":[{"text":"When multiple Live Activities are present, they should be ordered by importance. Use the optional ","type":"text"},{"code":"relevance-score","type":"codeVoice"},{"text":" field, to ensure the most important updates are at the top and in the Dynamic Island.","type":"text"}],"type":"paragraph"},{"code":["\/\/ Adding relevance score","","{","  \"aps\": {","    \"timestamp\": 1685952000,","    \"event\": \"update\",","    ","    \/\/ Optional - higher the number indicates higher the relevance","    \"relevance-score\": 100,","","    \"content-state\": {","      \"currentHealthLevel\": 0.941,","      \"eventDescription\": \"Power Panda found a sword!\"","    }","  }","}"],"syntax":"json","type":"codeListing"},{"level":2,"text":"Wrap-up","anchor":"Wrap-up","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Add support for push updates"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Test sending pushes from your terminal","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Add end-to-end support on server","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Consider priorities and alerts"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"Watch ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2023\/10184","type":"reference","isActive":true,"overridingTitleInlineContent":[{"type":"text","text":"Meet ActivityKit"}],"overridingTitle":"Meet ActivityKit"},{"text":" and ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2023\/10028\/","type":"reference","isActive":true},{"text":" sessions to learn more about Live Activity.","type":"text"}],"type":"paragraph"},{"level":2,"text":"Written By","anchor":"Written-By","type":"heading"},{"columns":[{"size":1,"content":[{"inlineContent":[{"type":"image","identifier":"srujanc"}],"type":"paragraph"}]},{"size":4,"content":[{"text":"Srujan Chitla","type":"heading","level":3,"anchor":"Srujan-Chitla"},{"type":"paragraph","inlineContent":[{"isActive":true,"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"overridingTitle":"Contributed Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/srujanc","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/srujanc","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/","type":"reference"}]}]}],"numberOfColumns":5,"type":"row"},{"columns":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"rusik","type":"image"}]}],"size":1},{"content":[{"anchor":"Ruslan-Kavetsky","type":"heading","level":3,"text":"Ruslan Kavetsky"},{"inlineContent":[{"type":"reference","isActive":true,"overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/rusik"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/rusik"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"overridingTitle":"Blog","overridingTitleInlineContent":[{"text":"Blog","type":"text"}],"identifier":"https:\/\/"}],"type":"paragraph"}],"size":4}],"numberOfColumns":5,"type":"row"},{"type":"thematicBreak"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference","isActive":true}],"type":"paragraph"},{"level":2,"text":"Related Sessions","anchor":"Related-Sessions","type":"heading"},{"style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10028-Bring-widgets-to-life","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10184-Meet-ActivityKit","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10069-Broadcast-updates-to-your-Live-Activities"],"type":"links"},{"inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}]}],"sampleCodeDownload":{"action":{"identifier":"https:\/\/developer.apple.com\/wwdc23\/10185","isActive":true,"overridingTitle":"Watch Video (18 min)","type":"reference"},"kind":"sampleDownload"},"abstract":[{"text":"Discover how you can remotely update Live Activities in your app when you push content through Apple Push Notification service (APNs). We’ll show you how to configure your first Live Activity push locally so you can quickly iterate on your implementation. Learn best practices for determining your push priority and configuring alerting updates, and explore how to further improve your Live Activities with relevance score and stale date.","type":"text"}],"schemaVersion":{"major":0,"minor":3,"patch":0},"references":{"doc://WWDCNotes/documentation/WWDCNotes/rusik":{"role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/rusik","url":"\/documentation\/wwdcnotes\/rusik","images":[{"type":"card","identifier":"rusik.jpeg"},{"type":"icon","identifier":"rusik.jpeg"}],"title":"Ruslan Kavetsky (3 notes)","abstract":[{"type":"text","text":"Make mobile apps with ❤️"}],"type":"topic","kind":"article"},"srujanc.jpeg":{"alt":null,"identifier":"srujanc.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/srujanc.jpeg"}],"type":"image"},"https://developer.apple.com/documentation/usernotifications/establishing-a-token-based-connection-to-apns":{"type":"link","title":"Establishing a token-based connection to APNs","identifier":"https:\/\/developer.apple.com\/documentation\/usernotifications\/establishing-a-token-based-connection-to-apns","url":"https:\/\/developer.apple.com\/documentation\/usernotifications\/establishing-a-token-based-connection-to-apns","titleInlineContent":[{"type":"text","text":"Establishing a token-based connection to APNs"}]},"https://developer.apple.com/videos/play/wwdc2023/10184":{"identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2023\/10184","url":"https:\/\/developer.apple.com\/videos\/play\/wwdc2023\/10184","titleInlineContent":[{"text":"Meet ActivityKit","type":"text"}],"type":"link","title":"Meet ActivityKit"},"https://developer.apple.com/documentation/usernotifications/sending-notification-requests-to-apns":{"url":"https:\/\/developer.apple.com\/documentation\/usernotifications\/sending-notification-requests-to-apns","title":"Sending notification requests to APNs","identifier":"https:\/\/developer.apple.com\/documentation\/usernotifications\/sending-notification-requests-to-apns","titleInlineContent":[{"text":"Sending notification requests to APNs","type":"text"}],"type":"link"},"https://":{"type":"link","title":"Blog","identifier":"https:\/\/","url":"https:\/\/","titleInlineContent":[{"type":"text","text":"Blog"}]},"https://developer.apple.com/wwdc23/10185":{"identifier":"https:\/\/developer.apple.com\/wwdc23\/10185","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc23\/10185","type":"download"},"doc://WWDCNotes/documentation/WWDCNotes":{"role":"collection","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","type":"topic","kind":"symbol","url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}]},"https://github.com/srujanc":{"url":"https:\/\/github.com\/srujanc","title":"GitHub","identifier":"https:\/\/github.com\/srujanc","titleInlineContent":[{"type":"text","text":"GitHub"}],"type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC24-10069-Broadcast-updates-to-your-Live-Activities":{"role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc24-10069-broadcast-updates-to-your-live-activities","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10069-Broadcast-updates-to-your-Live-Activities","kind":"article","abstract":[{"type":"text","text":"With broadcast push notifications, your app can send updates to thousands of Live Activities with a single request. We’ll discover how broadcast push notifications work between an app, a server, and the Apple Push Notification service, then we’ll walk through best practices for this capability and how to implement it."}],"type":"topic","title":"Broadcast updates to your Live Activities"},"WWDC23-10185-1":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10185-1.jpeg"}],"identifier":"WWDC23-10185-1","type":"image","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10184-Meet-ActivityKit":{"kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10184-Meet-ActivityKit","title":"Meet ActivityKit","url":"\/documentation\/wwdcnotes\/wwdc23-10184-meet-activitykit","abstract":[{"text":"Live Activities are a glanceable way for someone to keep track of the progress of a task within your app. We’ll teach you how you can create helpful experiences for the Lock Screen, the Dynamic Island, and StandBy. Learn how to update your app’s Live Activities, monitor activity state, and take advantage of WidgetKit and SwiftUI to build richer experiences.","type":"text"}],"role":"sampleCode"},"WWDC23-10185-2":{"type":"image","identifier":"WWDC23-10185-2","variants":[{"url":"\/images\/WWDCNotes\/WWDC23-10185-2.jpeg","traits":["1x","light"]}],"alt":null},"https://developer.apple.com/videos/play/wwdc2023/10028/":{"url":"https:\/\/developer.apple.com\/videos\/play\/wwdc2023\/10028\/","title":"Bring widgets to life","identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2023\/10028\/","titleInlineContent":[{"type":"text","text":"Bring widgets to life"}],"type":"link"},"rusik":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/rusik.jpeg"}],"identifier":"rusik","type":"image","alt":"Profile image of Ruslan Kavetsky"},"https://developer.apple.com/documentation/usernotifications/sending-push-notifications-using-command-line-tools":{"type":"link","title":"Sending push notifications using command-line tools","identifier":"https:\/\/developer.apple.com\/documentation\/usernotifications\/sending-push-notifications-using-command-line-tools","url":"https:\/\/developer.apple.com\/documentation\/usernotifications\/sending-push-notifications-using-command-line-tools","titleInlineContent":[{"text":"Sending push notifications using command-line tools","type":"text"}]},"WWDC23.jpeg":{"alt":null,"identifier":"WWDC23.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23.jpeg"}],"type":"image"},"WWDC23-10185-3":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10185-3.jpeg"}],"identifier":"WWDC23-10185-3","type":"image","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/srujanc":{"type":"topic","title":"Srujan Chitla (5 notes)","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/srujanc","url":"\/documentation\/wwdcnotes\/srujanc","role":"sampleCode","kind":"article","images":[{"type":"card","identifier":"srujanc.jpeg"},{"type":"icon","identifier":"srujanc.jpeg"}],"abstract":[{"type":"text","text":"Sr Software Engineer at IQVIA"}]},"WWDC23-10185-5":{"type":"image","identifier":"WWDC23-10185-5","variants":[{"url":"\/images\/WWDCNotes\/WWDC23-10185-5.jpeg","traits":["1x","light"]}],"alt":null},"WWDC23-10185-6":{"alt":null,"identifier":"WWDC23-10185-6","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10185-6.jpeg"}],"type":"image"},"rusik.jpeg":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/rusik.jpeg"}],"identifier":"rusik.jpeg","type":"image","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23","abstract":[{"text":"Xcode 15, Swift 5.9, iOS 17, macOS 14 (Sonoma), tvOS 17, visionOS 1, watchOS 10.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"SwiftData","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Observation","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit","type":"codeVoice"},{"text":" views, and more.","type":"text"}],"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc23","title":"WWDC23","images":[{"identifier":"WWDC23-Icon.png","type":"icon"},{"identifier":"WWDC23.jpeg","type":"card"}],"type":"topic","role":"collectionGroup"},"WWDC23-10185-4":{"type":"image","identifier":"WWDC23-10185-4","variants":[{"url":"\/images\/WWDCNotes\/WWDC23-10185-4.jpeg","traits":["1x","light"]}],"alt":null},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"type":"link"},"srujanc":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/srujanc.jpeg"}],"identifier":"srujanc","type":"image","alt":"Profile image of Srujan Chitla"},"WWDCNotes.png":{"type":"image","identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}],"alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10028-Bring-widgets-to-life":{"title":"Bring widgets to life","url":"\/documentation\/wwdcnotes\/wwdc23-10028-bring-widgets-to-life","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10028-Bring-widgets-to-life","role":"sampleCode","type":"topic","abstract":[{"text":"Learn how to make animated and interactive widgets for your apps and games. We’ll show you how to tweak animations for entry transitions and add interactivity using SwiftUI Button and Toggle so that you can create powerful moments right from the Home Screen and Lock Screen.","type":"text"}],"kind":"article"},"https://github.com/rusik":{"url":"https:\/\/github.com\/rusik","title":"GitHub","identifier":"https:\/\/github.com\/rusik","titleInlineContent":[{"type":"text","text":"GitHub"}],"type":"link"},"WWDC23-Icon.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-Icon.png"}],"identifier":"WWDC23-Icon.png","type":"image","alt":null}}}