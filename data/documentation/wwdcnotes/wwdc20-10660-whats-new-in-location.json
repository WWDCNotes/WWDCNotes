{"metadata":{"modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC20","role":"sampleCode","title":"What’s new in location"},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10660-Whats-new-in-location","interfaceLanguage":"swift"},"sampleCodeDownload":{"action":{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc20\/10660","isActive":true,"overridingTitle":"Watch Video (26 min)"},"kind":"sampleDownload"},"sections":[],"schemaVersion":{"major":0,"minor":3,"patch":0},"primaryContentSections":[{"content":[{"type":"heading","text":"Overview","level":2,"anchor":"overview"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"When apps ask for permission to access user’s location, a new option “Precise” has been added"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"This option is also available under Settings for your app","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Apps cannot opt out of this feature, it’s completely under user’s control","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"New enum type:"}],"type":"paragraph"}]}],"type":"unorderedList"}]}]},{"type":"codeListing","syntax":"swift","code":["enum CLAccuracyAuthorization {","    case fullAccuracy","    case reducedAccuracy","}"]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/corelocation\/cllocationmanager?changes=latest_minor","isActive":true}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"locationManagerDidChangeAuthorization(_: CLLocationManager)"},{"type":"text","text":" will get called when user change the authorization status or accuracy"}]}]}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Location delivery"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"CLLocation","type":"codeVoice"},{"text":" objects will be sent to ","type":"text"},{"code":"didUpdateLocations","type":"codeVoice"},{"text":", with a center point and large ","type":"text"},{"code":"horizontalAccuracy","type":"codeVoice"},{"text":" value","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"recomputed about 4 times per hour"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"text","text":"Demo of Apple Maps with “Precision: Off”"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When asking for full accuracy:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Option 1: Navigate users to Settings app and grant full accuracy permanently. This may not be desirable for users.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Option 2: Ask for temporary permission to full accuracy. You need to provide a “purpose key”, which is defined in "},{"code":"Info.plist","type":"codeVoice"},{"type":"text","text":"(You can have multiple entries to explain why you need full accuracy). Once granted, full accuracy will remain for the rest of the app session."}]}]}]}]},{"content":[{"inlineContent":[{"text":"Region monitoring won’t work when precise mode is turned off","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Send users to Settings when it makes sense"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"text":"Accuracy authorization status are synced and shared between iPhone and Apple Watch","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Best practices:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Adapt your app for all values of ","type":"text"},{"type":"codeVoice","code":"accuracyAuthorization"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Background monitoring behavior will change under "},{"code":"reducedAccuracy","type":"codeVoice"}]}]},{"content":[{"inlineContent":[{"text":"Consider intentionally using ","type":"text"},{"type":"codeVoice","code":"reducedAccuracy"},{"text":" by default","type":"text"}],"type":"paragraph"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"As of iOS 13.4, users may choose to go from “while in use” to “always” without leaving the app. So it’s better for developers to ask for ","type":"text"},{"code":".authorizedWhenInUse","type":"codeVoice"},{"text":" the first time, and only ask for ","type":"text"},{"code":".authorizedAlways","type":"codeVoice"},{"text":" when the user accesses a feature that needs it","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"App clips"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"No Always authorization"}]}]},{"content":[{"inlineContent":[{"text":"“While using” becomes “while using until tomorrow”","type":"text"}],"type":"paragraph"}]}]}]},{"content":[{"inlineContent":[{"text":"Widgets","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Get location authorization from parent app, but still needs to specify a key in its ","type":"text"},{"code":"Info.plist","type":"codeVoice"}]}]}],"type":"unorderedList"}]}]},{"type":"heading","text":"Written By","level":2,"anchor":"Written-By"},{"type":"row","numberOfColumns":5,"columns":[{"content":[{"inlineContent":[{"identifier":"tianskylan","type":"image"}],"type":"paragraph"}],"size":1},{"content":[{"anchor":"Sky-Lan","level":3,"text":"Sky Lan","type":"heading"},{"inlineContent":[{"overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"isActive":true,"type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/tianskylan"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/tianskylan"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/"}],"type":"paragraph"}],"size":4}]},{"type":"thematicBreak"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}],"type":"paragraph"},{"type":"heading","text":"Related Sessions","level":2,"anchor":"Related-Sessions"},{"style":"list","type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10102-Meet-the-Location-Button","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10028-Meet-WidgetKit","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10140-Build-locationaware-enterprise-apps","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10162-Design-for-location-privacy","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10174-Explore-App-Clips","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10668-Meet-Nearby-Interaction","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10676-Build-trust-through-better-privacy"]},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}],"kind":"content"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc20-10660-whats-new-in-location"]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"]]},"kind":"article","abstract":[{"type":"text","text":"Location technologies are core to delivering context-based services within your app. Discover how the latest privacy controls in Core Location add a whole new dimension to determining position and what that means for your app. We’ll walk you through best practices for implementing these latest location updates and show you how they’re designed to ensure more people get an experience they’re going to love."}],"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10676-Build-trust-through-better-privacy":{"abstract":[{"type":"text","text":"Privacy is a more important issue than ever. Learn about Apple’s privacy pillars, our approach to privacy, and how to adopt the latest features on our platforms that can help you earn customer trust, create more personal experiences, and improve engagement. Explore the transparency iOS provides when your app is recording using the microphone or camera, control over location with approximate location, tracking transparency and permissions, and much more."}],"type":"topic","kind":"article","title":"Build trust through better privacy","url":"\/documentation\/wwdcnotes\/wwdc20-10676-build-trust-through-better-privacy","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10676-Build-trust-through-better-privacy","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10668-Meet-Nearby-Interaction":{"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc20-10668-meet-nearby-interaction","role":"sampleCode","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10668-Meet-Nearby-Interaction","abstract":[{"text":"The Nearby Interaction framework streams distance and direction between opted-in Apple devices containing the U1 chip. Discover how this powerful combination of hardware and software allow you to create intuitive spatial interactions based on the relative position of two or more devices. We’ll walk you through this session-based API and show you how to deliver entirely new interactive experiences — all with privacy in mind.","type":"text"}],"title":"Meet Nearby Interaction"},"WWDC20-Icon.png":{"type":"image","variants":[{"url":"\/images\/WWDCNotes\/WWDC20-Icon.png","traits":["1x","light"]}],"identifier":"WWDC20-Icon.png","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10162-Design-for-location-privacy":{"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc20-10162-design-for-location-privacy","role":"sampleCode","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10162-Design-for-location-privacy","abstract":[{"type":"text","text":"When someone uses iPhone or iPad, they have control over how their location is shared with the apps they use — including sharing an approximate location rather than precise coordinates. This creates a more private experience across their device, and it impacts all apps that rely on location data or use it to supplement certain elements of their experience."}],"title":"Design for location privacy"},"WWDC20.jpeg":{"alt":null,"type":"image","identifier":"WWDC20.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20.jpeg"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10174-Explore-App-Clips":{"title":"Explore App Clips","abstract":[{"text":"Help people experience the right parts of your app at the exact moment they need them. We’ll explain how to design and build an App Clip — a small part of your app that focuses on a specific task — and make it easily discoverable. Learn how to focus your App Clip on short and fast interactions and identify contextually-relevant situations where you can surface it, like a search in Maps or at a real-world location through QR codes, NFC, or App Clip codes. Find out a few key differences between apps and App Clips, and explore how App Clips interact with their corresponding apps.","type":"text"}],"kind":"article","role":"sampleCode","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc20-10174-explore-app-clips","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10174-Explore-App-Clips"},"https://":{"titleInlineContent":[{"type":"text","text":"Blog"}],"identifier":"https:\/\/","title":"Blog","url":"https:\/\/","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10140-Build-locationaware-enterprise-apps":{"url":"\/documentation\/wwdcnotes\/wwdc20-10140-build-locationaware-enterprise-apps","title":"Build location-aware enterprise apps","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10140-Build-locationaware-enterprise-apps","abstract":[{"text":"Develop location-aware enterprise apps for your business and personalize your employee’s everyday experience. Learn how Apple built the Caffe Macs app for its on-campus cafeterias using iBeacons and Location Services and how you can apply these tools and frameworks to your own apps, while preserving employee privacy. From there, discover how you can use localization to deliver a great experience for your international employees.","type":"text"}],"kind":"article","type":"topic"},"https://developer.apple.com/documentation/corelocation/cllocationmanager?changes=latest_minor":{"type":"link","title":"API changes to CLLocationManager","titleInlineContent":[{"type":"text","text":"API changes to CLLocationManager"}],"identifier":"https:\/\/developer.apple.com\/documentation\/corelocation\/cllocationmanager?changes=latest_minor","url":"https:\/\/developer.apple.com\/documentation\/corelocation\/cllocationmanager?changes=latest_minor"},"https://github.com/tianskylan":{"titleInlineContent":[{"text":"GitHub","type":"text"}],"title":"GitHub","type":"link","identifier":"https:\/\/github.com\/tianskylan","url":"https:\/\/github.com\/tianskylan"},"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"role":"collection","kind":"symbol","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"title":"WWDC Notes","type":"topic"},"tianskylan":{"alt":"Profile image of Sky Lan","identifier":"tianskylan","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/tianskylan.jpeg"}],"type":"image"},"tianskylan.jpeg":{"type":"image","variants":[{"url":"\/images\/WWDCNotes\/tianskylan.jpeg","traits":["1x","light"]}],"identifier":"tianskylan.jpeg","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20":{"url":"\/documentation\/wwdcnotes\/wwdc20","abstract":[{"type":"text","text":"Xcode 12, Swift 5.3, iOS 14, macOS 11 (Big Sur), tvOS 14, watchOS 7."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"code":"WidgetKit","type":"codeVoice"},{"type":"text","text":", "},{"code":"StoreKit Testing","type":"codeVoice"},{"type":"text","text":", and more."}],"role":"collectionGroup","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20","images":[{"type":"icon","identifier":"WWDC20-Icon.png"},{"type":"card","identifier":"WWDC20.jpeg"}],"title":"WWDC20","type":"topic"},"WWDCNotes.png":{"alt":null,"type":"image","identifier":"WWDCNotes.png","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}]},"https://developer.apple.com/wwdc20/10660":{"identifier":"https:\/\/developer.apple.com\/wwdc20\/10660","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc20\/10660","type":"download"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10102-Meet-the-Location-Button":{"title":"Meet the Location Button","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10102-Meet-the-Location-Button","url":"\/documentation\/wwdcnotes\/wwdc21-10102-meet-the-location-button","type":"topic","kind":"article","role":"sampleCode","abstract":[{"type":"text","text":"Meet CLLocationButton: a secure interface element that provides an easy, low-friction way to grant your app location access only when and where it is needed. Learn how you can add CLLocationButton to new or existing code, how to customize it within interface legibility guidelines, how to recognize and address customization failures, and how it interacts with iOS’s traditional prompt-based Location Services authorization."}]},"doc://WWDCNotes/documentation/WWDCNotes/tianskylan":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/tianskylan","title":"Sky Lan (2 notes)","abstract":[{"type":"text","text":"No Bio on GitHub"}],"kind":"article","url":"\/documentation\/wwdcnotes\/tianskylan","type":"topic","role":"sampleCode","images":[{"type":"card","identifier":"tianskylan.jpeg"},{"type":"icon","identifier":"tianskylan.jpeg"}]},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","title":"Contributions are welcome!","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10028-Meet-WidgetKit":{"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc20-10028-meet-widgetkit","title":"Meet WidgetKit","type":"topic","role":"sampleCode","abstract":[{"text":"Meet WidgetKit: the best way to bring your app’s most useful information directly to the home screen. We’ll show you what makes a great widget and take a look at WidgetKit’s features and functionality. Learn how to get started creating a widget, and find out how WidgetKit leverages the power of SwiftUI to provide a stateless experience. Discover how to harness your existing proactive technologies to make sure your widget surfaces relevant material. And create a Timeline that ensures your content is always fresh.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10028-Meet-WidgetKit"}}}