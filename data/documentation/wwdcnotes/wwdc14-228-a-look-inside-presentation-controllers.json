{"sampleCodeDownload":{"kind":"sampleDownload","action":{"type":"reference","isActive":true,"identifier":"http:\/\/developer.apple.com\/wwdc14\/228","overridingTitle":"Watch Video"}},"schemaVersion":{"major":0,"patch":0,"minor":3},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC14-228-A-Look-Inside-Presentation-Controllers","interfaceLanguage":"swift"},"kind":"article","sections":[],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc14-228-a-look-inside-presentation-controllers"],"traits":[{"interfaceLanguage":"swift"}]}],"abstract":[{"text":"iOS 8 brings you powerful new means of presenting content within your apps. Hear how presentation controllers were leveraged by UIKit to give you fine grain control using new alert and searching APIs. Dive deep into how presentation controllers work and how you can use them to present content within your app in exciting new ways.","type":"text"}],"metadata":{"roleHeading":"WWDC14","role":"sampleCode","title":"A Look Inside Presentation Controllers","modules":[{"name":"WWDC Notes"}]},"primaryContentSections":[{"kind":"content","content":[{"level":2,"text":"Overview","type":"heading","anchor":"overview"},{"name":"Note","type":"aside","style":"note","content":[{"inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/library\/archive\/samplecode\/LookInside\/Introduction\/Intro.html","isActive":true},{"type":"text","text":", "},{"type":"reference","identifier":"https:\/\/github.com\/qrush\/LookInside","isActive":true}],"type":"paragraph"}]},{"level":2,"text":"Presentation basics","type":"heading","anchor":"Presentation-basics"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"presented","type":"text"},{"text":" view controller: the view controller we’re showing","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"presenting"},{"type":"text","text":" view controller the view controller that is presenting the presented view controller"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"content","type":"text"},{"text":": in ","type":"text"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uipresentationcontroller","type":"reference"},{"text":" terms, this the ","type":"text"},{"text":"presented","type":"text"},{"text":" content, it’s the foreground stuff the user is meant to interact with","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"chrome","type":"text"},{"text":": in ","type":"text"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uipresentationcontroller","overridingTitle":"UIPresentationController","overridingTitleInlineContent":[{"type":"codeVoice","code":"UIPresentationController"}],"type":"reference"},{"text":" terms, this is the background content (behind the ","type":"text"},{"text":"content","type":"text"},{"text":") that is usually dimmed","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"code":"UIPresentationController","type":"codeVoice"},{"text":" manages the view controllers presentation in your app. All UI view controller presentations in iOS 8 are backed by ","type":"text"},{"code":"UIPresentationController","type":"codeVoice"},{"text":".","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Since "},{"type":"codeVoice","code":"UIPresentationController"},{"type":"text","text":" owns\/can provide "},{"type":"text","text":"chrome"},{"type":"text","text":", it can also provide its own animations for that chrome and can also animate its chrome alongside your existing animator objects’ custom animations."}]},{"level":3,"text":"Division of responsibilities","type":"heading","anchor":"Division-of-responsibilities"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Before iOS 8, your animator object was responsible to:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"animate the controller content"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"positioning the content"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"manage the chrome"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"From iOS 8, the content positioning and chrome management are ","type":"text"},{"code":"UIPresentationController","type":"codeVoice"},{"text":"’s responsibility.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UIPresentationController"},{"type":"text","text":" also drives adaptation in your application, as it knows about the presentation traits."}]},{"level":2,"text":"UIKit presentations","type":"heading","anchor":"UIKit-presentations"},{"type":"paragraph","inlineContent":[{"text":"Let’s say that we want to make a custom transition like the following:","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In iOS 7, UIKit introduced the "},{"code":"transitioningDelegate","type":"codeVoice"},{"type":"text","text":" ("},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiviewcontrollertransitioningdelegate","isActive":true},{"type":"text","text":") that was responsible to provide an object animator for the custom presentation animation. From iOS 8 "},{"code":"transitioningDelegate","type":"codeVoice"},{"type":"text","text":", also provides the presentation controller via a new method:"}]},{"code":["- (UIPresentationController *)presentationControllerForPresentedViewController:(UIViewController *)presented ","                                                      presentingViewController:(UIViewController *)presenting ","                                                          sourceViewController:(UIViewController *)source;"],"type":"codeListing","syntax":"objc"},{"type":"paragraph","inlineContent":[{"text":"How to:","type":"text"}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"text":"In both the ","type":"text"},{"text":"presenting","type":"text"},{"text":" and ","type":"text"},{"text":"presented","type":"text"},{"text":" view controller we will set a custom ","type":"text"},{"code":"transitionDelegate","type":"codeVoice"}],"type":"paragraph"}]}]},{"code":["transitionDelegate = [[OverlayTransitioningDelegate alloc] init];","[overlayViewController setTransitioningDelegate:transitionDelegate];"],"type":"codeListing","syntax":"objc"},{"start":2,"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"In the ","type":"text"},{"text":"presented","type":"text"},{"text":" view controller we will set the modal presentation to ","type":"text"},{"type":"codeVoice","code":".custom"},{"text":". This indicates to UIKit that we should consult your transitioning delegate for a custom Presentation Controller to use for the presentation:","type":"text"}]}]}]},{"code":["[self setModalPresentationStyle:UIModalPresentationCustom];"],"type":"codeListing","syntax":"objc"},{"start":3,"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"In our transition delegate, we need to provide that ","type":"text"},{"type":"codeVoice","code":"UIPresentationController"},{"text":":","type":"text"}]}]}]},{"code":["","- (UIPresentationController *)presentationControllerForPresentedViewController:(UIViewController *)presented ","                                                      presentingViewController:(UIViewController *)presenting","                                                          sourceViewController:(UIViewController *)source","{","  return ...","}"],"type":"codeListing","syntax":"objc"},{"start":4,"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"In our custom ","type":"text"},{"code":"UIPresentationController","type":"codeVoice"},{"text":", we need to add the animations for the dimming view.","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"First in the ","type":"text"},{"code":"presentationTransitionWillBegin","type":"codeVoice"},{"text":":","type":"text"}]},{"code":["- (void)presentationTransitionWillBegin","{","  UIView* containerView = [self containerView];","  UIViewController* presentedViewController = [self presentedViewController];","  \/\/ we make our dimming view full screen","  [dimmingView setFrame:[containerView bounds]];","  \/\/ we make our dimming view fully transparent","  [dimmingView setAlpha:0.0];","","  \/\/ we add our dimming view above all the other content in the presentation","  [containerView insertSubview:dimmingView atIndex:0];","  ","  \/\/ we add the dimming view fade-in along with the rest of the coordinator animations","  [[presentedViewController transitionCoordinator] animateAlongsideTransition:^(id<UIViewControllerTransitionCoordinatorContext>context) {","    [dimmingView setAlpha:1.0];","  } completion:nil];","}"],"type":"codeListing","syntax":"objc"},{"type":"paragraph","inlineContent":[{"text":"Then in ","type":"text"},{"code":"dismissalTransitionWillBegin","type":"codeVoice"},{"text":":","type":"text"}]},{"code":["- (void)dismissalTransitionWillBegin","{","  \/\/ here we just fade-out the dimming view","  [[[self presentedViewController] transitionCoordinator] animateAlongsideTransition:^(id<UIViewControllerTransitionCoordinatorContext>context) {","      [dimmingView setAlpha:0.0];","  } completion:nil];","}"],"type":"codeListing","syntax":"objc"},{"start":5,"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"In our transition delegate we need to provide our custom animator object for both presenting and dismissing our view:","type":"text"}]}]}]},{"code":["- (id <UIViewControllerAnimatedTransitioning>)animationControllerForPresentedController:(UIViewController *)presented","                                                                   presentingController:(UIViewController *)presenting","                                                                      sourceController:(UIViewController *)source","{","  OverlayAnimatedTransitioning *animationController = [[OverlayAnimatedTransitioning alloc] init];","  return animationController;","}","","- (id <UIViewControllerAnimatedTransitioning>)animationControllerForDismissedController:(UIViewController *)dismissed","{","  OverlayAnimatedTransitioning *animationController = [[OverlayAnimatedTransitioning alloc] init];","  return animationController;","}"],"type":"codeListing","syntax":"objc"},{"start":6,"type":"orderedList","items":[{"content":[{"inlineContent":[{"text":"The sidebar width in the animation above is about a third of the ","type":"text"},{"text":"presenting","type":"text"},{"text":" view controller, in order to achieve this, we need to implement various ","type":"text"},{"code":"UIPresentationController","type":"codeVoice"},{"text":" methods:","type":"text"}],"type":"paragraph"}]}]},{"code":["\/\/ Note that this is one of the methods coming from UIContentContainer. ","\/\/ This method is also here because the presenting view controller is not a container for the Presentation Controller. ","\/\/ The size that gets passed to the presentation view controller is the same size that is passed to the presenting view controller.","\/\/ The Presentation Controller is the container for the presented controller, hence it decides what is the size for the ","\/\/ presented view controller.","- (CGSize)sizeForChildContentContainer:(id <UIContentContainer>)container withParentContainerSize:(CGSize)parentSize {","  return CGSizeMake(floorf(parentSize.width \/ 3.0), parentSize.height);","}","","\/\/ This is where we return to the view controller transitioning system what frame we'd like the presented view to have.","- (CGRect)frameOfPresentedViewInContainerView {","  CGRect presentedViewFrame = CGRectZero;","  CGRect containerBounds = [[self containerView] bounds];","  presentedViewFrame.size = [self sizeForChildContentContainer: (UIView<UIContentContainer> *)[self presentedView]","  withParentContainerSize:containerBounds.size];","  presentedViewFrame.origin.x = containerBounds.size.width - presentedViewFrame.size.width;","  return presentedViewFrame;","}"],"type":"codeListing","syntax":"objc"},{"start":7,"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"To add rotation support, all we need to do is implement in our presentation controller the ","type":"text"},{"code":"containerViewWillLayoutSubviews","type":"codeVoice"},{"text":" method:","type":"text"}]}]}]},{"code":["- (void)containerViewWillLayoutSubviews","{","  [dimmingView setFrame:[[self containerView] bounds]];","  [[self presentedView] setFrame:[self frameOfPresentedViewInContainerView]];","}"],"type":"codeListing","syntax":"objc"},{"level":2,"text":"Written By","type":"heading","anchor":"Written-By"},{"columns":[{"size":1,"content":[{"inlineContent":[{"type":"image","identifier":"zntfdr"}],"type":"paragraph"}]},{"size":4,"content":[{"type":"heading","anchor":"Federico-Zanetello","text":"Federico Zanetello","level":3},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"isActive":true,"overridingTitle":"Contributed Notes","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/zntfdr","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/zntfdr.dev","isActive":true,"type":"reference"}]}]}],"type":"row","numberOfColumns":5},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}]},{"type":"small","inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}]},{"type":"small","inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}]}]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC14"]]},"references":{"http://developer.apple.com/wwdc14/228":{"checksum":null,"url":"http:\/\/developer.apple.com\/wwdc14\/228","identifier":"http:\/\/developer.apple.com\/wwdc14\/228","type":"download"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC14":{"abstract":[{"type":"text","text":"Xcode 6, Swift 1.0, iOS 8, macOS 10.10 (Yosemite)."}],"role":"collectionGroup","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC14","type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc14","images":[{"type":"icon","identifier":"WWDC14-Icon.png"},{"type":"card","identifier":"WWDC14.jpeg"}],"title":"WWDC14"},"WWDC14.jpeg":{"identifier":"WWDC14.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC14.jpeg"}],"type":"image","alt":null},"WWDC14-Icon.png":{"identifier":"WWDC14-Icon.png","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC14-Icon.png","traits":["1x","light"]}],"type":"image"},"https://github.com/qrush/LookInside":{"title":"working sample code","url":"https:\/\/github.com\/qrush\/LookInside","titleInlineContent":[{"text":"working sample code","type":"text"}],"type":"link","identifier":"https:\/\/github.com\/qrush\/LookInside"},"https://developer.apple.com/documentation/uikit/uipresentationcontroller":{"url":"https:\/\/developer.apple.com\/documentation\/uikit\/uipresentationcontroller","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uipresentationcontroller","type":"link","title":"UIPresentationController","titleInlineContent":[{"code":"UIPresentationController","type":"codeVoice"}]},"WWDCNotes.png":{"identifier":"WWDCNotes.png","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}],"type":"image"},"https://zntfdr.dev":{"title":"Blog","url":"https:\/\/zntfdr.dev","titleInlineContent":[{"text":"Blog","type":"text"}],"type":"link","identifier":"https:\/\/zntfdr.dev"},"zntfdr.jpeg":{"identifier":"zntfdr.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/zntfdr.jpeg"}],"type":"image","alt":null},"https://developer.apple.com/library/archive/samplecode/LookInside/Introduction/Intro.html":{"url":"https:\/\/developer.apple.com\/library\/archive\/samplecode\/LookInside\/Introduction\/Intro.html","title":"Official sample code","titleInlineContent":[{"type":"text","text":"Official sample code"}],"identifier":"https:\/\/developer.apple.com\/library\/archive\/samplecode\/LookInside\/Introduction\/Intro.html","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","kind":"symbol","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"role":"collection","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"title":"WWDC Notes"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"role":"sampleCode","type":"topic","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"url":"\/documentation\/wwdcnotes\/zntfdr","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","title":"Federico Zanetello (332 notes)"},"https://developer.apple.com/documentation/uikit/uiviewcontrollertransitioningdelegate":{"title":"UIViewControllerTransitioning","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiviewcontrollertransitioningdelegate","titleInlineContent":[{"type":"codeVoice","code":"UIViewControllerTransitioning"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiviewcontrollertransitioningdelegate"},"https://github.com/zntfdr":{"url":"https:\/\/github.com\/zntfdr","identifier":"https:\/\/github.com\/zntfdr","type":"link","title":"GitHub","titleInlineContent":[{"text":"GitHub","type":"text"}]},"zntfdr":{"identifier":"zntfdr","alt":"Profile image of Federico Zanetello","variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}],"type":"image"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"type":"link","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}}}