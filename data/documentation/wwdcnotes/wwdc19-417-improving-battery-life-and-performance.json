{"sections":[],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-417-Improving-Battery-Life-and-Performance","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19"]]},"abstract":[{"type":"text","text":"Learn about new ways to find and fix performance issues during daily development, beta testing, and public release on the App Store. Learn how to catch performance issues during daily development by measuring CPU, memory, and more in your XCTests. Discover how to find issues in the field during beta testing and public release using MetricKit. See how the Xcode Organizer now displays the most important metrics from your app aggregated from each version on the App Store."}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"identifier":"https:\/\/developer.apple.com\/wwdc19\/417","overridingTitle":"Watch Video (39 min)","isActive":true,"type":"reference"}},"metadata":{"roleHeading":"WWDC19","title":"Improving Battery Life and Performance","role":"sampleCode","modules":[{"name":"WWDC Notes"}]},"primaryContentSections":[{"kind":"content","content":[{"text":"New Tools","anchor":"New-Tools","level":2,"type":"heading"},{"text":"XCTest Metrics","anchor":"XCTest-Metrics","level":3,"type":"heading"},{"inlineContent":[{"type":"text","text":"Performance and battery usage directly in tests (analyzing blocks)"}],"type":"paragraph"},{"text":"MetricKit","anchor":"MetricKit","level":3,"type":"heading"},{"inlineContent":[{"type":"text","text":"On device framework that anonymously collects metrics about your app performance and battery usage on real users, we can decide what to measure."}],"type":"paragraph"},{"text":"Xcode Metrics Organizer","anchor":"Xcode-Metrics-Organizer","level":3,"type":"heading"},{"inlineContent":[{"text":"In Organizer we have a new tab showcasing Metrics (anonymously collected by Apple)","type":"text"}],"type":"paragraph"},{"text":"Battery Metrics","anchor":"Battery-Metrics","level":2,"type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Processing (CPU usage)","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Location"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Display"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Networking"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Accessories (Bluetooth)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Multimedia","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Camera","type":"text"}]}]}],"type":"unorderedList"},{"text":"Performance Metrics","anchor":"Performance-Metrics","level":2,"type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"Hangs (histogram on when the app remains unresponsive to user input)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Disk"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Application Launch"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Memory"}]}]},{"content":[{"inlineContent":[{"text":"Custom Intervals","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"With MetricKit we can add tests and put baselines on those tests: if a test passes that baseline, it automatically fails."}],"type":"paragraph"},{"text":"Custom MetricKit Reports","anchor":"Custom-MetricKit-Reports","level":2,"type":"heading"},{"inlineContent":[{"type":"text","text":"MetricKit reports will be sent to a delegate (in our app), which will be responsible to send the data to our servers."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Our MetricKit delegate will be called up to once per day with a MXMetricPayload, which then we can upload. We can simulate a payload in the simulator: “Debug > Simulate MetricKit Payload”"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Standard MetricKit Reports"},{"type":"text","text":" "},{"type":"text","text":"Apple will also gather metrics and report them anonymously to us like it does with Energy consumption and crashes via the Organizer. (this is automatic, no need for any change in our app)"}],"type":"paragraph"},{"text":"Written By","anchor":"Written-By","level":2,"type":"heading"},{"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"zntfdr"}]}]},{"size":4,"content":[{"type":"heading","anchor":"Federico-Zanetello","text":"Federico Zanetello","level":3},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"type":"reference","isActive":true,"overridingTitle":"Contributed Notes"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/zntfdr","type":"reference","isActive":true},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/zntfdr.dev","type":"reference","isActive":true}]}]}],"numberOfColumns":5,"type":"row"},{"type":"thematicBreak"},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}],"type":"paragraph"},{"text":"Related Sessions","anchor":"Related-Sessions","level":2,"type":"heading"},{"style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10258-Understand-and-eliminate-hangs-from-your-app","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10142-Build-scalable-enterprise-app-suites","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-413-Testing-in-Xcode","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-707-Advances-in-App-Background-Execution"],"type":"links"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2025 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}]}],"schemaVersion":{"minor":3,"patch":0,"major":0},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc19-417-improving-battery-life-and-performance"]}],"kind":"article","references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-413-Testing-in-Xcode":{"title":"Testing in Xcode","kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-413-Testing-in-Xcode","url":"\/documentation\/wwdcnotes\/wwdc19-413-testing-in-xcode","abstract":[{"type":"text","text":"Unit testing is an essential tool to consistently verify your code works correctly. Learn about the built-in testing features in Xcode, using XCTest. Find out how to organize your tests and run them under different configurations using test plans, new in Xcode 11. Discover how to automate testing and efficiently work with the results."}],"role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19":{"images":[{"type":"icon","identifier":"WWDC19-Icon.png"},{"type":"card","identifier":"WWDC19.jpeg"}],"type":"topic","title":"WWDC19","abstract":[{"type":"text","text":"Xcode 11, Swift 5.1, iOS 13, macOS 10.15 (Catalina), tvOS 13, watchOS 6."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"code":"Combine","type":"codeVoice"},{"type":"text","text":", "},{"code":"Core Haptics","type":"codeVoice"},{"type":"text","text":", "},{"code":"Create ML","type":"codeVoice"},{"type":"text","text":", and more."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19","role":"collectionGroup","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc19"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10258-Understand-and-eliminate-hangs-from-your-app":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10258-Understand-and-eliminate-hangs-from-your-app","abstract":[{"text":"Discover how you can track down hangs and delays in your app. We’ll show you tools and methods to discover hangs and their causes, learn about anti-patterns that can lead to hangs, explore best practices for eliminating hangs like GCD, and provide guidance on when you should consider asynchronous code to improve your app performance.","type":"text"}],"role":"sampleCode","title":"Understand and eliminate hangs from your app","url":"\/documentation\/wwdcnotes\/wwdc21-10258-understand-and-eliminate-hangs-from-your-app","kind":"article"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10142-Build-scalable-enterprise-app-suites":{"title":"Build scalable enterprise app suites","kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10142-Build-scalable-enterprise-app-suites","url":"\/documentation\/wwdcnotes\/wwdc20-10142-build-scalable-enterprise-app-suites","abstract":[{"text":"Learn how to build focused enterprise apps that work well together. In this session, we’ll introduce you to Apple Retail’s suite of enterprise apps, which help employees interact with customers, track operations, manage stores, and stay connected. Discover how Apple Retail created a unified set of apps by adopting Swift Packages and testing for app scalability. And explore how managing apps in production with configurations can help tailor app suites to different regions and locations.","type":"text"}],"role":"sampleCode"},"zntfdr.jpeg":{"identifier":"zntfdr.jpeg","variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}],"alt":null,"type":"image"},"https://developer.apple.com/wwdc19/417":{"identifier":"https:\/\/developer.apple.com\/wwdc19\/417","url":"https:\/\/developer.apple.com\/wwdc19\/417","type":"download","checksum":null},"https://zntfdr.dev":{"url":"https:\/\/zntfdr.dev","identifier":"https:\/\/zntfdr.dev","title":"Blog","titleInlineContent":[{"type":"text","text":"Blog"}],"type":"link"},"zntfdr":{"identifier":"zntfdr","type":"image","alt":"Profile image of Federico Zanetello","variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}]},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link"},"WWDC19-Icon.png":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC19-Icon.png","traits":["1x","light"]}],"identifier":"WWDC19-Icon.png","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","type":"topic","url":"\/documentation\/wwdcnotes","role":"collection","kind":"symbol","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"title":"WWDC Notes","images":[{"type":"icon","identifier":"WWDCNotes.png"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-707-Advances-in-App-Background-Execution":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-707-Advances-in-App-Background-Execution","abstract":[{"text":"Background execution is a powerful tool your app can leverage to provide a great user experience. Learn about best practices to follow when running in the background, especially if you use VoIP or silent pushes, and an all-new scheduling API that enables long running processing and maintenance tasks.","type":"text"}],"role":"sampleCode","title":"Advances in App Background Execution","url":"\/documentation\/wwdcnotes\/wwdc19-707-advances-in-app-background-execution","kind":"article"},"https://github.com/zntfdr":{"url":"https:\/\/github.com\/zntfdr","identifier":"https:\/\/github.com\/zntfdr","title":"GitHub","titleInlineContent":[{"type":"text","text":"GitHub"}],"type":"link"},"WWDCNotes.png":{"identifier":"WWDCNotes.png","type":"image","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"kind":"article","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"url":"\/documentation\/wwdcnotes\/zntfdr","type":"topic","title":"Federico Zanetello (332 notes)"},"WWDC19.jpeg":{"identifier":"WWDC19.jpeg","variants":[{"url":"\/images\/WWDCNotes\/WWDC19.jpeg","traits":["1x","light"]}],"alt":null,"type":"image"}}}