{"kind":"article","schemaVersion":{"patch":0,"minor":3,"major":0},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"]]},"sampleCodeDownload":{"action":{"overridingTitle":"Watch Video (13 min)","isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc21\/10103","type":"reference"},"kind":"sampleDownload"},"metadata":{"modules":[{"name":"WWDC Notes"}],"title":"Optimize for 5G networks","roleHeading":"WWDC21","role":"sampleCode"},"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","type":"heading","level":2,"text":"Overview"},{"type":"paragraph","inlineContent":[{"text":"Each generation leap results in increased opportunities for app developers to push the envelope and deliver previously unheard-of experiences in your app","type":"text"}]},{"anchor":"Path-to-5G","type":"heading","level":2,"text":"Path to 5G"},{"type":"paragraph","inlineContent":[{"type":"text","text":"5G provides other advances beyond just more data at a faster rate:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"faster round-trip times between your app and your server - meaning faster and more synchronized transactions"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"5G‚Äôs ability to handle more devices concurrently - you can continue to deliver data-related services in your app, even in congested public environments"}]}]},{"content":[{"inlineContent":[{"text":"‚Ä¶and more","type":"text"}],"type":"paragraph"}]}]},{"anchor":"Built-in-intelligence","type":"heading","level":2,"text":"Built-in intelligence"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Today‚Äôs modern 5G cellular networks come primarily in two varieties, Non-Standalone (NSA) and Standalone (SA)."}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Non-Standalone","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"built on the existing LTE core","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"can use both LTE and 5G links to schedule traffic"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"operates at frequencies below seven gigahertz","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"includes support for millimeter wave","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"text":"Standalone","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"built entirely on the new 5G core","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"operates at frequencies below seven gigahertz","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"includes support for millimeter wave","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"delivers improved latency performance over LTE"}]}]}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Thanks to "},{"type":"text","text":"Automatic Switch to 5G"},{"type":"text","text":" and "},{"type":"text","text":"Smart Data Mode"},{"type":"text","text":", iOS takes performance, security, and power into consideration when choosing which connectivity to use - your app can focus on the user experience."}]},{"anchor":"Practical-guidance-for-developers","type":"heading","level":2,"text":"Practical guidance for developers"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"ignore network type"}]}]},{"content":[{"inlineContent":[{"text":"use high-level (Apple‚Äôs) frameworks to take full advantage of 5G","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"AVFoundation for Media","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"CallKit for VOIP"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Network framework\/Foundation‚Äôs URLSession","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"tune your application for constrained and expensive paths","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"in most cases, these are automatically derived by the system based on the active cellular plan"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"the user can also affect these by altering the ","type":"text"},{"text":"Data Mode","type":"text"},{"text":" settings on their device - there are three options:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Allow More Data on 5G - indicating an inexpensive path, similar to Wi-Fi"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Standard mode - which is usually considered as expensive","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Low Data Mode - which is considered constrained"}]}]}]}]}]}]}]},{"type":"paragraph","inlineContent":[{"text":"The concept of ","type":"text"},{"type":"strong","inlineContent":[{"text":"expensive","type":"text"}]},{"text":" and ","type":"text"},{"type":"strong","inlineContent":[{"text":"constrained","type":"text"}]},{"type":"text","text":" are surfaced as properties in all our high-level networking frameworks - the value of these properties should be your only consideration when determining the type of network services available for your app."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"URLSession"},{"type":"text","text":"‚Äôs "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/urlsessionconfiguration\/3235752-allowsexpensivenetworkaccess"}]}]}]},{"type":"codeListing","code":["private func fetchAsset(at fetchURL: URL, allowsExpensive: Bool) {","  var fetch = URLRequest(url: fetchURL,","                         cachePolicy: .reloadIgnoringLocalCacheData,","                         timeoutInterval: 60)","  fetch.allowsExpensiveNetworkAccess = allowsExpensive \/\/ üëàüèª"," ","  \/\/ Fallback to low resolution fetch if network is expensive and unavailable","  URLSession.shared.dataTask(with: fetch) { [weak self] data, response, error in","    if let strongSelf = self,","      let error = error as? URLError,","      error.networkUnavailableReason == .expensive { \/\/ üëàüèª","        strongSelf.fetchAsset(at: strongSelf.lowResURLString, allowsExpensive: true)","    }","  }.resume()","}"],"syntax":"swift"},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"if your application implements policy based on expensive, provide a way for users to influence that policy"}]}],"name":"Note","type":"aside","style":"note"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"In "},{"type":"text","text":"Network.framework"},{"type":"text","text":", you have another option to check for constrained, expensive, and inexpensive path:"}],"type":"paragraph"}]}]},{"type":"codeListing","code":["func onConnectionStateChange(_ connection: NWConnection) {","  guard let path = connection.currentPath else { return } \/\/ insure we have a path","","  if connection.state == .ready {","    \/\/ Update your data usage heuristics based on cost for this connection","    ","    if path.isConstrained {","      \/\/ Reduced Data Usage","    } else if path.isExpensive {","      \/\/ Default Data Usage","    } else {","      \/\/ Unrestricted Data Usage","    }","  }","}"],"syntax":"swift"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"AVFoundation:"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/avfoundation\/avurlassetallowsconstrainednetworkaccesskey","isActive":true},{"type":"text","text":" - Allows network requests to use the constrained interface"}]}]},{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/avfoundation\/avurlassetallowsexpensivenetworkaccesskey"},{"text":" - Allows network requests to use the expensive interface","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]}]},{"anchor":"Written-By","type":"heading","level":2,"text":"Written By"},{"numberOfColumns":5,"type":"row","columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4"}]}]},{"size":4,"content":[{"level":3,"type":"heading","anchor":"Federico-Zanetello","text":"Federico Zanetello"},{"inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","isActive":true,"type":"reference","overridingTitle":"Contributed Notes"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/zntfdr","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/zntfdr.dev","isActive":true,"type":"reference"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}]},{"anchor":"Related-Sessions","type":"heading","level":2,"text":"Related Sessions"},{"type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-712-Advances-in-Networking-Part-1"],"style":"list"},{"type":"small","inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright ¬© 2012 ‚Äì 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10103-Optimize-for-5G-networks","interfaceLanguage":"swift"},"abstract":[{"text":"5G enables new opportunities for your app or game through better performance for data transfer, higher bandwidth, lower latency, and much more. Discover how you can take advantage of the latest networking technology and Apple hardware to create adaptive experiences for your content that best suit someone‚Äôs data connection and optimize network traffic.","type":"text"}],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc21-10103-optimize-for-5g-networks"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"references":{"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","type":"link","url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"title":"Contributions are welcome!"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21":{"type":"topic","title":"WWDC21","kind":"article","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes\/wwdc21","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21","abstract":[{"type":"text","text":"Xcode 13, Swift 5.5, iOS 15, macOS 12 (Monterey), tvOS 15, watchOS 8."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"code":"MusicKit","type":"codeVoice"},{"type":"text","text":", "},{"code":"DocC","type":"codeVoice"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit 2"},{"type":"text","text":", and more."}],"role":"collectionGroup"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"type":"topic","title":"Federico Zanetello (332 notes)","kind":"article","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}],"url":"\/documentation\/wwdcnotes\/zntfdr","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"role":"sampleCode"},"https://avatars.githubusercontent.com/u/5277837?v=4":{"variants":[{"url":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","traits":["1x","light"]}],"identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","alt":"Profile image of Federico Zanetello","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","title":"WWDC Notes","kind":"symbol","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"role":"collection"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-712-Advances-in-Networking-Part-1":{"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc19-712-advances-in-networking-part-1","kind":"article","title":"Advances in Networking, Part 1","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-712-Advances-in-Networking-Part-1","abstract":[{"type":"text","text":"Keep up with new and evolving networking protocols and standards by leveraging the modern networking frameworks on all Apple platforms and following best practices for efficiency and performance. In this session, learn about Low Data Mode, Combine in URLSession, WebSocket, and improvements to network mobility."}]},"https://developer.apple.com/wwdc21/10103":{"identifier":"https:\/\/developer.apple.com\/wwdc21\/10103","type":"download","url":"https:\/\/developer.apple.com\/wwdc21\/10103","checksum":null},"https://developer.apple.com/documentation/foundation/urlsessionconfiguration/3235752-allowsexpensivenetworkaccess":{"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/urlsessionconfiguration\/3235752-allowsexpensivenetworkaccess","type":"link","url":"https:\/\/developer.apple.com\/documentation\/foundation\/urlsessionconfiguration\/3235752-allowsexpensivenetworkaccess","titleInlineContent":[{"code":"allowsExpensiveNetworkAccess","type":"codeVoice"}],"title":"allowsExpensiveNetworkAccess"},"https://zntfdr.dev":{"identifier":"https:\/\/zntfdr.dev","type":"link","url":"https:\/\/zntfdr.dev","titleInlineContent":[{"text":"Blog","type":"text"}],"title":"Blog"},"https://developer.apple.com/documentation/avfoundation/avurlassetallowsconstrainednetworkaccesskey":{"identifier":"https:\/\/developer.apple.com\/documentation\/avfoundation\/avurlassetallowsconstrainednetworkaccesskey","type":"link","url":"https:\/\/developer.apple.com\/documentation\/avfoundation\/avurlassetallowsconstrainednetworkaccesskey","titleInlineContent":[{"code":"AVURLAssetAllowsConstrainedNetworkAccessKey","type":"codeVoice"}],"title":"AVURLAssetAllowsConstrainedNetworkAccessKey"},"zntfdr.jpeg":{"variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}],"identifier":"zntfdr.jpeg","alt":null,"type":"image"},"WWDCNotes.png":{"variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"identifier":"WWDCNotes.png","alt":null,"type":"image"},"https://developer.apple.com/documentation/avfoundation/avurlassetallowsexpensivenetworkaccesskey":{"identifier":"https:\/\/developer.apple.com\/documentation\/avfoundation\/avurlassetallowsexpensivenetworkaccesskey","type":"link","url":"https:\/\/developer.apple.com\/documentation\/avfoundation\/avurlassetallowsexpensivenetworkaccesskey","titleInlineContent":[{"code":"AVURLAssetAllowsExpensiveNetworkAccessKey","type":"codeVoice"}],"title":"AVURLAssetAllowsExpensiveNetworkAccessKey"},"https://github.com/zntfdr":{"identifier":"https:\/\/github.com\/zntfdr","type":"link","url":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"text":"GitHub","type":"text"}],"title":"GitHub"}}}