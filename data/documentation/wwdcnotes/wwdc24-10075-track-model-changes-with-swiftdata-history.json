{"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc24-10075-track-model-changes-with-swiftdata-history"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"minor":3,"major":0,"patch":0},"primaryContentSections":[{"content":[{"text":"Key Takeaways","type":"heading","level":1,"anchor":"Key-Takeaways"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Track changes","type":"text"}]},{"type":"text","text":" to your Data Store over time"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"With History functionality you can "},{"inlineContent":[{"type":"text","text":"track transactions and their history"}],"type":"strong"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Tombstones"}],"type":"strong"},{"type":"text","text":" to preserve specific values on a model after deletion"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Custom Data Stores"}],"type":"strong"},{"text":" can implement History","type":"text"}]}]}]},{"columns":[{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC24-10075-Overview1"}]}],"size":1},{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC24-10075-Overview2"}]}],"size":1}],"type":"row","numberOfColumns":2},{"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"identifier":"WWDC24-10075-Overview3","type":"image"}]}]},{"size":1,"content":[{"inlineContent":[{"type":"image","identifier":"WWDC24-10075-Overview4"}],"type":"paragraph"}]}],"type":"row","numberOfColumns":2},{"text":"Fundamentals","type":"heading","level":1,"anchor":"Fundamentals"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Without this feature, You can query the data at the Data Store at a given time, but you can’t know how you got there."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"History functionality allows you to "},{"type":"strong","inlineContent":[{"type":"text","text":"track the path"}]},{"type":"text","text":" taken to get there."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Now, with SwiftData History, ","type":"text"},{"inlineContent":[{"text":"your app now can query and process changes preserving the order of occurrence","type":"text"}],"type":"strong"},{"text":".","type":"text"}],"type":"paragraph"}]}]},{"text":"How it works:","type":"heading","level":2,"anchor":"How-it-works"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"When your model is saved, records a "},{"inlineContent":[{"type":"text","text":"transaction"}],"type":"strong"},{"type":"text","text":"."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"A ","type":"text"},{"inlineContent":[{"type":"text","text":"transaction"}],"type":"strong"},{"text":":","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"contains a set of changes in the Store,"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"at a given point in time,"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"ordered by the time they occurred"}]}]}]}]},{"content":[{"inlineContent":[{"type":"text","text":"A bookmark\/"},{"type":"strong","inlineContent":[{"text":"token","type":"text"}]},{"type":"text","text":" for the transaction allows the developer track the last changes in the store processed by the consumer (typically the view)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Tokens from deleted objects","type":"text"}]},{"type":"text","text":" in the Store are not valid anymore for history fetching once the deletion happens."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"To preserve history of deleted values, ","type":"text"},{"inlineContent":[{"type":"text","text":"tombstones"}],"type":"strong"},{"text":" are introduced","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"You can mark an attribute as "},{"inlineContent":[{"type":"codeVoice","code":"preservevalueondeletion"}],"type":"strong"},{"type":"text","text":" in order to preserve specific attributes on history"}],"type":"paragraph"}]}]}]}]},{"text":"Custom Stores","type":"heading","level":1,"anchor":"Custom-Stores"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Custom Data Stores can support history","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Add history functionality to your custom Data Store by implementing Data History API for your own Store"}],"type":"strong"},{"text":":","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Transactions"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Change types","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Tokens (as bookmarks between changes)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"History providing (clear boundaries between transactions)"}]}]}]}]}]},{"text":"Written By","type":"heading","level":2,"anchor":"Written-By"},{"columns":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"n3twr","type":"image"}]}],"size":1},{"content":[{"text":"Juan","anchor":"Juan","type":"heading","level":3},{"inlineContent":[{"isActive":true,"overridingTitle":"Contributed Notes","type":"reference","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/n3twr"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/n3twr"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/"}],"type":"paragraph"}],"size":4}],"type":"row","numberOfColumns":5},{"type":"thematicBreak"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true}],"type":"paragraph"},{"text":"Related Sessions","type":"heading","level":2,"anchor":"Related-Sessions"},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10138-Create-a-custom-data-store-with-SwiftData"]},{"inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2025 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}],"kind":"content"}],"metadata":{"title":"Track model changes with SwiftData history","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC24","role":"sampleCode"},"kind":"article","sampleCodeDownload":{"action":{"type":"reference","overridingTitle":"Watch Video","isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc24\/10075"},"kind":"sampleDownload"},"sections":[],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10075-Track-model-changes-with-SwiftData-history","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24"]]},"abstract":[{"text":"Reveal the history of your model’s changes with SwiftData! Use the history API to understand when data store changes occurred, and learn how to use this information to build features like remote server sync and out-of-process change handing in your app. We’ll also cover how you can build support for the history API into a custom data store.","type":"text"}],"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC24-10138-Create-a-custom-data-store-with-SwiftData":{"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc24-10138-create-a-custom-data-store-with-swiftdata","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10138-Create-a-custom-data-store-with-SwiftData","type":"topic","abstract":[{"text":"Combine the power of SwiftData’s expressive, declarative modeling API with your own persistence backend. Learn how to build a custom data store and explore how to progressively add persistence features in your app. To get the most out of this session, watch “Meet SwiftData” and “Model your schema with SwiftData” from WWDC23.","type":"text"}],"title":"Create a custom data store with SwiftData","role":"sampleCode"},"https://":{"url":"https:\/\/","identifier":"https:\/\/","title":"Blog","type":"link","titleInlineContent":[{"text":"Blog","type":"text"}]},"WWDC24.jpeg":{"alt":null,"identifier":"WWDC24.jpeg","type":"image","variants":[{"url":"\/images\/WWDCNotes\/WWDC24.jpeg","traits":["1x","light"]}]},"WWDC24-10075-Overview2":{"identifier":"WWDC24-10075-Overview2","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC24-10075-Overview2.jpeg"}],"type":"image"},"WWDC24-10075-Overview3":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10075-Overview3.jpeg","traits":["1x","light"]}],"identifier":"WWDC24-10075-Overview3","type":"image"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"type":"link","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"n3twr":{"identifier":"n3twr","alt":"Profile image of Juan","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/n3twr.jpeg"}],"type":"image"},"WWDC24-10075-Overview4":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10075-Overview4.jpeg","traits":["1x","light"]}],"identifier":"WWDC24-10075-Overview4","type":"image"},"https://developer.apple.com/wwdc24/10075":{"identifier":"https:\/\/developer.apple.com\/wwdc24\/10075","url":"https:\/\/developer.apple.com\/wwdc24\/10075","type":"download","checksum":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC24":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24","kind":"article","role":"collectionGroup","title":"WWDC24","images":[{"type":"icon","identifier":"WWDC24-Icon.png"},{"type":"card","identifier":"WWDC24.jpeg"}],"abstract":[{"text":"Xcode 16, Swift 6, iOS 18, macOS 15 (Sequoia), tvOS 18, visionOS 2, watchOS 11.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: Swift Testing, ","type":"text"},{"code":"FinanceKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"TabletopKit","type":"codeVoice"},{"text":", and more.","type":"text"}],"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc24"},"https://github.com/n3twr":{"url":"https:\/\/github.com\/n3twr","identifier":"https:\/\/github.com\/n3twr","title":"GitHub","type":"link","titleInlineContent":[{"text":"GitHub","type":"text"}]},"doc://WWDCNotes/documentation/WWDCNotes/n3twr":{"images":[{"type":"card","identifier":"n3twr.jpeg"},{"type":"icon","identifier":"n3twr.jpeg"}],"kind":"article","url":"\/documentation\/wwdcnotes\/n3twr","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/n3twr","type":"topic","abstract":[{"text":"No Bio on GitHub","type":"text"}],"title":"Juan (3 notes)","role":"sampleCode"},"WWDCNotes.png":{"alt":null,"identifier":"WWDCNotes.png","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}]},"doc://WWDCNotes/documentation/WWDCNotes":{"images":[{"type":"icon","identifier":"WWDCNotes.png"}],"role":"collection","kind":"symbol","type":"topic","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","url":"\/documentation\/wwdcnotes"},"WWDC24-10075-Overview1":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10075-Overview1.jpeg","traits":["1x","light"]}],"identifier":"WWDC24-10075-Overview1","type":"image"},"n3twr.jpeg":{"identifier":"n3twr.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/n3twr.jpeg","traits":["1x","light"]}],"type":"image"},"WWDC24-Icon.png":{"alt":null,"identifier":"WWDC24-Icon.png","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC24-Icon.png"}]}}}