{"kind":"article","identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16-608-Whats-New-in-GameplayKit","interfaceLanguage":"swift"},"sections":[],"schemaVersion":{"minor":3,"major":0,"patch":0},"sampleCodeDownload":{"action":{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc16\/608","overridingTitle":"Watch Video (41 min)","isActive":true},"kind":"sampleDownload"},"primaryContentSections":[{"kind":"content","content":[{"level":2,"type":"heading","text":"Overview","anchor":"overview"},{"inlineContent":[{"type":"text","text":"Updates in:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Pathfinding","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Agents","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"GameAI (formerly known as MinMax AI)","type":"text"}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"text","text":"Three new features:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Spatial partitioning"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Procedural generation"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Xcode integration (with the Xcode editor, not only in code!)"}]}]}]},{"level":2,"type":"heading","text":"PathFinding","anchor":"PathFinding"},{"inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKMeshGraph","isActive":true}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Instead of computing line of sight possible paths (like with "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKObstacleGraph","isActive":true},{"type":"text","text":"), "},{"code":"GKMeshGraph","type":"codeVoice"},{"type":"text","text":" uses triangle mesh, where every possible point in the map is represented in one and only one triangle."}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Less memory intensive, faster to compute, good results (not best tho!)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Node location flexibility: triangle center, vertices, edges (it can be any of them, even combination of them). The more elements, the more compute intensive"}]}]}]},{"inlineContent":[{"type":"image","identifier":"WWDC16-608-PathFinding"},{"type":"text","text":" "},{"type":"text","text":"￼"}],"type":"paragraph"},{"level":2,"type":"heading","text":"Agents","anchor":"Agents"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"3D support (","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKAgent3D","isActive":true,"type":"reference"},{"text":" and associated classes)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"New Behavior composition (similar to weighted goals)","type":"text"}],"type":"paragraph"}]}]},{"level":2,"type":"heading","text":"Spatial Partitioning","anchor":"Spatial-Partitioning"},{"inlineContent":[{"text":"Does a spacial caching of the map to answer quicker to inquiries such as:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"How many enemies are near the player?","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Where are all items in the my world?"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Which projectiles will hit player this frame?"}],"type":"paragraph"}]}]},{"inlineContent":[{"text":"The way it works is by creating a tree out of the map, the more elements, the more the nodes.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Three possible trees:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"R-trees"}]}]},{"content":[{"inlineContent":[{"text":"quadtree","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"octrees"}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"text","text":"R-tree is a tree data structure that has a number of hierarchical buckets:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"whenever you add an object to an R-tree, it gets fitted into one of those buckets.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"when these buckets grow too large, they need to split: this is a user-configurable parameter of just how large these buckets can grow","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"we have a number of strategies at our disposal to decide how these buckets should split"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"all R-trees do is putting things in buckets"}]}]}]},{"inlineContent":[{"type":"image","identifier":"WWDC16-608-rtree"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Quadtree and octrees solve the same problem, quad tree on 2D, octrees in 3D:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"these are tree-like data structures that have a number of levels and hierarchies","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"space is subdivided evenly at each level","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"have a max cell size associated, this controls just how deep these trees can grow and just how small those cells can get."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"when you add an object to a quadtree or octree, it gets placed into the smallest cell that it fits in entirely","type":"text"}]}]}]},{"inlineContent":[{"type":"image","identifier":"WWDC16-608-rtree-2"}],"type":"paragraph"},{"inlineContent":[{"text":"When we create a tree, we need to define the minimum size cell: e.g. no cell in this quadtree is going to be smaller than that.","type":"text"},{"text":"\n","type":"text"},{"text":"We’re setting an hard limit on how small (and how many levels deep) our tree can go.","type":"text"}],"type":"paragraph"},{"level":2,"type":"heading","text":"Game AI","anchor":"Game-AI"},{"inlineContent":[{"type":"text","text":"Last year GameplayKit introduced the MinMax Strategist, this year we’re adding Monte Carlo strategist."}],"type":"paragraph"},{"inlineContent":[{"text":"This new strategist doesn’t guarantee the best outcome (unlike minMax), but it’s much faster.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"This year also we can create our own strategist via "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKStrategist"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"New "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKDecisionTree"},{"type":"text","text":": these are a trees that can be handmade or make the AI learn, and are useful when we have many states and the AI needs to make decisions fast."}],"type":"paragraph"},{"level":2,"type":"heading","text":"Procedural generation","anchor":"Procedural-generation"},{"inlineContent":[{"text":"This is to create new worlds\/textures\/.. and dynamic things like that, good for games that are not static and need to continuously create new things\/levels.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"What procedural generation does is help us with some coherent randomness.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Plenty of different noises available, noises can be combined together.","type":"text"}],"type":"paragraph"},{"level":2,"type":"heading","text":"Xcode integration","anchor":"Xcode-integration"},{"inlineContent":[{"type":"text","text":"Previously everything was done via code, now we can use editors like we do for CoreData and SpriteKit:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Entity and Components Editor","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Navigation Graph Editor"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Scene Outline View"}]}]},{"content":[{"inlineContent":[{"text":"State Machine Quick Look (directly from the debugger!)","type":"text"}],"type":"paragraph"}]}]},{"inlineContent":[{"text":"We can use the new callout ","type":"text"},{"code":"@GKInspectable","type":"codeVoice"},{"text":" in our components properties to make them show up in the editor","type":"text"}],"type":"paragraph"},{"level":2,"type":"heading","text":"Written By","anchor":"Written-By"},{"columns":[{"size":1,"content":[{"inlineContent":[{"type":"image","identifier":"zntfdr"}],"type":"paragraph"}]},{"size":4,"content":[{"type":"heading","anchor":"Federico-Zanetello","level":3,"text":"Federico Zanetello"},{"inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"type":"reference","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/github.com\/zntfdr","type":"reference","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/zntfdr.dev","type":"reference","isActive":true}],"type":"paragraph"}]}],"type":"row","numberOfColumns":5},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}],"type":"paragraph"},{"level":2,"type":"heading","text":"Related Sessions","anchor":"Related-Sessions"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}]}],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc16-608-whats-new-in-gameplaykit"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16"]]},"metadata":{"modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC16","role":"sampleCode","title":"What’s New in GameplayKit"},"abstract":[{"text":"GameplayKit provides developers a collection of essential tools and techniques used to implement modern gameplay algorithms. Learn what’s new in GameplayKit and check out advances in pathfinding, autonomous agents, and game AI, as well as many enhancements supporting GameplayKit in Xcode. Tap into new capabilities for 2D and 3D spatial partitioning, and explore noise-based procedural data generation useful for height maps, natural textures, and more.","type":"text"}],"references":{"https://developer.apple.com/documentation/gameplaykit/GKStrategist":{"url":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKStrategist","titleInlineContent":[{"type":"codeVoice","code":"GKStrategist"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKStrategist","title":"GKStrategist"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC16":{"type":"topic","title":"WWDC16","images":[{"identifier":"WWDC16-Icon.png","type":"icon"},{"type":"card","identifier":"WWDC16.jpeg"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16","abstract":[{"text":"Xcode 8, Swift 3.0, iOS 10, macOS 10.12 (Sierra), tvOS 10, watchOS 3.","type":"text"}],"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc16","role":"collectionGroup"},"https://developer.apple.com/wwdc16/608":{"checksum":null,"type":"download","url":"https:\/\/developer.apple.com\/wwdc16\/608","identifier":"https:\/\/developer.apple.com\/wwdc16\/608"},"https://developer.apple.com/documentation/gameplaykit/GKMeshGraph":{"identifier":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKMeshGraph","title":"GKMeshGraph","type":"link","url":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKMeshGraph","titleInlineContent":[{"code":"GKMeshGraph","type":"codeVoice"}]},"WWDC16-Icon.png":{"identifier":"WWDC16-Icon.png","variants":[{"url":"\/images\/WWDC16-Icon.png","traits":["1x","light"]}],"alt":null,"type":"image"},"https://developer.apple.com/documentation/gameplaykit/GKDecisionTree":{"identifier":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKDecisionTree","title":"GKDecisionTree","type":"link","url":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKDecisionTree","titleInlineContent":[{"code":"GKDecisionTree","type":"codeVoice"}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"type":"topic","role":"sampleCode","title":"Federico Zanetello (332 notes)","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","url":"\/documentation\/wwdcnotes\/zntfdr","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"kind":"article"},"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","title":"WWDC Notes","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"kind":"symbol","url":"\/documentation\/wwdcnotes","role":"collection"},"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"title":"Contributions are welcome!","type":"link"},"https://developer.apple.com/documentation/gameplaykit/GKAgent3D":{"identifier":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKAgent3D","title":"GKAgent3D","type":"link","url":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKAgent3D","titleInlineContent":[{"code":"GKAgent3D","type":"codeVoice"}]},"https://developer.apple.com/documentation/gameplaykit/GKObstacleGraph":{"identifier":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKObstacleGraph","url":"https:\/\/developer.apple.com\/documentation\/gameplaykit\/GKObstacleGraph","titleInlineContent":[{"type":"codeVoice","code":"GKObstacleGraph"}],"title":"GKObstacleGraph","type":"link"},"zntfdr":{"identifier":"zntfdr","type":"image","alt":"Profile image of Federico Zanetello","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}]},"zntfdr.jpeg":{"identifier":"zntfdr.jpeg","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}],"alt":null,"type":"image"},"WWDC16-608-rtree-2":{"identifier":"WWDC16-608-rtree-2","type":"image","alt":null,"variants":[{"url":"\/images\/WWDC16-608-rtree-2.png","traits":["1x","light"]}]},"WWDC16-608-rtree":{"identifier":"WWDC16-608-rtree","variants":[{"url":"\/images\/WWDC16-608-rtree.png","traits":["1x","light"]}],"alt":null,"type":"image"},"https://github.com/zntfdr":{"identifier":"https:\/\/github.com\/zntfdr","title":"GitHub","type":"link","url":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"text":"GitHub","type":"text"}]},"WWDCNotes.png":{"identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"alt":null,"type":"image"},"https://zntfdr.dev":{"identifier":"https:\/\/zntfdr.dev","title":"Blog","type":"link","url":"https:\/\/zntfdr.dev","titleInlineContent":[{"text":"Blog","type":"text"}]},"WWDC16.jpeg":{"identifier":"WWDC16.jpeg","variants":[{"url":"\/images\/WWDC16.jpeg","traits":["1x","light"]}],"alt":null,"type":"image"},"WWDC16-608-PathFinding":{"identifier":"WWDC16-608-PathFinding","type":"image","alt":null,"variants":[{"url":"\/images\/WWDC16-608-PathFinding.png","traits":["1x","light"]}]}}}