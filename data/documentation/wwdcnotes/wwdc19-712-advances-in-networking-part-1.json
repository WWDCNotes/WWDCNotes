{"metadata":{"title":"Advances in Networking, Part 1","role":"sampleCode","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC19"},"kind":"article","hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19"]]},"schemaVersion":{"patch":0,"minor":3,"major":0},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-712-Advances-in-Networking-Part-1","interfaceLanguage":"swift"},"sampleCodeDownload":{"kind":"sampleDownload","action":{"isActive":true,"overridingTitle":"Watch Video (56 min)","identifier":"https:\/\/developer.apple.com\/wwdc19\/712","type":"reference"}},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","anchor":"Low-data-mode","level":2,"text":"Low data mode"},{"type":"paragraph","inlineContent":[{"type":"text","text":"New User preference to minimize data usage:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Explicit signal to reduce network data use","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Per Wi-Fi and Cellular network","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"System policy:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Discretionary tasks deferred","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Background App Refresh disabled"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Application adoption suggestions:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Reduce Image quality","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Reduce pre-fetching","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Sync less often","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Mark Background tasks as discretionary (will run when iOS says so)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Disable auto-play","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Do not block user-initiated work","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"URLSession"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Try large prefetch with ","type":"text"},{"code":"allowsConstrainedNetworkAccess = false","type":"codeVoice"},{"text":", which allow the ","type":"text"},{"code":"URLSession","type":"codeVoice"},{"text":" to run even on low data mode.","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"On failure with ","type":"text"},{"code":"error.networkUnavailableReason == .constrained","type":"codeVoice"},{"text":" try Low Data Mode alternative If you get a failure and the error has a network unavailable reason of constrained, that indicates the operation failed because you’re in Low Data Mode and the right thing to do there is to turn around and perform your Low Data Mode operation.","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Network.framework"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Set prohibitConstrainedPaths on NWParameters"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Check isConstrained on NWPath","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Handle path updates"}],"type":"paragraph"}]}]},{"type":"heading","anchor":"Combine-in-URLSession","level":2,"text":"Combine in URLSession"},{"type":"paragraph","inlineContent":[{"type":"text","text":"What is Combine?"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Combine processes values over time.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"It consists of publishers, operators, and subscribers."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"The chain is driven by the request sent from the subscriber."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"In response to the request, publisher sends value down the chain."}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"DataTaskPublisher"}]},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"URLSession publisher"},{"type":"text","text":", similar to "},{"type":"codeVoice","code":"URLSession.dataTask(with:completionHandler:)"},{"type":"text","text":":"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"lets us write code concise, linear, and less error-prone."},{"type":"text","text":" "},{"type":"text","text":"less duplication"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Cells can be subscribers, and on reuse we can cancel the previous tasks.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Cool demo at 20-25min in."}]}]}]},{"type":"heading","anchor":"WebSocket","level":2,"text":"WebSocket"},{"type":"paragraph","inlineContent":[{"text":"New ","type":"text"},{"type":"codeVoice","code":"URLSessionWebSocketTask"},{"text":", a new API in the Foundation framework. Works with existing URLSession:","type":"text"}]},{"code":["\/\/ Create with URL ","let task = URLSession.shared.webSocketTask(with: URL(string: \"wss:\/\/websocket. example\")!)","task.resume() ","","\/\/ Send a message ","task.send(.string(\"Hello\")) { error in \/* Handle error *\/ }","","\/\/ Receive a message ","task.receive { result in \/* Handle result *\/ } "],"type":"codeListing","syntax":"swift"},{"type":"heading","anchor":"Mobility-Improvements","level":2,"text":"Mobility Improvements"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Wifi and mobile data switch got smarter once again."}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Wi-Fi Assist was applied to hight-level APIs like Network.Framework and URLSession in iOS 13.","type":"text"},{"text":"\n","type":"text"},{"text":"Whenever the wifi connection is bad or loss. it will switch to connect cellular.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Multipath Transports"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"allowsExpensiveNetworkAccess = false"}],"type":"paragraph"}]}]},{"type":"heading","anchor":"Written-By","level":2,"text":"Written By"},{"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"zntfdr"}]}]},{"size":4,"content":[{"type":"heading","anchor":"Federico-Zanetello","level":3,"text":"Federico Zanetello"},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitle":"Contributed Notes","type":"reference","isActive":true,"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}]},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/github.com\/zntfdr","type":"reference","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/zntfdr.dev","type":"reference","isActive":true}]}]}],"type":"row","numberOfColumns":5},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"type":"heading","anchor":"Related-Sessions","level":2,"text":"Related Sessions"},{"style":"list","type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10006-Build-robust-and-resumable-file-transfers","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10103-Optimize-for-5G-networks","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10111-Boost-performance-and-security-with-modern-networking","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-422-Designing-for-Adverse-Network-and-Temperature-Conditions","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-713-Advances-in-Networking-Part-2","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-716-Streaming-Audio-on-watchOS-6","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-721-Combine-in-Practice"]},{"type":"small","inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}]},{"type":"small","inlineContent":[{"text":"All content copyright © 2012 – 2025 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}]}]}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc19-712-advances-in-networking-part-1"]}],"abstract":[{"type":"text","text":"Keep up with new and evolving networking protocols and standards by leveraging the modern networking frameworks on all Apple platforms and following best practices for efficiency and performance. In this session, learn about Low Data Mode, Combine in URLSession, WebSocket, and improvements to network mobility."}],"sections":[],"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-721-Combine-in-Practice":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-721-Combine-in-Practice","role":"sampleCode","abstract":[{"type":"text","text":"Expand your knowledge of Combine, Apple’s new unified, declarative framework for processing values over time. Learn about how to correctly handle errors, schedule work and integrate Combine into your app today."}],"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc19-721-combine-in-practice","title":"Combine in Practice","kind":"article"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19","url":"\/documentation\/wwdcnotes\/wwdc19","abstract":[{"type":"text","text":"Xcode 11, Swift 5.1, iOS 13, macOS 10.15 (Catalina), tvOS 13, watchOS 6."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"code":"Combine","type":"codeVoice"},{"type":"text","text":", "},{"code":"Core Haptics","type":"codeVoice"},{"type":"text","text":", "},{"code":"Create ML","type":"codeVoice"},{"type":"text","text":", and more."}],"kind":"article","role":"collectionGroup","title":"WWDC19","type":"topic","images":[{"identifier":"WWDC19-Icon.png","type":"icon"},{"identifier":"WWDC19.jpeg","type":"card"}]},"WWDCNotes.png":{"identifier":"WWDCNotes.png","type":"image","variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}],"alt":null},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","url":"\/documentation\/wwdcnotes\/zntfdr","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"kind":"article","role":"sampleCode","title":"Federico Zanetello (332 notes)","type":"topic","images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10111-Boost-performance-and-security-with-modern-networking":{"abstract":[{"type":"text","text":"Speed up your app and make it more nimble, private and secure with modern networking APIs. Learn about networking protocols like IPv6, HTTP\/2, TLS 1.3 and Encrypted DNS, and how incorporating these within your app and server can provide faster performance and reduce both your power consumption and thermal impact. In addition, discover how adopting the latest security protocols can help you better protect privacy within your app."}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10111-Boost-performance-and-security-with-modern-networking","type":"topic","title":"Boost performance and security with modern networking","role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc20-10111-boost-performance-and-security-with-modern-networking"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-713-Advances-in-Networking-Part-2":{"abstract":[{"text":"Take your networking apps to the next level with advances in Bonjour, custom message framing handlers, and the latest in security. You’ll also learn how to understand your networking performance by collecting metrics, and how best to use the modern networking frameworks on Apple platforms.","type":"text"}],"kind":"article","role":"sampleCode","title":"Advances in Networking, Part 2","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-713-Advances-in-Networking-Part-2","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc19-713-advances-in-networking-part-2"},"zntfdr.jpeg":{"type":"image","alt":null,"identifier":"zntfdr.jpeg","variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}]},"https://developer.apple.com/wwdc19/712":{"identifier":"https:\/\/developer.apple.com\/wwdc19\/712","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc19\/712","type":"download"},"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","role":"collection","title":"WWDC Notes","type":"topic","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"images":[{"type":"icon","identifier":"WWDCNotes.png"}],"kind":"symbol"},"WWDC19-Icon.png":{"type":"image","identifier":"WWDC19-Icon.png","variants":[{"url":"\/images\/WWDCNotes\/WWDC19-Icon.png","traits":["1x","light"]}],"alt":null},"https://zntfdr.dev":{"identifier":"https:\/\/zntfdr.dev","title":"Blog","url":"https:\/\/zntfdr.dev","type":"link","titleInlineContent":[{"type":"text","text":"Blog"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-422-Designing-for-Adverse-Network-and-Temperature-Conditions":{"url":"\/documentation\/wwdcnotes\/wwdc19-422-designing-for-adverse-network-and-temperature-conditions","kind":"article","title":"Designing for Adverse Network and Temperature Conditions","type":"topic","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-422-Designing-for-Adverse-Network-and-Temperature-Conditions","abstract":[{"type":"text","text":"World-class apps deliver a great user experience, even in the most strenuous environments. Learn how to use Xcode to simulate adverse network and temperature conditions. Put your app through its paces and get a firsthand view of how it performs. Hear about best practices that you can adopt to respond to challenging conditions."}]},"WWDC19.jpeg":{"type":"image","alt":null,"identifier":"WWDC19.jpeg","variants":[{"url":"\/images\/WWDCNotes\/WWDC19.jpeg","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10006-Build-robust-and-resumable-file-transfers":{"type":"topic","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10006-Build-robust-and-resumable-file-transfers","url":"\/documentation\/wwdcnotes\/wwdc23-10006-build-robust-and-resumable-file-transfers","abstract":[{"text":"Find out how URLSession can help your apps transfer large files and recover from network interruptions. Learn how to pause and resume HTTP file transfers and support resumable uploads, and explore best practices for using URLSession to transfer files even when your app is suspended in the background.","type":"text"}],"kind":"article","title":"Build robust and resumable file transfers"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10103-Optimize-for-5G-networks":{"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc21-10103-optimize-for-5g-networks","abstract":[{"type":"text","text":"5G enables new opportunities for your app or game through better performance for data transfer, higher bandwidth, lower latency, and much more. Discover how you can take advantage of the latest networking technology and Apple hardware to create adaptive experiences for your content that best suit someone’s data connection and optimize network traffic."}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10103-Optimize-for-5G-networks","role":"sampleCode","title":"Optimize for 5G networks"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-716-Streaming-Audio-on-watchOS-6":{"title":"Streaming Audio on watchOS 6","kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-716-Streaming-Audio-on-watchOS-6","url":"\/documentation\/wwdcnotes\/wwdc19-716-streaming-audio-on-watchos-6","role":"sampleCode","abstract":[{"type":"text","text":"Streaming audio on Apple Watch allows customers to enjoy your content wherever they go without their iPhone. Learn about the streaming APIs brought over from iOS to allow watchOS apps to create independent audio consumption experiences. Find out how to set up your audio session for streaming and explore best practices to provide the best experience for people moving between different network conditions."}]},"zntfdr":{"type":"image","identifier":"zntfdr","variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}],"alt":"Profile image of Federico Zanetello"},"https://github.com/zntfdr":{"identifier":"https:\/\/github.com\/zntfdr","title":"GitHub","url":"https:\/\/github.com\/zntfdr","type":"link","titleInlineContent":[{"type":"text","text":"GitHub"}]}}}