{"kind":"article","metadata":{"title":"Demystify SwiftUI containers","role":"sampleCode","roleHeading":"WWDC24","modules":[{"name":"WWDC Notes"}]},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24"]]},"primaryContentSections":[{"kind":"content","content":[{"level":2,"type":"heading","text":"Introduction","anchor":"Introduction"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Container views like ","type":"text"},{"code":"List","type":"codeVoice"},{"text":" use a trailing closure to wrap their content.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"@ViewBuilder","type":"codeVoice"},{"text":" allows content to be defined both statically and dynamically.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Some containers have additional features, like grouping content into sectinos."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Container-specific modifiers can be defined to cusotmize content, such as ","type":"text"},{"code":".listRowSeparator(.hidden)","type":"codeVoice"},{"text":".","type":"text"}]}]}]},{"level":2,"type":"heading","text":"Composition","anchor":"Composition"},{"inlineContent":[{"type":"text","text":"Composition means you can define different kind of views inside and it still works. Such as explicit "},{"type":"codeVoice","code":"Text"},{"type":"text","text":" views and a "},{"type":"codeVoice","code":"ForEach"},{"type":"text","text":" loop creating them together in one body."}],"type":"paragraph"},{"inlineContent":[{"text":"To do that, use a single ","type":"text"},{"type":"codeVoice","code":"@ViewBuilder var content: Content"},{"text":" property in your custom views and (if in a module) create a public initializer that takes a ","type":"text"},{"type":"codeVoice","code":"@ViewBuilder"},{"text":" argument.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Use the new ","type":"text"},{"code":"ForEach(subviewOf:)","type":"codeVoice"},{"text":" initializer to wrap subviews of the ","type":"text"},{"code":"content","type":"codeVoice"},{"text":" into your custom UI wrappers, such as cards:","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["@Viewbuilder var content: Content","","var body: some View {","   DisplayBoardCardLayout {","      ForEach(subviewOf: content) { subview in","         CardView { subview }","      }","   }","}"]},{"inlineContent":[{"text":"It’s important to understand the difference between ","type":"text"},{"inlineContent":[{"type":"text","text":"Declared"}],"type":"strong"},{"text":" subviews and ","type":"text"},{"inlineContent":[{"text":"Resolved","type":"text"}],"type":"strong"},{"text":" subviews:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Declared subviews"}]},{"type":"text","text":": What you define as direct subviews in a content closure."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Resolved subviews"}],"type":"strong"},{"text":": The resulting subviews when SwiftUI rendered the contents.","type":"text"}]}]}]},{"type":"tabNavigator","tabs":[{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC24-10146-Declared-subviews"}]}],"title":"Declared subviews"},{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC24-10146-Resolved-subviews"}]}],"title":"Resolved subviews"}]},{"inlineContent":[{"text":"The purpose of some declared views like ","type":"text"},{"code":"ForEach","type":"codeVoice"},{"text":" or ","type":"text"},{"code":"Group","type":"codeVoice"},{"text":" is to produce a collection of resolved subviews. It’s even possible to produce zero resolved subviews, which ","type":"text"},{"code":"EmptyView","type":"codeVoice"},{"text":" does.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Conditions like "},{"type":"codeVoice","code":"if"},{"type":"text","text":" in SwiftUI views can influence the number of resolved subviews based on which branch is entered."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"To apply different modifiers based on the number of subviews, you can use "},{"type":"codeVoice","code":"Group(subviewsOf:)"},{"type":"text","text":" like this:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["@Viewbuilder var content: Content","","var body: some View {","   DisplayBoardCardLayout {","      Group(subviewsOf: content) { subviews in","         ForEach(subviews) { subview in","            CardView(scale: subviews.count > 15 ? .small : .normal) { subview }","         }","      }","   }","}"]},{"inlineContent":[{"type":"text","text":"The main difference to "},{"type":"codeVoice","code":"ForEach(subviewsOf:)"},{"type":"text","text":" is that it passes the entire collection of "},{"type":"codeVoice","code":"subviews"},{"type":"text","text":" rather than each "},{"type":"codeVoice","code":"subview"},{"type":"text","text":" separately. This allows to do logic based on knowledge about the entire collection, such as resizing contents of your collection to fit in all elements properly."}],"type":"paragraph"},{"level":2,"type":"heading","text":"Sections","anchor":"Sections"},{"inlineContent":[{"type":"text","text":"Sections behave like groups, but with extra metadata title header or footer text. Custom containers don’t support sections by default. You need to call "},{"type":"codeVoice","code":"ForEach(sectionOf:)"},{"type":"text","text":" explicitly to add support with your own styling around each section:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["@Viewbuilder var content: Content","","var body: some View {","   ForEach(sectionOf: content) { section in","      DisplayBoardSectionContent { section.content }","   }","}"]},{"inlineContent":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"section"},{"text":" has properties named ","type":"text"},{"type":"codeVoice","code":"header"},{"text":" and ","type":"text"},{"type":"codeVoice","code":"footer"},{"text":" which you can call ","type":"text"},{"type":"codeVoice","code":"isEmpty"},{"text":" on to check if a header or footer is present to show it.","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["@Viewbuilder var content: Content","","var body: some View {","   ForEach(sectionOf: content) { section in","      VStack(spacing: 20) {","         if !section.header.isEmpty {","            DisplayBoardSectionHeaderCard { section.header }","         }","         ","         DisplayBoardSectionContent { section.content }","      }","   }","}"]},{"inlineContent":[{"text":"The resulting custom container could render a list of cards with sections like this:","type":"text"}],"type":"paragraph"},{"inlineContent":[{"identifier":"WWDC24-10146-Board-with-Sections","type":"image"}],"type":"paragraph"},{"level":2,"type":"heading","text":"Customization","anchor":"Customization"},{"inlineContent":[{"type":"text","text":"To create a modifier like "},{"type":"codeVoice","code":".listRowSeparator(.hidden)"},{"type":"text","text":" for customization, you need to create container-specific modifiers, called "},{"type":"strong","inlineContent":[{"type":"text","text":"Container values"}]},{"type":"text","text":"."}],"type":"paragraph"},{"level":3,"type":"heading","text":"Container values","anchor":"Container-values"},{"inlineContent":[{"text":"A new kind of keyed storage similar to environments or preference values. But it’s neither passed down the view hierarchy like environment values, nor passed up like preference values. Container values stay within the container.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"In other words, one could say that container values are like preference values, but the values are only passed up one level to the next direct container in the view hierarchy.","type":"text"}],"type":"paragraph"},{"type":"tabNavigator","tabs":[{"title":"Environment values","content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC24-10146-Environment-values"}]}]},{"title":"Preference values","content":[{"inlineContent":[{"identifier":"WWDC24-10146-Preference-values","type":"image"}],"type":"paragraph"}]},{"title":"Container values","content":[{"inlineContent":[{"identifier":"WWDC24-10146-Container-values","type":"image"}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"text","text":"Defining a new container value is done in two steps:"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"First, you define an "},{"code":"@Entry","type":"codeVoice"},{"type":"text","text":" property in a "},{"code":"ContainerValues","type":"codeVoice"},{"type":"text","text":" extension like this:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["extension ContainerValues {","   @Entry var isDisplayBoardCardRejected: Bool = false","}",""]},{"inlineContent":[{"type":"text","text":"Second, you define a function in a "},{"type":"codeVoice","code":"View"},{"type":"text","text":" extension where you access "},{"type":"codeVoice","code":"containerValue"},{"type":"text","text":" like this:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["extension View {","   func displayBoardCardRejected(_ isRejected: Bool) -> some View {","      containerValue(\\.isDisplayBoardCardRejected, isRejected)","   }","}"]},{"inlineContent":[{"text":"Now you can call the new ","type":"text"},{"code":"containerValues","type":"codeVoice"},{"text":" property on ","type":"text"},{"code":"section","type":"codeVoice"},{"text":" or ","type":"text"},{"code":"subview","type":"codeVoice"},{"text":" passed to a ","type":"text"},{"code":"ForEach","type":"codeVoice"},{"text":" and adjust your custom views with the new field like so:","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["@Viewbuilder var content: Content","","var body: some View {","   DisplayBoardCardLayout {","      Group(subviewsOf: content) { subviews in","         ForEach(subviews) { subview in","            CardView(","               scale: subviews.count > 15 ? .small : .normal,","               isRejected: subview.containerValues.isDisplayBoardCardRejected  \/\/ <== this is new","            ) { subview }","         }","      }","   }","}"]},{"inlineContent":[{"text":"Now you can call your custom modifier on some of your subviews to apply custom styles, like for crossing off songs from the card board in this image:","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"image","identifier":"WWDC24-10146-Board-with-Rejection"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Calling the modifier on a section sets the modifier on all views within the section."}],"type":"paragraph"},{"level":2,"type":"heading","text":"Written By","anchor":"Written-By"},{"type":"row","numberOfColumns":5,"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"Jeehut"}]}]},{"size":4,"content":[{"type":"heading","level":3,"anchor":"Cihat-G%C3%BCnd%C3%BCz","text":"Cihat Gündüz"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"overridingTitle":"Contributed Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","type":"reference","isActive":true},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/Jeehut","type":"reference","isActive":true},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/fline.dev","type":"reference","isActive":true},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/x.com\/Jeehut","type":"reference","isActive":true}]}]}]},{"type":"thematicBreak"},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true}],"type":"paragraph"},{"level":2,"type":"heading","text":"Related Sessions","anchor":"Related-Sessions"},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10022-Demystify-SwiftUI","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10160-Demystify-SwiftUI-performance"]},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2025 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}]}],"abstract":[{"type":"text","text":"Learn about the capabilities of SwiftUI container views and build a mental model for how subviews are managed by their containers. Leverage new APIs to build your own custom containers, create modifiers to customize container content, and give your containers that extra polish that helps your apps stand out."}],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc24-10146-demystify-swiftui-containers"],"traits":[{"interfaceLanguage":"swift"}]}],"sampleCodeDownload":{"action":{"overridingTitle":"Watch Video","type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc24\/10146","isActive":true},"kind":"sampleDownload"},"schemaVersion":{"patch":0,"minor":3,"major":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10146-Demystify-SwiftUI-containers"},"sections":[],"references":{"WWDC24-10146-Board-with-Sections":{"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10146-Board-with-Sections.jpeg","traits":["1x","light"]}],"alt":null,"identifier":"WWDC24-10146-Board-with-Sections","type":"image"},"WWDC24-10146-Preference-values":{"type":"image","identifier":"WWDC24-10146-Preference-values","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10146-Preference-values.jpeg","traits":["1x","light"]}]},"Jeehut.jpeg":{"alt":null,"type":"image","identifier":"Jeehut.jpeg","variants":[{"url":"\/images\/WWDCNotes\/Jeehut.jpeg","traits":["1x","light"]}]},"WWDCNotes.png":{"variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}],"alt":null,"identifier":"WWDCNotes.png","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10160-Demystify-SwiftUI-performance":{"url":"\/documentation\/wwdcnotes\/wwdc23-10160-demystify-swiftui-performance","kind":"article","abstract":[{"text":"Learn how you can build a mental model for performance in SwiftUI and write faster, more efficient code. We’ll share some of the common causes behind performance issues and help you triage hangs and hitches in SwiftUI to create more responsive views in your app.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10160-Demystify-SwiftUI-performance","title":"Demystify SwiftUI performance","role":"sampleCode","type":"topic"},"Jeehut":{"variants":[{"url":"\/images\/WWDCNotes\/Jeehut.jpeg","traits":["1x","light"]}],"alt":"Profile image of Cihat Gündüz","identifier":"Jeehut","type":"image"},"WWDC24-10146-Container-values":{"type":"image","identifier":"WWDC24-10146-Container-values","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10146-Container-values.jpeg","traits":["1x","light"]}]},"https://fline.dev":{"url":"https:\/\/fline.dev","type":"link","identifier":"https:\/\/fline.dev","title":"Blog","titleInlineContent":[{"type":"text","text":"Blog"}]},"WWDC24-10146-Environment-values":{"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10146-Environment-values.jpeg","traits":["1x","light"]}],"alt":null,"identifier":"WWDC24-10146-Environment-values","type":"image"},"WWDC24-10146-Declared-subviews":{"type":"image","identifier":"WWDC24-10146-Declared-subviews","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10146-Declared-subviews.jpeg","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/Jeehut":{"kind":"article","type":"topic","abstract":[{"type":"text","text":"Spatial-first Indie Developer for  Platforms. Actively contributing to Open Source since 2011!"}],"images":[{"type":"card","identifier":"Jeehut.jpeg"},{"type":"icon","identifier":"Jeehut.jpeg"}],"role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","title":"Cihat Gündüz (71 notes)","url":"\/documentation\/wwdcnotes\/jeehut"},"WWDC24-10146-Board-with-Rejection":{"type":"image","identifier":"WWDC24-10146-Board-with-Rejection","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10146-Board-with-Rejection.jpeg","traits":["1x","light"]}]},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","title":"Contributions are welcome!","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}]},"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","kind":"symbol","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"role":"collection","type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC24":{"url":"\/documentation\/wwdcnotes\/wwdc24","kind":"article","abstract":[{"type":"text","text":"Xcode 16, Swift 6, iOS 18, macOS 15 (Sequoia), tvOS 18, visionOS 2, watchOS 11."},{"type":"text","text":" "},{"type":"text","text":"New APIs: Swift Testing, "},{"type":"codeVoice","code":"FinanceKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"TabletopKit"},{"type":"text","text":", and more."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24","title":"WWDC24","images":[{"identifier":"WWDC24-Icon.png","type":"icon"},{"identifier":"WWDC24.jpeg","type":"card"}],"role":"collectionGroup","type":"topic"},"https://developer.apple.com/wwdc24/10146":{"type":"download","identifier":"https:\/\/developer.apple.com\/wwdc24\/10146","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc24\/10146"},"WWDC24-Icon.png":{"type":"image","identifier":"WWDC24-Icon.png","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-Icon.png","traits":["1x","light"]}]},"WWDC24-10146-Resolved-subviews":{"type":"image","identifier":"WWDC24-10146-Resolved-subviews","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10146-Resolved-subviews.jpeg","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10022-Demystify-SwiftUI":{"url":"\/documentation\/wwdcnotes\/wwdc21-10022-demystify-swiftui","kind":"article","abstract":[{"text":"Peek behind the curtain into the core tenets of SwiftUI philosophy: Identity, Lifetime, and Dependencies. Find out about common patterns, learn the principles that drive the framework, and discover how you can use them to guarantee correctness and performance for your app.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10022-Demystify-SwiftUI","title":"Demystify SwiftUI","role":"sampleCode","type":"topic"},"https://github.com/Jeehut":{"type":"link","identifier":"https:\/\/github.com\/Jeehut","title":"GitHub","titleInlineContent":[{"type":"text","text":"GitHub"}],"url":"https:\/\/github.com\/Jeehut"},"https://x.com/Jeehut":{"url":"https:\/\/x.com\/Jeehut","identifier":"https:\/\/x.com\/Jeehut","type":"link","title":"X\/Twitter","titleInlineContent":[{"text":"X\/Twitter","type":"text"}]},"WWDC24.jpeg":{"type":"image","identifier":"WWDC24.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24.jpeg","traits":["1x","light"]}]}}}