{"metadata":{"modules":[{"name":"WWDC Notes"}],"role":"sampleCode","title":"What’s new in ScreenCaptureKit","roleHeading":"WWDC23"},"kind":"article","sections":[],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10136-Whats-new-in-ScreenCaptureKit"},"sampleCodeDownload":{"action":{"type":"reference","isActive":true,"overridingTitle":"Watch Video (13 min)","identifier":"https:\/\/developer.apple.com\/wwdc23\/10136"},"kind":"sampleDownload"},"schemaVersion":{"major":0,"patch":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23"]]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc23-10136-whats-new-in-screencapturekit"]}],"abstract":[{"text":"Level up your screen sharing experience with the latest features in ScreenCaptureKit. Explore the built-in system picker, Presenter Overlay, and screenshot capabilities, and learn how to incorporate these features into your existing ScreenCaptureKit app or game.","type":"text"}],"primaryContentSections":[{"kind":"content","content":[{"type":"heading","level":2,"text":"Presenter Overlay","anchor":"Presenter-Overlay"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Elevates the presenters presence by including presenter on top of shared content","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Small overlay: Places presenter in a movable window"}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"image","identifier":"WWDC23-10136-small"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Large overlay: Separates the presenters face & body from the background & layers screen content between them (more immersive)"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"type":"image","identifier":"WWDC23-10136-large"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Overlay integrated in "},{"type":"codeVoice","code":"SCStream"},{"type":"text","text":" – video menu bar will show automatically, user controls sharing there"}]}]}],"type":"unorderedList"},{"inlineContent":[{"identifier":"WWDC23-10136-integration","type":"image"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"User can control the stream there & customize things like camera \/ microphone effects","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Currently content frames sent to its process from ScreenCaptureKit"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Now when camera is started overlay available in video menu item","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"ScreenCaptureKit will take the camera and apply the rendering to the selected stream – composite frames are automatic","type":"text"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"image","identifier":"WWDC23-10136-flow"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"Apps get notified about presenter overlay started\/stopped via ","type":"text"},{"code":"SCStream","type":"codeVoice"},{"text":" delegate method ","type":"text"},{"code":"stream(_:outputEffectDidStart:)","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Considerations to take: Hide camera view when turned on, update app UI, optimize experience (higher frame rates)"}]}]}],"type":"unorderedList"},{"level":2,"type":"heading","anchor":"Screen-sharing-picker","text":"Screen sharing picker"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"SCContentFilter"},{"type":"text","text":" from "},{"type":"codeVoice","code":"SCShareableContent"},{"type":"text","text":" used, new: get content filter from the picker"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Content can now also be picked from window menu directly"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"New "},{"type":"codeVoice","code":"SCContentSharingPicker"},{"type":"text","text":" acts as interface between app and OS"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Built-in system-level content picker","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Comes with per-stream customization"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"Usage example:"}],"type":"paragraph"},{"type":"codeListing","code":["\/\/ Set up content sharing picker instance","let picker = SCContentSharingPicker.shared()","picker.addObserver(self)","picker.active = true","","\/\/ show system level picker button","func showSystemPicker(sender: UIButton!) {","    picker.present(for stream: nil, using contentStyle:.window)","}","","\/\/ observer call back for picker","func contentSharingPicker(_ picker: SCContentSharingPicker, didUpdateWith filter:                                          ","SCContentFilter, for stream: SCStream?) {","   if let stream = stream {","        stream.updateContentFilter(filter)","    } else {","        let stream = SCStream(filter: filter, configuration: config, delegate: self)","    }","}"],"syntax":"Swift"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"There are also ","type":"text"},{"code":"didFailWith error","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"didCancel for stream","type":"codeVoice"},{"text":" delegate methods","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Use ","type":"text"},{"code":"SCContentSharingPickerConfiguration","type":"codeVoice"},{"text":" with options like ","type":"text"},{"code":"excludedBundleIDs","type":"codeVoice"},{"text":" or ","type":"text"},{"code":"allowsRepicking","type":"codeVoice"},{"text":" to configure","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"identifier":"WWDC23-10136-customize","type":"image"}],"type":"paragraph"},{"level":2,"type":"heading","anchor":"Screenshot","text":"Screenshot"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Features like advanced rendering by app or window, multiple pixel formats & color spaces, cursor visibility etc. are available"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"New API is asynchronous, choose between ","type":"text"},{"code":"CMSampleBuffer","type":"codeVoice"},{"text":" (has format options) and ","type":"text"},{"code":"CGImage","type":"codeVoice"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Similar options & setup flow as screen capture"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Transition from "},{"code":"CGWindowListCreateImage","type":"codeVoice"},{"type":"text","text":" by using options in "},{"code":"SCStreamConfiguration","type":"codeVoice"}]}]},{"content":[{"inlineContent":[{"text":"List options provided in ","type":"text"},{"code":"SCShareableContent","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"There’s a "},{"type":"codeVoice","code":"CGImage"},{"type":"text","text":" output format to migrate"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To start, use "},{"type":"codeVoice","code":"SCShareableContent"},{"type":"text","text":" with "},{"type":"codeVoice","code":"SCContentFilter"},{"type":"text","text":" and "},{"type":"codeVoice","code":"SCStreamConfiguration"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Then call ","type":"text"},{"code":"SCScreenshotManager.captureScreenshot","type":"codeVoice"},{"text":" class method to receive a screenshot","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"You can also use the new system picker to create the ","type":"text"},{"code":"SCContentFilter","type":"codeVoice"},{"text":" instead of ","type":"text"},{"code":"SCShareableContent","type":"codeVoice"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"Taking a screenshot:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["\/\/ Don't forget to customize the content you want in your screenshot","\/\/ Use SCShareableContent or SCContentSharingPicker to pick your content","let display = nil;","","\/\/ Create your SCContentFilter and SCStreamConfiguration","\/\/ Customize these lines to use the content you want and desired config options","let myContentFilter = SCContentFilter(display: display,","                             excludingApplications: [],","                             exceptingWindows: []);","let myConfiguration = SCStreamConfiguration();","","\/\/ Call the screenshot API and get your screenshot image","if let screenshot = try? await SCScreenshotManager.capture<#SampleBuffer|Image#>(contentFilter: myContentFilter, configuration:","                                                       myConfiguration) {","    print(\"Fetched screenshot.\")","} else {","    print(\"Failed to fetch screenshot.\")","}"],"syntax":"Swift"},{"level":2,"type":"heading","anchor":"Written-By","text":"Written By"},{"type":"row","numberOfColumns":5,"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"identifier":"Jeehut","type":"image"}]}]},{"content":[{"type":"heading","level":3,"text":"Cihat Gündüz","anchor":"Cihat-Gündüz"},{"type":"paragraph","inlineContent":[{"type":"reference","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","isActive":true,"overridingTitle":"Contributed Notes"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","identifier":"https:\/\/github.com\/Jeehut","isActive":true},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","identifier":"https:\/\/fline.dev","isActive":true},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","identifier":"https:\/\/x.com\/Jeehut","isActive":true}]}],"size":4}]},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}],"type":"paragraph"},{"level":2,"type":"heading","anchor":"Related-Sessions","text":"Related Sessions"},{"style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10053-Whats-new-in-privacy","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10155-Take-ScreenCaptureKit-to-the-next-level","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10156-Meet-ScreenCaptureKit"],"type":"links"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}]}],"references":{"WWDC23-10136-flow":{"alt":null,"type":"image","identifier":"WWDC23-10136-flow","variants":[{"url":"\/images\/WWDC23-10136-flow.png","traits":["1x","light"]}]},"WWDC23-10136-integration":{"alt":null,"type":"image","identifier":"WWDC23-10136-integration","variants":[{"url":"\/images\/WWDC23-10136-integration.png","traits":["1x","light"]}]},"https://x.com/Jeehut":{"titleInlineContent":[{"type":"text","text":"X\/Twitter"}],"type":"link","url":"https:\/\/x.com\/Jeehut","identifier":"https:\/\/x.com\/Jeehut","title":"X\/Twitter"},"https://github.com/Jeehut":{"titleInlineContent":[{"type":"text","text":"GitHub"}],"type":"link","url":"https:\/\/github.com\/Jeehut","identifier":"https:\/\/github.com\/Jeehut","title":"GitHub"},"https://fline.dev":{"titleInlineContent":[{"type":"text","text":"Blog"}],"type":"link","url":"https:\/\/fline.dev","identifier":"https:\/\/fline.dev","title":"Blog"},"WWDC23-10136-small":{"alt":null,"type":"image","identifier":"WWDC23-10136-small","variants":[{"url":"\/images\/WWDC23-10136-small.png","traits":["1x","light"]}]},"WWDC23-Icon.png":{"alt":null,"type":"image","identifier":"WWDC23-Icon.png","variants":[{"url":"\/images\/WWDC23-Icon.png","traits":["1x","light"]}]},"https://developer.apple.com/wwdc23/10136":{"checksum":null,"type":"download","url":"https:\/\/developer.apple.com\/wwdc23\/10136","identifier":"https:\/\/developer.apple.com\/wwdc23\/10136"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"type":"link","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!"},"doc://WWDCNotes/documentation/WWDCNotes":{"role":"collection","title":"WWDC Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"images":[{"identifier":"WWDCNotes.png","type":"icon"}],"kind":"symbol","type":"topic","url":"\/documentation\/wwdcnotes"},"WWDC23.jpeg":{"alt":null,"type":"image","identifier":"WWDC23.jpeg","variants":[{"url":"\/images\/WWDC23.jpeg","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23":{"url":"\/documentation\/wwdcnotes\/wwdc23","title":"WWDC23","kind":"article","role":"collectionGroup","images":[{"identifier":"WWDC23-Icon.png","type":"icon"},{"identifier":"WWDC23.jpeg","type":"card"}],"type":"topic","abstract":[{"text":"Xcode 15, Swift 5.9, iOS 17, macOS 14 (Sonoma), tvOS 17, visionOS 1, watchOS 10.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"type":"codeVoice","code":"SwiftData"},{"text":", ","type":"text"},{"code":"Observation","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit","type":"codeVoice"},{"text":" views, and more.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23"},"WWDCNotes.png":{"alt":null,"type":"image","identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"WWDC23-10136-large":{"alt":null,"type":"image","identifier":"WWDC23-10136-large","variants":[{"url":"\/images\/WWDC23-10136-large.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10155-Take-ScreenCaptureKit-to-the-next-level":{"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc22-10155-take-screencapturekit-to-the-next-level","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10155-Take-ScreenCaptureKit-to-the-next-level","abstract":[{"type":"text","text":"Discover how you can support complex screen capture experiences for people using your app with ScreenCaptureKit. We’ll explore many of the advanced options you can incorporate including fine tuning content filters, frame metadata interpretation, window pickers, and more. We’ll also show you how you can configure your stream for optimal performance."}],"role":"sampleCode","title":"Take ScreenCaptureKit to the next level"},"Jeehut.jpeg":{"alt":null,"type":"image","identifier":"Jeehut.jpeg","variants":[{"url":"\/images\/Jeehut.jpeg","traits":["1x","light"]}]},"WWDC23-10136-customize":{"alt":null,"type":"image","identifier":"WWDC23-10136-customize","variants":[{"url":"\/images\/WWDC23-10136-customize.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/Jeehut":{"role":"sampleCode","title":"Cihat Gündüz (56 notes)","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","abstract":[{"text":"Spatial-first Indie Developer for  Platforms. Actively contributing to Open Source since 2011!","type":"text"}],"images":[{"type":"card","identifier":"Jeehut.jpeg"},{"type":"icon","identifier":"Jeehut.jpeg"}],"kind":"article","type":"topic","url":"\/documentation\/wwdcnotes\/jeehut"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10053-Whats-new-in-privacy":{"type":"topic","role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc23-10053-whats-new-in-privacy","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10053-Whats-new-in-privacy","abstract":[{"text":"At Apple, we believe that privacy is a fundamental human right. Learn about new technologies on Apple platforms that make it easier for you to implement essential privacy patterns that build customer trust in your app. Discover privacy improvements for Apple’s platforms, as well as a study of how privacy shaped the software architecture and design for the input model on visionOS.","type":"text"}],"kind":"article","title":"What’s new in privacy"},"Jeehut":{"alt":"Profile image of Cihat Gündüz","type":"image","identifier":"Jeehut","variants":[{"url":"\/images\/Jeehut.jpeg","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10156-Meet-ScreenCaptureKit":{"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc22-10156-meet-screencapturekit","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10156-Meet-ScreenCaptureKit","abstract":[{"type":"text","text":"Learn how ScreenCaptureKit can deliver high-performance screen capture for your macOS screen sharing applications, video conferencing apps, game streaming services, and more. We’ll explore the building blocks of this API, learn how to configure streams to capture on-screen video and audio content, and share tips for integrating it into your existing apps."}],"role":"sampleCode","title":"Meet ScreenCaptureKit"}}}