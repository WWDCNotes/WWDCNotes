{"metadata":{"roleHeading":"WWDC21","modules":[{"name":"WWDC Notes"}],"role":"sampleCode","title":"Connect Bluetooth devices to Apple Watch"},"sections":[],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"]]},"abstract":[{"text":"Discover how you can integrate data from Bluetooth accessories into Apple Watch apps and complications. Bluetooth devices can provide medical data, sports stats, and more to Apple Watch, and help people get more out of your software in the process. We’ll show you how to connect to these devices during Background App Refresh to display the most up-to-date information in your Apple Watch complications, provide an overview of Core Bluetooth on watchOS, and explore best practices for Bluetooth accessory design.","type":"text"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc21-10005-connect-bluetooth-devices-to-apple-watch"]}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10005-Connect-Bluetooth-devices-to-Apple-Watch","interfaceLanguage":"swift"},"schemaVersion":{"major":0,"patch":0,"minor":3},"sampleCodeDownload":{"kind":"sampleDownload","action":{"isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc21\/10005","overridingTitle":"Watch Video (10 min)","type":"reference"}},"kind":"article","primaryContentSections":[{"kind":"content","content":[{"anchor":"Whats-new-in-watchOS-8","type":"heading","text":"What’s new in watchOS 8","level":2},{"type":"paragraph","inlineContent":[{"text":"With watchOS 7:","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"text":"you can only connect to Bluetooth devices while your app is in the foreground or during a background session","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"if you wanted to have a complication with information from your accessory, the complication could not be updated unless the user opened your app"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"With watchOS 8:"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"you can connect your Bluetooth accessory during Background App Refresh, this enables you to:"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"update your complications with information from your accessory"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"send local notification if the accessory battery is running low","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"text":"To enable Bluetooth Background Refresh in your app, add ","type":"text"},{"text":"bluetooth-central","type":"text"},{"text":" to ","type":"text"},{"text":"UIBackgroundModes","type":"text"},{"text":" in your ","type":"text"},{"type":"text","text":"Info.plist"}]},{"anchor":"Core-Bluetooth-differences-between-platforms","type":"heading","text":"Core Bluetooth differences between platforms","level":2},{"header":"row","type":"table","rows":[[[{"type":"paragraph","inlineContent":[]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"iOS"}]}],[{"type":"paragraph","inlineContent":[{"text":"macOS","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"tvOS"}]}],[{"type":"paragraph","inlineContent":[{"text":"watchOS","type":"text"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"Background execution","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"text":"✅","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"text":"✅","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"❌"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"watchOS 8+"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"Foreground execution","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅"}]}],[{"type":"paragraph","inlineContent":[{"text":"✅","type":"text"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"Minimum connection interval","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"15ms"}]}],[{"type":"paragraph","inlineContent":[{"text":"15ms","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"30ms"}]}],[{"type":"paragraph","inlineContent":[{"text":"30ms","type":"text"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"Role","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Both"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Both"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Central"}]}],[{"type":"paragraph","inlineContent":[{"text":"Central","type":"text"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"Connections","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"HW"}]}],[{"type":"paragraph","inlineContent":[{"text":"HW","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"2"}]}],[{"type":"paragraph","inlineContent":[{"text":"2","type":"text"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"State preservation and restoration","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅"}]}],[{"type":"paragraph","inlineContent":[{"text":"❌","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"text":"❌","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"❌"}]}]]]},{"anchor":"How-your-accessory-communicates-with-Apple-Watch","type":"heading","text":"How your accessory communicates with Apple Watch","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"When the app is in the foreground:"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the app tries to connect to your accessory as soon as an advertisement (from your accessory) is seen"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"once the advertisement is received, a Bluetooth LE connection is established"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If the app is not in the foreground, the only way for your app to connect to the accessory is via Background App Refresh:"}]},{"items":[{"content":[{"inlineContent":[{"text":"during a refresh your app initiate a connection to a known peripheral, and the next time an advertisement is received, Apple Watch will connect to your accessory","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"as soon as you’re finished retrieving data, you can terminate the Bluetooth connection and process the data.","type":"text"}]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"text":"Background App Refresh can happen at any time:","type":"text"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"your accessory should advertise as often as possible when it has an important update to display on Apple Watch"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"one possible strategy is to buffer sensor data on your accessory. When it’s close to the buffer limit, increase its advertisement rates to increase the chances of reconnection to Apple Watch"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"as a guide, you should advertise at least every two seconds in ideal RF conditions"}]}]}],"type":"unorderedList"},{"anchor":"Written-By","type":"heading","text":"Written By","level":2},{"type":"row","numberOfColumns":5,"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","type":"image"}]}]},{"size":4,"content":[{"type":"heading","text":"Federico Zanetello","anchor":"Federico-Zanetello","level":3},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"type":"reference","overridingTitle":"Contributed Notes","isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/zntfdr"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/zntfdr.dev"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","isActive":true}]},{"anchor":"Related-Sessions","type":"heading","text":"Related Sessions","level":2},{"style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10135-Get-timely-alerts-from-Bluetooth-devices-on-watchOS","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10002-Whats-new-in-watchOS-8"],"type":"links"},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"references":{"https://developer.apple.com/wwdc21/10005":{"type":"download","identifier":"https:\/\/developer.apple.com\/wwdc21\/10005","url":"https:\/\/developer.apple.com\/wwdc21\/10005","checksum":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10135-Get-timely-alerts-from-Bluetooth-devices-on-watchOS":{"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc22-10135-get-timely-alerts-from-bluetooth-devices-on-watchos","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10135-Get-timely-alerts-from-Bluetooth-devices-on-watchOS","kind":"article","title":"Get timely alerts from Bluetooth devices on watchOS","abstract":[{"text":"Find out how Bluetooth devices can send timely and relevant alerts to Apple Watch. We’ll show you how to take advantage of periodic data in complications, explore background peripheral discovery, and help you learn how to use characteristic monitoring in watchOS. We’ll also share best practices and design guidance for creating a great Bluetooth accessory.","type":"text"}],"role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10002-Whats-new-in-watchOS-8":{"title":"What’s new in watchOS 8","url":"\/documentation\/wwdcnotes\/wwdc21-10002-whats-new-in-watchos-8","kind":"article","abstract":[{"text":"watchOS 8 brings all-new opportunities to keep people up to date on their watch face. With new APIs for the Always-On Retina display and updating complications from Bluetooth devices and background delivery of HealthKit data, it’s never been easier to keep your app up to date. Learn about region-based user notifications to leverage location in your app. Explore all the new enhancements to SwiftUI and watchOS that will get you excited to build your next Watch app.","type":"text"}],"role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10002-Whats-new-in-watchOS-8","type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21":{"url":"\/documentation\/wwdcnotes\/wwdc21","kind":"article","role":"collectionGroup","type":"topic","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21","title":"WWDC21","abstract":[{"text":"Xcode 13, Swift 5.5, iOS 15, macOS 12 (Monterey), tvOS 15, watchOS 8.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"MusicKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"DocC","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit 2","type":"codeVoice"},{"type":"text","text":", and more."}]},"https://github.com/zntfdr":{"titleInlineContent":[{"text":"GitHub","type":"text"}],"title":"GitHub","url":"https:\/\/github.com\/zntfdr","type":"link","identifier":"https:\/\/github.com\/zntfdr"},"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","url":"\/documentation\/wwdcnotes","kind":"symbol","role":"collection","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"images":[{"identifier":"WWDCNotes.png","type":"icon"}]},"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"type":"link","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"kind":"article","url":"\/documentation\/wwdcnotes\/zntfdr","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"type":"topic","title":"Federico Zanetello (332 notes)","role":"sampleCode"},"https://avatars.githubusercontent.com/u/5277837?v=4":{"variants":[{"traits":["1x","light"],"url":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4"}],"identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","type":"image","alt":"Profile image of Federico Zanetello"},"WWDCNotes.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes.png"}],"alt":null,"identifier":"WWDCNotes.png","type":"image"},"https://zntfdr.dev":{"title":"Blog","url":"https:\/\/zntfdr.dev","type":"link","identifier":"https:\/\/zntfdr.dev","titleInlineContent":[{"type":"text","text":"Blog"}]}}}