{"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10231-Donate-intents-and-expand-your-apps-presence","interfaceLanguage":"swift"},"metadata":{"modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC21","title":"Donate intents and expand your app’s presence","role":"sampleCode"},"sampleCodeDownload":{"action":{"identifier":"https:\/\/developer.apple.com\/wwdc21\/10231","overridingTitle":"Watch Video (20 min)","type":"reference","isActive":true},"kind":"sampleDownload"},"sections":[],"schemaVersion":{"minor":3,"patch":0,"major":0},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"What are intents?","anchor":"What-are-intents","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"a way of representing, in detail, a type of action that your app can perform","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Siri includes a lot of built-in intents that support a range of capabilities that you can use to integrate with the system (e.g., messaging, ride booking, payments)","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"support the ability for you to define your own custom intents for use with Shortcuts","type":"text"}]}]}]},{"type":"heading","text":"What are intent donations?","anchor":"What-are-intent-donations","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"An intent donation is the act of telling the system when a person performs an action in your app"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"The system will store these donations and use them to expand your app’s capabilities and presence throughout the system","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Apps that donate intents show up in places throughout the system like Suggestions, Shortcuts, Focus, Smart Stack, and Siri","type":"text"}]}]}]},{"type":"heading","text":"The life of an intent donation","anchor":"The-life-of-an-intent-donation","level":2},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"text":"Create a new intent definition:","type":"text"}],"type":"paragraph"}]}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"With your project open, create a new file of type ","type":"text"},{"text":"SiriKit Intent Definition","type":"text"},{"text":" File","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"in the following menu select any targets that I want to use the custom intent","type":"text"}],"type":"paragraph"}]}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Define the intent"}]}]}],"start":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"After selecting the new Intent file, click the ","type":"text"},{"text":"+","type":"text"},{"text":" button on the bottom right and select ","type":"text"},{"text":"New Intent","type":"text"},{"text":" (or ","type":"text"},{"text":"Customize System Intent","type":"text"},{"text":" if your intent matches one of the existing built-in system intents)","type":"text"}]}]}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Define eligibility"}],"type":"paragraph"}]}],"start":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"After naming your intent in step two, check whether you’d like your intent to be eligible for widgets\/shortcuts\/(Siri)suggestions"}]}]}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Define Intent parameters","type":"text"}]}]}],"start":4},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"These parameters are the input of your action\/intent, which depend on your specific intent"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"For each parameter you can select the type (String\/Location\/URL… can be custom, too)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"If the parameter options are not static and\/or need to be provided by the app, check the ","type":"text"},{"text":"Dynamic Options","type":"text"},{"text":" - this","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"The system reads the intent definition file to determine the intent and parameter combinations that an app supports for prediction.","type":"text"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Donate the intent when appropriate"}]}]}],"start":5},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Create an instance of the intent class (this is automatically generated for you from the Intent file via an Xcode rule)","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"donate it"}]}]}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Donate your intent.","","let intent = CheckWeatherIntent()","intent.location = weatherLocation","","let interaction = INInteraction(intent: intent, response: nil)","interaction.donate { (error) in","  \/\/ Handle the error.","}"]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"It’s important to delete donations so people don’t get suggestions for actions in your app that are no longer relevant:","type":"text"}]}]}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Donate your intent.","let interaction = INInteraction(intent: intent, response: response)","interaction.identifier = \"68753A44-4D6F-1226-9C60-0050E4C00067\"","interaction.groupIdentifier = \"san-diego\"","interaction.donate { (error) in","  \/\/ Handle the error.","}","","\/\/ Delete individual donations.","INInteraction.delete(with: [\"68753A44-4D6F-1226-9C60-0050E4C00067\"]) { (error) in","  \/\/ Handle the error.","}","","\/\/ Delete group donations.","INInteraction.delete(with: \"san-diego\") { (error) in","  \/\/ Handle the error.","}"]},{"type":"heading","text":"Behind the scenes","anchor":"Behind-the-scenes","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the system stores these donations over time along with the context the person was in when the intent was donated"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"As the user continue to repeat the same action, the app continues to make intent donations"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The system uses the intent parameters to determine whether the intents are equivalent or not"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"The system uses machine learning and on-device intelligence to find patterns in the data and predict what intent is relevant given a person’s current context and past behavioral patterns","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"The on-device intelligence integrates with user-facing features to expose your app’s capabilities and presence to the user","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"all of the machine learning and intelligence is performed on-device in a privacy-preserving manner, meaning Apple does not collect any data that can be used to personally identify a user"}],"type":"paragraph"}]}]},{"type":"heading","text":"What makes a great donation?","anchor":"What-makes-a-great-donation","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Represents an action likely to be repeated by the user"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Intent payload is consistent across donations - so that a pattern can be recognized by the on-device intelligence"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"No timestamps (in the suggestion parameters)","type":"text"}]}]}]},{"type":"heading","text":"Written By","anchor":"Written-By","level":2},{"type":"row","numberOfColumns":5,"columns":[{"size":1,"content":[{"inlineContent":[{"identifier":"zntfdr","type":"image"}],"type":"paragraph"}]},{"size":4,"content":[{"type":"heading","text":"Federico Zanetello","level":3,"anchor":"Federico-Zanetello"},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","isActive":true,"type":"reference","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"overridingTitle":"Contributed Notes"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/zntfdr","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/zntfdr.dev","isActive":true,"type":"reference"}]}]}]},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}]},{"type":"heading","text":"Related Sessions","anchor":"Related-Sessions","level":2},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10049-Add-intelligence-to-your-widgets","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10091-Send-communication-and-Time-Sensitive-notifications","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10283-Design-great-actions-for-Shortcuts-Siri-and-Suggestions","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10194-Add-configuration-and-intelligence-to-your-widgets","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-211-Introduction-to-Siri-Shortcuts","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-217-Siri-Shortcuts-on-the-Siri-Watch-Face"]},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc21-10231-donate-intents-and-expand-your-apps-presence"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"]]},"kind":"article","abstract":[{"type":"text","text":"Discover how you can make key parts of your app available for someone at exactly the right moment — without them ever needing to open it. Learn how to craft and donate intents to the system, helping you surface relevant and contextual information about your app in Siri, Focus, Shortcuts, the Smart Stack, and more. We’ll explore how the system intelligently identifies information and show you techniques for structuring intents to help increase engagement and visibility for your app."}],"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC21":{"kind":"article","title":"WWDC21","url":"\/documentation\/wwdcnotes\/wwdc21","type":"topic","images":[{"identifier":"WWDC21-Icon.png","type":"icon"},{"identifier":"WWDC21.jpeg","type":"card"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21","role":"collectionGroup","abstract":[{"type":"text","text":"Xcode 13, Swift 5.5, iOS 15, macOS 12 (Monterey), tvOS 15, watchOS 8."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"MusicKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"DocC"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit 2"},{"type":"text","text":", and more."}]},"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"role":"collection","kind":"symbol","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"title":"WWDC Notes","type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-211-Introduction-to-Siri-Shortcuts":{"title":"Introduction to Siri Shortcuts","url":"\/documentation\/wwdcnotes\/wwdc18-211-introduction-to-siri-shortcuts","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-211-Introduction-to-Siri-Shortcuts","type":"topic","kind":"article","role":"sampleCode","abstract":[{"text":"Siri Shortcuts are a powerful new feature in iOS 12 that allow your app to expose its functionality to Siri. This enables Siri to suggest your shortcut at relevant times based on various context. Shortcuts can also be added to Siri to run with a voice phrase on iOS, HomePod and watchOS. Learn how to expose shortcuts in your app using NSUserActivity and discover the benefits of creating custom intents with SiriKit for a richer user experience.","type":"text"}]},"zntfdr.jpeg":{"alt":null,"type":"image","identifier":"zntfdr.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/zntfdr.jpeg"}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"type":"topic","images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"kind":"article","title":"Federico Zanetello (332 notes)","url":"\/documentation\/wwdcnotes\/zntfdr","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","role":"sampleCode"},"WWDC21.jpeg":{"identifier":"WWDC21.jpeg","alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC21.jpeg"}]},"https://github.com/zntfdr":{"type":"link","titleInlineContent":[{"text":"GitHub","type":"text"}],"identifier":"https:\/\/github.com\/zntfdr","title":"GitHub","url":"https:\/\/github.com\/zntfdr"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10091-Send-communication-and-Time-Sensitive-notifications":{"title":"Send communication and Time Sensitive notifications","url":"\/documentation\/wwdcnotes\/wwdc21-10091-send-communication-and-time-sensitive-notifications","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10091-Send-communication-and-Time-Sensitive-notifications","kind":"article","role":"sampleCode","abstract":[{"text":"Learn more about the evolution of notifications on Apple platforms. We’ll explore how you can help people manage notifications within your app, including how you can craft meaningful moments with interruption levels and Time Sensitive notifications. And we’ll introduce you to communication notifications, providing a richer experience for calls and messages in your app through SiriKit.","type":"text"}]},"WWDC21-Icon.png":{"alt":null,"type":"image","identifier":"WWDC21-Icon.png","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC21-Icon.png"}]},"https://developer.apple.com/wwdc21/10231":{"identifier":"https:\/\/developer.apple.com\/wwdc21\/10231","checksum":null,"type":"download","url":"https:\/\/developer.apple.com\/wwdc21\/10231"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10283-Design-great-actions-for-Shortcuts-Siri-and-Suggestions":{"abstract":[{"type":"text","text":"Actions are the building blocks of shortcuts. They allow people to take advantage of your app’s functionality even when they’re not looking at your app’s interface. We’ll show you how to design actions that are useful, easy-to-use, and can be incorporated into powerful multi-step shortcuts. You’ll also explore enhancements around publishing and sharing shortcuts, ensuring that people can access your app in the way they want across all of Apple’s platforms."}],"type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc21-10283-design-great-actions-for-shortcuts-siri-and-suggestions","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10283-Design-great-actions-for-Shortcuts-Siri-and-Suggestions","title":"Design great actions for Shortcuts, Siri, and Suggestions","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10049-Add-intelligence-to-your-widgets":{"title":"Add intelligence to your widgets","type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc21-10049-add-intelligence-to-your-widgets","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10049-Add-intelligence-to-your-widgets","abstract":[{"text":"Discover how to you can add intelligence to your widgets in Smart Stacks. We’ll show you how to use the new Widget Suggestions API in tandem with Smart Rotate to create more valuable widget experiences for people throughout the day. Whether you inform the system of new, timely information or teach the system to learn common patterns, adopting these APIs can help people discover your widget and allows you to influence how the system surfaces content from your app around system spaces.","type":"text"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-217-Siri-Shortcuts-on-the-Siri-Watch-Face":{"kind":"article","title":"Siri Shortcuts on the Siri Watch Face","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-217-Siri-Shortcuts-on-the-Siri-Watch-Face","url":"\/documentation\/wwdcnotes\/wwdc18-217-siri-shortcuts-on-the-siri-watch-face","abstract":[{"text":"Learn how to use Siri Shortcuts to bring glanceable information and custom interactions to the Siri watch face. Walk through how to create a compelling user experience by providing relevant shortcuts and by donating interactions from your app. See how these experiences can be created from both watchOS and iOS.","type":"text"}],"type":"topic","role":"sampleCode"},"zntfdr":{"identifier":"zntfdr","alt":"Profile image of Federico Zanetello","type":"image","variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10194-Add-configuration-and-intelligence-to-your-widgets":{"title":"Add configuration and intelligence to your widgets","url":"\/documentation\/wwdcnotes\/wwdc20-10194-add-configuration-and-intelligence-to-your-widgets","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10194-Add-configuration-and-intelligence-to-your-widgets","kind":"article","role":"sampleCode","abstract":[{"text":"Widgets are at their best when they show up on someone’s Home screen or in the Today View at the right time and provide actionable, relevant information. We’ll show you how to build configurable widgets to let people create a personalized Home screen experience, and that take advantage of system intelligence to help people get what they want, when they want it. Learn how to customize your widget’s configuration interface, and how to appear within Siri Suggestions or at the top of a widget Smart Stack based on user behavior or by letting the system know when there’s new, timely information.","type":"text"}]},"WWDCNotes.png":{"alt":null,"type":"image","identifier":"WWDCNotes.png","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}]},"https://zntfdr.dev":{"type":"link","titleInlineContent":[{"text":"Blog","type":"text"}],"identifier":"https:\/\/zntfdr.dev","title":"Blog","url":"https:\/\/zntfdr.dev"}}}