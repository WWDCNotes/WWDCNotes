{"metadata":{"modules":[{"name":"WWDC Notes"}],"title":"Support Cinematic mode videos in your app","role":"sampleCode","roleHeading":"WWDC23"},"abstract":[{"text":"Discover how the Cinematic Camera API helps your app work with Cinematic mode videos captured in the Camera app. We’ll share the fundamentals — including Decision layers — that make up Cinematic mode video, show you how to access and update Decisions in your app, and help you save and load those changes.","type":"text"}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23"]]},"primaryContentSections":[{"content":[{"type":"heading","level":2,"text":"What is cinematic mode?","anchor":"What-is-cinematic-mode"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"a “tiny film crew right in your pocket”."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"brings you a camera with shallow depth of field and natural focus falloff."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"a director, who directs the attention and narrative by changing the focus."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"a focus puller who anticipates keyframes ahead of time and creates smooth transitions between focus points."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"It’s captured in the Camera app on iPhone 13 and newer."}]}]}]},{"type":"heading","level":2,"text":"Cinematic API","anchor":"Cinematic-API"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Available on macOS 14, iOS 17, iPadOS 17 and tvOS 17."}]},{"type":"heading","level":3,"text":"Dataflow","anchor":"Dataflow"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Two assets: Rendered asset and Cinematic mode asset","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Rendered asset can be shared and played as a regular Quicktime movie.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Cinematic mode asset: has all the information needed to create the Rendered asset. Allow non-destructive post-capture edits.","type":"text"}],"type":"paragraph"}]}]},{"type":"heading","level":4,"text":"Cinematic mode asset","anchor":"Cinematic-mode-asset"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"has multiple tracks"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"the original QuickTime movie: can be HDR\/SDR, 1080p @ 30 fps on iPhone 13 and up to 4k @ 24\/25\/30 fps on iPhone 14.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Disparity used for focus and rendering the shallow depth of field."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Metadata:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"rendering attributes which hold focus disparity (chosen by the cinematic engine) and aperture as an f number (chosen by the user)"}]}]},{"content":[{"inlineContent":[{"text":"Cinematic script which holds all the automatic scene detections, and the focus decisions deciding which detection to keep in focus.","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]}],"type":"unorderedList"}]}]},{"type":"heading","level":3,"text":"Playback","anchor":"Playback"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To pick a Cinematic mode asset, use "},{"type":"codeVoice","code":"PhotosPicker"},{"type":"text","text":" and filter for "},{"type":"codeVoice","code":".cinematicVideos"},{"type":"text","text":"."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Set the request options to get the "},{"type":"codeVoice","code":".original"},{"type":"text","text":" version."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Can be played back as a regular movie using AVPlayer and AVPlayerItem."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"To exploit to the max, we’ll need to add a custom video compositor."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Create a session using"},{"code":"CNRenderingSession","type":"codeVoice"},{"type":"text","text":", and an "},{"code":"AVMutableComposition","type":"codeVoice"},{"type":"text","text":"."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"In the custom compositor you can set the f number by setting a "},{"type":"codeVoice","code":"fNumber"},{"type":"text","text":" on the "},{"type":"codeVoice","code":"frameAttributes"},{"type":"text","text":"."}],"type":"paragraph"}]}]},{"type":"heading","level":3,"text":"Editing","anchor":"Editing"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"each cinematic frame holds all detections for a given point in time.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Base focus decisions are decided by the system. They can be overriden by a Weak user decision (overriden by the following Base decision), or a Strong user decision that will keep focus on a subject until the next user decision."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"to draw detection boxes, you can get the current script frame using "},{"type":"codeVoice","code":"cinematicScript.frame(at: scriptFrameTime, tolerance: tolerance)"},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To add a new decision, create a "},{"type":"codeVoice","code":"CNDecision"},{"type":"text","text":" and add it to the "},{"type":"codeVoice","code":"cinematicScript"},{"type":"text","text":"."}]}]},{"content":[{"inlineContent":[{"text":"The ","type":"text"},{"code":"cinematicScript","type":"codeVoice"},{"text":" changes have a ","type":"text"},{"code":"dataRepresentation","type":"codeVoice"},{"text":" property that can be written to disk.","type":"text"}],"type":"paragraph"}]}]},{"type":"heading","level":2,"text":"Written By","anchor":"Written-By"},{"type":"row","columns":[{"content":[{"inlineContent":[{"type":"image","identifier":"https:\/\/avatars.githubusercontent.com\/u\/329601?v=4"}],"type":"paragraph"}],"size":1},{"content":[{"type":"heading","anchor":"Rony-Fadel","level":3,"text":"Rony Fadel"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/ronyfadel","overridingTitle":"Contributed Notes","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/ronyfadel","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/fadel.io\/","type":"reference"}]}],"size":4}],"numberOfColumns":5},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","isActive":true}]},{"type":"heading","level":2,"text":"Related Sessions","anchor":"Related-Sessions"},{"type":"small","inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}],"kind":"content"}],"kind":"article","variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc23-10137-support-cinematic-mode-videos-in-your-app"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"sampleCodeDownload":{"action":{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc23\/10137","isActive":true,"overridingTitle":"Watch Video (24 min)"},"kind":"sampleDownload"},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10137-Support-Cinematic-mode-videos-in-your-app"},"schemaVersion":{"major":0,"minor":3,"patch":0},"references":{"doc://WWDCNotes/documentation/WWDCNotes/ronyfadel":{"url":"\/documentation\/wwdcnotes\/ronyfadel","title":"Rony Fadel (2 notes)","kind":"article","abstract":[{"text":"Former Apple engineer turned indie developer.","type":"text"}],"images":[{"type":"card","identifier":"ronyfadel.jpeg"},{"type":"icon","identifier":"ronyfadel.jpeg"}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/ronyfadel","role":"sampleCode"},"https://fadel.io/":{"titleInlineContent":[{"text":"Blog","type":"text"}],"url":"https:\/\/fadel.io\/","identifier":"https:\/\/fadel.io\/","type":"link","title":"Blog"},"WWDCNotes.png":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes.png"}],"identifier":"WWDCNotes.png","type":"image"},"https://github.com/ronyfadel":{"titleInlineContent":[{"text":"GitHub","type":"text"}],"url":"https:\/\/github.com\/ronyfadel","identifier":"https:\/\/github.com\/ronyfadel","type":"link","title":"GitHub"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23":{"title":"WWDC23","role":"collectionGroup","kind":"article","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23","url":"\/documentation\/wwdcnotes\/wwdc23","abstract":[{"text":"Xcode 15, Swift 5.9, iOS 17, macOS 14 (Sonoma), tvOS 17, visionOS 1, watchOS 10.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"SwiftData","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Observation","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit","type":"codeVoice"},{"text":" views, and more.","type":"text"}]},"https://avatars.githubusercontent.com/u/329601?v=4":{"alt":"Profile image of Rony Fadel","variants":[{"traits":["1x","light"],"url":"https:\/\/avatars.githubusercontent.com\/u\/329601?v=4"}],"identifier":"https:\/\/avatars.githubusercontent.com\/u\/329601?v=4","type":"image"},"ronyfadel.jpeg":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/ronyfadel.jpeg"}],"identifier":"ronyfadel.jpeg","type":"image"},"https://developer.apple.com/wwdc23/10137":{"checksum":null,"url":"https:\/\/developer.apple.com\/wwdc23\/10137","identifier":"https:\/\/developer.apple.com\/wwdc23\/10137","type":"download"},"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","type":"link","title":"Contributions are welcome!"},"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","title":"WWDC Notes","kind":"symbol","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"role":"collection"}}}