{"abstract":[{"type":"text","text":"Unit testing is an essential tool to consistently verify your code works correctly. Discover techniques for designing the code of your app so that it can be easily tested. Find out the best practices for developing a test suite that evolves with your app and scales as your app grows."}],"schemaVersion":{"patch":0,"minor":3,"major":0},"metadata":{"role":"sampleCode","roleHeading":"WWDC17","title":"Engineering for Testability","modules":[{"name":"WWDC Notes"}]},"kind":"article","variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc17-414-engineering-for-testability"]}],"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","type":"heading","level":2,"text":"Overview"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Separate Logic and Effects","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Pyramid of Tests (between UI and Unit tests there’s integration tests)"},{"type":"text","text":" "},{"type":"image","identifier":"WWDC17-414-pyramid"}]}]}]},{"anchor":"UI-Tests-Tips","type":"heading","level":2,"text":"UI Tests Tips"},{"anchor":"Store-parts-of-queries-in-variables","type":"heading","level":3,"text":"Store parts of queries in variables."},{"type":"paragraph","inlineContent":[{"text":"Instead of this:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["app.buttons[\"blue\"].tap()","app.buttons[\"red\"].tap()","app.buttons[\"yellow\"].tap()","app.buttons[\"green\"].tap()","app.buttons[\"purple\"].tap()","app.buttons[\"orange\"].tap()","app.buttons[\"pink\"].tap() "]},{"type":"paragraph","inlineContent":[{"text":"Write this:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["func tapButton(_ color: String) {","  app.buttons[color].tap() ","}","","let colors [\"blue\", \"red\", \"yellow\", 'green\", \"purple\", \"orange\", \"pink\"]","","for color in colors { ","  tapButton(color)","}"]},{"anchor":"Wrap-Complex-queries-in-utility-methods","type":"heading","level":3,"text":"Wrap Complex queries in utility methods"},{"type":"paragraph","inlineContent":[{"text":"Instead of this:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["func testGameWithDifficultyBeginnerAndSoundOff() { ","  app.navigationBars[\"Game.GameView'].buttons[\"Settings\"].tap()","  app.buttons[\"Difficulty\"].tap()","  app.buttons[\"beginner\"].tap()","  app.navigationBars.buttons[\"Back\"].tap()","  app.buttons[\"Sound\"].tap()","  app.buttons[\"off\"].tap()","  app.navigationBars.buttons[\"Back\"].tap()","  app.navigationBars.buttons[\"Back\"].tap() ","","  \/\/ test code ","}"]},{"type":"paragraph","inlineContent":[{"text":"Write this:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["func testGameWithDifficultyBeginnerAndSoundOff() {","  app.navigationBars[\"Game.GameView\"].buttons[\"Settings\"].tap() setDifficulty(.beginner)","  setSound(.off) ","  app.navigationBars.buttons[\"Back\"].tap() ","","  \/\/ test code ","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Then create a GameApp class:"}]},{"type":"codeListing","syntax":"swift","code":["class GameApp: XCUIApplication { ","","  enum Difficulty { \/* cases *\/ }","  enum Sound { \/* cases *\/ }","  ","  func setDifficulty(_ difficulty: Difficulty) { \/* code *\/ }","  func setSound(_ sound: Sound) { \/* code *\/ } ","","  func configureSettings(difficulty: Difficulty, sound: Sound) {","    app.navigationBars[\"Game.GameView\"].buttons[\"Settings\"].tap() ","    setDifficulty(difficulty)","    setSound(sound)","    app.navigationBars.buttons[\"Back\"].tap() ","  }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"And get this:"}]},{"type":"codeListing","syntax":"swift","code":["func testGameWithDifficultyBeginnerAndSoundOff() {","  GameApp().configureSettings (difficulty: .beginner, sound: .off)","","  \/\/ test code ","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now it’s super easy to change the configuration, and if in the future we have more settings we just need to update the GameApp class"}]},{"type":"paragraph","inlineContent":[{"text":"In the configure settings func we can also write this:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["func configureSettings(difficulty: Difficulty, sound: Sound) { ","  XCTContext.runActivity(named: \"Configure Settings: \\(difficulty), \\(sound)\") { _ in ","    app.navigationBars[\"Game.GameView\"].buttons[\"Settings\"].tap()","    setDifficulty(difficulty)","    setSound(sound) ","    app.navigationBars.buttons[\"Back\"].tap() ","  }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"So when the test run we can have more insights of what’s going on:"}]},{"inlineContent":[{"type":"image","identifier":"WWDC17-414-testComplex6"}],"type":"paragraph"},{"type":"heading","level":2,"anchor":"Written-By","text":"Written By"},{"columns":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"zntfdr","type":"image"}]}],"size":1},{"content":[{"text":"Federico Zanetello","anchor":"Federico-Zanetello","level":3,"type":"heading"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"type":"reference","overridingTitle":"Contributed Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","isActive":true},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","identifier":"https:\/\/github.com\/zntfdr","isActive":true},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","identifier":"https:\/\/zntfdr.dev","isActive":true}]}],"size":4}],"numberOfColumns":5,"type":"row"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true}],"type":"paragraph"},{"type":"heading","level":2,"anchor":"Related-Sessions","text":"Related Sessions"},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-417-Testing-Tips-and-Tricks","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC15-406-UI-Testing-in-Xcode"]},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC17"]]},"sections":[],"sampleCodeDownload":{"action":{"isActive":true,"type":"reference","overridingTitle":"Watch Video (38 min)","identifier":"https:\/\/developer.apple.com\/wwdc17\/414"},"kind":"sampleDownload"},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC17-414-Engineering-for-Testability"},"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC15-406-UI-Testing-in-Xcode":{"role":"sampleCode","type":"topic","abstract":[{"type":"text","text":"Xcode 7 introduces new UI testing features fully integrated into the IDE. Learn about the new APIs and how UI testing fits in with existing testing features in Xcode. See how to get started by recording your app, and how to efficiently craft and maintain UI tests."}],"url":"\/documentation\/wwdcnotes\/wwdc15-406-ui-testing-in-xcode","kind":"article","title":"UI Testing in Xcode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC15-406-UI-Testing-in-Xcode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-417-Testing-Tips-and-Tricks":{"abstract":[{"text":"Testing is an essential tool to consistently verify your code works correctly, but often your code has dependencies that are out of your control. Discover techniques for making hard-to-test code testable on Apple platforms using XCTest. Learn a variety of tips for writing higher-quality tests that run fast and require less maintenance.","type":"text"}],"kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-417-Testing-Tips-and-Tricks","role":"sampleCode","title":"Testing Tips & Tricks","url":"\/documentation\/wwdcnotes\/wwdc18-417-testing-tips-and-tricks"},"zntfdr":{"type":"image","alt":"Profile image of Federico Zanetello","variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"identifier":"zntfdr"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}]},"WWDC17-414-pyramid":{"type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC17-414-pyramid.png"}],"identifier":"WWDC17-414-pyramid"},"WWDC17-414-testComplex6":{"type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC17-414-testComplex6.png"}],"identifier":"WWDC17-414-testComplex6"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"type":"topic","url":"\/documentation\/wwdcnotes\/zntfdr","images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"title":"Federico Zanetello (332 notes)","kind":"article","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC17":{"role":"collectionGroup","images":[{"type":"icon","identifier":"WWDC17-Icon.png"},{"type":"card","identifier":"WWDC17.jpeg"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC17","title":"WWDC17","url":"\/documentation\/wwdcnotes\/wwdc17","type":"topic","abstract":[{"type":"text","text":"Xcode 9, Swift 4.0, iOS 11, macOS 10.13 (High Sierra), tvOS 11, watchOS 4."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"Core NFC"},{"type":"text","text":" and more."}],"kind":"article"},"https://github.com/zntfdr":{"type":"link","url":"https:\/\/github.com\/zntfdr","title":"GitHub","identifier":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"type":"text","text":"GitHub"}]},"WWDCNotes.png":{"type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes.png"}],"identifier":"WWDCNotes.png"},"WWDC17.jpeg":{"type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC17.jpeg"}],"identifier":"WWDC17.jpeg"},"zntfdr.jpeg":{"type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"identifier":"zntfdr.jpeg"},"https://developer.apple.com/wwdc17/414":{"type":"download","url":"https:\/\/developer.apple.com\/wwdc17\/414","checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc17\/414"},"WWDC17-Icon.png":{"type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC17-Icon.png"}],"identifier":"WWDC17-Icon.png"},"doc://WWDCNotes/documentation/WWDCNotes":{"role":"collection","type":"topic","url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"images":[{"identifier":"WWDCNotes.png","type":"icon"}],"kind":"symbol","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes"},"https://zntfdr.dev":{"type":"link","url":"https:\/\/zntfdr.dev","title":"Blog","identifier":"https:\/\/zntfdr.dev","titleInlineContent":[{"type":"text","text":"Blog"}]}}}