{"schemaVersion":{"minor":3,"patch":0,"major":0},"sections":[],"metadata":{"title":"Enhance your UI animations and transitions","role":"sampleCode","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC24"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc24-10145-enhance-your-ui-animations-and-transitions"]}],"primaryContentSections":[{"kind":"content","content":[{"text":"Key takeaways","level":2,"anchor":"Key-takeaways","type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"New fluid zoom transitions are available","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"These zoom transitions are continuously interactive"}]}]},{"content":[{"inlineContent":[{"text":"SwiftUI Animation type now available in UIKit and AppKit","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"text":"Presenter","level":2,"anchor":"Presenter","type":"heading"},{"inlineContent":[{"text":"Russell Ladd, UI Frameworks","type":"text"}],"type":"paragraph"},{"text":"Zoom transitions","level":2,"anchor":"Zoom-transitions","type":"heading"},{"inlineContent":[{"type":"text","text":"In iOS 18, there is a new zoom transition."},{"type":"text","text":" "},{"type":"text","text":"With this new transition the cell you tap morphs into the incoming view."},{"type":"text","text":" "},{"type":"text","text":"The transition is continuously interactive — you can grab and drag the transitioning view around during the transition."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"In parts of your app where you transition from a large cell, the zoom transition can increase the sense of continuity by keeping the same elements on screen across the transition."}],"type":"paragraph"},{"text":"SwiftUI Example","level":3,"anchor":"SwiftUI-Example","type":"heading"},{"inlineContent":[{"type":"text","text":"Basic transition:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["NavigationLink {","    BraceletEditor(bracelet)","} label: {","    BraceletPreview(bracelet)","}"]},{"inlineContent":[{"type":"text","text":"New zoom transition:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["NavigationLink {","    BraceletEditor(bracelet)","        .navigationTransitionStyle(","            .zoom(","                sourceID: bracelet.id,","                in: braceletList","            )","        )","} label: {","    BraceletPreview(bracelet)","}",".matchedTransitionSource(","    id: bracelet.id,","    in: braceletList",")"]},{"text":"UIKit Example","level":3,"anchor":"UIKit-Example","type":"heading"},{"inlineContent":[{"type":"text","text":"Basic transition:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["func showEditor(for bracelet: Bracelet) {","    let braceletEditor = BraceletEditor(bracelet)","    navigationController?.push(braceletEditor, animated: true)","}"]},{"inlineContent":[{"type":"text","text":"New zoom transition:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["func showEditor(for bracelet: Bracelet) {","    let braceletEditor = BraceletEditor(bracelet)","    braceletEditor.preferredTransition = .zoom { _ in","        cell(for: bracelet)","    }","    navigationController?.push(braceletEditor, animated: true)","}"]},{"inlineContent":[{"type":"text","text":"These APIs work with the "},{"type":"codeVoice","code":"fullScreenCover"},{"type":"text","text":" and sheet presentation APIs in both SwiftUI and UIKit."}],"type":"paragraph"},{"text":"UIKit ViewController lifecycle","level":3,"anchor":"UIKit-ViewController-lifecycle","type":"heading"},{"inlineContent":[{"type":"text","text":"In UIKit these new fluid transitions work with ViewController lifecycle and appearance callbacks a bit differently than before."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Let’s consider that we start a push of a view and then start a pop in the middle of the push (by tapping the back button or with a back swipe). In this case the push is not cancelled, instead the view goes straight to the "},{"code":"Appeared","type":"codeVoice"},{"type":"text","text":" state, and then in the same turn of the run loop, the pop transition starts, moving to the "},{"code":"Disappeared","type":"codeVoice"},{"type":"text","text":" state, and from here you can treat it as a normal pop transition."}],"type":"paragraph"},{"text":"UIKit tips on transition handling","level":3,"anchor":"UIKit-tips-on-transition-handling","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Be ready for a new transition to start anytime. Don’t try to “handle” being in transition differently from not being in a transition.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Minimize transition state. Keep temporary transition state to a minimum."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"If needed, reset all transitions state by viewDidAppear and viewDidDisappear. These are guaranteed to be called at the end of the transition.","type":"text"}]}]}],"type":"unorderedList"},{"text":"SwiftUI Animation","level":2,"anchor":"SwiftUI-Animation","type":"heading"},{"inlineContent":[{"type":"text","text":"In iOS 18 you can use a SwiftUI Animation type to animate UIKit and AppKit Views. This lets you use the full suite of SwiftUI Animation types, including SwiftUI CustomAnimations, to animate UIKit views."}],"type":"paragraph"},{"inlineContent":[{"text":"UIKit Example:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["UIView.animate(springDuration: 0.5) {","    bead.center = endOfBracelet","}"]},{"inlineContent":[{"text":"SwiftUI Example:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["withAnimation(.spring(duration: 0.5)) {","    beads.append(Bead())","}"]},{"inlineContent":[{"text":"Using SwiftUI Animation type in UIKit:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["UIView.animate(.spring(duration: 0.5)) {","    bead.center = endOfBracelet","}"]},{"inlineContent":[{"text":"If your code works with CALayers, there are a couple of implications to consider when using this new API: UIKit generates a CAAnimation, while SwiftUI does not.","type":"text"}],"type":"paragraph"},{"text":"Animating representables","level":2,"anchor":"Animating-representables","type":"heading"},{"inlineContent":[{"text":"In iOS 18 you can animate UIKit and AppKit views in the context of representable types, like ","type":"text"},{"type":"codeVoice","code":"UIViewRepresentable"},{"text":". To do this you should:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"add "},{"code":".animated()","type":"codeVoice"},{"type":"text","text":" modifier to the binding"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"add the new "},{"type":"codeVoice","code":".animate"},{"type":"text","text":" method to the context"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"It grabs whatever SwiftUI animation is present on the Transaction, and bridges it to the "},{"type":"codeVoice","code":"UIView.animate"},{"type":"text","text":" method."}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["struct BeadBoxWrapper: UIViewRepresentable {","    @Binding var isOpen: Bool","","    func updateUIView(_ box: BeadBox, context: Context) {","        contex.animate {","            box.lid.center.y = isOpen ? -100 : 100","        }","    }","}","","@State private var isBeadBoxOpen = false","var body: some View {","    BeadBoxWrapper($isBeadBoxOpen.animated())","        .onTapGesture {","            isBeadBoxOpen.toggle()","        }","}"]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If the current transaction isn’t animated, the animation and completion are called immediately inline, so this code works whether the update is animated or not."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A single animation running across SwiftUI Views and UIViews runs perfectly in sync."}]}]}],"type":"unorderedList"},{"text":"Gesture-driven animations","level":2,"anchor":"Gesture-driven-animations","type":"heading"},{"inlineContent":[{"text":"You can also run the same API in response to continuous gestures.","type":"text"},{"text":" ","type":"text"},{"text":"Here is a UIKit code that handles dragging an object in response to a pan gesture:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["switch gesture.state {","case .changed:","    bead.center = gesture.translation","case .ended:","    \/\/ Get velocity from gesture","    \/\/ Convert to unit velocity","    UIView.animate(...) {","        bead.center = endOfBracelet","    }","}"]},{"inlineContent":[{"type":"text","text":"In this case you have to compute the gesture’s velocity and convert it to the unit’s velocity. But SwiftUI can handle it by itself and now we can pass SwiftUI animations to the new "},{"type":"codeVoice","code":"UIView.animate"},{"type":"text","text":" method:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["switch gesture.state {","case .changed:","    UIView.animate(.interactiveSpring) {","        bead.center = gesture.translation","    }","case .ended:","    UIView.animate(.spring) {","        bead.center = endOfBracelet","    }","}"]},{"text":"Written By","level":2,"anchor":"Written-By","type":"heading"},{"numberOfColumns":5,"columns":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"nikolaikhud","type":"image"}]}],"size":1},{"content":[{"text":"Nikolai Khudiakov","type":"heading","anchor":"Nikolai-Khudiakov","level":3},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/nikolaikhud","isActive":true,"overridingTitle":"Contributed Notes"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/github.com\/nikolaikhud","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/","isActive":true}]}],"size":4}],"type":"row"},{"type":"thematicBreak"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}],"type":"paragraph"},{"text":"Related Sessions","level":2,"anchor":"Related-Sessions","type":"heading"},{"style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10156-Explore-SwiftUI-animation","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10158-Animate-with-springs"],"type":"links"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}]}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10145-Enhance-your-UI-animations-and-transitions","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24"]]},"abstract":[{"text":"Explore how to adopt the zoom transition in navigation and presentations to increase the sense of continuity in your app, and learn how to animate UIKit views with SwiftUI animations to make it easier to build animations that feel continuous.","type":"text"}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"overridingTitle":"Watch Video","identifier":"https:\/\/developer.apple.com\/wwdc24\/10145","isActive":true,"type":"reference"}},"kind":"article","references":{"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","kind":"symbol","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"role":"collection","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"title":"WWDC Notes"},"WWDCNotes.png":{"type":"image","identifier":"WWDCNotes.png","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC24":{"url":"\/documentation\/wwdcnotes\/wwdc24","images":[{"identifier":"WWDC24-Icon.png","type":"icon"},{"identifier":"WWDC24.jpeg","type":"card"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24","title":"WWDC24","type":"topic","abstract":[{"type":"text","text":"Xcode 16, Swift 6, iOS 18, macOS 15 (Sequoia), tvOS 18, visionOS 2, watchOS 11."},{"type":"text","text":" "},{"type":"text","text":"New APIs: Swift Testing, "},{"type":"codeVoice","code":"FinanceKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"TabletopKit"},{"type":"text","text":", and more."}],"kind":"article","role":"collectionGroup"},"https://developer.apple.com/wwdc24/10145":{"checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc24\/10145","url":"https:\/\/developer.apple.com\/wwdc24\/10145","type":"download"},"WWDC24.jpeg":{"variants":[{"url":"\/images\/WWDCNotes\/WWDC24.jpeg","traits":["1x","light"]}],"identifier":"WWDC24.jpeg","type":"image","alt":null},"https://":{"identifier":"https:\/\/","titleInlineContent":[{"type":"text","text":"Blog"}],"title":"Blog","url":"https:\/\/","type":"link"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"https://github.com/nikolaikhud":{"identifier":"https:\/\/github.com\/nikolaikhud","title":"GitHub","type":"link","titleInlineContent":[{"text":"GitHub","type":"text"}],"url":"https:\/\/github.com\/nikolaikhud"},"WWDC24-Icon.png":{"identifier":"WWDC24-Icon.png","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-Icon.png","traits":["1x","light"]}],"type":"image"},"nikolaikhud.jpeg":{"type":"image","identifier":"nikolaikhud.jpeg","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/nikolaikhud.jpeg"}]},"nikolaikhud":{"variants":[{"url":"\/images\/WWDCNotes\/nikolaikhud.jpeg","traits":["1x","light"]}],"identifier":"nikolaikhud","type":"image","alt":"Profile image of Nikolai Khudiakov"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10158-Animate-with-springs":{"abstract":[{"type":"text","text":"Discover how you can bring life to your app with animation! We’ll show you how to create amazing animations when you take advantage of springs and help you learn how to use them in your app."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10158-Animate-with-springs","url":"\/documentation\/wwdcnotes\/wwdc23-10158-animate-with-springs","type":"topic","kind":"article","role":"sampleCode","title":"Animate with springs"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10156-Explore-SwiftUI-animation":{"kind":"article","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10156-Explore-SwiftUI-animation","url":"\/documentation\/wwdcnotes\/wwdc23-10156-explore-swiftui-animation","type":"topic","title":"Explore SwiftUI animation","abstract":[{"type":"text","text":"Explore SwiftUI’s powerful animation capabilities and find out how these features work together to produce impressive visual effects. Learn how SwiftUI refreshes the rendering of a view, determines what to animate, interpolates values over time, and propagates context for the current transaction."}]},"doc://WWDCNotes/documentation/WWDCNotes/nikolaikhud":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/nikolaikhud","title":"Nikolai Khudiakov (1 note)","type":"topic","kind":"article","abstract":[{"text":"No Bio on GitHub","type":"text"}],"url":"\/documentation\/wwdcnotes\/nikolaikhud","images":[{"identifier":"nikolaikhud.jpeg","type":"card"},{"identifier":"nikolaikhud.jpeg","type":"icon"}],"role":"sampleCode"}}}