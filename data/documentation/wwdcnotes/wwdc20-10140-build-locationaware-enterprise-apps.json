{"sections":[],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10140-Build-locationaware-enterprise-apps","interfaceLanguage":"swift"},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc20-10140-build-locationaware-enterprise-apps"],"traits":[{"interfaceLanguage":"swift"}]}],"metadata":{"roleHeading":"WWDC20","role":"sampleCode","title":"Build location-aware enterprise apps","modules":[{"name":"WWDC Notes"}]},"primaryContentSections":[{"content":[{"anchor":"overview","type":"heading","level":2,"text":"Overview"},{"type":"paragraph","inlineContent":[{"text":"This session is mostly an introduction to how to use Core Location (see related session below) plus some tips.","type":"text"}]},{"anchor":"Determine-device-support","type":"heading","level":2,"text":"Determine device support"},{"type":"paragraph","inlineContent":[{"text":"Before asking for authorization, check whether the current device supports the feature you’re interested in:","type":"text"}]},{"type":"codeListing","code":["if CLLocationManager.isMonitoringAvailable(for: CLBeaconRegion.self) {","    \/\/ Supports region monitoring to detect beacon regions","}","","if CLLocationManager.isRangingAvailable() {","    \/\/ Supports obtaining the relative distance to a nearby iBeacon device","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"If the device doesn’t support what you’re interested in, offer the user a list of options (e.g. a list of locations\/cafes\/..)","type":"text"}]},{"anchor":"iBeacon","type":"heading","level":2,"text":"iBeacon"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A beacon is a device that emits a signal which can be detected by the system and passed to your app"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Those signals can identify when a user is within a certain location"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Once we detect a specific beacon signal, we can trigger something in our app.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When deploying your beacon hardware, you must program each beacon with an appropriate proximity UUID, major value and minor value."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"The values identify each of your beacons uniquely and make it possible for your app to differentiate between them."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Use region monitoring to detect the presence of a beacon","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Use ranging to determine the proximity of a detected beacon","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"codeListing","code":["\/\/ Stage 1: Region Monitoring","","func monitorBeacons() {","    if CLLocationManager.isMonitoringAvailable(for: CLBeaconRegion.self) {","","        let constraint = CLBeaconIdentityConstraint(uuid: proximityUUID)","","\t\t\/\/ Contains the proximity UUID, major value and minor value, of the beacons that you want to detect.","        let beaconRegion = CLBeaconRegion(","            beaconIdentityConstraint: constraint,","            identifier: beaconID","        )","        ","        self.locationManager.startMonitoring(for: beaconRegion)","    }","}"],"syntax":"swift"},{"type":"codeListing","code":["\/\/ Stage 2: Beacon Ranging","","func locationManager(_ manager: CLLocationManager, didEnterRegion region: CLRegion) {","    guard let region = region as? CLBeaconRegion,","        CLLocationManager.isRangingAvailable()","        else { return }","    ","    let constraint = CLBeaconIdentityConstraint(uuid: region.uuid)","    manager.startRangingBeacons(satisfying: constraint)","    beaconsToRange.append(region)","}","","func locationManager(_ manager: CLLocationManager, didExitRegion region: CLRegion) {","    ...","}","","func locationManager(","    _ manager: CLLocationManager,","    didRangeBeacons beacons: [CLBeacon],","    in region: CLBeaconRegion) {","    ","    guard let nearestBeacon = beacons.first else { return }","    let major = CLBeaconMajorValue(truncating: nearestBeacon.major)","    let minor = CLBeaconMinorValue(truncating: nearestBeacon.major)","    ","    switch nearestBeacon.proximity {","    case .near, .immediate:","        displayInformation(for: major, and: minor)","        ","    default:","        handleUnknownOrFarBeacon(for: major, and: minor)","    }","}"],"syntax":"swift"},{"anchor":"Written-By","type":"heading","level":2,"text":"Written By"},{"columns":[{"size":1,"content":[{"inlineContent":[{"identifier":"zntfdr","type":"image"}],"type":"paragraph"}]},{"size":4,"content":[{"anchor":"Federico-Zanetello","type":"heading","level":3,"text":"Federico Zanetello"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}]},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/zntfdr"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/zntfdr.dev"}]}]}],"type":"row","numberOfColumns":5},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference","isActive":true}]},{"anchor":"Related-Sessions","type":"heading","level":2,"text":"Related Sessions"},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10160-Formatters-Make-data-humanfriendly","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10162-Design-for-location-privacy","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10219-Build-localizationfriendly-layouts-using-Xcode","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10660-Whats-new-in-location","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-403-Creating-Great-Localized-Experiences-with-Xcode-11","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-705-Whats-New-in-Core-Location","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-404-New-Localization-Workflows-in-Xcode-10"],"style":"list","type":"links"},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}],"kind":"content"}],"sampleCodeDownload":{"action":{"isActive":true,"overridingTitle":"Watch Video (14 min)","type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc20\/10140"},"kind":"sampleDownload"},"kind":"article","hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"]]},"schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"type":"text","text":"Develop location-aware enterprise apps for your business and personalize your employee’s everyday experience. Learn how Apple built the Caffe Macs app for its on-campus cafeterias using iBeacons and Location Services and how you can apply these tools and frameworks to your own apps, while preserving employee privacy. From there, discover how you can use localization to deliver a great experience for your international employees."}],"references":{"WWDC20.jpeg":{"type":"image","variants":[{"url":"\/images\/WWDCNotes\/WWDC20.jpeg","traits":["1x","light"]}],"identifier":"WWDC20.jpeg","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10162-Design-for-location-privacy":{"url":"\/documentation\/wwdcnotes\/wwdc20-10162-design-for-location-privacy","kind":"article","type":"topic","abstract":[{"type":"text","text":"When someone uses iPhone or iPad, they have control over how their location is shared with the apps they use — including sharing an approximate location rather than precise coordinates. This creates a more private experience across their device, and it impacts all apps that rely on location data or use it to supplement certain elements of their experience."}],"title":"Design for location privacy","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10162-Design-for-location-privacy"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10219-Build-localizationfriendly-layouts-using-Xcode":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10219-Build-localizationfriendly-layouts-using-Xcode","url":"\/documentation\/wwdcnotes\/wwdc20-10219-build-localizationfriendly-layouts-using-xcode","title":"Build localization-friendly layouts using Xcode","type":"topic","kind":"article","abstract":[{"type":"text","text":"Localizing your app is a wonderful way to share your work with a worldwide audience and make it relevant to more cultures and languages. We’ll show you how you can prepare for localization before ever translating a word by building thoughtful layouts for your app. Learn how to structure your UI in Xcode, identify common issues prevalent with more verbose and right-to-left languages, and easily adapt your interfaces to provide a great experience for everyone."}],"role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","role":"sampleCode","title":"Federico Zanetello (332 notes)","type":"topic","url":"\/documentation\/wwdcnotes\/zntfdr","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20":{"url":"\/documentation\/wwdcnotes\/wwdc20","kind":"article","images":[{"type":"icon","identifier":"WWDC20-Icon.png"},{"type":"card","identifier":"WWDC20.jpeg"}],"type":"topic","abstract":[{"text":"Xcode 12, Swift 5.3, iOS 14, macOS 11 (Big Sur), tvOS 14, watchOS 7.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"WidgetKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit Testing","type":"codeVoice"},{"text":", and more.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20","role":"collectionGroup","title":"WWDC20"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-404-New-Localization-Workflows-in-Xcode-10":{"url":"\/documentation\/wwdcnotes\/wwdc18-404-new-localization-workflows-in-xcode-10","kind":"article","type":"topic","abstract":[{"type":"text","text":"The localization process in Xcode 10 has been updated to aid you through the lifecycle of exporting, importing, and testing localized content in your apps. See new functionality added in Xcode 10 and learn how the new localization catalog helps you build world-class, localized apps."}],"title":"New Localization Workflows in Xcode 10","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-404-New-Localization-Workflows-in-Xcode-10"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-403-Creating-Great-Localized-Experiences-with-Xcode-11":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-403-Creating-Great-Localized-Experiences-with-Xcode-11","url":"\/documentation\/wwdcnotes\/wwdc19-403-creating-great-localized-experiences-with-xcode-11","title":"Creating Great Localized Experiences with Xcode 11","type":"topic","kind":"article","abstract":[{"type":"text","text":"Learn how your app can support per-app language settings in iOS 13. Get the details on localizing assets with asset catalogs and simplifying your localization workflow with Xcode 11. Understand how to generate screenshots in multiple languages for localization and testing."}],"role":"sampleCode"},"https://developer.apple.com/wwdc20/10140":{"type":"download","url":"https:\/\/developer.apple.com\/wwdc20\/10140","identifier":"https:\/\/developer.apple.com\/wwdc20\/10140","checksum":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10160-Formatters-Make-data-humanfriendly":{"url":"\/documentation\/wwdcnotes\/wwdc20-10160-formatters-make-data-humanfriendly","kind":"article","type":"topic","abstract":[{"type":"text","text":"Save yourself time and frustration: When you display data in your app — including dates, times, measurements, names, lists, numbers, or strings — learn how to format it correctly and provide a great experience. We’ll walk you through the Formatter APIs as well as how SwiftUI works with stringsdict, and show you how they can help do the heavy lifting of formatting data. Learn about best practices and how to avoid common mistakes."}],"title":"Formatters: Make data human-friendly","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10160-Formatters-Make-data-humanfriendly"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"type":"link","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"zntfdr.jpeg":{"type":"image","identifier":"zntfdr.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/zntfdr.jpeg","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10660-Whats-new-in-location":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10660-Whats-new-in-location","url":"\/documentation\/wwdcnotes\/wwdc20-10660-whats-new-in-location","title":"What’s new in location","type":"topic","kind":"article","abstract":[{"type":"text","text":"Location technologies are core to delivering context-based services within your app. Discover how the latest privacy controls in Core Location add a whole new dimension to determining position and what that means for your app. We’ll walk you through best practices for implementing these latest location updates and show you how they’re designed to ensure more people get an experience they’re going to love."}],"role":"sampleCode"},"https://zntfdr.dev":{"url":"https:\/\/zntfdr.dev","type":"link","identifier":"https:\/\/zntfdr.dev","titleInlineContent":[{"type":"text","text":"Blog"}],"title":"Blog"},"zntfdr":{"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/zntfdr.jpeg"}],"identifier":"zntfdr","alt":"Profile image of Federico Zanetello"},"WWDCNotes.png":{"variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}],"type":"image","identifier":"WWDCNotes.png","alt":null},"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","kind":"symbol","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"type":"topic","role":"collection","title":"WWDC Notes"},"https://github.com/zntfdr":{"url":"https:\/\/github.com\/zntfdr","type":"link","identifier":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"type":"text","text":"GitHub"}],"title":"GitHub"},"WWDC20-Icon.png":{"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC20-Icon.png"}],"identifier":"WWDC20-Icon.png","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-705-Whats-New-in-Core-Location":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-705-Whats-New-in-Core-Location","url":"\/documentation\/wwdcnotes\/wwdc19-705-whats-new-in-core-location","title":"What’s New in Core Location","type":"topic","kind":"article","abstract":[{"type":"text","text":"Location technologies are core to delivering context-based services within your app. Discover how the latest features in the Core Location Framework lay the groundwork for advanced ranging capabilities and delivers more options for you to clearly communicate your location needs to your users, and allow them to provide more granular access authorization to your app."}],"role":"sampleCode"}}}