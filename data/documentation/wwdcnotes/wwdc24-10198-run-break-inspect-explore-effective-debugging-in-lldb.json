{"metadata":{"title":"Run, Break, Inspect: Explore effective debugging in LLDB","role":"sampleCode","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC24"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24"]]},"schemaVersion":{"major":0,"patch":0,"minor":3},"abstract":[{"type":"text","text":"Learn how to use LLDB to explore and debug codebases. We’ll show you how to make the most of crashlogs and backtraces, and how to supercharge breakpoints with actions and complex stop conditions. We’ll also explore how the “p” command and the latest features in Swift 6 can enhance your debugging experience."}],"kind":"article","variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc24-10198-run-break-inspect-explore-effective-debugging-in-lldb"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24-10198-Run-Break-Inspect-Explore-effective-debugging-in-LLDB"},"primaryContentSections":[{"content":[{"type":"heading","anchor":"Key-Takeaways","level":2,"text":"Key Takeaways"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Explore Code with Ease"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Find bugs faster","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Pause program at any time"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Inspect variable states"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Evaluate expressions"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Much more"}]}]}]},{"type":"heading","anchor":"Presenter","level":2,"text":"Presenter"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Felipe Piovezan, Debugging Technologies","type":"text"}],"type":"emphasis"}]},{"type":"heading","anchor":"Getting-Started","level":2,"text":"Getting Started"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Define a debugging model"}]}]},{"content":[{"inlineContent":[{"text":"Debugging using crashlogs","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Program pausing using breakpoints"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Tools - ","type":"text"},{"type":"codeVoice","code":"p"},{"text":" command","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Data type appearence in debugger","type":"text"}]}]}]},{"type":"heading","anchor":"Program-Errors","level":2,"text":"Program Errors"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Crash"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Incorrect Value"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Program Hanging","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"Somewhere between the start of the program execution, and the point in which the incorrect behavior is observed, faulty code was executed.The bug can usually be found by inspecting the state of the program at different points in time, with each inspection the problematic code being brought closer.","type":"text"}]},{"type":"heading","anchor":"Log-Statements","level":2,"text":"Log Statements"},{"type":"paragraph","inlineContent":[{"identifier":"WWDC24-10198-debugging-using-logs","type":"image"}]},{"type":"paragraph","inlineContent":[{"text":"If the log is detailed enough, it may be all that’s needed to pinpoint the bug in the code. This requires foresight by the programer to determine what is useful information to log, but can be a powerful technique to transmit app diagnostics between users and developers.","type":"text"}]},{"type":"heading","anchor":"Print-Debugging","level":2,"text":"Print Debugging"},{"type":"codeListing","syntax":"swift","code":["print(\"this string shows in the console\")"]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC24-10198-debugging-using-print"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Insert print statements in the code","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Recompile","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Run"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Reproduce bug"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Inspect printed statements"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Remove print statements"}]}],"type":"paragraph"}]}]},{"type":"heading","anchor":"LLDB-Tools","level":2,"text":"LLDB Tools"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Backtraces"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Variable inspection"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Breakpoints","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Expression Evaluation"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC24-10198-run-break-inspect"}]},{"type":"paragraph","inlineContent":[{"text":"Repeating the run, break, inspect loop efficiently is key to an effective debugging session","type":"text"}]},{"type":"heading","anchor":"Crashlogs","level":2,"text":"Crashlogs"},{"type":"paragraph","inlineContent":[{"text":"When a program crashes a log is made called the crashlog. These can be opened by LLDB to potentially find the source of the bug before relaunching the program.","type":"text"}]},{"type":"heading","anchor":"Backtrace","level":2,"text":"Backtrace"},{"type":"paragraph","inlineContent":[{"text":"The backtrace describes the sequence of function calls, or stack frames, that led to this program state. It provides a view into what each function was doing, where they were called, and also where each of them was going to return to.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC24-10198-backtrace"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Make sure the project is checked out on the same commit as the version of the app that created the crashlog, and that the dSYM bundle for that build is available. By inspecting the backtrace, confirmations can be made showing the  middle of nested calls constructing UI elements."}]},{"type":"heading","anchor":"Breakpoints","level":2,"text":"Breakpoints"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Breakpoints observe the line and column information assigning each an ID. The most basic breakpoint can lead to breaking in interesting ways."}]},{"type":"codeListing","syntax":"swift","code":["Button(action: { watchLater.toggle(video: video) }) {","    let inList = watchLater.isInList(video: video)","    Label(inList ? \"In Watch Later\" : \"Add to Watch Later\",","    systemImage: inList ? \"checkmark\" : \"plus\")","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Three separate code regions attributed to the same line, but reached through different code paths:"}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Constructor Call"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Trailing Closure called by constructor","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Action Closure called when button is clicked","type":"text"}]}]}]},{"type":"heading","anchor":"Breakpoint-Actions","level":2,"text":"Breakpoint Actions"},{"type":"paragraph","inlineContent":[{"text":"The debugger can run commands when breakpoints are reached.","type":"text"}]},{"type":"heading","anchor":"Command-Line","level":2,"text":"Command Line"},{"type":"paragraph","inlineContent":[{"type":"text","text":"LLDB provides detailed description of all of its commands by using the help command."}]},{"type":"codeListing","syntax":"lldb","code":["(lldb) help <command>"]},{"type":"paragraph","inlineContent":[{"text":"Any option of a specific command also has help.","type":"text"}]},{"type":"codeListing","syntax":"lldb","code":["(lldb) help <command> <option>"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"More lldb features can be discovered using the apropros command."}]},{"type":"codeListing","syntax":"lldb","code":["(lldb) apropros <keyword>"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A search for commands related to backtraces finds frame select and its alias, the f command. Also finding the thread backtrace command."}]},{"type":"codeListing","syntax":"lldb","code":["(lldb) apropros backtrace","","The following commands may relate to 'backtrace':","    frame select        --Select the current stack frame by index from within the current thread (see 'thread backtrace'.)","    thread backtrace    --Show thread call stacks. Defaults to the current thread, thread indexes can be specified as arguements.","    f                   --Select the current stack frame by index from within the current thread (see 'thread backtrace'.)"]},{"type":"heading","anchor":"Breakpoint-Conditions","level":2,"text":"Breakpoint Conditions"},{"type":"tabNavigator","tabs":[{"content":[{"inlineContent":[{"identifier":"WWDC24-10198-breakpoint-condition","type":"image"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Secondary click on the breakpoint","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Navigate to Edit Breakpoint","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Populate Condition field","type":"text"}],"type":"paragraph"}]}],"type":"orderedList"}],"title":"Xcode"},{"content":[{"code":["(lldb) break modify <breakpoint ID> --condition \"video.length > 60\""],"syntax":"lldb","type":"codeListing"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Breakpoint only stops the program if the current video is longer than 60 seconds.","type":"text"}]}]}]}],"title":"CommandLine"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"}"}]},{"type":"paragraph","inlineContent":[{"identifier":"WWDC24-10198-tbreakpoint-condition","type":"image"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A temporary breakpoint causes the program to stop only once at that location."}]},{"type":"codeListing","syntax":"swift","code":["```lldb","(lldb) break modify <breakpoint ID> --ignore-count 10","```"]},{"type":"paragraph","inlineContent":[{"text":"Setting a breakpoint inside an if statement that executes only when the condition is true is a performant way.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ High-firing breakpoints","","for video in videos {","    if (\/*break_condition*\/) {","        \/*set breakpoint here*\/","    }","    if (video.hasRemoteMedia) {","        video.loadRemoteMedia()","    }","    processVideo(video)","}"]},{"type":"paragraph","inlineContent":[{"text":"A nice trick is to use the raise function with the SIGSTOP signal: this instructs the application to stop and, if running it through Xcode or lldb, the debugger will take over as if a breakpoint had been reached.","type":"text"}]},{"type":"heading","anchor":"LLDB-Commands","level":2,"text":"LLDB Commands"},{"type":"paragraph","inlineContent":[{"type":"text","text":"** "},{"type":"codeVoice","code":"p"},{"type":"text","text":" Command **"}]},{"type":"paragraph","inlineContent":[{"text":"Command for most situations in which you need to inspect a variable or evaluate an expression. Has been reworked as an alias to the “do what I mean” print command.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"** Some Other Commands **","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"po"}]}]},{"content":[{"inlineContent":[{"text":"register read","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"memory read"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"target variable","type":"text"}]}]}]},{"type":"heading","anchor":"Type-Summaries","level":2,"text":"Type Summaries"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"With Swift 6, the output of p can be customized","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Annotate the type with ","type":"text"},{"code":"@DebugDescription","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Provide a ","type":"text"},{"type":"codeVoice","code":"debugdescription"},{"text":" string property using","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"String interpolation"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Stored Properties","type":"text"}],"type":"paragraph"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"@DebugDescription","type":"codeVoice"},{"text":" can replace ","type":"text"},{"code":"CustomDebugStringConvertible","type":"codeVoice"}]}]},{"content":[{"inlineContent":[{"text":"If the protocol is implemented with:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"String interpolation","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Computed Properties","type":"text"},{"text":" ","type":"text"},{"text":"You can use the macro","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]}]},{"type":"heading","anchor":"Written-By","level":2,"text":"Written By"},{"type":"row","numberOfColumns":5,"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"dl-alexandre"}]}]},{"size":4,"content":[{"type":"heading","level":3,"text":"Dalton Alexandre","anchor":"Dalton-Alexandre"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"isActive":true,"overridingTitle":"Contributed Notes","type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/dl-alexandre"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/dl-alexandre"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/x.com\/d_creatio"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/daltonalexandre.carrd.co"}]}]}]},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}]},{"type":"heading","anchor":"Related-Sessions","level":2,"text":"Related Sessions"},{"type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10211-Symbolication-Beyond-the-basics","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10226-Debug-with-structured-logging"],"style":"list"},{"type":"small","inlineContent":[{"inlineContent":[{"type":"text","text":"Legal Notice"}],"type":"strong"}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}],"kind":"content"}],"sampleCodeDownload":{"action":{"isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc24\/10198","type":"reference","overridingTitle":"Watch Video"},"kind":"sampleDownload"},"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC24":{"url":"\/documentation\/wwdcnotes\/wwdc24","images":[{"identifier":"WWDC24-Icon.png","type":"icon"},{"identifier":"WWDC24.jpeg","type":"card"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC24","title":"WWDC24","type":"topic","abstract":[{"type":"text","text":"Xcode 16, Swift 6, iOS 18, macOS 15 (Sequoia), tvOS 18, visionOS 2, watchOS 11."},{"type":"text","text":" "},{"type":"text","text":"New APIs: Swift Testing, "},{"type":"codeVoice","code":"FinanceKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"TabletopKit"},{"type":"text","text":", and more."}],"kind":"article","role":"collectionGroup"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","title":"Contributions are welcome!","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"WWDCNotes.png":{"type":"image","variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}],"identifier":"WWDCNotes.png","alt":null},"WWDC24-10198-run-break-inspect":{"identifier":"WWDC24-10198-run-break-inspect","alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC24-10198-run-break-inspect.jpeg"}]},"https://x.com/d_creatio":{"type":"link","title":"X\/Twitter","titleInlineContent":[{"type":"text","text":"X\/Twitter"}],"identifier":"https:\/\/x.com\/d_creatio","url":"https:\/\/x.com\/d_creatio"},"WWDC24-10198-breakpoint-condition":{"type":"image","variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10198-breakpoint-condition.jpeg","traits":["1x","light"]}],"identifier":"WWDC24-10198-breakpoint-condition","alt":null},"dl-alexandre.jpeg":{"identifier":"dl-alexandre.jpeg","alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/dl-alexandre.jpeg"}]},"WWDC24-Icon.png":{"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-Icon.png","traits":["1x","light"]}],"type":"image","alt":null,"identifier":"WWDC24-Icon.png"},"doc://WWDCNotes/documentation/WWDCNotes/dl-alexandre":{"abstract":[{"text":"Software Developer","type":"text"}],"kind":"article","role":"sampleCode","images":[{"type":"card","identifier":"dl-alexandre.jpeg"},{"type":"icon","identifier":"dl-alexandre.jpeg"}],"url":"\/documentation\/wwdcnotes\/dl-alexandre","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/dl-alexandre","title":"Dalton Alexandre (5 notes)","type":"topic"},"WWDC24-10198-tbreakpoint-condition":{"type":"image","variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10198-tbreakpoint-condition.jpeg","traits":["1x","light"]}],"identifier":"WWDC24-10198-tbreakpoint-condition","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10226-Debug-with-structured-logging":{"kind":"article","role":"sampleCode","title":"Debug with structured logging","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10226-Debug-with-structured-logging","abstract":[{"text":"Discover the debug console in Xcode 15 and learn how you can improve your diagnostic experience through logging. Explore how you can navigate your logs easily and efficiently using advanced filtering and improved visualization. We’ll also show you how to use the dwim-print command to evaluate expressions in your code while debugging.","type":"text"}],"url":"\/documentation\/wwdcnotes\/wwdc23-10226-debug-with-structured-logging"},"WWDC24.jpeg":{"identifier":"WWDC24.jpeg","alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC24.jpeg"}]},"https://daltonalexandre.carrd.co":{"type":"link","title":"Blog","titleInlineContent":[{"type":"text","text":"Blog"}],"identifier":"https:\/\/daltonalexandre.carrd.co","url":"https:\/\/daltonalexandre.carrd.co"},"dl-alexandre":{"type":"image","variants":[{"url":"\/images\/WWDCNotes\/dl-alexandre.jpeg","traits":["1x","light"]}],"identifier":"dl-alexandre","alt":"Profile image of Dalton Alexandre"},"WWDC24-10198-debugging-using-logs":{"identifier":"WWDC24-10198-debugging-using-logs","alt":null,"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC24-10198-debugging-using-logs.jpeg"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10211-Symbolication-Beyond-the-basics":{"url":"\/documentation\/wwdcnotes\/wwdc21-10211-symbolication-beyond-the-basics","role":"sampleCode","kind":"article","title":"Symbolication: Beyond the basics","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10211-Symbolication-Beyond-the-basics","abstract":[{"type":"text","text":"Discover how you can achieve maximum performance and insightful debugging with your app. Symbolication is at the center of tools such as Instruments and LLDB to help bridge the layers between your application’s runtime and your source code. Learn how this process works and the steps you can take to gain the most insight into your app."}]},"https://developer.apple.com/wwdc24/10198":{"checksum":null,"type":"download","url":"https:\/\/developer.apple.com\/wwdc24\/10198","identifier":"https:\/\/developer.apple.com\/wwdc24\/10198"},"https://github.com/dl-alexandre":{"titleInlineContent":[{"text":"GitHub","type":"text"}],"type":"link","url":"https:\/\/github.com\/dl-alexandre","identifier":"https:\/\/github.com\/dl-alexandre","title":"GitHub"},"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","kind":"symbol","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"role":"collection","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"title":"WWDC Notes"},"WWDC24-10198-debugging-using-print":{"variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10198-debugging-using-print.jpeg","traits":["1x","light"]}],"type":"image","alt":null,"identifier":"WWDC24-10198-debugging-using-print"},"WWDC24-10198-backtrace":{"identifier":"WWDC24-10198-backtrace","alt":null,"type":"image","variants":[{"url":"\/images\/WWDCNotes\/WWDC24-10198-backtrace.jpeg","traits":["1x","light"]}]}}}