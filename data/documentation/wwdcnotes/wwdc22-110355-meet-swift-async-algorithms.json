{"metadata":{"roleHeading":"WWDC22","title":"Meet Swift Async Algorithms","role":"sampleCode","modules":[{"name":"WWDC Notes"}]},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110355-Meet-Swift-Async-Algorithms","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Discover the latest open source Swift package from Apple: Swift Async Algorithms. We’ll explore algorithms from this package that you can use with AsyncSequence, including zip, merge, and throttle. Follow along with us as we use these algorithms to build a great messaging app. We’ll also share best practices for combining multiple AsyncSequences and using the Swift Clock type to work with values over time."}],"kind":"article","sections":[],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22"]]},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc22-110355-meet-swift-async-algorithms"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"content":[{"type":"heading","anchor":"Swift-Async-Algorithms-open-source-package","text":"Swift Async Algorithms open-source package","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"set of algorithms specifically focused on processing values over time using ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/swift\/asyncsequence"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"incorporates more advanced algorithms, as well as interoperating with clocks"}],"type":"paragraph"}]}]},{"type":"heading","anchor":"AsyncSequence","text":"`AsyncSequence`","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"protocol that lets you describe values produced asynchronously"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"just like "},{"type":"codeVoice","code":"Sequence"},{"type":"text","text":" but uses Swift concurrency ("},{"type":"codeVoice","code":"next()"},{"type":"text","text":" function from its iterator, "},{"type":"codeVoice","code":"AsyncIterator"},{"type":"text","text":", is "},{"type":"codeVoice","code":"async"},{"type":"text","text":")"}],"type":"paragraph"}]}]},{"type":"heading","anchor":"Multi-input-algorithms","text":"Multi-input algorithms","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"algorithms that take multiple input "},{"code":"AsyncSequences","type":"codeVoice"},{"type":"text","text":" and produce one output "},{"code":"AsyncSequence","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"focused on combining ","type":"text"},{"code":"AsyncSequences","type":"codeVoice"},{"text":" together in different ways","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Examples:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Zip.md"},{"type":"text","text":" - creates an asynchronous sequence of pairs built out of underlying asynchronous sequences"}]}]}]},{"type":"codeListing","code":["for try await (vid, preview) in zip(videos, previews) {","  try await upload(vid, preview)","}"],"syntax":"swift"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Merge.md","type":"reference"},{"type":"text","text":" - merges two or more asynchronous sequence into a single asynchronous sequence producing the elements of all of the underlying asynchronous sequences (elements types must be the same)"}]}]}]},{"type":"codeListing","code":["for try await message in merge(primaryAccount.messages, secondaryAccount.messages) {","  displayPreview(message)","}"],"syntax":"swift"},{"type":"heading","anchor":"Clock-Instant-and-Duration","text":"Clock, Instant, and Duration","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"new API in Swift 5.7"}]}]}]},{"type":"heading","anchor":"Clock","text":"`Clock`","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift protocol, defines:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"a way to wake up after a given instant"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"a way to produce a concept of “now”","type":"text"}]}]}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Two built-in "},{"type":"codeVoice","code":"Clock"},{"type":"text","text":"s definitions are "},{"type":"codeVoice","code":"ContinuousClock"},{"type":"text","text":" and the "},{"type":"codeVoice","code":"SuspendingClock"},{"type":"text","text":":"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"use "},{"type":"codeVoice","code":"ContinuousClock"},{"type":"text","text":" to measure time just like a stopwatch, where time progresses no matter the state of the thing being measured"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"SuspendingClock"},{"text":", on the other hand, suspends when the machine is put to sleep","type":"text"}]}]}]},{"type":"codeListing","code":["\/\/ Sleep until a given deadline","","let clock = SuspendingClock() ","var deadline = clock.now + .seconds(3)","try await clock.sleep(until: deadline) "],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The key difference between these two clocks is that the "},{"type":"codeVoice","code":"ContinuousClock"},{"type":"text","text":" progresses while\/when\/if the machine is asleep."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"code":"SuspendingClock","type":"codeVoice"},{"type":"text","text":" for:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Measuring device time","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Delays for animation"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"code":"ContinuousClock","type":"codeVoice"},{"type":"text","text":" for:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Measuring human time"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Delays by an absolute duration"}]}]}]},{"type":"heading","anchor":"Swift-Async-Algorithms","text":"Swift Async Algorithms","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"the package brings in a family of algorithms to work with time by leveraging these new Swift APIs","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Examples:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Debounce.md","type":"reference","isActive":true}],"type":"paragraph"}]}]},{"type":"codeListing","code":["let queries = searchValues.debounce(for: .milliseconds(300))","","for await query in queries {","  let results = try await performSearch(query)","  await channel.send(results)","}"],"syntax":"swift"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Chunked.md","type":"reference"},{"type":"text","text":" - groups elements into collections by count\/time\/content"}]}]}]},{"type":"codeListing","code":["let batches = outboundMessages.chunked(","  by: .repeating(every: .milliseconds(500))",")","","let encoder = JSONEncoder() ","for await batch in batches {","  let data = try encoder.encode(batch)","  try await postToServer(data) ","}"],"syntax":"swift"},{"type":"heading","anchor":"Collections","text":"Collections","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"the package offers a set of initializers for constructing collections using ","type":"text"},{"code":"AsyncSequence","type":"codeVoice"},{"text":" (array, set, dictionary)","type":"text"}]}]}]},{"type":"heading","anchor":"Written-By","text":"Written By","level":2},{"type":"row","columns":[{"content":[{"inlineContent":[{"type":"image","identifier":"zntfdr"}],"type":"paragraph"}],"size":1},{"content":[{"anchor":"Federico-Zanetello","level":3,"text":"Federico Zanetello","type":"heading"},{"inlineContent":[{"isActive":true,"overridingTitle":"Contributed Notes","type":"reference","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/zntfdr"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/zntfdr.dev"}],"type":"paragraph"}],"size":4}],"numberOfColumns":5},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"type":"heading","anchor":"Related-Sessions","text":"Related Sessions","level":2},{"type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110354-Whats-new-in-Swift","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10058-Meet-AsyncSequence","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10256-Meet-the-Swift-Algorithms-and-Collections-packages"],"style":"list"},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}]},{"type":"small","inlineContent":[{"text":"All content copyright © 2012 – 2025 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}]}],"kind":"content"}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc22\/110355","overridingTitle":"Watch Video (13 min)","isActive":true}},"schemaVersion":{"patch":0,"minor":3,"major":0},"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10058-Meet-AsyncSequence":{"kind":"article","abstract":[{"type":"text","text":"Iterating over a sequence of values over time is now as easy as writing a “for” loop. Find out how the new AsyncSequence protocol enables a natural, simple syntax for iterating over anything from notifications to bytes being streamed from a server. We’ll also show you how to adapt existing code to provide asynchronous sequences of your own."}],"type":"topic","title":"Meet AsyncSequence","url":"\/documentation\/wwdcnotes\/wwdc21-10058-meet-asyncsequence","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10058-Meet-AsyncSequence"},"https://github.com/apple/swift-async-algorithms/blob/main/Sources/AsyncAlgorithms/AsyncAlgorithms.docc/Guides/Debounce.md":{"title":"debounce(for:tolerance:clock:)","type":"link","titleInlineContent":[{"type":"codeVoice","code":"debounce(for:tolerance:clock:)"}],"identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Debounce.md","url":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Debounce.md"},"https://github.com/zntfdr":{"type":"link","title":"GitHub","url":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"text":"GitHub","type":"text"}],"identifier":"https:\/\/github.com\/zntfdr"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-110354-Whats-new-in-Swift":{"kind":"article","abstract":[{"text":"Join us for an update on Swift. We’ll take you through performance improvements, explore more secure and extensible Swift packages, and share advancements in Swift concurrency. We’ll also introduce you to Swift Regex, better generics, and other tools built into the language to help you write more flexible & expressive code.","type":"text"}],"title":"What’s new in Swift","url":"\/documentation\/wwdcnotes\/wwdc22-110354-whats-new-in-swift","type":"topic","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110354-Whats-new-in-Swift"},"WWDC22.jpeg":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC22.jpeg"}],"type":"image","alt":null,"identifier":"WWDC22.jpeg"},"doc://WWDCNotes/documentation/WWDCNotes":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","role":"collection","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"type":"topic","url":"\/documentation\/wwdcnotes","kind":"symbol","images":[{"identifier":"WWDCNotes.png","type":"icon"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22","title":"WWDC22","abstract":[{"type":"text","text":"Xcode 14, Swift 5.7, iOS 16, macOS 13 (Ventura), tvOS 16, watchOS 9."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"WeatherKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"ScreenCaptureKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"Swift Regex"},{"type":"text","text":", and more."}],"role":"collectionGroup","images":[{"type":"icon","identifier":"WWDC22-Icon.png"},{"type":"card","identifier":"WWDC22.jpeg"}],"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc22"},"https://github.com/apple/swift-async-algorithms/blob/main/Sources/AsyncAlgorithms/AsyncAlgorithms.docc/Guides/Zip.md":{"title":"zip(_:...)","type":"link","titleInlineContent":[{"type":"codeVoice","code":"zip(_:...)"}],"identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Zip.md","url":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Zip.md"},"https://developer.apple.com/wwdc22/110355":{"type":"download","url":"https:\/\/developer.apple.com\/wwdc22\/110355","identifier":"https:\/\/developer.apple.com\/wwdc22\/110355","checksum":null},"zntfdr":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/zntfdr.jpeg"}],"type":"image","alt":"Profile image of Federico Zanetello","identifier":"zntfdr"},"zntfdr.jpeg":{"type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/zntfdr.jpeg"}],"identifier":"zntfdr.jpeg"},"https://developer.apple.com/documentation/swift/asyncsequence":{"title":"AsyncSequence","type":"link","titleInlineContent":[{"type":"codeVoice","code":"AsyncSequence"}],"identifier":"https:\/\/developer.apple.com\/documentation\/swift\/asyncsequence","url":"https:\/\/developer.apple.com\/documentation\/swift\/asyncsequence"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10256-Meet-the-Swift-Algorithms-and-Collections-packages":{"url":"\/documentation\/wwdcnotes\/wwdc21-10256-meet-the-swift-algorithms-and-collections-packages","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10256-Meet-the-Swift-Algorithms-and-Collections-packages","abstract":[{"type":"text","text":"Discover two of the latest additions to the list of open-source Swift packages from Apple: Swift Algorithms and Swift Collections. Not only can you use these packages immediately, they also incubate new algorithms and data structures for eventual inclusion in the Swift Standard Library. We’ll show you how you can integrate these packages into your projects and select the right algorithms and data structures to make your code clearer and faster."}],"kind":"article","type":"topic","title":"Meet the Swift Algorithms and Collections packages","role":"sampleCode"},"WWDCNotes.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}],"type":"image","alt":null,"identifier":"WWDCNotes.png"},"https://zntfdr.dev":{"title":"Blog","type":"link","titleInlineContent":[{"type":"text","text":"Blog"}],"url":"https:\/\/zntfdr.dev","identifier":"https:\/\/zntfdr.dev"},"https://github.com/apple/swift-async-algorithms/blob/main/Sources/AsyncAlgorithms/AsyncAlgorithms.docc/Guides/Chunked.md":{"type":"link","title":"chunks(...) and chunked(...)","url":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Chunked.md","titleInlineContent":[{"type":"codeVoice","code":"chunks(...)"},{"type":"text","text":" and "},{"type":"codeVoice","code":"chunked(...)"}],"identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Chunked.md"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","type":"topic","url":"\/documentation\/wwdcnotes\/zntfdr","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"title":"Federico Zanetello (332 notes)","images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"kind":"article","role":"sampleCode"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","type":"link","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"WWDC22-Icon.png":{"type":"image","identifier":"WWDC22-Icon.png","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC22-Icon.png"}]},"https://github.com/apple/swift-async-algorithms/blob/main/Sources/AsyncAlgorithms/AsyncAlgorithms.docc/Guides/Merge.md":{"title":"merge(_:...)","type":"link","identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Merge.md","titleInlineContent":[{"type":"codeVoice","code":"merge(_:...)"}],"url":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/AsyncAlgorithms.docc\/Guides\/Merge.md"}}}