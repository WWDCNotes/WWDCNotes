{"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10114-Meet-StoreKit-2","interfaceLanguage":"swift"},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc21-10114-meet-storekit-2"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","level":2,"text":"Overview","type":"heading"},{"name":"Note","content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/in-app_purchase\/implementing_a_store_in_your_app_using_the_storekit_api","type":"reference"}]}],"type":"aside","style":"note"},{"anchor":"StoreKit-2","level":2,"text":"StoreKit 2","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"brand new set of modern and flexible Swift APIs for working with In-App Purchase across iOS, macOS, tvOS, and watchOS"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"updates to the in-app purchase transactions, to make it easier to manage"}]}]}],"type":"unorderedList"},{"inlineContent":[{"text":"Five main areas:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Products"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Purchases"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Transaction info"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Transaction history"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Subscription status","type":"text"}]}]}],"type":"unorderedList"},{"anchor":"Products--Purchases","level":2,"text":"Products & Purchases","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"New "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product"},{"type":"text","text":" struct"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"contains additional data, such as the product type (","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/producttype","isActive":true,"type":"reference"},{"text":") and extended subscription information (","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/subscriptioninfo","isActive":true,"type":"reference"},{"text":")","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"future-compatible with new features via "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/backingvalue"},{"type":"text","text":", which allows you to retrieve data contained in the product even on SDKs and devices running operating systems that have older versions of StoreKit 2"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"uses ","type":"text"},{"type":"codeVoice","code":"async"},{"text":"\/","type":"text"},{"type":"codeVoice","code":"await"},{"text":" for requests and purchases","type":"text"}],"type":"paragraph"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"purchase is a "},{"type":"codeVoice","code":"Product"},{"type":"text","text":" instance method, "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3791971-purchase","isActive":true}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"the options parameter lets you specify things like quantity, promotional offer, app account token (New)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/purchaseoption\/3749440-appaccounttoken"},{"type":"text","text":" is a way for you to keep track of which of your app’s user accounts began and completed a transaction."}]},{"items":[{"content":[{"inlineContent":[{"text":"it’s an opaque token (UUID format)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"created by you"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"linked to the user in-app account","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"stored in transaction forever"}],"type":"paragraph"}]}],"type":"unorderedList"}]}]}]}],"type":"unorderedList"},{"anchor":"Transaction-info","level":2,"text":"Transaction info","type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"individually signed object for every transaction","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"in-app purchase transaction info will now be provided in "},{"type":"reference","identifier":"https:\/\/www.google.com\/search?client=safari&rls=en&q=JSON+Web+signature&ie=UTF-8&oe=UTF-8","isActive":true}]}]},{"content":[{"inlineContent":[{"text":"StoreKit 2 does transaction verification for you, but you can also add your verification on top","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Transaction-history","level":2,"text":"Transaction history","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"new set of APIs for querying completed transactions in the user’s transaction history"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"you can access all of the user’s past transactions with a single API call","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"you can also access the latest transaction for a product"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"get what products the user has paid for access via "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/transaction\/3792059-currententitlements"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"contains all of the non-consumables in the user’s transaction history","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"contains all of the subscription transactions that are currently active"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"any transactions that have been revoked are "},{"inlineContent":[{"text":"not","type":"text"}],"type":"strong"},{"type":"text","text":" included"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"no consumable transactions"}]}]}]}]},{"content":[{"inlineContent":[{"text":"all transactions are available immediately upon app download","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"transactions automatically update on every device"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"real-time updates"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"thanks to transaction history, users no longer need to restore completed transactions when your app is reinstalled"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"you still need to provide a UI to restore purchases","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"all new StoreKit 2 transactions are available to the old StoreKit API"}]}]},{"content":[{"inlineContent":[{"text":"all old StoreKit transactions are available to the new StoreKit 2 API","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Subscription-status","level":2,"text":"Subscription status","type":"heading"},{"inlineContent":[{"text":"A ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3749590-subscription","isActive":true,"type":"reference"},{"text":" status has three parts:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"latest transaction","type":"text"}],"type":"paragraph"}]}],"type":"orderedList"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"give you access to the last transaction that occurred for this subscription","type":"text"}]}]}],"type":"unorderedList"},{"items":[{"content":[{"inlineContent":[{"text":"renewal state","type":"text"}],"type":"paragraph"}]}],"start":2,"type":"orderedList"},{"items":[{"content":[{"inlineContent":[{"text":"enumeration that tells you the current state of the subscription","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"base you app logic off this renewal state","type":"text"}]}]}],"type":"unorderedList"},{"items":[{"content":[{"inlineContent":[{"text":"renewal info","type":"text"}],"type":"paragraph"}]}],"start":3,"type":"orderedList"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"contains all details about a user’s subscription (e.g. whether auto-renew is on\/off, product id of the renewal, expiration reason)"}]}]},{"content":[{"inlineContent":[{"text":"signed using JWS","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"StoreKit 2 will automatically validate the renewal info for you","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Signature-validation","level":2,"text":"Signature validation","type":"heading"},{"name":"Note","content":[{"type":"paragraph","inlineContent":[{"text":"More details in ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/datatracker.ietf.org\/doc\/html\/rfc7515"}]}],"type":"aside","style":"note"},{"inlineContent":[{"type":"text","text":"JSON Web Signature is comprised of three parts:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"header"}],"type":"paragraph"}]}],"type":"orderedList"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"contains metadata about the object, such as which algorithm is used for signing and where to find the certificate used to validate the signature.","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"StoreKit 2 currently uses an ","type":"text"},{"type":"codeVoice","code":"ECDSA"},{"text":" algorithm (supported natively in CryptoKit)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"For the certificate, StoreKit 2 uses the ","type":"text"},{"code":"x5c","type":"codeVoice"},{"text":" header","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"the entire certificate chain is included in the JWS data, no internet connection","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"payload"}],"type":"paragraph"}]}],"start":2,"type":"orderedList"},{"items":[{"content":[{"inlineContent":[{"text":"main transaction information such as transaction ID, product ID, purchase date","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"items":[{"content":[{"inlineContent":[{"text":"signature","type":"text"}],"type":"paragraph"}]}],"start":3,"type":"orderedList"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"generated using both the header and the payload"}]}]}],"type":"unorderedList"},{"anchor":"Demo","level":2,"text":"Demo","type":"heading"},{"inlineContent":[{"type":"text","text":"The session has two demos touching all the flows:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"the first demo focuses on getting products, purchasing, and listening to transitions."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the second demo focuses on transaction history and subscription statuses"}]}]},{"content":[{"inlineContent":[{"text":"the final code can be found ","type":"text"},{"overridingTitle":"here","isActive":true,"overridingTitleInlineContent":[{"text":"here","type":"text"}],"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/in-app_purchase\/implementing_a_store_in_your_app_using_the_storekit_api","type":"reference"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Written-By","level":2,"text":"Written By","type":"heading"},{"columns":[{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"zntfdr"}]}],"size":1},{"content":[{"level":3,"anchor":"Federico-Zanetello","text":"Federico Zanetello","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitle":"Contributed Notes","isActive":true,"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}]},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/github.com\/zntfdr","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/zntfdr.dev","isActive":true}]}],"size":4}],"numberOfColumns":5,"type":"row"},{"type":"thematicBreak"},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference"}],"type":"paragraph"},{"anchor":"Related-Sessions","level":2,"text":"Related Sessions","type":"heading"},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10013-Meet-StoreKit-for-SwiftUI","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10140-Whats-new-in-StoreKit-2-and-StoreKit-Testing-in-Xcode","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10007-Whats-new-with-inapp-purchase","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10039-Whats-new-in-StoreKit-testing","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110404-Implement-proactive-inapp-purchase-restore","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10174-Manage-inapp-purchases-on-your-server","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10175-Support-customers-and-handle-refunds","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10661-Whats-new-with-inapp-purchase","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-302-InApp-Purchases-and-Using-ServertoServer-Notifications"],"type":"links","style":"list"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}]}],"sampleCodeDownload":{"action":{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc21\/10114","overridingTitle":"Watch Video (37 min)"},"kind":"sampleDownload"},"sections":[],"schemaVersion":{"patch":0,"minor":3,"major":0},"abstract":[{"text":"StoreKit 2 delivers powerful, Swift-native APIs for in-app purchases and auto-renewable subscriptions. Learn how you can easily implement in-app purchases and subscriptions, and discover APIs for retrieving product information, handling transactions, determining product entitlements and customer status, as well as comprehensive testing support in Xcode.","type":"text"}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"]]},"metadata":{"modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC21","role":"sampleCode","title":"Meet StoreKit 2"},"references":{"https://developer.apple.com/documentation/storekit/product/producttype":{"titleInlineContent":[{"code":"Product.ProductType","type":"codeVoice"}],"url":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/producttype","title":"Product.ProductType","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/producttype","type":"link"},"WWDCNotes.png":{"alt":null,"identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes\/WWDCNotes.png","traits":["1x","light"]}],"type":"image"},"https://developer.apple.com/documentation/storekit/product/3749590-subscription":{"type":"link","title":"subscription","titleInlineContent":[{"text":"subscription","type":"text"}],"url":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3749590-subscription","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3749590-subscription"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10140-Whats-new-in-StoreKit-2-and-StoreKit-Testing-in-Xcode":{"url":"\/documentation\/wwdcnotes\/wwdc23-10140-whats-new-in-storekit-2-and-storekit-testing-in-xcode","title":"What’s new in StoreKit 2 and StoreKit Testing in Xcode","role":"sampleCode","abstract":[{"type":"text","text":"Get to know the latest enhancements to StoreKit 2 and StoreKit Testing in Xcode. Discover API updates for promoted in-app purchases, StoreKit messages, the Transaction model, the RenewalInfo model, and the App Store sheet for managing subscriptions. Learn how to upgrade to SHA-256 for on-device receipt validation and use APIs to create SwiftUI views."}],"kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10140-Whats-new-in-StoreKit-2-and-StoreKit-Testing-in-Xcode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19-302-InApp-Purchases-and-Using-ServertoServer-Notifications":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-302-InApp-Purchases-and-Using-ServertoServer-Notifications","url":"\/documentation\/wwdcnotes\/wwdc19-302-inapp-purchases-and-using-servertoserver-notifications","type":"topic","title":"In-App Purchases and Using Server-to-Server Notifications","kind":"article","role":"sampleCode","abstract":[{"type":"text","text":"Learn about the latest updates in StoreKit and dive deep into best practices for using server-to-server notifications to manage your subscribers."}]},"WWDC21-Icon.png":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes\/WWDC21-Icon.png","traits":["1x","light"]}],"identifier":"WWDC21-Icon.png","type":"image"},"https://github.com/zntfdr":{"titleInlineContent":[{"type":"text","text":"GitHub"}],"url":"https:\/\/github.com\/zntfdr","identifier":"https:\/\/github.com\/zntfdr","title":"GitHub","type":"link"},"https://datatracker.ietf.org/doc/html/rfc7515":{"type":"link","title":"RFC7515","titleInlineContent":[{"text":"RFC7515","type":"text"}],"url":"https:\/\/datatracker.ietf.org\/doc\/html\/rfc7515","identifier":"https:\/\/datatracker.ietf.org\/doc\/html\/rfc7515"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link"},"https://developer.apple.com/documentation/storekit/product/subscriptioninfo":{"titleInlineContent":[{"type":"codeVoice","code":"Product.SubscriptionInfo"}],"url":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/subscriptioninfo","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/subscriptioninfo","title":"Product.SubscriptionInfo","type":"link"},"https://www.google.com/search?client=safari&rls=en&q=JSON+Web+signature&ie=UTF-8&oe=UTF-8":{"type":"link","title":"JSON Web signature","titleInlineContent":[{"text":"JSON Web signature","type":"text"}],"url":"https:\/\/www.google.com\/search?client=safari&rls=en&q=JSON+Web+signature&ie=UTF-8&oe=UTF-8","identifier":"https:\/\/www.google.com\/search?client=safari&rls=en&q=JSON+Web+signature&ie=UTF-8&oe=UTF-8"},"https://developer.apple.com/wwdc21/10114":{"url":"https:\/\/developer.apple.com\/wwdc21\/10114","checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc21\/10114","type":"download"},"zntfdr":{"alt":"Profile image of Federico Zanetello","identifier":"zntfdr","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/zntfdr.jpeg"}],"type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10174-Manage-inapp-purchases-on-your-server":{"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10174-Manage-inapp-purchases-on-your-server","abstract":[{"type":"text","text":"Discover the latest updates to managing in-app purchases on your server. Explore how you can use servers to track status changes, handle refunds, and manage subscriber status. Learn about App Store server APIs around status and in-app purchase transactions, and find out how App Store server notifications can help you track more customer lifecycle events. We’ll also take you through managing Family Sharing for in-app purchases, and the latest improvements to testing in-app purchases in the sandbox environment."}],"role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc21-10174-manage-inapp-purchases-on-your-server","title":"Manage in-app purchases on your server","type":"topic"},"https://developer.apple.com/documentation/storekit/backingvalue":{"titleInlineContent":[{"type":"codeVoice","code":"BackingValue"}],"url":"https:\/\/developer.apple.com\/documentation\/storekit\/backingvalue","title":"BackingValue","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/backingvalue","type":"link"},"https://developer.apple.com/documentation/storekit/transaction/3792059-currententitlements":{"type":"link","title":"currentEntitlements","titleInlineContent":[{"code":"currentEntitlements","type":"codeVoice"}],"url":"https:\/\/developer.apple.com\/documentation\/storekit\/transaction\/3792059-currententitlements","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/transaction\/3792059-currententitlements"},"https://developer.apple.com/documentation/storekit/product/purchaseoption/3749440-appaccounttoken":{"titleInlineContent":[{"text":"App account token","type":"text"}],"url":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/purchaseoption\/3749440-appaccounttoken","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/purchaseoption\/3749440-appaccounttoken","title":"App account token","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10661-Whats-new-with-inapp-purchase":{"url":"\/documentation\/wwdcnotes\/wwdc20-10661-whats-new-with-inapp-purchase","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10661-Whats-new-with-inapp-purchase","type":"topic","abstract":[{"type":"text","text":"Create a great in-app purchase experience for your iPhone, iPad, Mac, and Apple Watch apps. Discover how to handle refunds, integrate new App Store server notifications, and find out how to use receipts and server notifications to manage subscriber status. We’ll also walk you through the latest updates in StoreKit, including in-app purchases on Apple Watch, Family Sharing, SKOverlay, SKAdNetwork, and more."}],"title":"What’s new with in-app purchase","role":"sampleCode","kind":"article"},"https://developer.apple.com/documentation/storekit/in-app_purchase/implementing_a_store_in_your_app_using_the_storekit_api":{"titleInlineContent":[{"text":"Session sample code","type":"text"}],"url":"https:\/\/developer.apple.com\/documentation\/storekit\/in-app_purchase\/implementing_a_store_in_your_app_using_the_storekit_api","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/in-app_purchase\/implementing_a_store_in_your_app_using_the_storekit_api","title":"Session sample code","type":"link"},"https://zntfdr.dev":{"titleInlineContent":[{"type":"text","text":"Blog"}],"url":"https:\/\/zntfdr.dev","title":"Blog","identifier":"https:\/\/zntfdr.dev","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10175-Support-customers-and-handle-refunds":{"url":"\/documentation\/wwdcnotes\/wwdc21-10175-support-customers-and-handle-refunds","title":"Support customers and handle refunds","role":"sampleCode","abstract":[{"type":"text","text":"Great customer support is critical to running a successful business on the App Store. Discover how you can provide a frictionless support experience to customers who make in-app purchases, including APIs that make it easy for customers to manage or cancel their auto-renewable subscription, or request refunds from directly within your app. We’ll cover best practices for handling refunds, as well as additional APIs that can help you better support your customers."}],"kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10175-Support-customers-and-handle-refunds"},"https://developer.apple.com/documentation/storekit/product/3791971-purchase":{"type":"link","title":"purchase(options:)","titleInlineContent":[{"code":"purchase(options:)","type":"codeVoice"}],"url":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3791971-purchase","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3791971-purchase"},"zntfdr.jpeg":{"alt":null,"identifier":"zntfdr.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/zntfdr.jpeg"}],"type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10039-Whats-new-in-StoreKit-testing":{"url":"\/documentation\/wwdcnotes\/wwdc22-10039-whats-new-in-storekit-testing","abstract":[{"type":"text","text":"Discover the latest tools to help you test your in-app purchases and subscriptions. We’ll show you how to bring your products from App Store Connect into StoreKit Testing in Xcode, learn about improvements to the transaction manager, and explore your in-app purchase flow in Xcode Previews. We’ll also take you through best practices when setting up an Apple ID for the sandbox environment, and show you how to create tests for refund requests, price increase consent, billing retry, and much more."}],"type":"topic","kind":"article","role":"sampleCode","title":"What’s new in StoreKit testing","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10039-Whats-new-in-StoreKit-testing"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"kind":"article","type":"topic","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"role":"sampleCode","title":"Federico Zanetello (332 notes)","url":"\/documentation\/wwdcnotes\/zntfdr","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10007-Whats-new-with-inapp-purchase":{"url":"\/documentation\/wwdcnotes\/wwdc22-10007-whats-new-with-inapp-purchase","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10007-Whats-new-with-inapp-purchase","kind":"article","abstract":[{"type":"text","text":"Learn how you can make your in-app purchase experience even better on iPhone, iPad, Mac, and Apple Watch. We’ll take you through enhancements to StoreKit 2 and App Store Server API, and explore improvements to App Store Server Notifications. Discover how you can verify app purchases with App Transaction API, add properties to your StoreKit models, incorporate SwiftUI-friendly APIs and StoreKit Messages, and preserve applicationUsername in transactions. For those working server-side, we’ll show you how to make the most of App Store Server Notifications, additional ways to retrieve user transaction history, and recovery steps when your server experiences an outage."}],"type":"topic","title":"What’s new with in-app purchase","role":"sampleCode"},"WWDC21.jpeg":{"alt":null,"identifier":"WWDC21.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC21.jpeg"}],"type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10013-Meet-StoreKit-for-SwiftUI":{"url":"\/documentation\/wwdcnotes\/wwdc23-10013-meet-storekit-for-swiftui","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10013-Meet-StoreKit-for-SwiftUI","type":"topic","abstract":[{"type":"text","text":"Discover how you can use App Store product metadata and Xcode Previews to add in-app purchases to your app with just a few lines of code. Explore a new collection of UI components in StoreKit and learn how you can easily merchandise your products, present subscriptions in a way that helps users make informed decisions, and more."}],"title":"Meet StoreKit for SwiftUI","role":"sampleCode","kind":"article"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21":{"kind":"article","type":"topic","abstract":[{"type":"text","text":"Xcode 13, Swift 5.5, iOS 15, macOS 12 (Monterey), tvOS 15, watchOS 8."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"MusicKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"DocC"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit 2"},{"type":"text","text":", and more."}],"role":"collectionGroup","title":"WWDC21","url":"\/documentation\/wwdcnotes\/wwdc21","images":[{"identifier":"WWDC21-Icon.png","type":"icon"},{"identifier":"WWDC21.jpeg","type":"card"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"},"doc://WWDCNotes/documentation/WWDCNotes":{"abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","url":"\/documentation\/wwdcnotes","kind":"symbol","role":"collection","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"type":"topic","title":"WWDC Notes"},"https://developer.apple.com/documentation/storekit/product":{"titleInlineContent":[{"code":"Product","type":"codeVoice"}],"url":"https:\/\/developer.apple.com\/documentation\/storekit\/product","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product","title":"Product","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-110404-Implement-proactive-inapp-purchase-restore":{"url":"\/documentation\/wwdcnotes\/wwdc22-110404-implement-proactive-inapp-purchase-restore","title":"Implement proactive in-app purchase restore","role":"sampleCode","abstract":[{"text":"Learn how you can restore someone’s in-app purchases access proactively when they first open your app. We’ll show you how you can deliver instant access to existing subscriptions using StoreKit or StoreKit 2 and cover best practices for both your client and server implementations. Find out more about how you can determine customer purchase state and create a personalized onboarding experience for your app.","type":"text"}],"kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110404-Implement-proactive-inapp-purchase-restore"}}}