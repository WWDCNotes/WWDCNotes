{"seeAlsoSections":[{"title":"New Tools & Frameworks","generated":true,"identifiers":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10058-Meet-AsyncSequence","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10257-Meet-ClassKit-for-filebased-apps","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10117-Meet-CloudKit-Console","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10166-Meet-DocC-documentation-in-Xcode","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10183-Meet-Group-Activities","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10294-Meet-MusicKit-for-Swift","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10104-Meet-Safari-Web-Extensions-on-iOS","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10232-Meet-Shortcuts-for-macOS","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10170-Meet-TestFlight-on-Mac","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10061-Meet-TextKit-2","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10267-Meet-Xcode-Cloud","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10132-Meet-asyncawait-in-Swift","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10131-Meet-declarative-device-management","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10171-Meet-inapp-events-on-the-App-Store","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10033-Meet-privacypreserving-ad-attribution","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10102-Meet-the-Location-Button","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10123-Meet-the-Screen-Time-API","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10256-Meet-the-Swift-Algorithms-and-Collections-packages","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10064-Meet-the-UIKit-button-system"]}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"overridingTitle":"Watch Video (37 min)","type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc21\/10114","isActive":true}},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc21-10114-meet-storekit-2"]}],"kind":"article","schemaVersion":{"patch":0,"major":0,"minor":3},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10114-Meet-StoreKit-2"},"metadata":{"modules":[{"name":"WWDC Notes"}],"title":"Meet StoreKit 2","role":"sampleCode","roleHeading":"WWDC21"},"abstract":[{"type":"text","text":"StoreKit 2 delivers powerful, Swift-native APIs for in-app purchases and auto-renewable subscriptions. Learn how you can easily implement in-app purchases and subscriptions, and discover APIs for retrieving product information, handling transactions, determining product entitlements and customer status, as well as comprehensive testing support in Xcode."}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"]]},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","level":2,"text":"Overview","anchor":"overview"},{"type":"aside","content":[{"inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/in-app_purchase\/implementing_a_store_in_your_app_using_the_storekit_api","isActive":true,"type":"reference"}],"type":"paragraph"}],"name":"Note","style":"note"},{"type":"heading","level":2,"text":"StoreKit 2","anchor":"StoreKit-2"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"brand new set of modern and flexible Swift APIs for working with In-App Purchase across iOS, macOS, tvOS, and watchOS","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"updates to the in-app purchase transactions, to make it easier to manage"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Five main areas:"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Products","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Purchases"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Transaction info","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Transaction history"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Subscription status"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Products--Purchases","text":"Products & Purchases","type":"heading","level":2},{"items":[{"content":[{"inlineContent":[{"text":"New ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product"},{"type":"text","text":" struct"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"contains additional data, such as the product type (","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/producttype","isActive":true,"type":"reference"},{"text":") and extended subscription information (","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/subscriptioninfo","isActive":true,"type":"reference"},{"text":")","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"future-compatible with new features via ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/backingvalue"},{"text":", which allows you to retrieve data contained in the product even on SDKs and devices running operating systems that have older versions of StoreKit 2","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"uses ","type":"text"},{"code":"async","type":"codeVoice"},{"text":"\/","type":"text"},{"code":"await","type":"codeVoice"},{"text":" for requests and purchases","type":"text"}],"type":"paragraph"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"purchase is a "},{"type":"codeVoice","code":"Product"},{"type":"text","text":" instance method, "},{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3791971-purchase","type":"reference","isActive":true}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"the options parameter lets you specify things like quantity, promotional offer, app account token (New)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"the "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/purchaseoption\/3749440-appaccounttoken"},{"type":"text","text":" is a way for you to keep track of which of your app’s user accounts began and completed a transaction."}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"it’s an opaque token (UUID format)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"created by you","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"linked to the user in-app account"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"stored in transaction forever","type":"text"}]}]}]}]}]}]}],"type":"unorderedList"},{"anchor":"Transaction-info","text":"Transaction info","type":"heading","level":2},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"individually signed object for every transaction"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"in-app purchase transaction info will now be provided in "},{"type":"reference","identifier":"https:\/\/www.google.com\/search?client=safari&rls=en&q=JSON+Web+signature&ie=UTF-8&oe=UTF-8","isActive":true}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"StoreKit 2 does transaction verification for you, but you can also add your verification on top"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Transaction-history","text":"Transaction history","type":"heading","level":2},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"new set of APIs for querying completed transactions in the user’s transaction history","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"you can access all of the user’s past transactions with a single API call"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"you can also access the latest transaction for a product","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"get what products the user has paid for access via ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/transaction\/3792059-currententitlements","isActive":true,"type":"reference"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"contains all of the non-consumables in the user’s transaction history","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"contains all of the subscription transactions that are currently active","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"any transactions that have been revoked are "},{"inlineContent":[{"text":"not","type":"text"}],"type":"strong"},{"type":"text","text":" included"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"no consumable transactions"}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"all transactions are available immediately upon app download","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"transactions automatically update on every device","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"real-time updates"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"thanks to transaction history, users no longer need to restore completed transactions when your app is reinstalled"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"you still need to provide a UI to restore purchases"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"all new StoreKit 2 transactions are available to the old StoreKit API"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"all old StoreKit transactions are available to the new StoreKit 2 API"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Subscription-status","text":"Subscription status","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"A "},{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3749590-subscription","type":"reference","isActive":true},{"type":"text","text":" status has three parts:"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"latest transaction"}],"type":"paragraph"}]}],"type":"orderedList"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"give you access to the last transaction that occurred for this subscription","type":"text"}]}]}],"type":"unorderedList"},{"start":2,"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"renewal state"}]}]}],"type":"orderedList"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"enumeration that tells you the current state of the subscription"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"base you app logic off this renewal state","type":"text"}]}]}],"type":"unorderedList"},{"start":3,"items":[{"content":[{"inlineContent":[{"type":"text","text":"renewal info"}],"type":"paragraph"}]}],"type":"orderedList"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"contains all details about a user’s subscription (e.g. whether auto-renew is on\/off, product id of the renewal, expiration reason)","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"signed using JWS","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"StoreKit 2 will automatically validate the renewal info for you","type":"text"}]}]}],"type":"unorderedList"},{"anchor":"Signature-validation","text":"Signature validation","type":"heading","level":2},{"name":"Note","content":[{"inlineContent":[{"text":"More details in ","type":"text"},{"identifier":"https:\/\/datatracker.ietf.org\/doc\/html\/rfc7515","isActive":true,"type":"reference"}],"type":"paragraph"}],"type":"aside","style":"note"},{"type":"paragraph","inlineContent":[{"text":"JSON Web Signature is comprised of three parts:","type":"text"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"header"}]}]}],"type":"orderedList"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"contains metadata about the object, such as which algorithm is used for signing and where to find the certificate used to validate the signature."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"StoreKit 2 currently uses an "},{"code":"ECDSA","type":"codeVoice"},{"type":"text","text":" algorithm (supported natively in CryptoKit)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"For the certificate, StoreKit 2 uses the ","type":"text"},{"type":"codeVoice","code":"x5c"},{"text":" header","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"the entire certificate chain is included in the JWS data, no internet connection"}],"type":"paragraph"}]}],"type":"unorderedList"},{"start":2,"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"payload","type":"text"}]}]}],"type":"orderedList"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"main transaction information such as transaction ID, product ID, purchase date"}]}]}],"type":"unorderedList"},{"start":3,"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"signature","type":"text"}]}]}],"type":"orderedList"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"generated using both the header and the payload"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"Demo","text":"Demo","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"text":"The session has two demos touching all the flows:","type":"text"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"the first demo focuses on getting products, purchasing, and listening to transitions.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"the second demo focuses on transaction history and subscription statuses"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the final code can be found "},{"overridingTitle":"here","isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/in-app_purchase\/implementing_a_store_in_your_app_using_the_storekit_api","overridingTitleInlineContent":[{"text":"here","type":"text"}]}]}]}],"type":"unorderedList"},{"anchor":"Written-By","text":"Written By","type":"heading","level":2},{"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","type":"image"}]}]},{"size":4,"content":[{"anchor":"Federico-Zanetello","text":"Federico Zanetello","level":3,"type":"heading"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"isActive":true,"type":"reference","overridingTitle":"Contributed Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/zntfdr"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/zntfdr.dev"}]}]}],"type":"row","numberOfColumns":5},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing"}]},{"anchor":"Related-Sessions","text":"Related Sessions","type":"heading","level":2},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10013-Meet-StoreKit-for-SwiftUI","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10140-Whats-new-in-StoreKit-2-and-StoreKit-Testing-in-Xcode","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10007-Whats-new-with-inapp-purchase","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10039-Whats-new-in-StoreKit-testing","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110404-Implement-proactive-inapp-purchase-restore","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10174-Manage-inapp-purchases-on-your-server","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10175-Support-customers-and-handle-refunds","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10661-Whats-new-with-inapp-purchase"],"type":"links","style":"list"},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}]},{"type":"small","inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}]}]}],"sections":[],"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10013-Meet-StoreKit-for-SwiftUI":{"url":"\/documentation\/wwdcnotes\/wwdc23-10013-meet-storekit-for-swiftui","abstract":[{"text":"Discover how you can use App Store product metadata and Xcode Previews to add in-app purchases to your app with just a few lines of code. Explore a new collection of UI components in StoreKit and learn how you can easily merchandise your products, present subscriptions in a way that helps users make informed decisions, and more.","type":"text"}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10013-Meet-StoreKit-for-SwiftUI","title":"Meet StoreKit for SwiftUI","kind":"article","role":"sampleCode"},"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","type":"link"},"https://developer.apple.com/wwdc21/10114":{"identifier":"https:\/\/developer.apple.com\/wwdc21\/10114","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc21\/10114","type":"download"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10058-Meet-AsyncSequence":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10058-Meet-AsyncSequence","abstract":[{"type":"text","text":"Iterating over a sequence of values over time is now as easy as writing a “for” loop. Find out how the new AsyncSequence protocol enables a natural, simple syntax for iterating over anything from notifications to bytes being streamed from a server. We’ll also show you how to adapt existing code to provide asynchronous sequences of your own."}],"title":"Meet AsyncSequence","url":"\/documentation\/wwdcnotes\/wwdc21-10058-meet-asyncsequence","kind":"article","type":"topic","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10131-Meet-declarative-device-management":{"url":"\/documentation\/wwdcnotes\/wwdc21-10131-meet-declarative-device-management","abstract":[{"type":"text","text":"The future of device management is here: Learn how you can support mobile device management while allowing individual devices to be autonomous and proactive, bringing both increased performance and scalability. We’ll show you how you can incorporate this declarative model in your MDM solution."}],"type":"topic","title":"Meet declarative device management","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10131-Meet-declarative-device-management","role":"sampleCode"},"https://developer.apple.com/documentation/storekit/product/subscriptioninfo":{"type":"link","url":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/subscriptioninfo","titleInlineContent":[{"type":"codeVoice","code":"Product.SubscriptionInfo"}],"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/subscriptioninfo","title":"Product.SubscriptionInfo"},"https://developer.apple.com/documentation/storekit/product":{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product","type":"link","url":"https:\/\/developer.apple.com\/documentation\/storekit\/product","titleInlineContent":[{"type":"codeVoice","code":"Product"}],"title":"Product"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10132-Meet-asyncawait-in-Swift":{"url":"\/documentation\/wwdcnotes\/wwdc21-10132-meet-asyncawait-in-swift","abstract":[{"text":"Swift now supports asynchronous functions — a pattern commonly known as async\/await. Discover how the new syntax can make your code easier to read and understand. Learn what happens when a function suspends, and find out how to adapt existing completion handlers to asynchronous functions.","type":"text"}],"type":"topic","title":"Meet async\/await in Swift","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10132-Meet-asyncawait-in-Swift","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","url":"\/documentation\/wwdcnotes","kind":"symbol","title":"WWDC Notes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"role":"collection","images":[{"identifier":"WWDCNotes.png","type":"icon"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10140-Whats-new-in-StoreKit-2-and-StoreKit-Testing-in-Xcode":{"role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10140-Whats-new-in-StoreKit-2-and-StoreKit-Testing-in-Xcode","abstract":[{"type":"text","text":"Get to know the latest enhancements to StoreKit 2 and StoreKit Testing in Xcode. Discover API updates for promoted in-app purchases, StoreKit messages, the Transaction model, the RenewalInfo model, and the App Store sheet for managing subscriptions. Learn how to upgrade to SHA-256 for on-device receipt validation and use APIs to create SwiftUI views."}],"url":"\/documentation\/wwdcnotes\/wwdc23-10140-whats-new-in-storekit-2-and-storekit-testing-in-xcode","title":"What’s new in StoreKit 2 and StoreKit Testing in Xcode","kind":"article","type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-110404-Implement-proactive-inapp-purchase-restore":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110404-Implement-proactive-inapp-purchase-restore","url":"\/documentation\/wwdcnotes\/wwdc22-110404-implement-proactive-inapp-purchase-restore","role":"sampleCode","kind":"article","title":"Implement proactive in-app purchase restore","abstract":[{"type":"text","text":"Learn how you can restore someone’s in-app purchases access proactively when they first open your app. We’ll show you how you can deliver instant access to existing subscriptions using StoreKit or StoreKit 2 and cover best practices for both your client and server implementations. Find out more about how you can determine customer purchase state and create a personalized onboarding experience for your app."}],"type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10166-Meet-DocC-documentation-in-Xcode":{"url":"\/documentation\/wwdcnotes\/wwdc21-10166-meet-docc-documentation-in-xcode","type":"topic","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10166-Meet-DocC-documentation-in-Xcode","role":"sampleCode","title":"Meet DocC documentation in Xcode","abstract":[{"type":"text","text":"Discover how you can use DocC to build and share documentation for Swift packages and frameworks. We’ll show you how to begin generating documentation from your own code — or from third-party code you depend upon — and write and format it using Markdown. And we’ll also take you through the export process, helping you generate DocC archives to share with the public."}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10175-Support-customers-and-handle-refunds":{"url":"\/documentation\/wwdcnotes\/wwdc21-10175-support-customers-and-handle-refunds","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10175-Support-customers-and-handle-refunds","type":"topic","role":"sampleCode","abstract":[{"text":"Great customer support is critical to running a successful business on the App Store. Discover how you can provide a frictionless support experience to customers who make in-app purchases, including APIs that make it easy for customers to manage or cancel their auto-renewable subscription, or request refunds from directly within your app. We’ll cover best practices for handling refunds, as well as additional APIs that can help you better support your customers.","type":"text"}],"title":"Support customers and handle refunds"},"WWDCNotes.png":{"alt":null,"identifier":"WWDCNotes.png","type":"image","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"https://developer.apple.com/documentation/storekit/product/purchaseoption/3749440-appaccounttoken":{"url":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/purchaseoption\/3749440-appaccounttoken","titleInlineContent":[{"type":"text","text":"App account token"}],"type":"link","title":"App account token","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/purchaseoption\/3749440-appaccounttoken"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10102-Meet-the-Location-Button":{"url":"\/documentation\/wwdcnotes\/wwdc21-10102-meet-the-location-button","type":"topic","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10102-Meet-the-Location-Button","role":"sampleCode","title":"Meet the Location Button","abstract":[{"type":"text","text":"Meet CLLocationButton: a secure interface element that provides an easy, low-friction way to grant your app location access only when and where it is needed. Learn how you can add CLLocationButton to new or existing code, how to customize it within interface legibility guidelines, how to recognize and address customization failures, and how it interacts with iOS’s traditional prompt-based Location Services authorization."}]},"https://developer.apple.com/documentation/storekit/product/producttype":{"type":"link","url":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/producttype","titleInlineContent":[{"type":"codeVoice","code":"Product.ProductType"}],"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/producttype","title":"Product.ProductType"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10064-Meet-the-UIKit-button-system":{"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc21-10064-meet-the-uikit-button-system","abstract":[{"type":"text","text":"Every app uses Buttons. With iOS 15, you can adopt updated styles to create gorgeous buttons that fit effortlessly into your interface. We’ll explore features that make it easier to create different types of buttons, learn how to provide richer interactions, and discover how you can get great buttons when using Mac Catalyst."}],"role":"sampleCode","title":"Meet the UIKit button system","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10064-Meet-the-UIKit-button-system"},"https://developer.apple.com/documentation/storekit/backingvalue":{"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/backingvalue","type":"link","url":"https:\/\/developer.apple.com\/documentation\/storekit\/backingvalue","titleInlineContent":[{"type":"codeVoice","code":"BackingValue"}],"title":"BackingValue"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10007-Whats-new-with-inapp-purchase":{"title":"What’s new with in-app purchase","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10007-Whats-new-with-inapp-purchase","role":"sampleCode","abstract":[{"type":"text","text":"Learn how you can make your in-app purchase experience even better on iPhone, iPad, Mac, and Apple Watch. We’ll take you through enhancements to StoreKit 2 and App Store Server API, and explore improvements to App Store Server Notifications. Discover how you can verify app purchases with App Transaction API, add properties to your StoreKit models, incorporate SwiftUI-friendly APIs and StoreKit Messages, and preserve applicationUsername in transactions. For those working server-side, we’ll show you how to make the most of App Store Server Notifications, additional ways to retrieve user transaction history, and recovery steps when your server experiences an outage."}],"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc22-10007-whats-new-with-inapp-purchase","kind":"article"},"https://developer.apple.com/documentation/storekit/product/3791971-purchase":{"title":"purchase(options:)","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3791971-purchase","titleInlineContent":[{"type":"codeVoice","code":"purchase(options:)"}],"type":"link","url":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3791971-purchase"},"https://avatars.githubusercontent.com/u/5277837?v=4":{"variants":[{"url":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","traits":["1x","light"]}],"type":"image","alt":"Profile image of Federico Zanetello","identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10033-Meet-privacypreserving-ad-attribution":{"url":"\/documentation\/wwdcnotes\/wwdc21-10033-meet-privacypreserving-ad-attribution","abstract":[{"text":"Discover how you can measure your ad campaigns in apps and on the web without compromising privacy. We’ll introduce you to Private Click Measurement and explore SKAdNetwork, which provides you with a more secure, private, and useful way to measure your app installs.","type":"text"}],"type":"topic","title":"Meet privacy-preserving ad attribution","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10033-Meet-privacypreserving-ad-attribution","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10039-Whats-new-in-StoreKit-testing":{"role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc22-10039-whats-new-in-storekit-testing","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10039-Whats-new-in-StoreKit-testing","abstract":[{"type":"text","text":"Discover the latest tools to help you test your in-app purchases and subscriptions. We’ll show you how to bring your products from App Store Connect into StoreKit Testing in Xcode, learn about improvements to the transaction manager, and explore your in-app purchase flow in Xcode Previews. We’ll also take you through best practices when setting up an Apple ID for the sandbox environment, and show you how to create tests for refund requests, price increase consent, billing retry, and much more."}],"type":"topic","title":"What’s new in StoreKit testing"},"https://www.google.com/search?client=safari&rls=en&q=JSON+Web+signature&ie=UTF-8&oe=UTF-8":{"type":"link","url":"https:\/\/www.google.com\/search?client=safari&rls=en&q=JSON+Web+signature&ie=UTF-8&oe=UTF-8","titleInlineContent":[{"type":"text","text":"JSON Web signature"}],"identifier":"https:\/\/www.google.com\/search?client=safari&rls=en&q=JSON+Web+signature&ie=UTF-8&oe=UTF-8","title":"JSON Web signature"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10061-Meet-TextKit-2":{"url":"\/documentation\/wwdcnotes\/wwdc21-10061-meet-textkit-2","abstract":[{"text":"Meet TextKit 2: Apple’s next-generation text engine, redesigned for improved correctness, safety, and performance. Discover how TextKit 2 can help you provide a better text experience for international audiences, create more diverse layouts by mixing text content with visual content, and ensure smooth scrolling performance. We’ll introduce the latest APIs, dive into some practical examples, and provide guidance for modernizing your apps.","type":"text"}],"type":"topic","title":"Meet TextKit 2","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10061-Meet-TextKit-2","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10232-Meet-Shortcuts-for-macOS":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10232-Meet-Shortcuts-for-macOS","abstract":[{"type":"text","text":"Shortcuts is coming to macOS, and your apps are a key part of that process. Discover how you can elevate the capabilities of your app by exposing those features as Shortcuts actions. We’ll show you how to build actions for your macOS apps built with Catalyst or AppKit, deploy actions across platforms, publish and share shortcuts, and enable your app to run shortcuts from other apps. We’ll also take you through how Shortcuts fits in with existing Mac automation technologies like Automator and AppleScript."}],"title":"Meet Shortcuts for macOS","url":"\/documentation\/wwdcnotes\/wwdc21-10232-meet-shortcuts-for-macos","kind":"article","type":"topic","role":"sampleCode"},"https://zntfdr.dev":{"identifier":"https:\/\/zntfdr.dev","type":"link","url":"https:\/\/zntfdr.dev","titleInlineContent":[{"text":"Blog","type":"text"}],"title":"Blog"},"https://github.com/zntfdr":{"title":"GitHub","identifier":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"type":"text","text":"GitHub"}],"type":"link","url":"https:\/\/github.com\/zntfdr"},"https://developer.apple.com/documentation/storekit/product/3749590-subscription":{"url":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3749590-subscription","titleInlineContent":[{"type":"text","text":"subscription"}],"type":"link","title":"subscription","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/product\/3749590-subscription"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10256-Meet-the-Swift-Algorithms-and-Collections-packages":{"url":"\/documentation\/wwdcnotes\/wwdc21-10256-meet-the-swift-algorithms-and-collections-packages","type":"topic","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10256-Meet-the-Swift-Algorithms-and-Collections-packages","role":"sampleCode","title":"Meet the Swift Algorithms and Collections packages","abstract":[{"type":"text","text":"Discover two of the latest additions to the list of open-source Swift packages from Apple: Swift Algorithms and Swift Collections. Not only can you use these packages immediately, they also incubate new algorithms and data structures for eventual inclusion in the Swift Standard Library. We’ll show you how you can integrate these packages into your projects and select the right algorithms and data structures to make your code clearer and faster."}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"title":"Federico Zanetello (214 notes)","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"kind":"article","url":"\/documentation\/wwdcnotes\/zntfdr","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10183-Meet-Group-Activities":{"url":"\/documentation\/wwdcnotes\/wwdc21-10183-meet-group-activities","title":"Meet Group Activities","role":"sampleCode","abstract":[{"text":"Learn more about the framework powering SharePlay, and discover the different types of shared experiences you can implement for people who use your app. Explore a high-level overview of the framework’s architecture and concepts, including how Group Activities and AVFoundation work in tandem, and learn how to implement it into your app. This is a great starting point to know more about SharePlay and how to integrate Group Activities in your apps.","type":"text"}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10183-Meet-Group-Activities","type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10257-Meet-ClassKit-for-filebased-apps":{"abstract":[{"type":"text","text":"The ClassKit framework can help surface educational activities within your app to teachers using the Schoolwork app. Discover how you can provide teachers with greater insights into student learning by adopting the latest file-based API to report student progress data within your app. We’ll also show you how to use ClassKit to report out different data types, and how to test your implementation in developer mode."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10257-Meet-ClassKit-for-filebased-apps","title":"Meet ClassKit for file-based apps","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc21-10257-meet-classkit-for-filebased-apps","role":"sampleCode","type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10123-Meet-the-Screen-Time-API":{"url":"\/documentation\/wwdcnotes\/wwdc21-10123-meet-the-screen-time-api","abstract":[{"type":"text","text":"Explore the Screen Time API and learn how you can build apps that support customized parental controls — all while putting privacy first. Learn how you can use key features like core restrictions and device activity monitoring to create safe, secure experiences in your app while providing measurable control for parents and guardians."}],"type":"topic","title":"Meet the Screen Time API","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10123-Meet-the-Screen-Time-API","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10171-Meet-inapp-events-on-the-App-Store":{"url":"\/documentation\/wwdcnotes\/wwdc21-10171-meet-inapp-events-on-the-app-store","abstract":[{"text":"Discover how you can promote timely events happening in your apps and games — like a game competition, a movie premiere, and more — directly on the App Store. We’ll show you how in-app events now appear on the App Store and how to create, schedule, and manage them in App Store Connect.","type":"text"}],"type":"topic","title":"Meet in-app events on the App Store","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10171-Meet-inapp-events-on-the-App-Store","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21":{"type":"topic","role":"collectionGroup","url":"\/documentation\/wwdcnotes\/wwdc21","kind":"article","abstract":[{"text":"Xcode 13, Swift 5.5, iOS 15, macOS 12, tvOS 15, watchOS 8.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"MusicKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"DocC","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit 2","type":"codeVoice"},{"text":", and more.","type":"text"}],"title":"WWDC21","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21","images":[{"type":"icon","identifier":"WWDCNotes.png"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10661-Whats-new-with-inapp-purchase":{"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10661-Whats-new-with-inapp-purchase","role":"sampleCode","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc20-10661-whats-new-with-inapp-purchase","abstract":[{"text":"Create a great in-app purchase experience for your iPhone, iPad, Mac, and Apple Watch apps. Discover how to handle refunds, integrate new App Store server notifications, and find out how to use receipts and server notifications to manage subscriber status. We’ll also walk you through the latest updates in StoreKit, including in-app purchases on Apple Watch, Family Sharing, SKOverlay, SKAdNetwork, and more.","type":"text"}],"title":"What’s new with in-app purchase"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10117-Meet-CloudKit-Console":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10117-Meet-CloudKit-Console","abstract":[{"text":"Discover how CloudKit Console can help you better interact with your containers. We’ll show you how to put the database app to work and define, modify, and deploy schema changes with confidence. You’ll learn how to craft queries in the query builder and filter your records with ease. And we’ll explore how to use telemetry and log data to gain new insights into your app behavior over time.","type":"text"}],"title":"Meet CloudKit Console","url":"\/documentation\/wwdcnotes\/wwdc21-10117-meet-cloudkit-console","kind":"article","type":"topic","role":"sampleCode"},"https://developer.apple.com/documentation/storekit/in-app_purchase/implementing_a_store_in_your_app_using_the_storekit_api":{"type":"link","url":"https:\/\/developer.apple.com\/documentation\/storekit\/in-app_purchase\/implementing_a_store_in_your_app_using_the_storekit_api","titleInlineContent":[{"type":"text","text":"Session sample code"}],"identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/in-app_purchase\/implementing_a_store_in_your_app_using_the_storekit_api","title":"Session sample code"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10174-Manage-inapp-purchases-on-your-server":{"url":"\/documentation\/wwdcnotes\/wwdc21-10174-manage-inapp-purchases-on-your-server","type":"topic","title":"Manage in-app purchases on your server","kind":"article","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10174-Manage-inapp-purchases-on-your-server","abstract":[{"type":"text","text":"Discover the latest updates to managing in-app purchases on your server. Explore how you can use servers to track status changes, handle refunds, and manage subscriber status. Learn about App Store server APIs around status and in-app purchase transactions, and find out how App Store server notifications can help you track more customer lifecycle events. We’ll also take you through managing Family Sharing for in-app purchases, and the latest improvements to testing in-app purchases in the sandbox environment."}]},"https://datatracker.ietf.org/doc/html/rfc7515":{"identifier":"https:\/\/datatracker.ietf.org\/doc\/html\/rfc7515","type":"link","url":"https:\/\/datatracker.ietf.org\/doc\/html\/rfc7515","titleInlineContent":[{"text":"RFC7515","type":"text"}],"title":"RFC7515"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10104-Meet-Safari-Web-Extensions-on-iOS":{"url":"\/documentation\/wwdcnotes\/wwdc21-10104-meet-safari-web-extensions-on-ios","type":"topic","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10104-Meet-Safari-Web-Extensions-on-iOS","role":"sampleCode","title":"Meet Safari Web Extensions on iOS","abstract":[{"type":"text","text":"Safari Web Extensions use HTML, CSS, and JavaScript to offer people powerful browser customizations — and you can now create them for every device that supports Safari. Learn how to build a Safari Web Extension that works for all devices, and discover how you can convert an existing extension to Safari through Xcode and the Safari Web Extension Converter."}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10267-Meet-Xcode-Cloud":{"url":"\/documentation\/wwdcnotes\/wwdc21-10267-meet-xcode-cloud","abstract":[{"text":"Get to know Xcode Cloud, Apple’s continuous integration and continuous delivery (CI\/CD) service for building apps and frameworks for all Apple platforms. Find out how Xcode Cloud can improve both the productivity of your team and the quality of your products. We’ll show you how to start your first build, use a build report to fix issues, and collaborate with your team.","type":"text"}],"type":"topic","title":"Meet Xcode Cloud","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10267-Meet-Xcode-Cloud","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10294-Meet-MusicKit-for-Swift":{"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc21-10294-meet-musickit-for-swift","abstract":[{"type":"text","text":"MusicKit makes it easy to integrate Apple Music into your app. Explore the Swift-based framework: We’ll take you through the basic process of using MusicKit — including how to find, request, and play content — and show you how you can incorporate music subscription workflows into your app if someone hasn’t yet signed up to Apple Music."}],"role":"sampleCode","title":"Meet MusicKit for Swift","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10294-Meet-MusicKit-for-Swift"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10170-Meet-TestFlight-on-Mac":{"url":"\/documentation\/wwdcnotes\/wwdc21-10170-meet-testflight-on-mac","abstract":[{"text":"TestFlight has come to Mac. Learn how you can manage builds and testers, collect feedback, and deploy your macOS app. Discover enhancements for internal testing and new features that integrate with Xcode Cloud to make testing even easier on all platforms.","type":"text"}],"type":"topic","title":"Meet TestFlight on Mac","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10170-Meet-TestFlight-on-Mac","role":"sampleCode"},"https://developer.apple.com/documentation/storekit/transaction/3792059-currententitlements":{"title":"currentEntitlements","identifier":"https:\/\/developer.apple.com\/documentation\/storekit\/transaction\/3792059-currententitlements","titleInlineContent":[{"type":"codeVoice","code":"currentEntitlements"}],"type":"link","url":"https:\/\/developer.apple.com\/documentation\/storekit\/transaction\/3792059-currententitlements"}}}