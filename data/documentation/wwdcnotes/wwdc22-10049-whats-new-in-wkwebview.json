{"kind":"article","identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10049-Whats-new-in-WKWebView"},"schemaVersion":{"patch":0,"major":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22"]]},"abstract":[{"type":"text","text":"Explore the latest updates to WKWebView, our framework for incorporating web content into your app‚Äôs interface. We‚Äôll show you how to use the JavaScript fullscreen API, explore CSS viewport units, and learn more about find interactions. We‚Äôll also take you through refinements to content blocking controls, embedding encrypted media, and using the Web Inspector."}],"sampleCodeDownload":{"action":{"identifier":"https:\/\/developer.apple.com\/wwdc22\/10049","type":"reference","overridingTitle":"Watch Video (8 min)","isActive":true},"kind":"sampleDownload"},"metadata":{"role":"sampleCode","roleHeading":"WWDC22","modules":[{"name":"WWDC Notes"}],"title":"What‚Äôs new in WKWebView"},"sections":[],"primaryContentSections":[{"content":[{"type":"heading","anchor":"Web-content-interaction","level":2,"text":"Web content interaction"},{"type":"paragraph","inlineContent":[{"text":"Three new ways to interact with the web content in iOS 16:","type":"text"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Fullscreen API","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"CSS viewport units","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Find Interactions"}],"type":"paragraph"}]}]},{"type":"heading","anchor":"Fullscreen-API","level":3,"text":"Fullscreen API"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"JavaScript has been able to make HTML elements, like videos or canvas games, full screen in browsers, now they can do that in your apps too","type":"text"}]}]}]},{"type":"codeListing","syntax":"swift","code":["webView.configuration.preferences.isElementFullscreenEnabled = true","","webView.loadHTMLString(\"\"\"","<script>","  button.addEventListener('click', () => {","    canvas.webkitRequestFullscreen()","  }, false);","<\/script>","‚Ä¶","\"\"\", baseURL:nil)","","\/\/ üëáüèª use this if you want to customize the full screen transactions in your app","let observation = webView.observe(\\.fullscreenState, options: [.new]) { object, change in","  print(\"fullscreenState: \\(object.fullscreenState)\")","}"]},{"type":"heading","anchor":"CSS-viewport-units","level":3,"text":"CSS viewport units"},{"type":"paragraph","inlineContent":[{"type":"text","text":"New viewport units support:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"svw"},{"type":"text","text":", "},{"type":"codeVoice","code":"lvw"},{"type":"text","text":", "},{"type":"codeVoice","code":"dvw"},{"type":"text","text":" - smallest\/largest\/dynamic view port width"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"svh","type":"codeVoice"},{"text":", ","type":"text"},{"code":"lvh","type":"codeVoice"},{"text":", ","type":"text"},{"code":"dvh","type":"codeVoice"},{"text":" - smallest\/largest\/dynamic view port height","type":"text"}]}]},{"content":[{"inlineContent":[{"code":"svb","type":"codeVoice"},{"text":", ","type":"text"},{"code":"lvb","type":"codeVoice"},{"text":", ","type":"text"},{"code":"dvb","type":"codeVoice"},{"text":" - block","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"code":"svi","type":"codeVoice"},{"type":"text","text":", "},{"code":"lvi","type":"codeVoice"},{"type":"text","text":", "},{"code":"dvi","type":"codeVoice"},{"type":"text","text":" - inline"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"svmin"},{"type":"text","text":", "},{"type":"codeVoice","code":"lvmin"},{"type":"text","text":", "},{"type":"codeVoice","code":"dvmin"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"svmax","type":"codeVoice"},{"type":"text","text":", "},{"code":"lvmax","type":"codeVoice"},{"type":"text","text":", "},{"code":"dvmax","type":"codeVoice"}]}]}]},{"type":"codeListing","syntax":"swift","code":["let minimum = UIEdgeInsets(top: 0, left: 0, bottom: 30, right: 0)","let maximum = UIEdgeInsets(top: 0, left: 0, bottom: 200, right: 0)","webView.setMinimumViewportInset(minimum, maximumViewportInset: maximum)"]},{"type":"heading","anchor":"Find-interaction","level":3,"text":"Find interaction"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Find\/replace support","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"Using ","type":"text"},{"type":"codeVoice","code":"UIFindInteraction"},{"text":" with ","type":"text"},{"type":"codeVoice","code":"WKWebView"},{"text":":","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["webView.findInteractionEnabled = true","","if let interaction = webView.findInteraction {","  interaction.presentFindNavigator(showingReplace: false)","}"]},{"type":"heading","anchor":"Content-blocking","level":2,"text":"Content blocking"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"new capability to "},{"code":"WKContentRuleList","type":"codeVoice"},{"type":"text","text":", the API used to implement content blockers in Safari"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"you can run regular expressions on the URL of the current frame","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"Example: rule to block images only from frames containing Wikipedia:","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["let json = \"\"\"","[{","  \"action\":{\"type\":\"block\"},","  \"trigger\":{","    \"resource-type\":[\"image\"],","    \"url-filter\":\".*\",","    \"if-frame-url\":[\"https?:\/\/([^\/]*\\\\\\\\.)wikipedia.org\/\"]","  }","}]","\"\"\"","","WKContentRuleListStore.default().compileContentRuleList(forIdentifier: \"example_blocker\",","  encodedContentRuleList: json) { list, error in","  guard let list = list else { return }","  let configuration = WKWebViewConfiguration()","  configuration.userContentController.add(list)","}"]},{"level":2,"text":"Encrypted media","anchor":"Encrypted-media","type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"supported on iPadOS 16","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":2,"text":"Remote Web Inspector","anchor":"Remote-Web-Inspector","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"now supported"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":2,"text":"Written By","anchor":"Written-By","type":"heading"},{"type":"row","columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"identifier":"zntfdr","type":"image"}]}]},{"size":4,"content":[{"level":3,"type":"heading","text":"Federico Zanetello","anchor":"Federico-Zanetello"},{"inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"overridingTitle":"Contributed Notes"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/zntfdr"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/zntfdr.dev"}],"type":"paragraph"}]}],"numberOfColumns":5},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"level":2,"text":"Related Sessions","anchor":"Related-Sessions","type":"heading"},{"style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10048-Whats-new-in-Safari-and-WebKit"],"type":"links"},{"type":"small","inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright ¬© 2012 ‚Äì 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}]}],"kind":"content"}],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc22-10049-whats-new-in-wkwebview"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"WWDC22.jpeg":{"alt":null,"identifier":"WWDC22.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDC22.jpeg"}],"type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22":{"url":"\/documentation\/wwdcnotes\/wwdc22","role":"collectionGroup","abstract":[{"type":"text","text":"Xcode 14, Swift 5.7, iOS 16, macOS 13 (Ventura), tvOS 16, watchOS 9."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"WeatherKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"ScreenCaptureKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"Swift Regex"},{"type":"text","text":", and more."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22","type":"topic","title":"WWDC22","images":[{"type":"icon","identifier":"WWDC22-Icon.png"},{"type":"card","identifier":"WWDC22.jpeg"}],"kind":"article"},"zntfdr.jpeg":{"type":"image","identifier":"zntfdr.jpeg","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}],"alt":null},"https://zntfdr.dev":{"title":"Blog","identifier":"https:\/\/zntfdr.dev","titleInlineContent":[{"text":"Blog","type":"text"}],"url":"https:\/\/zntfdr.dev","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"type":"topic","url":"\/documentation\/wwdcnotes\/zntfdr","role":"sampleCode","title":"Federico Zanetello (332 notes)","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","kind":"article","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10048-Whats-new-in-Safari-and-WebKit":{"abstract":[{"type":"text","text":"Explore the latest features in Safari and WebKit and learn how you can make better and more powerful websites. We‚Äôll take you on a tour through the latest updates to HTML, CSS enhancements, Web Inspector tooling, Web APIs, and more."}],"kind":"article","role":"sampleCode","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc22-10048-whats-new-in-safari-and-webkit","title":"What‚Äôs new in Safari and WebKit","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10048-Whats-new-in-Safari-and-WebKit"},"zntfdr":{"alt":"Profile image of Federico Zanetello","identifier":"zntfdr","variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"type":"image"},"WWDCNotes.png":{"alt":null,"identifier":"WWDCNotes.png","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes.png"}],"type":"image"},"WWDC22-Icon.png":{"type":"image","identifier":"WWDC22-Icon.png","variants":[{"url":"\/images\/WWDC22-Icon.png","traits":["1x","light"]}],"alt":null},"https://developer.apple.com/wwdc22/10049":{"identifier":"https:\/\/developer.apple.com\/wwdc22\/10049","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc22\/10049","type":"download"},"https://github.com/zntfdr":{"title":"GitHub","identifier":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"text":"GitHub","type":"text"}],"url":"https:\/\/github.com\/zntfdr","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes":{"abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","kind":"symbol","title":"WWDC Notes","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes","type":"topic","role":"collection"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link"}}}