{"kind":"article","variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc18-220-high-performance-auto-layout"],"traits":[{"interfaceLanguage":"swift"}]}],"metadata":{"modules":[{"name":"WWDC Notes"}],"title":"High Performance Auto Layout","roleHeading":"WWDC18","role":"sampleCode"},"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18"]]},"primaryContentSections":[{"kind":"content","content":[{"level":2,"text":"Overview","anchor":"overview","type":"heading"},{"inlineContent":[{"text":"Lots of performance improvements (both within ","type":"text"},{"type":"codeVoice","code":"UIKit"},{"text":" and also at app level).","type":"text"}],"type":"paragraph"},{"text":"Render Loop","type":"heading","anchor":"Render-Loop","level":2},{"inlineContent":[{"text":"The Render Loop is the process that runs potentially at ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"120"}]},{"text":" times every  second (if your screen is ","type":"text"},{"code":"120Hz","type":"codeVoice"},{"text":"). That makes sure that all the content is ready to go for each frame.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The Render Loop consists of three phases:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Update Constraints"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Layout","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Display","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"type":"image","identifier":"WWDC18-220-renderLoop"}],"type":"paragraph"},{"text":"Update Constraints","type":"heading","anchor":"Update-Constraints","level":3},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Runs from the leaf most views up to the view hierarchy towards the window.","type":"text"}]}]}],"type":"unorderedList"},{"text":"Layout (sub layouts)","type":"heading","anchor":"Layout-sub-layouts","level":3},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Runs the opposite direction starting from the window going down towards the leaves."}],"type":"paragraph"}]}],"type":"unorderedList"},{"text":"Display","type":"heading","anchor":"Display","level":3},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Every view gets drawn (if necessary) from window going down"}]}]}],"type":"unorderedList"},{"text":"Autolayout","type":"heading","anchor":"Autolayout","level":2},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"It is suggested to use interface builder as much as possible to avoid auto layout performance issues","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Interesting behind the scenes of what happens when we activate a new constraint from 12:00 - 17:00"}]}]},{"content":[{"inlineContent":[{"text":"Don’t avoid using constraints","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Don’t wedge two layouts into one set of constraints: it creates a lot of false dependencies, and is difficult to debug","type":"text"},{"text":" ","type":"text"},{"text":"E.g.: final layout:","type":"text"},{"text":" ","type":"text"},{"type":"image","identifier":"WWDC18-220-final"},{"text":" ","type":"text"},{"text":"When actually it should have been two different layouts:","type":"text"},{"text":" ","type":"text"},{"type":"image","identifier":"WWDC18-220-better"}]}]},{"content":[{"inlineContent":[{"text":"When in need to change the layout, never remove all the constraints and add them back, change only the necessary ones.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"If a view doesn’t interact with the surrounding views, instead of adding it and removing it (along with its constraints), it’s much better to hide it (isHidden = true)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If you have shared constraints among your different layouts, initialize them once and never touch them again"}]}]}],"type":"unorderedList"},{"text":"Cost of constraints","type":"heading","anchor":"Cost-of-constraints","level":2},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Inequality: very little"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Constant: none","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Priority: needs some amount of work"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"How to measure? Instruments for Layout!"}],"type":"paragraph"},{"text":"`systemLayoutSizeFitting`","type":"heading","anchor":"systemLayoutSizeFitting","level":2},{"inlineContent":[{"type":"codeVoice","code":"systemLayoutSizeFitting:"},{"type":"text","text":" is expensive, as everytime the followings need to execute:"}],"type":"paragraph"},{"inlineContent":[{"identifier":"WWDC18-220-fit","type":"image"}],"type":"paragraph"},{"text":"Written By","type":"heading","anchor":"Written-By","level":2},{"columns":[{"size":1,"content":[{"inlineContent":[{"type":"image","identifier":"zntfdr"}],"type":"paragraph"}]},{"size":4,"content":[{"text":"Federico Zanetello","anchor":"Federico-Zanetello","level":3,"type":"heading"},{"inlineContent":[{"isActive":true,"type":"reference","overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/zntfdr"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/zntfdr.dev"}],"type":"paragraph"}]}],"type":"row","numberOfColumns":5},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true}],"type":"paragraph"},{"text":"Related Sessions","type":"heading","anchor":"Related-Sessions","level":2},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-201-Creating-Apps-for-a-Global-Audience","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-202-Whats-New-in-Cocoa-Touch"],"type":"links","style":"list"},{"inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}]}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"identifier":"https:\/\/developer.apple.com\/wwdc18\/220","type":"reference","overridingTitle":"Watch Video (40 min)","isActive":true}},"abstract":[{"type":"text","text":"Get a glimpse inside to find out what happens when you add a constraint! Dive into the internals of Auto Layout to develop intuition for how your code affects what happens under the hood. Learn how to measure and refine your approach to Auto Layout and see how its improved performance in iOS 12 will speed up your app."}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-220-High-Performance-Auto-Layout"},"sections":[],"references":{"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"type":"topic","url":"\/documentation\/wwdcnotes\/zntfdr","images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"title":"Federico Zanetello (332 notes)","kind":"article","role":"sampleCode"},"zntfdr.jpeg":{"variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"alt":null,"identifier":"zntfdr.jpeg","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18":{"title":"WWDC18","abstract":[{"text":"Xcode 10, Swift 4.2, iOS 12, macOS 10.14 (Mojave), tvOS 12, watchOS 5.","type":"text"}],"role":"collectionGroup","images":[{"identifier":"WWDC18-Icon.png","type":"icon"},{"identifier":"WWDC18.jpeg","type":"card"}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc18"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-202-Whats-New-in-Cocoa-Touch":{"abstract":[{"text":"iOS 12 enhances the Cocoa Touch frameworks to improve app performance and deliver exciting new features. Learn about performance best practices, security improvements, tools for supporting multiple screen sizes and shapes, new APIs for iMessage apps, Siri Shortcuts, and Swift refinements. Find out which sessions you won’t want to miss throughout the week.","type":"text"}],"url":"\/documentation\/wwdcnotes\/wwdc18-202-whats-new-in-cocoa-touch","kind":"article","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-202-Whats-New-in-Cocoa-Touch","title":"What’s New in Cocoa Touch","type":"topic"},"zntfdr":{"variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"alt":"Profile image of Federico Zanetello","identifier":"zntfdr","type":"image"},"WWDC18-220-final":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC18-220-final.png"}],"alt":null,"identifier":"WWDC18-220-final","type":"image"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link"},"https://developer.apple.com/wwdc18/220":{"checksum":null,"url":"https:\/\/developer.apple.com\/wwdc18\/220","identifier":"https:\/\/developer.apple.com\/wwdc18\/220","type":"download"},"WWDC18-Icon.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC18-Icon.png"}],"alt":null,"identifier":"WWDC18-Icon.png","type":"image"},"WWDCNotes.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes.png"}],"alt":null,"identifier":"WWDCNotes.png","type":"image"},"https://zntfdr.dev":{"title":"Blog","url":"https:\/\/zntfdr.dev","titleInlineContent":[{"type":"text","text":"Blog"}],"identifier":"https:\/\/zntfdr.dev","type":"link"},"WWDC18-220-fit":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC18-220-fit.png"}],"alt":null,"identifier":"WWDC18-220-fit","type":"image"},"WWDC18.jpeg":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC18.jpeg"}],"alt":null,"identifier":"WWDC18.jpeg","type":"image"},"WWDC18-220-better":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC18-220-better.png"}],"alt":null,"identifier":"WWDC18-220-better","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-201-Creating-Apps-for-a-Global-Audience":{"title":"Creating Apps for a Global Audience","url":"\/documentation\/wwdcnotes\/wwdc18-201-creating-apps-for-a-global-audience","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-201-Creating-Apps-for-a-Global-Audience","kind":"article","abstract":[{"type":"text","text":"Common assumptions can break when your app is used by a global audience. Learn about the many aspects of creating apps for different regions and languages. Understand how to use fonts and typography, layout techniques, and support text input so your app shines in all languages."}],"role":"sampleCode","type":"topic"},"https://github.com/zntfdr":{"title":"GitHub","url":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"type":"text","text":"GitHub"}],"identifier":"https:\/\/github.com\/zntfdr","type":"link"},"WWDC18-220-renderLoop":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC18-220-renderLoop.png"}],"alt":null,"identifier":"WWDC18-220-renderLoop","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes":{"role":"collection","type":"topic","url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"images":[{"identifier":"WWDCNotes.png","type":"icon"}],"kind":"symbol","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes"}}}