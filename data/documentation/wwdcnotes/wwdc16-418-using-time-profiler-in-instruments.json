{"primaryContentSections":[{"content":[{"anchor":"Intro-to-profiling","level":2,"type":"heading","text":"Intro to profiling"},{"inlineContent":[{"text":"How much and what kind of work is my app doing?","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The Call Tree displays counter of each calls, it doesn’t measure the duration of each calls, even ignore\/lose some quick\/short calls. So, it shows long running calls and the most repetitive calls."}],"type":"paragraph"},{"text":"Going faster","level":2,"type":"heading","anchor":"Going-faster"},{"items":[{"content":[{"inlineContent":[{"text":"Focused on an area of high CPU usage","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Zoom and Select area will help focus on the “Problems”, which filters out all other unrelevant calls."}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Examined the call tree, looking for where the work was happening","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Walked back to our code","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Inspected our code"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Made it faster","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Verified the changes","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Saved the user’s time","type":"text"}]}]}],"type":"unorderedList"},{"type":"heading","level":2,"anchor":"Doing-less","text":"Doing less"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Focused on low, but "},{"inlineContent":[{"type":"text","text":"unexpected"}],"type":"strong"},{"type":"text","text":" CPU usage"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Examined the call tree"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Determined the frameworks involved","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Stopped doing unnecessary work"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Verified the changes"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Improved battery life","type":"text"}]}]}],"type":"unorderedList"},{"type":"heading","level":2,"anchor":"Improving-responsiveness","text":"Improving responsiveness"},{"type":"heading","level":3,"anchor":"Problem-The-main-thread-does-all-the-UI-work","text":"Problem: The main thread does all the UI work"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Runloop waiting for events","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Sends events to your UIApplication instance"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Passes through the responder chain","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Your code gets invoked","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"heading","level":3,"anchor":"Phenomenon-When-busy-the-main-thread-cant-process-events","text":"Phenomenon: When busy, the main thread can’t process events"},{"items":[{"content":[{"inlineContent":[{"text":"The queue backs up","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Stuttering and hiccups"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"App becomes unresponsive"}]}]}],"type":"unorderedList"},{"type":"heading","level":3,"anchor":"What-to-Do-Keep-your-main-thread-Free","text":"What to Do: Keep your main thread Free"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Examined the CPU spikes"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Focused on the main thread"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Identified non-UI work happening on the main thread","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Distributed the work across multiple threads"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Verified the changes"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Achieved a better user experience"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"heading","level":2,"anchor":"Tips","text":"Tips"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Always profile release builds"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Always profile on the device","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Run with old devices","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Use large data sets where it makes sense"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Look for "},{"inlineContent":[{"type":"text","text":"poorly scaling code"}],"type":"strong"},{"type":"text","text":" (O(n^2), etc.)"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"heading","level":2,"anchor":"Summary","text":"Summary"},{"items":[{"content":[{"inlineContent":[{"text":"Optimize High CPU usage","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Remove Unexpected CPU usage"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Move heavy work away from main thread"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"heading","level":2,"anchor":"Written-By","text":"Written By"},{"numberOfColumns":5,"type":"row","columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"antonio081014"}]}]},{"size":4,"content":[{"type":"heading","level":3,"anchor":"Yi","text":"Yi"},{"type":"paragraph","inlineContent":[{"isActive":true,"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/antonio081014","overridingTitle":"Contributed Notes","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/antonio081014","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/medium.com\/@antonio081014","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/x.com\/antonio081014","type":"reference"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}]},{"type":"heading","level":2,"anchor":"Related-Sessions","text":"Related Sessions"},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-233-Adding-Delight-to-your-iOS-App","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-407-Practical-Approaches-to-Great-App-Performance","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16-721-Unified-Logging-and-Activity-Tracing"],"type":"links","style":"list"},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}],"kind":"content"}],"metadata":{"roleHeading":"WWDC16","role":"sampleCode","modules":[{"name":"WWDC Notes"}],"title":"Using Time Profiler in Instruments"},"kind":"article","abstract":[{"type":"text","text":"Learn how to make your apps faster and more efficient in this introduction to Time Profiler in Instruments. Walk through how to use Time Profiler to measure your app’s performance. Learn how Time Profiler works and can be used to identify problems and verify your fixes. Discover how easy it is to improve your app’s power usage and performance by using Instruments throughout your development process."}],"sections":[],"sampleCodeDownload":{"kind":"sampleDownload","action":{"isActive":true,"overridingTitle":"Watch Video (32 min)","type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc16\/418"}},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16-418-Using-Time-Profiler-in-Instruments"},"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16"]]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc16-418-using-time-profiler-in-instruments"]}],"references":{"antonio081014":{"variants":[{"url":"\/images\/antonio081014.jpeg","traits":["1x","light"]}],"alt":"Profile image of Yi","type":"image","identifier":"antonio081014"},"doc://WWDCNotes/documentation/WWDCNotes/antonio081014":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/antonio081014","role":"sampleCode","title":"Yi (16 notes)","url":"\/documentation\/wwdcnotes\/antonio081014","abstract":[{"text":"Reveal a brilliant idea in a very mobile engineer way.","type":"text"}],"images":[{"identifier":"antonio081014.jpeg","type":"card"},{"identifier":"antonio081014.jpeg","type":"icon"}],"type":"topic","kind":"article"},"doc://WWDCNotes/documentation/WWDCNotes":{"url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"title":"WWDC Notes","type":"topic","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"kind":"symbol","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","role":"collection"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"type":"link","title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"https://medium.com/@antonio081014":{"url":"https:\/\/medium.com\/@antonio081014","titleInlineContent":[{"type":"text","text":"Blog"}],"type":"link","title":"Blog","identifier":"https:\/\/medium.com\/@antonio081014"},"https://github.com/antonio081014":{"url":"https:\/\/github.com\/antonio081014","titleInlineContent":[{"type":"text","text":"GitHub"}],"type":"link","title":"GitHub","identifier":"https:\/\/github.com\/antonio081014"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC16-721-Unified-Logging-and-Activity-Tracing":{"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc16-721-unified-logging-and-activity-tracing","abstract":[{"type":"text","text":"The new Unified Logging and Tracing System for iOS and macOS uses Activity Tracing for performance, consolidates kernel and user-space logging, and has many other improvements. Learn how Logging and Tracing can help you debug and troubleshoot issues with your apps."}],"type":"topic","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16-721-Unified-Logging-and-Activity-Tracing","title":"Unified Logging and Activity Tracing"},"antonio081014.jpeg":{"variants":[{"url":"\/images\/antonio081014.jpeg","traits":["1x","light"]}],"alt":null,"type":"image","identifier":"antonio081014.jpeg"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-407-Practical-Approaches-to-Great-App-Performance":{"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc18-407-practical-approaches-to-great-app-performance","abstract":[{"type":"text","text":"All apps benefit from a focus on performance and an increase in overall responsiveness. This information packed session gives you strategies for fixing performance problems using Instruments and other tools. Additionally, get practical advice based on experience in tuning Apple’s own apps including Xcode and Photos on iOS."}],"role":"sampleCode","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-407-Practical-Approaches-to-Great-App-Performance","title":"Practical Approaches to Great App Performance"},"WWDC16-Icon.png":{"variants":[{"url":"\/images\/WWDC16-Icon.png","traits":["1x","light"]}],"alt":null,"type":"image","identifier":"WWDC16-Icon.png"},"https://x.com/antonio081014":{"url":"https:\/\/x.com\/antonio081014","titleInlineContent":[{"type":"text","text":"X\/Twitter"}],"type":"link","title":"X\/Twitter","identifier":"https:\/\/x.com\/antonio081014"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-233-Adding-Delight-to-your-iOS-App":{"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc18-233-adding-delight-to-your-ios-app","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-233-Adding-Delight-to-your-iOS-App","title":"Adding Delight to your iOS App","abstract":[{"text":"iOS contains powerful technologies you can use to make your app truly delightful. Learn how to take your app to the next level with easy-to-implement features such as Handoff and External Display support. Preserve that feeling of magic in your app with pro-tips that combine animations, gestures and layout, while keeping your scrolling smooth, and your code scalable. Dive into the anatomy of a launch to get your app responsive quickly, and learn some great debugging tricks from the pros!","type":"text"}],"role":"sampleCode"},"https://developer.apple.com/wwdc16/418":{"url":"https:\/\/developer.apple.com\/wwdc16\/418","type":"download","checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc16\/418"},"WWDCNotes.png":{"type":"image","alt":null,"identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC16":{"title":"WWDC16","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc16","abstract":[{"text":"Xcode 8, Swift 3.0, iOS 10, macOS 10.12 (Sierra), tvOS 10, watchOS 3.","type":"text"}],"role":"collectionGroup","type":"topic","images":[{"type":"icon","identifier":"WWDC16-Icon.png"},{"type":"card","identifier":"WWDC16.jpeg"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16"},"WWDC16.jpeg":{"type":"image","alt":null,"identifier":"WWDC16.jpeg","variants":[{"url":"\/images\/WWDC16.jpeg","traits":["1x","light"]}]}}}