{"metadata":{"role":"sampleCode","modules":[{"name":"WWDC Notes"}],"title":"Streamline your App Clip","roleHeading":"WWDC20"},"sections":[],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc20-10120-streamline-your-app-clip"]}],"sampleCodeDownload":{"action":{"identifier":"https:\/\/developer.apple.com\/wwdc20\/10120","isActive":true,"type":"reference","overridingTitle":"Watch Video (20 min)"},"kind":"sampleDownload"},"schemaVersion":{"patch":0,"major":0,"minor":3},"primaryContentSections":[{"content":[{"level":2,"text":"Best practices","type":"heading","anchor":"Best-practices"},{"items":[{"content":[{"inlineContent":[{"text":"interactions with clips need to be quick and focused","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"focus on essential tasks"}]}]},{"content":[{"inlineContent":[{"text":"when the App Clip launches, it should be usable right away (no splash screens\/downloads before the user can start using the App Clip)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"ask the user to sign-in after they completed their task","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"the main app should provide the same streamline experience of the App Clip (especially since the App Clip Experience will be launched in the app if the user has the app installed)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"use Sign in with Apple or ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/authenticationservices\/aswebauthenticationsession","isActive":true,"type":"reference"},{"text":" to authenticate the user","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"App Clips can request permissions for camera, microphone, and Bluetooth, these grants will be transferred to the main app if the user downloads it"}]}]}],"type":"unorderedList"},{"level":2,"text":"Streamlining transactions","type":"heading","anchor":"Streamlining-transactions"},{"level":3,"text":"Location","type":"heading","anchor":"Location"},{"inlineContent":[{"type":"text","text":"Instead of asking for location access, use specific URLs in nfc tags inside your business: this way you can skip this step as you know the user has scanned the tag at your business."}],"type":"paragraph"},{"inlineContent":[{"text":"In order to make this more secure, beside the nfc tag, when your App Clip receives the payload from a physical nfc tag, you can ask the system if the payload has been acquired at a specific location: this is there’s no user location access prompt  and it’s displayed in a callout in your App Clip Card:","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"image","identifier":"WWDC20-10120-locationCard"}],"type":"paragraph"},{"inlineContent":[{"text":"To opt-in into this behavior, set the boolean flag to 1 into your ","type":"text"},{"code":"info.plist","type":"codeVoice"},{"text":" for the key ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nsappclip\/nsappcliprequestlocationconfirmation","isActive":true,"type":"reference"},{"text":".","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"After the App Clip launches, you can ask the system for confirmation via the following code:"}],"type":"paragraph"},{"code":["import AppClip","","guard let payload = userActivity.appClipActivationPayload else {","    return","}","","let region = CLCircularRegion(","  center: CLLocationCoordinate2D(","    latitude: 37.3298193,        ","    longitude: -122.0071671","  ), ","  radius: 100, ","  identifier: \"apple_park\"",")","","payload.confirmAcquired(in: region) { inRegion, error in","  \/\/ inRegion == true means that the verification succeeded.","}"],"syntax":"swift","type":"codeListing"},{"level":3,"text":"Notifications","type":"heading","anchor":"Notifications"},{"inlineContent":[{"type":"text","text":"Similar to location, App Clips can bypass the prompt for notification authorization by setting the "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nsappclip\/nsappcliprequestephemeralusernotification","isActive":true},{"type":"text","text":" boolean key to 1."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"This will be shown to the user in the App Clip Card as well:"}],"type":"paragraph"},{"inlineContent":[{"identifier":"WWDC20-10120-notifiCard","type":"image"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"To verify if the user has granted this authorization:"}],"type":"paragraph"},{"code":["import UserNotifications","","let center = UNUserNotificationCenter.current()","","center.getNotificationSettings { (settings) in","  if settings.authorizationStatus == .ephemeral {","    \/\/ User has already granted ephemeral notification.","  }","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"Ephemeral (local) notifications can be sent up to 8 hours after the App Clip launch."}],"type":"paragraph"},{"level":2,"text":"Transition users to your app","type":"heading","anchor":"Transition-users-to-your-app"},{"inlineContent":[{"text":"After the user has downloaded the main app, you can transfer data from your App Clip to the main app.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"The way to do so is via a secured App Group.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"For example, this is how you use the App Group to store the Sign In With Apple credentials:","type":"text"}],"type":"paragraph"},{"code":["\/\/ App Clip code","\/\/ Automatically log in with Sign in with Apple","import AuthenticationServices","","SignInWithAppleButton(.signUp, onRequest: { _ in","}, onCompletion: { result in","    switch result {","    case .success(let authorization):","        guard let secureAppGroupURL = ","            FileManager.default.containerURL(forSecurityApplicationGroupIdentifier:","                \"group.com.example.apple-samplecode.fruta\")","            else { return };","        guard let credential = authorization.credential as? ASAuthorizationAppleIDCredential ","            else { return }","        save(userID: credential.user, in: secureAppGroupURL)","    case .failure(let error):","        print(error)","   }","})"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"In the main app this is how you fetch those credentials:"}],"type":"paragraph"},{"code":["\/\/ Main app code","","import AuthenticationServices","","let provider = ASAuthorizationAppleIDProvider()","guard let secureAppGroupURL =","    FileManager.default.containerURL(forSecurityApplicationGroupIdentifier:   ","        \"group.com.example.apple-samplecode.fruta\")","    else { return };","let user = readUserID(in: secureAppGroupURL)","provider.getCredentialState(forUserID: user) { state, error in","    if state == .authorized {","       loadFavoriteSmoothies(userID: user)","   }","}"],"syntax":"swift","type":"codeListing"},{"level":2,"text":"Written By","type":"heading","anchor":"Written-By"},{"columns":[{"size":1,"content":[{"inlineContent":[{"type":"image","identifier":"zntfdr"}],"type":"paragraph"}]},{"size":4,"content":[{"anchor":"Federico-Zanetello","type":"heading","text":"Federico Zanetello","level":3},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"overridingTitle":"Contributed Notes","isActive":true,"type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/zntfdr"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"https:\/\/zntfdr.dev"}]}]}],"type":"row","numberOfColumns":5},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"type":"reference","isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}],"type":"paragraph"},{"level":2,"text":"Related Sessions","type":"heading","anchor":"Related-Sessions"},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10118-Create-App-Clips-for-other-businesses","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10146-Configure-and-link-your-App-Clips","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10172-Design-great-App-Clips","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10174-Explore-App-Clips","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10661-Whats-new-with-inapp-purchase","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10666-Onetap-account-security-upgrades","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10676-Build-trust-through-better-privacy"],"type":"links","style":"list"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}],"kind":"content"}],"abstract":[{"text":"App Clips are best when they provide an “in the moment” experience for people using them, like ordering your favorite refreshing beverage or paying for parking. We’ll share guidelines and best practices for building focused and consistent App Clips, show you how to streamline transaction experiences by taking advantage of technologies like App Clip notifications and location confirmation, and explore how you can help people move from your App Clip over to your full app.","type":"text"}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10120-Streamline-your-App-Clip","interfaceLanguage":"swift"},"kind":"article","hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"]]},"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10676-Build-trust-through-better-privacy":{"role":"sampleCode","abstract":[{"type":"text","text":"Privacy is a more important issue than ever. Learn about Apple’s privacy pillars, our approach to privacy, and how to adopt the latest features on our platforms that can help you earn customer trust, create more personal experiences, and improve engagement. Explore the transparency iOS provides when your app is recording using the microphone or camera, control over location with approximate location, tracking transparency and permissions, and much more."}],"type":"topic","title":"Build trust through better privacy","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc20-10676-build-trust-through-better-privacy","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10676-Build-trust-through-better-privacy"},"https://developer.apple.com/documentation/bundleresources/information_property_list/nsappclip/nsappcliprequestlocationconfirmation":{"url":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nsappclip\/nsappcliprequestlocationconfirmation","titleInlineContent":[{"code":"NSAppClipRequestLocationConfirmation","type":"codeVoice"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nsappclip\/nsappcliprequestlocationconfirmation","title":"NSAppClipRequestLocationConfirmation"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10118-Create-App-Clips-for-other-businesses":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10118-Create-App-Clips-for-other-businesses","url":"\/documentation\/wwdcnotes\/wwdc20-10118-create-app-clips-for-other-businesses","role":"sampleCode","kind":"article","title":"Create App Clips for other businesses","abstract":[{"type":"text","text":"Create App Clips for table reservations, food ordering, and more on behalf of brands, businesses, or services that appear within your app. We’ll show you how you can deliver customized experiences for each business, offering them a unique look, invocation card, and icon — all within a single App Clips binary. Learn best practices for uploading unique metadata, handling links, routing notifications, and keeping track of session states. And discover different types of icons in the context of App Clips, where they appear, and how to customize them."}]},"doc://WWDCNotes/documentation/WWDCNotes":{"images":[{"type":"icon","identifier":"WWDCNotes.png"}],"type":"topic","url":"\/documentation\/wwdcnotes","role":"collection","title":"WWDC Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"kind":"symbol"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10172-Design-great-App-Clips":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10172-Design-great-App-Clips","kind":"article","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc20-10172-design-great-app-clips","title":"Design great App Clips","abstract":[{"type":"text","text":"App Clips offer fast, convenient ways for people to perform everyday tasks without needing to download or navigate your full app. We’ll show you how to identify key elements from your iOS app that make up a great App Clip, design a smooth flow, work with notifications, and provide messaging guidance when encouraging people to download your full app."}],"role":"sampleCode"},"WWDC20-10120-notifiCard":{"type":"image","variants":[{"url":"\/images\/WWDC20-10120-notifiCard.png","traits":["1x","light"]}],"alt":null,"identifier":"WWDC20-10120-notifiCard"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10146-Configure-and-link-your-App-Clips":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10146-Configure-and-link-your-App-Clips","url":"\/documentation\/wwdcnotes\/wwdc20-10146-configure-and-link-your-app-clips","role":"sampleCode","kind":"article","title":"Configure and link your App Clips","abstract":[{"type":"text","text":"App Clips are small parts of an app that offer a streamlined, direct experience and help people get what they need at the right time. Learn how you can invoke an App Clip through real-world experiences like App Clip Codes, NFC, and QR codes, or have them appear digitally through apps like Maps or Safari. We’ll show you how to handle links in your App Clip and demonstrate how to set up your associated domains. And discover how you can configure App Clip experiences in App Store Connect, add App Clip banners to your website, and thoroughly test your App Clips through TestFlight."}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10666-Onetap-account-security-upgrades":{"type":"topic","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10666-Onetap-account-security-upgrades","title":"One-tap account security upgrades","url":"\/documentation\/wwdcnotes\/wwdc20-10666-onetap-account-security-upgrades","kind":"article","abstract":[{"type":"text","text":"When you adopt the Account Authentication Modification Extension, you can provide people with fast, easy account security upgrades to use Sign in with Apple and strong passwords in the iCloud Keychain Password Manager. We’ll show you how to add these upgrade flows to your app with the Account Authentication Modification Extension, the AuthenticationServices Framework API, and best practices required for a smooth password transition."}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10661-Whats-new-with-inapp-purchase":{"type":"topic","title":"What’s new with in-app purchase","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10661-Whats-new-with-inapp-purchase","kind":"article","abstract":[{"text":"Create a great in-app purchase experience for your iPhone, iPad, Mac, and Apple Watch apps. Discover how to handle refunds, integrate new App Store server notifications, and find out how to use receipts and server notifications to manage subscriber status. We’ll also walk you through the latest updates in StoreKit, including in-app purchases on Apple Watch, Family Sharing, SKOverlay, SKAdNetwork, and more.","type":"text"}],"url":"\/documentation\/wwdcnotes\/wwdc20-10661-whats-new-with-inapp-purchase","role":"sampleCode"},"WWDC20-Icon.png":{"type":"image","variants":[{"url":"\/images\/WWDC20-Icon.png","traits":["1x","light"]}],"alt":null,"identifier":"WWDC20-Icon.png"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"type":"topic","title":"Federico Zanetello (332 notes)","url":"\/documentation\/wwdcnotes\/zntfdr","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}],"role":"sampleCode"},"WWDC20-10120-locationCard":{"type":"image","variants":[{"url":"\/images\/WWDC20-10120-locationCard.png","traits":["1x","light"]}],"alt":null,"identifier":"WWDC20-10120-locationCard"},"WWDCNotes.png":{"type":"image","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"alt":null,"identifier":"WWDCNotes.png"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10174-Explore-App-Clips":{"role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10174-Explore-App-Clips","title":"Explore App Clips","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc20-10174-explore-app-clips","abstract":[{"text":"Help people experience the right parts of your app at the exact moment they need them. We’ll explain how to design and build an App Clip — a small part of your app that focuses on a specific task — and make it easily discoverable. Learn how to focus your App Clip on short and fast interactions and identify contextually-relevant situations where you can surface it, like a search in Maps or at a real-world location through QR codes, NFC, or App Clip codes. Find out a few key differences between apps and App Clips, and explore how App Clips interact with their corresponding apps.","type":"text"}],"kind":"article"},"zntfdr.jpeg":{"type":"image","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}],"alt":null,"identifier":"zntfdr.jpeg"},"zntfdr":{"type":"image","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}],"alt":"Profile image of Federico Zanetello","identifier":"zntfdr"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"type":"link","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!"},"https://github.com/zntfdr":{"url":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"text":"GitHub","type":"text"}],"type":"link","identifier":"https:\/\/github.com\/zntfdr","title":"GitHub"},"https://developer.apple.com/documentation/authenticationservices/aswebauthenticationsession":{"url":"https:\/\/developer.apple.com\/documentation\/authenticationservices\/aswebauthenticationsession","titleInlineContent":[{"code":"ASWebAuthenticationSession","type":"codeVoice"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/authenticationservices\/aswebauthenticationsession","title":"ASWebAuthenticationSession"},"https://developer.apple.com/documentation/bundleresources/information_property_list/nsappclip/nsappcliprequestephemeralusernotification":{"url":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nsappclip\/nsappcliprequestephemeralusernotification","titleInlineContent":[{"code":"NSAppClipRequestEphemeralUserNotification","type":"codeVoice"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/bundleresources\/information_property_list\/nsappclip\/nsappcliprequestephemeralusernotification","title":"NSAppClipRequestEphemeralUserNotification"},"https://developer.apple.com/wwdc20/10120":{"url":"https:\/\/developer.apple.com\/wwdc20\/10120","type":"download","checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc20\/10120"},"WWDC20.jpeg":{"type":"image","variants":[{"url":"\/images\/WWDC20.jpeg","traits":["1x","light"]}],"alt":null,"identifier":"WWDC20.jpeg"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20":{"type":"topic","images":[{"identifier":"WWDC20-Icon.png","type":"icon"},{"identifier":"WWDC20.jpeg","type":"card"}],"title":"WWDC20","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20","kind":"article","abstract":[{"text":"Xcode 12, Swift 5.3, iOS 14, macOS 11 (Big Sur), tvOS 14, watchOS 7.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"type":"codeVoice","code":"WidgetKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit Testing"},{"type":"text","text":", and more."}],"url":"\/documentation\/wwdcnotes\/wwdc20","role":"collectionGroup"},"https://zntfdr.dev":{"url":"https:\/\/zntfdr.dev","titleInlineContent":[{"text":"Blog","type":"text"}],"type":"link","identifier":"https:\/\/zntfdr.dev","title":"Blog"}}}