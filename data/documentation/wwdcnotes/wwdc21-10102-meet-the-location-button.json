{"sections":[],"kind":"article","sampleCodeDownload":{"action":{"isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc21\/10102","type":"reference","overridingTitle":"Watch Video (13 min)"},"kind":"sampleDownload"},"metadata":{"role":"sampleCode","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC21","title":"Meet the Location Button"},"abstract":[{"type":"text","text":"Meet CLLocationButton: a secure interface element that provides an easy, low-friction way to grant your app location access only when and where it is needed. Learn how you can add CLLocationButton to new or existing code, how to customize it within interface legibility guidelines, how to recognize and address customization failures, and how it interacts with iOS’s traditional prompt-based Location Services authorization."}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc21-10102-meet-the-location-button"]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10102-Meet-the-Location-Button"},"schemaVersion":{"minor":3,"patch":0,"major":0},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","anchor":"overview","level":2,"text":"Overview"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"New quick authorization button:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/corelocationui\/cllocationbutton"},{"type":"text","text":" for UIKit"}]}]},{"content":[{"inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/corelocationui\/locationbutton"},{"type":"text","text":" for SwiftUI"}],"type":"paragraph"}]}]}]},{"content":[{"inlineContent":[{"text":"these buttons give your app Allow-Once authorization, without prompting user authorization every time it’s tapped","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"available on watchOS, iOS, macOS with Catalyst, and iPad apps on Mac"}]}]}]},{"type":"heading","anchor":"Customization","level":2,"text":"Customization"},{"type":"heading","anchor":"UIKit-CLLocationButton","level":3,"text":"(UIKit) CLLocationButton"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This is a UIButton with customizable parameters:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"CLLocationButtonIcon"},{"text":" to set the type of the arrow","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"CLLocationLabel"},{"type":"text","text":" to set the label of the button"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"cornerRadius"},{"type":"text","text":" to set the roundness of the button"}]}]},{"content":[{"inlineContent":[{"code":"fontSize","type":"codeVoice"},{"text":" to set the size of the label","type":"text"}],"type":"paragraph"}]}]},{"type":"heading","anchor":"SwiftUI-LocationButton","level":3,"text":"(SwiftUI) LocationButton"},{"type":"codeListing","syntax":"swift","code":["LocationButton(.currentLocation) { ","  \/\/ do something on button press...","}",".foregroundColor(.white)",".cornerRadius(15.0)",".labelStyle(.titleAndIcon)",".symbolVariant(.fill)",".tint(.blue)"]},{"type":"heading","anchor":"Warning","level":3,"text":"Warning"},{"type":"paragraph","inlineContent":[{"text":"Note that not all customization are possible, Xcode will warn you with log messages when the minimum requirements are not met, for example:","type":"text"}]},{"type":"codeListing","syntax":"lldb","code":["#locationButton rendering failed due to inappropriate sizes ","#locationButton rendering failed due to Insufficient Alpha","#locationButton rendering failed due to contrastRatio between tintColor and backgroundColor insufficient "]},{"type":"heading","anchor":"Prompt","level":2,"text":"Prompt"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"If your app already have any kind of location authorization, then the button will work right away","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"If your app doesn’t have any permission yet, tapping the location button will trigger a one-time prompt (which won’t be shown again when tapped again), see below","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"this same prompt is shown if the user previously denied your app location permission access","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC21-10102-oneTimePrompt"}]},{"type":"heading","anchor":"Written-By","level":2,"text":"Written By"},{"type":"row","columns":[{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"zntfdr"}]}],"size":1},{"content":[{"text":"Federico Zanetello","level":3,"type":"heading","anchor":"Federico-Zanetello"},{"inlineContent":[{"isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"overridingTitle":"Contributed Notes","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/zntfdr","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/zntfdr.dev","type":"reference"}],"type":"paragraph"}],"size":4}],"numberOfColumns":5},{"type":"paragraph","inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}]},{"type":"heading","anchor":"Related-Sessions","level":2,"text":"Related Sessions"},{"style":"list","type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10002-Whats-new-in-watchOS-8","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10059-Whats-new-in-UIKit","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10085-Apples-privacy-pillars-in-focus","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10660-Whats-new-in-location"]},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}]},{"type":"small","inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}]}]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"]]},"references":{"WWDCNotes.png":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes.png"}],"identifier":"WWDCNotes.png","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10085-Apples-privacy-pillars-in-focus":{"type":"topic","kind":"article","abstract":[{"text":"At Apple, we believe that privacy is a fundamental human right. Learn about our four pillars of privacy, how we brought these principles together to design iCloud Private Relay, and how you can approach building privacy in your app in line with those fundamentals. Explore how you can build data minimization, on-device processing, transparency and control, and security protections right into your app.","type":"text"}],"role":"sampleCode","title":"Apple’s privacy pillars in focus","url":"\/documentation\/wwdcnotes\/wwdc21-10085-apples-privacy-pillars-in-focus","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10085-Apples-privacy-pillars-in-focus"},"doc://WWDCNotes/documentation/WWDCNotes":{"title":"WWDC Notes","url":"\/documentation\/wwdcnotes","type":"topic","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"role":"collection","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","kind":"symbol"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10059-Whats-new-in-UIKit":{"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc21-10059-whats-new-in-uikit","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10059-Whats-new-in-UIKit","kind":"article","role":"sampleCode","abstract":[{"text":"Discover the latest updates and improvements to UIKit and learn how to build better iPadOS, iOS, and Mac Catalyst apps. We’ll take you through UI refinements, productivity updates, and API enhancements, and help you explore performance improvements and security & privacy features.","type":"text"}],"title":"What’s new in UIKit"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21":{"type":"topic","kind":"article","abstract":[{"type":"text","text":"Xcode 13, Swift 5.5, iOS 15, macOS 12 (Monterey), tvOS 15, watchOS 8."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"type":"codeVoice","code":"MusicKit"},{"type":"text","text":", "},{"type":"codeVoice","code":"DocC"},{"type":"text","text":", "},{"type":"codeVoice","code":"StoreKit 2"},{"type":"text","text":", and more."}],"images":[{"identifier":"WWDC21-Icon.png","type":"icon"},{"identifier":"WWDC21.jpeg","type":"card"}],"role":"collectionGroup","title":"WWDC21","url":"\/documentation\/wwdcnotes\/wwdc21","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"kind":"article","url":"\/documentation\/wwdcnotes\/zntfdr","type":"topic","images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","title":"Federico Zanetello (332 notes)","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"role":"sampleCode"},"https://developer.apple.com/documentation/corelocationui/cllocationbutton":{"title":"CLLocationButton","titleInlineContent":[{"type":"codeVoice","code":"CLLocationButton"}],"url":"https:\/\/developer.apple.com\/documentation\/corelocationui\/cllocationbutton","identifier":"https:\/\/developer.apple.com\/documentation\/corelocationui\/cllocationbutton","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10660-Whats-new-in-location":{"kind":"article","url":"\/documentation\/wwdcnotes\/wwdc20-10660-whats-new-in-location","role":"sampleCode","title":"What’s new in location","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10660-Whats-new-in-location","abstract":[{"text":"Location technologies are core to delivering context-based services within your app. Discover how the latest privacy controls in Core Location add a whole new dimension to determining position and what that means for your app. We’ll walk you through best practices for implementing these latest location updates and show you how they’re designed to ensure more people get an experience they’re going to love.","type":"text"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10002-Whats-new-in-watchOS-8":{"abstract":[{"text":"watchOS 8 brings all-new opportunities to keep people up to date on their watch face. With new APIs for the Always-On Retina display and updating complications from Bluetooth devices and background delivery of HealthKit data, it’s never been easier to keep your app up to date. Learn about region-based user notifications to leverage location in your app. Explore all the new enhancements to SwiftUI and watchOS that will get you excited to build your next Watch app.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10002-Whats-new-in-watchOS-8","role":"sampleCode","type":"topic","title":"What’s new in watchOS 8","url":"\/documentation\/wwdcnotes\/wwdc21-10002-whats-new-in-watchos-8","kind":"article"},"WWDC21-Icon.png":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC21-Icon.png"}],"identifier":"WWDC21-Icon.png","type":"image"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link"},"WWDC21.jpeg":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC21.jpeg"}],"identifier":"WWDC21.jpeg","type":"image"},"https://developer.apple.com/documentation/corelocationui/locationbutton":{"title":"LocationButton","titleInlineContent":[{"type":"codeVoice","code":"LocationButton"}],"url":"https:\/\/developer.apple.com\/documentation\/corelocationui\/locationbutton","identifier":"https:\/\/developer.apple.com\/documentation\/corelocationui\/locationbutton","type":"link"},"zntfdr.jpeg":{"alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"identifier":"zntfdr.jpeg","type":"image"},"https://github.com/zntfdr":{"title":"GitHub","titleInlineContent":[{"text":"GitHub","type":"text"}],"url":"https:\/\/github.com\/zntfdr","identifier":"https:\/\/github.com\/zntfdr","type":"link"},"https://zntfdr.dev":{"title":"Blog","titleInlineContent":[{"type":"text","text":"Blog"}],"url":"https:\/\/zntfdr.dev","identifier":"https:\/\/zntfdr.dev","type":"link"},"WWDC21-10102-oneTimePrompt":{"alt":null,"variants":[{"url":"\/images\/WWDC21-10102-oneTimePrompt.png","traits":["1x","light"]}],"identifier":"WWDC21-10102-oneTimePrompt","type":"image"},"https://developer.apple.com/wwdc21/10102":{"checksum":null,"url":"https:\/\/developer.apple.com\/wwdc21\/10102","identifier":"https:\/\/developer.apple.com\/wwdc21\/10102","type":"download"},"zntfdr":{"variants":[{"traits":["1x","light"],"url":"\/images\/zntfdr.jpeg"}],"alt":"Profile image of Federico Zanetello","identifier":"zntfdr","type":"image"}}}