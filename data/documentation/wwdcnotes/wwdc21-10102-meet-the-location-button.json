{"metadata":{"role":"sampleCode","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC21","title":"Meet the Location Button"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"]]},"schemaVersion":{"major":0,"patch":0,"minor":3},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10102-Meet-the-Location-Button","interfaceLanguage":"swift"},"primaryContentSections":[{"content":[{"text":"Overview","anchor":"overview","type":"heading","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"New quick authorization button:","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/corelocationui\/cllocationbutton","isActive":true,"type":"reference"},{"type":"text","text":" for UIKit"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/corelocationui\/locationbutton"},{"type":"text","text":" for SwiftUI"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"these buttons give your app Allow-Once authorization, without prompting user authorization every time it’s tapped","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"available on watchOS, iOS, macOS with Catalyst, and iPad apps on Mac"}],"type":"paragraph"}]}]},{"text":"Customization","anchor":"Customization","type":"heading","level":2},{"text":"(UIKit) CLLocationButton","anchor":"UIKit-CLLocationButton","type":"heading","level":3},{"inlineContent":[{"text":"This is a UIButton with customizable parameters:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"CLLocationButtonIcon"},{"type":"text","text":" to set the type of the arrow"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"CLLocationLabel"},{"text":" to set the label of the button","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"cornerRadius"},{"type":"text","text":" to set the roundness of the button"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"fontSize","type":"codeVoice"},{"type":"text","text":" to set the size of the label"}]}]}]},{"text":"(SwiftUI) LocationButton","anchor":"SwiftUI-LocationButton","type":"heading","level":3},{"type":"codeListing","syntax":"swift","code":["LocationButton(.currentLocation) { ","  \/\/ do something on button press...","}",".foregroundColor(.white)",".cornerRadius(15.0)",".labelStyle(.titleAndIcon)",".symbolVariant(.fill)",".tint(.blue)"]},{"text":"Warning","anchor":"Warning","type":"heading","level":3},{"inlineContent":[{"type":"text","text":"Note that not all customization are possible, Xcode will warn you with log messages when the minimum requirements are not met, for example:"}],"type":"paragraph"},{"type":"codeListing","syntax":"lldb","code":["#locationButton rendering failed due to inappropriate sizes ","#locationButton rendering failed due to Insufficient Alpha","#locationButton rendering failed due to contrastRatio between tintColor and backgroundColor insufficient "]},{"text":"Prompt","anchor":"Prompt","type":"heading","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"If your app already have any kind of location authorization, then the button will work right away","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"If your app doesn’t have any permission yet, tapping the location button will trigger a one-time prompt (which won’t be shown again when tapped again), see below"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"this same prompt is shown if the user previously denied your app location permission access","type":"text"}]}]}]},{"inlineContent":[{"identifier":"WWDC21-10102-oneTimePrompt","type":"image"}],"type":"paragraph"},{"text":"Written By","anchor":"Written-By","type":"heading","level":2},{"columns":[{"size":1,"content":[{"inlineContent":[{"identifier":"zntfdr","type":"image"}],"type":"paragraph"}]},{"size":4,"content":[{"type":"heading","level":3,"anchor":"Federico-Zanetello","text":"Federico Zanetello"},{"type":"paragraph","inlineContent":[{"overridingTitle":"Contributed Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","isActive":true,"type":"reference","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}]},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/github.com\/zntfdr","isActive":true,"type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"identifier":"https:\/\/zntfdr.dev","isActive":true,"type":"reference"}]}]}],"type":"row","numberOfColumns":5},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}],"type":"paragraph"},{"text":"Related Sessions","anchor":"Related-Sessions","type":"heading","level":2},{"type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10002-Whats-new-in-watchOS-8","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10059-Whats-new-in-UIKit","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10085-Apples-privacy-pillars-in-focus","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10660-Whats-new-in-location"],"style":"list"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}],"kind":"content"}],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc21-10102-meet-the-location-button"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"sampleCodeDownload":{"action":{"overridingTitle":"Watch Video (13 min)","isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc21\/10102"},"kind":"sampleDownload"},"abstract":[{"type":"text","text":"Meet CLLocationButton: a secure interface element that provides an easy, low-friction way to grant your app location access only when and where it is needed. Learn how you can add CLLocationButton to new or existing code, how to customize it within interface legibility guidelines, how to recognize and address customization failures, and how it interacts with iOS’s traditional prompt-based Location Services authorization."}],"kind":"article","references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC21":{"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21","title":"WWDC21","role":"collectionGroup","images":[{"identifier":"WWDC21-Icon.png","type":"icon"},{"identifier":"WWDC21.jpeg","type":"card"}],"abstract":[{"text":"Xcode 13, Swift 5.5, iOS 15, macOS 12 (Monterey), tvOS 15, watchOS 8.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"MusicKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"DocC","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit 2","type":"codeVoice"},{"text":", and more.","type":"text"}],"type":"topic","url":"\/documentation\/wwdcnotes\/wwdc21"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10059-Whats-new-in-UIKit":{"title":"What’s new in UIKit","abstract":[{"type":"text","text":"Discover the latest updates and improvements to UIKit and learn how to build better iPadOS, iOS, and Mac Catalyst apps. We’ll take you through UI refinements, productivity updates, and API enhancements, and help you explore performance improvements and security & privacy features."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10059-Whats-new-in-UIKit","type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc21-10059-whats-new-in-uikit","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10660-Whats-new-in-location":{"title":"What’s new in location","kind":"article","abstract":[{"text":"Location technologies are core to delivering context-based services within your app. Discover how the latest privacy controls in Core Location add a whole new dimension to determining position and what that means for your app. We’ll walk you through best practices for implementing these latest location updates and show you how they’re designed to ensure more people get an experience they’re going to love.","type":"text"}],"url":"\/documentation\/wwdcnotes\/wwdc20-10660-whats-new-in-location","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10660-Whats-new-in-location","type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10085-Apples-privacy-pillars-in-focus":{"title":"Apple’s privacy pillars in focus","type":"topic","kind":"article","abstract":[{"text":"At Apple, we believe that privacy is a fundamental human right. Learn about our four pillars of privacy, how we brought these principles together to design iCloud Private Relay, and how you can approach building privacy in your app in line with those fundamentals. Explore how you can build data minimization, on-device processing, transparency and control, and security protections right into your app.","type":"text"}],"role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc21-10085-apples-privacy-pillars-in-focus","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10085-Apples-privacy-pillars-in-focus"},"doc://WWDCNotes/documentation/WWDCNotes":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","role":"collection","title":"WWDC Notes","type":"topic","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"kind":"symbol","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"url":"\/documentation\/wwdcnotes"},"https://developer.apple.com/documentation/corelocationui/locationbutton":{"type":"link","url":"https:\/\/developer.apple.com\/documentation\/corelocationui\/locationbutton","identifier":"https:\/\/developer.apple.com\/documentation\/corelocationui\/locationbutton","titleInlineContent":[{"type":"codeVoice","code":"LocationButton"}],"title":"LocationButton"},"https://developer.apple.com/documentation/corelocationui/cllocationbutton":{"url":"https:\/\/developer.apple.com\/documentation\/corelocationui\/cllocationbutton","identifier":"https:\/\/developer.apple.com\/documentation\/corelocationui\/cllocationbutton","type":"link","titleInlineContent":[{"type":"codeVoice","code":"CLLocationButton"}],"title":"CLLocationButton"},"WWDC21.jpeg":{"type":"image","identifier":"WWDC21.jpeg","alt":null,"variants":[{"url":"\/images\/WWDC21.jpeg","traits":["1x","light"]}]},"WWDC21-10102-oneTimePrompt":{"identifier":"WWDC21-10102-oneTimePrompt","type":"image","alt":null,"variants":[{"url":"\/images\/WWDC21-10102-oneTimePrompt.png","traits":["1x","light"]}]},"zntfdr.jpeg":{"type":"image","identifier":"zntfdr.jpeg","alt":null,"variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}]},"zntfdr":{"identifier":"zntfdr","type":"image","alt":"Profile image of Federico Zanetello","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}]},"https://github.com/zntfdr":{"type":"link","url":"https:\/\/github.com\/zntfdr","identifier":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"type":"text","text":"GitHub"}],"title":"GitHub"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10002-Whats-new-in-watchOS-8":{"title":"What’s new in watchOS 8","kind":"article","role":"sampleCode","abstract":[{"text":"watchOS 8 brings all-new opportunities to keep people up to date on their watch face. With new APIs for the Always-On Retina display and updating complications from Bluetooth devices and background delivery of HealthKit data, it’s never been easier to keep your app up to date. Learn about region-based user notifications to leverage location in your app. Explore all the new enhancements to SwiftUI and watchOS that will get you excited to build your next Watch app.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10002-Whats-new-in-watchOS-8","url":"\/documentation\/wwdcnotes\/wwdc21-10002-whats-new-in-watchos-8","type":"topic"},"WWDC21-Icon.png":{"identifier":"WWDC21-Icon.png","type":"image","alt":null,"variants":[{"url":"\/images\/WWDC21-Icon.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"title":"Federico Zanetello (332 notes)","url":"\/documentation\/wwdcnotes\/zntfdr","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","kind":"article","role":"sampleCode","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}]},"https://developer.apple.com/wwdc21/10102":{"type":"download","url":"https:\/\/developer.apple.com\/wwdc21\/10102","identifier":"https:\/\/developer.apple.com\/wwdc21\/10102","checksum":null},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"title":"Contributions are welcome!"},"WWDCNotes.png":{"identifier":"WWDCNotes.png","type":"image","alt":null,"variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"https://zntfdr.dev":{"type":"link","url":"https:\/\/zntfdr.dev","identifier":"https:\/\/zntfdr.dev","titleInlineContent":[{"type":"text","text":"Blog"}],"title":"Blog"}}}