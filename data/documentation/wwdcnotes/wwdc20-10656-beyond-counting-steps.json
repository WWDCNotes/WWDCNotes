{"kind":"article","schemaVersion":{"minor":3,"patch":0,"major":0},"sections":[],"sampleCodeDownload":{"kind":"sampleDownload","action":{"identifier":"https:\/\/developer.apple.com\/wwdc20\/10656","type":"reference","isActive":true,"overridingTitle":"Watch Video (21 min)"}},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"]]},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10656-Beyond-counting-steps","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Move beyond step counting in your app and give people a much richer understanding of their mobility. We’ll detail how you can take advantage of mobility metrics in iOS and watchOS to measure movement in more distinct and actionable ways. Learn about the latest HealthKit APIs for accessing mobility data, strategies for meaningful data aggregation, and how to interpret results for people using your app."}],"metadata":{"role":"sampleCode","title":"Beyond counting steps","roleHeading":"WWDC20","modules":[{"name":"WWDC Notes"}]},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"Overview","anchor":"overview","level":2},{"type":"paragraph","inlineContent":[{"text":"Apple is introducing a category of metrics to HealthKit that captures the complex and important elements of human movement, all via iPhone (8 and later) and Apple Watch (4 and later).","type":"text"}]},{"type":"heading","text":"New Mobility metrics on iPhone","anchor":"New-Mobility-metrics-on-iPhone","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Walking speed (","type":"text"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3131040-walkingspeed","type":"reference"},{"text":"): Rate of travel over flat ground","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Step length ("},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552088-walkingsteplength"},{"type":"text","text":"): Distance between feet when walking"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Double support time (","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552087-walkingdoublesupportpercentage"},{"text":"): Percentage of time with two feet on the ground","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Walking asymmetry (","type":"text"},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552086-walkingasymmetrypercentage","isActive":true},{"text":"): Percentage of walking when left and tight step time are different","type":"text"}]}]}]},{"type":"heading","text":"New Mobility metrics on Apple Watch","anchor":"New-Mobility-metrics-on-Apple-Watch","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Stair speed up (","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552084-stairascentspeed","type":"reference","isActive":true},{"text":"): Rate of vertical ascent on stairs","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Stair speed down (","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552085-stairdescentspeed"},{"text":"): Rate of vertical descent on stairs","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Six-minute walk ("},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552083-sixminutewalktestdistance"},{"type":"text","text":"): Weekly estimate of distance that could be walked in six minutes on flat ground"}]}]}]},{"type":"heading","text":"How to read HealthKit data","anchor":"How-to-read-HealthKit-data","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Request authorization:"}]},{"type":"codeListing","code":["\/\/\/ Request authorization from the user ","self.healthStore = HKHealthStore() ","","let typesToRead: Set = [ ","  HKObjectType.quantityType(forIdentifier:-walkingSpeed)!","]","","self.healthStore.requestAuthorization(toShare: nil, read: typesToRead) { success, error in ","\tif !success, let error = error { ","    print(\"Authorization failed: \\(error.localizedDescription)\") ","  }","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Fetch the data of interest in the relevant time range:"}]},{"type":"codeListing","code":["\/\/ Select a time range ","let start = Calendar. current.date(byAdding: .day, value: -30, to: dateOfInjury)","let end = Calendar.current.date(byAdding: .day, value: 60, to: dateOfInjury)","","let datePredicate = HKQuery.predicateForSamples(withStart: start, end: end, options: []) ","","\/\/ Query walking speeds ","let walkSpeedType = HKSampleType.quantityType(forIdentifier: .walkingSpeed)!","let sortByStartDate = NSSortDescriptor(key: HKSampleSortIdentifierStartDate, ascending: true) ","","let query = HKSampleQuery(","\tsampleType: walkSpeedType, ","\tpredicate: datePredicate, ","\tlimit: HKObjectQueryNoLimit, ","  sortDescriptors: [sortByStartDate]) { _, samples, _ in","  visualizeWalkSpeeds(samples)","}","self.healthStore.execute(query) "],"syntax":"swift"},{"type":"heading","text":"Written By","anchor":"Written-By","level":2},{"type":"row","numberOfColumns":5,"columns":[{"content":[{"inlineContent":[{"identifier":"zntfdr","type":"image"}],"type":"paragraph"}],"size":1},{"content":[{"type":"heading","anchor":"Federico-Zanetello","text":"Federico Zanetello","level":3},{"inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"overridingTitle":"Contributed Notes","type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/github.com\/zntfdr","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/zntfdr.dev","isActive":true}],"type":"paragraph"}],"size":4}]},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}]},{"type":"heading","text":"Related Sessions","anchor":"Related-Sessions","level":2},{"type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10179-Whats-new-in-Core-Motion","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10287-Measure-health-with-motion","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10151-Whats-new-in-CareKit","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10182-Whats-new-in-HealthKit","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10184-Synchronize-health-data-with-HealthKit","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10216-Whats-new-in-ResearchKit","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10664-Getting-started-with-HealthKit"],"style":"list"},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc20-10656-beyond-counting-steps"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"https://developer.apple.com/documentation/healthkit/hkquantitytypeidentifier/3552088-walkingsteplength":{"title":".walkingStepLength","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552088-walkingsteplength","url":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552088-walkingsteplength","type":"link","titleInlineContent":[{"type":"codeVoice","code":".walkingStepLength"}]},"https://zntfdr.dev":{"title":"Blog","identifier":"https:\/\/zntfdr.dev","url":"https:\/\/zntfdr.dev","type":"link","titleInlineContent":[{"type":"text","text":"Blog"}]},"WWDCNotes.png":{"alt":null,"identifier":"WWDCNotes.png","type":"image","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"https://github.com/zntfdr":{"title":"GitHub","identifier":"https:\/\/github.com\/zntfdr","url":"https:\/\/github.com\/zntfdr","type":"link","titleInlineContent":[{"type":"text","text":"GitHub"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10216-Whats-new-in-ResearchKit":{"title":"What’s new in ResearchKit","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10216-Whats-new-in-ResearchKit","url":"\/documentation\/wwdcnotes\/wwdc20-10216-whats-new-in-researchkit","role":"sampleCode","abstract":[{"type":"text","text":"ResearchKit continues to simplify how developers build research and care apps. Explore how the latest ResearchKit updates expand the boundaries of data researchers can collect. Learn about features like enhanced onboarding, extended options for surveys, and new active tasks. Discover how Apple has partnered with the research community to leverage this framework, helping developers build game-changing apps that empower care teams and the research community."}],"type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10287-Measure-health-with-motion":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10287-Measure-health-with-motion","abstract":[{"text":"Discover how you can take your app’s health monitoring to the next level with motion data. Meet Walking Steadiness for iPhone and the six-minute-walk metric for Apple Watch: Walking Steadiness can help your app interpret someone’s quality of walking and risk of falling, while the six-minute-walk metric — along with the HealthKit estimate recalibration API — can track changes to walking endurance following acute events like surgery. We’ll show you how you can support these metrics and help provide actionable health data to people who use your app, helping improve patient care and clinical trials, especially as more services must be delivered remotely.","type":"text"}],"url":"\/documentation\/wwdcnotes\/wwdc21-10287-measure-health-with-motion","kind":"article","role":"sampleCode","title":"Measure health with motion"},"https://developer.apple.com/documentation/healthkit/hkquantitytypeidentifier/3552084-stairascentspeed":{"title":".stairAscentSpeed","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552084-stairascentspeed","url":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552084-stairascentspeed","type":"link","titleInlineContent":[{"type":"codeVoice","code":".stairAscentSpeed"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10151-Whats-new-in-CareKit":{"title":"What’s new in CareKit","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10151-Whats-new-in-CareKit","url":"\/documentation\/wwdcnotes\/wwdc20-10151-whats-new-in-carekit","role":"sampleCode","abstract":[{"type":"text","text":"Build feature-rich research and care apps with CareKit: Learn about the latest advancements to our health framework, including new views for its modular architecture, improvements to the data store, and tighter integration with other frameworks on iOS. And discover how the open-source community continues to leverage CareKit to allow developers to push the boundaries of digital health — all while preserving privacy."}],"type":"topic"},"doc://WWDCNotes/documentation/WWDCNotes":{"abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"type":"topic","kind":"symbol","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"title":"WWDC Notes","role":"collection","url":"\/documentation\/wwdcnotes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes"},"WWDC20-Icon.png":{"alt":null,"identifier":"WWDC20-Icon.png","type":"image","variants":[{"url":"\/images\/WWDC20-Icon.png","traits":["1x","light"]}]},"zntfdr.jpeg":{"alt":null,"identifier":"zntfdr.jpeg","type":"image","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}]},"https://developer.apple.com/documentation/healthkit/hkquantitytypeidentifier/3552083-sixminutewalktestdistance":{"title":".sixMinuteWalkTestDistance","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552083-sixminutewalktestdistance","url":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552083-sixminutewalktestdistance","type":"link","titleInlineContent":[{"type":"codeVoice","code":".sixMinuteWalkTestDistance"}]},"zntfdr":{"alt":"Profile image of Federico Zanetello","identifier":"zntfdr","type":"image","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10664-Getting-started-with-HealthKit":{"title":"Getting started with HealthKit","type":"topic","role":"sampleCode","abstract":[{"text":"HealthKit helps you build world-class health and fitness apps by centralizing health data from third-party apps, iPhone, Apple Watch, and external health devices. Discover how you can manage authorization and privacy around Health data, read and write data to the shared Health Store, and use HealthKit’s built-in queries to fetch data and calculate statistics for that data.","type":"text"}],"url":"\/documentation\/wwdcnotes\/wwdc20-10664-getting-started-with-healthkit","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10664-Getting-started-with-HealthKit"},"https://developer.apple.com/documentation/healthkit/hkquantitytypeidentifier/3552085-stairdescentspeed":{"title":".stairDescentSpeed","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552085-stairdescentspeed","url":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552085-stairdescentspeed","type":"link","titleInlineContent":[{"type":"codeVoice","code":".stairDescentSpeed"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10182-Whats-new-in-HealthKit":{"type":"topic","kind":"article","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10182-Whats-new-in-HealthKit","url":"\/documentation\/wwdcnotes\/wwdc20-10182-whats-new-in-healthkit","title":"What’s new in HealthKit","abstract":[{"text":"HealthKit is an essential framework that integrates first- and third-party health and fitness data to help people manage their personal health information. Learn about HealthKit’s latest updates, which provide read access to electrocardiograms on Apple Watch and log and track over a dozen new symptoms and their severity. We’ll also go through the latest mobility data types like walking speed and step length to help people monitor and understand their mobility over time.","type":"text"}]},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}]},"https://developer.apple.com/documentation/healthkit/hkquantitytypeidentifier/3552086-walkingasymmetrypercentage":{"title":".walkingAsymmetryPercentage","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552086-walkingasymmetrypercentage","url":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552086-walkingasymmetrypercentage","type":"link","titleInlineContent":[{"type":"codeVoice","code":".walkingAsymmetryPercentage"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20":{"url":"\/documentation\/wwdcnotes\/wwdc20","abstract":[{"text":"Xcode 12, Swift 5.3, iOS 14, macOS 11 (Big Sur), tvOS 14, watchOS 7.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"WidgetKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit Testing","type":"codeVoice"},{"text":", and more.","type":"text"}],"title":"WWDC20","type":"topic","images":[{"identifier":"WWDC20-Icon.png","type":"icon"},{"identifier":"WWDC20.jpeg","type":"card"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20","kind":"article","role":"collectionGroup"},"https://developer.apple.com/wwdc20/10656":{"checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc20\/10656","url":"https:\/\/developer.apple.com\/wwdc20\/10656","type":"download"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10179-Whats-new-in-Core-Motion":{"title":"What’s new in Core Motion","kind":"article","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10179-Whats-new-in-Core-Motion","role":"sampleCode","abstract":[{"type":"text","text":"Learn how you can use the latest Core Motion updates to expand how your app uses motion data. Discover how to stream higher-frequency sensor data when recording a HealthKit workout on Apple Watch. We’ll show you how you can get submersion data — including water depth and temperature — during water-based activities like snorkeling. Find out how to stream motion data like attitude, user acceleration, and rotation rate from audio devices like AirPods to connected devices like iPhone and Mac."}],"url":"\/documentation\/wwdcnotes\/wwdc23-10179-whats-new-in-core-motion"},"https://developer.apple.com/documentation/healthkit/hkquantitytypeidentifier/3131040-walkingspeed":{"title":".walkingspeed","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3131040-walkingspeed","url":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3131040-walkingspeed","type":"link","titleInlineContent":[{"type":"codeVoice","code":".walkingspeed"}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"images":[{"identifier":"zntfdr.jpeg","type":"card"},{"identifier":"zntfdr.jpeg","type":"icon"}],"type":"topic","url":"\/documentation\/wwdcnotes\/zntfdr","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","title":"Federico Zanetello (332 notes)","role":"sampleCode"},"WWDC20.jpeg":{"alt":null,"identifier":"WWDC20.jpeg","type":"image","variants":[{"url":"\/images\/WWDC20.jpeg","traits":["1x","light"]}]},"https://developer.apple.com/documentation/healthkit/hkquantitytypeidentifier/3552087-walkingdoublesupportpercentage":{"title":".walkingDoubleSupportPercentage","identifier":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552087-walkingdoublesupportpercentage","url":"https:\/\/developer.apple.com\/documentation\/healthkit\/hkquantitytypeidentifier\/3552087-walkingdoublesupportpercentage","type":"link","titleInlineContent":[{"type":"codeVoice","code":".walkingDoubleSupportPercentage"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10184-Synchronize-health-data-with-HealthKit":{"type":"topic","kind":"article","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10184-Synchronize-health-data-with-HealthKit","url":"\/documentation\/wwdcnotes\/wwdc20-10184-synchronize-health-data-with-healthkit","title":"Synchronize health data with HealthKit","abstract":[{"text":"HealthKit provides you the tools to smartly manage health data anywhere, whether across multiple HealthKit-enabled devices such as iPhone and Apple Watch or with an external server to share data across a care team. In this session, we’ll dive into managing data versions via HealthKit’s built-in sync identifier metadata, how to detect changes in health data using an HKAnchoredObjectQuery, and cover best practices for ensuring you’re always working with the right data everywhere.","type":"text"}]}}}