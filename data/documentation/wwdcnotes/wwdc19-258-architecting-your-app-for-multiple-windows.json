{"metadata":{"modules":[{"name":"WWDC Notes"}],"title":"Architecting Your App for Multiple Windows","roleHeading":"WWDC19","role":"sampleCode"},"schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"type":"text","text":"Dive into the details about what it means to support multitasking in iOS 13. Understand how previous best practices fit together with new ideas. Learn the nuances of structuring your application to support multiple windows, and how to instantiate your UI, handle windows coming and going, and manage your app’s underlying window resources."}],"sections":[],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc19-258-architecting-your-app-for-multiple-windows"]}],"kind":"article","hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19"]]},"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","type":"heading","level":2,"text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the new scene delegate based lifecycle:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"app delegate should still handle things like initializing\/cleaning up the whole process","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"it should not however handle things like setting up the UI or updating it when the app goes into foreground\/background - because this will now happen separately per session"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"additionally, application delegate is now notified when a scene is created or discarded","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"lifecycle delegate methods like "},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1623076-applicationwillenterforeground","type":"reference"},{"type":"text","text":", "},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622956-applicationdidbecomeactive","type":"reference"},{"type":"text","text":" etc. will not be called at all if scene lifecycle is enabled"}]}]}]},{"anchor":"Modern-lifecycle-flow","type":"heading","level":2,"text":"Modern lifecycle flow"},{"type":"paragraph","inlineContent":[{"text":"Starting the app:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"AppDelegate"},{"type":"text","text":": "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622921-application"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"AppDelegate"},{"type":"text","text":": "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/3197905-application"},{"type":"text","text":" "},{"type":"codeVoice","code":"->"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uisceneconfiguration"},{"type":"text","text":" - return configuration for the scene"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"SceneDelegate","type":"codeVoice"},{"type":"text","text":": "},{"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197914-scene","type":"reference","isActive":true},{"type":"text","text":" - this is where you set up your new scene"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Scene configuration ("},{"type":"reference","overridingTitle":"UISceneConfiguration","isActive":true,"overridingTitleInlineContent":[{"code":"UISceneConfiguration","type":"codeVoice"}],"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uisceneconfiguration"},{"type":"text","text":"): an object that describes the delegate class, storyboard etc. It’s either built dynamically, or (better) statically described in "},{"type":"codeVoice","code":"Info.plist"},{"type":"text","text":" and looked up by name using the constructor:"}]},{"syntax":"swift","type":"codeListing","code":["UISceneConfiguration(name: \"Default\", sessionRole: session.role)"]},{"type":"paragraph","inlineContent":[{"text":"Going to the background:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"SceneDelegate","type":"codeVoice"},{"text":": ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197919-scenewillresignactive"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"SceneDelegate"},{"type":"text","text":": "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197917-scenedidenterbackground","isActive":true}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"…"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"SceneDelegate"},{"type":"text","text":": "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197916-scenediddisconnect"},{"type":"text","text":" - after some time, the system will release your scene (including the delegate object and all views and VCs) to save memory; you should now release any objects loaded to build that piece of UI"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When the user force-closes a scene:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"AppDelegate","type":"codeVoice"},{"type":"text","text":": "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/3197906-application"},{"type":"text","text":" (may be called on the next launch instead)"}]}]}]},{"name":"Note","style":"note","type":"aside","content":[{"type":"paragraph","inlineContent":[{"type":"emphasis","inlineContent":[{"type":"text","text":"“State restoration is no longer a nicety”"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"Watch out for cases where a view controller needs to be updated if there are multiple scenes presenting the same view, which you might not have taken into account before - it’s better to only update the model and observe changes in the model, instead of updating the view directly when the user adds some new content.","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"pro tip: you can pass Swift-only objects like enums in "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsnotification","isActive":true},{"type":"text","text":" if you use them as the sending object instead of in "},{"type":"codeVoice","code":"userInfo"}]}]}]},{"anchor":"Written-By","type":"heading","level":2,"text":"Written By"},{"numberOfColumns":5,"type":"row","columns":[{"content":[{"inlineContent":[{"type":"image","identifier":"mackuba"}],"type":"paragraph"}],"size":1},{"content":[{"type":"heading","anchor":"Kuba-Suder","level":3,"text":"Kuba Suder"},{"inlineContent":[{"type":"reference","overridingTitle":"Contributed Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/mackuba","overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/github.com\/mackuba","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/x.com\/kuba_suder","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/mackuba.eu","isActive":true}],"type":"paragraph"}],"size":4}]},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}]},{"anchor":"Related-Sessions","type":"heading","level":2,"text":"Related Sessions"},{"type":"small","inlineContent":[{"inlineContent":[{"text":"Legal Notice","type":"text"}],"type":"strong"}]},{"type":"small","inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}]}]}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19-258-Architecting-Your-App-for-Multiple-Windows","interfaceLanguage":"swift"},"sampleCodeDownload":{"action":{"overridingTitle":"Watch Video (15 min)","type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/wwdc19\/258"},"kind":"sampleDownload"},"references":{"https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1622921-application":{"titleInlineContent":[{"code":"didFinishLaunchingWithOptions:","type":"codeVoice"}],"title":"didFinishLaunchingWithOptions:","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622921-application","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622921-application"},"https://developer.apple.com/documentation/uikit/uiapplicationdelegate/3197905-application":{"titleInlineContent":[{"code":"_:configurationForConnecting:options:","type":"codeVoice"}],"title":"_:configurationForConnecting:options:","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/3197905-application","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/3197905-application"},"https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1622956-applicationdidbecomeactive":{"titleInlineContent":[{"code":"applicationDidBecomeActive","type":"codeVoice"}],"title":"applicationDidBecomeActive","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622956-applicationdidbecomeactive","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1622956-applicationdidbecomeactive"},"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"images":[{"type":"icon","identifier":"WWDCNotes.png"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","kind":"symbol","url":"\/documentation\/wwdcnotes","title":"WWDC Notes","role":"collection"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC19":{"type":"topic","images":[{"identifier":"WWDC19-Icon.png","type":"icon"},{"identifier":"WWDC19.jpeg","type":"card"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC19","title":"WWDC19","url":"\/documentation\/wwdcnotes\/wwdc19","role":"collectionGroup","abstract":[{"type":"text","text":"Xcode 11, Swift 5.1, iOS 13, macOS 10.15 (Catalina), tvOS 13, watchOS 6."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"code":"Combine","type":"codeVoice"},{"type":"text","text":", "},{"code":"Core Haptics","type":"codeVoice"},{"type":"text","text":", "},{"code":"Create ML","type":"codeVoice"},{"type":"text","text":", and more."}],"kind":"article"},"WWDC19-Icon.png":{"alt":null,"type":"image","identifier":"WWDC19-Icon.png","variants":[{"url":"\/images\/WWDC19-Icon.png","traits":["1x","light"]}]},"mackuba.jpeg":{"alt":null,"type":"image","identifier":"mackuba.jpeg","variants":[{"url":"\/images\/mackuba.jpeg","traits":["1x","light"]}]},"https://developer.apple.com/documentation/uikit/uiscenedelegate/3197916-scenediddisconnect":{"titleInlineContent":[{"code":"sceneDidDisconnect","type":"codeVoice"}],"title":"sceneDidDisconnect","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197916-scenediddisconnect","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197916-scenediddisconnect"},"https://developer.apple.com/documentation/uikit/uiscenedelegate/3197919-scenewillresignactive":{"titleInlineContent":[{"code":"sceneWillResignActive","type":"codeVoice"}],"title":"sceneWillResignActive","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197919-scenewillresignactive","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197919-scenewillresignactive"},"https://github.com/mackuba":{"titleInlineContent":[{"type":"text","text":"GitHub"}],"title":"GitHub","type":"link","identifier":"https:\/\/github.com\/mackuba","url":"https:\/\/github.com\/mackuba"},"https://developer.apple.com/documentation/uikit/uisceneconfiguration":{"titleInlineContent":[{"code":"UISceneConfiguration","type":"codeVoice"}],"title":"UISceneConfiguration","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uisceneconfiguration","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uisceneconfiguration"},"https://mackuba.eu":{"titleInlineContent":[{"type":"text","text":"Blog"}],"title":"Blog","type":"link","identifier":"https:\/\/mackuba.eu","url":"https:\/\/mackuba.eu"},"mackuba":{"alt":"Profile image of Kuba Suder","type":"image","identifier":"mackuba","variants":[{"url":"\/images\/mackuba.jpeg","traits":["1x","light"]}]},"https://developer.apple.com/documentation/uikit/uiapplicationdelegate/3197906-application":{"titleInlineContent":[{"code":"_:didDiscardSceneSessions:","type":"codeVoice"}],"title":"_:didDiscardSceneSessions:","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/3197906-application","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/3197906-application"},"https://x.com/kuba_suder":{"titleInlineContent":[{"type":"text","text":"X\/Twitter"}],"title":"X\/Twitter","type":"link","identifier":"https:\/\/x.com\/kuba_suder","url":"https:\/\/x.com\/kuba_suder"},"doc://WWDCNotes/documentation/WWDCNotes/mackuba":{"type":"topic","images":[{"identifier":"mackuba.jpeg","type":"card"},{"identifier":"mackuba.jpeg","type":"icon"}],"title":"Kuba Suder (16 notes)","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/mackuba","url":"\/documentation\/wwdcnotes\/mackuba","role":"sampleCode","abstract":[{"type":"text","text":"Independent Mac & iOS developer. Sometimes freelancing, mostly working on my own stuff these days."}]},"WWDCNotes.png":{"alt":null,"type":"image","identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"https://developer.apple.com/documentation/foundation/nsnotification":{"titleInlineContent":[{"code":"NSNotification","type":"codeVoice"}],"title":"NSNotification","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsnotification","url":"https:\/\/developer.apple.com\/documentation\/foundation\/nsnotification"},"https://developer.apple.com/documentation/uikit/uiscenedelegate/3197914-scene":{"titleInlineContent":[{"code":"_:willConnectTo:options:","type":"codeVoice"}],"title":"_:willConnectTo:options:","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197914-scene","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197914-scene"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"title":"Contributions are welcome!","type":"link","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"https://developer.apple.com/documentation/uikit/uiscenedelegate/3197917-scenedidenterbackground":{"titleInlineContent":[{"code":"sceneDidEnterBackground","type":"codeVoice"}],"title":"sceneDidEnterBackground","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197917-scenedidenterbackground","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiscenedelegate\/3197917-scenedidenterbackground"},"https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623076-applicationwillenterforeground":{"titleInlineContent":[{"code":"applicationWillEnterForeground","type":"codeVoice"}],"title":"applicationWillEnterForeground","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1623076-applicationwillenterforeground","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiapplicationdelegate\/1623076-applicationwillenterforeground"},"WWDC19.jpeg":{"alt":null,"type":"image","identifier":"WWDC19.jpeg","variants":[{"url":"\/images\/WWDC19.jpeg","traits":["1x","light"]}]},"https://developer.apple.com/wwdc19/258":{"type":"download","identifier":"https:\/\/developer.apple.com\/wwdc19\/258","url":"https:\/\/developer.apple.com\/wwdc19\/258","checksum":null}}}