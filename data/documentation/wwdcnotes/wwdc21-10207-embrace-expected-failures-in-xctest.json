{"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"Overview","anchor":"overview","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Why do we test? → To discover bugs before we ship and not afterwards"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Testing is an investment, so let’s maximize our returns while minimizing our costs","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"New failures are valuable: indicates a flaw in product, tests or dependencies","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Ideally, new failures should be fixed fast, re-appearing failures are “noisy” though","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Disabling: Test code with compile, but reduces visibility as an issue that needs resolve"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"XCTSkip"},{"type":"text","text":": Builds and executes, so included in test reports, but skips some useful parts"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"New "},{"type":"codeVoice","code":"XCTExpectFailure"},{"type":"text","text":": test executes normally, fails as “expected”, but suite passes"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Allows for adding a link in "},{"type":"codeVoice","code":"<>"},{"type":"text","text":" to issue tracker, test report shows a bug button to get to it"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Stateful: Add ","type":"text"},{"code":"XCTExpectFailure","type":"codeVoice"},{"text":" to the beginning of test method, marks whole method","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Scoped: Add failing code as trailing closure to ","type":"text"},{"code":"XCTExpectFailure","type":"codeVoice"},{"text":" only ignores that part","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Use the scoped variant for shared\/reused code, such as utility code","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Possible to define "},{"code":"XCTExpectedFailure.Options","type":"codeVoice"},{"type":"text","text":" with "},{"code":"issueMatcher","type":"codeVoice"},{"type":"text","text":" to control match"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"E.g. "},{"type":"codeVoice","code":"options.isEnabled"},{"type":"text","text":" only set on a specific platform (where it’s failing)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"XCTExpectFailure","type":"codeVoice"},{"text":" by default is ","type":"text"},{"code":"strict","type":"codeVoice"},{"text":" and expects a test to actually fail","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"For non-deterministically flickering tests, set "},{"code":"isStrict","type":"codeVoice"},{"type":"text","text":" to false, has convenience parameter"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Use test repetitions to debug them, see “Diagnose unreliable code with test repetitions”","type":"text"}],"type":"paragraph"}]}]},{"type":"heading","text":"Written By","anchor":"Written-By","level":2},{"type":"row","numberOfColumns":5,"columns":[{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"Jeehut"}]}],"size":1},{"content":[{"text":"Cihat Gündüz","anchor":"Cihat-G%C3%BCnd%C3%BCz","level":3,"type":"heading"},{"inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","type":"reference","overridingTitle":"Contributed Notes"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/Jeehut","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/fline.dev","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/x.com\/Jeehut","type":"reference"}],"type":"paragraph"}],"size":4}]},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference"}]},{"type":"heading","text":"Related Sessions","anchor":"Related-Sessions","level":2},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110361-Author-fast-and-reliable-tests-for-Xcode-Cloud","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10208-Explore-Digital-Crown-Trackpad-and-iPad-pointer-automation","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10296-Diagnose-unreliable-code-with-test-repetitions"]},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2025 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc21\/10207","isActive":true,"overridingTitle":"Watch Video (11 min)"}},"metadata":{"role":"sampleCode","title":"Embrace Expected Failures in XCTest","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC21"},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10207-Embrace-Expected-Failures-in-XCTest","interfaceLanguage":"swift"},"schemaVersion":{"minor":3,"patch":0,"major":0},"kind":"article","sections":[],"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc21-10207-embrace-expected-failures-in-xctest"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21"]]},"abstract":[{"type":"text","text":"Testing is a crucial part of building a great app: Great tests can help you track down important issues before release, improve your workflow, and provide a quality experience upon release. For issues that can’t be immediately resolved, however, XCTest can help provide better context around those problems with XCTExpectFailure. Learn how this API works, its strict behavior, and how to improve the signal-to-noise ratio in your tests to identify new issues more efficiently."}],"references":{"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}]},"WWDC21-Icon.png":{"type":"image","identifier":"WWDC21-Icon.png","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC21-Icon.png"}]},"https://fline.dev":{"titleInlineContent":[{"type":"text","text":"Blog"}],"url":"https:\/\/fline.dev","type":"link","identifier":"https:\/\/fline.dev","title":"Blog"},"https://github.com/Jeehut":{"title":"GitHub","url":"https:\/\/github.com\/Jeehut","identifier":"https:\/\/github.com\/Jeehut","type":"link","titleInlineContent":[{"type":"text","text":"GitHub"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-110361-Author-fast-and-reliable-tests-for-Xcode-Cloud":{"role":"sampleCode","abstract":[{"type":"text","text":"Discover how you can create effective testing plans for Xcode Cloud, Apple’s continuous integration and continuous delivery service. We’ll show you how testing can be an essential tool to consistently verify your code works correctly. Learn how you can author fast, reliable, and efficient tests for Xcode Cloud, avoid irrelevant failures, and verify your code changes quickly."}],"type":"topic","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc22-110361-author-fast-and-reliable-tests-for-xcode-cloud","title":"Author fast and reliable tests for Xcode Cloud","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-110361-Author-fast-and-reliable-tests-for-Xcode-Cloud"},"WWDCNotes.png":{"type":"image","identifier":"WWDCNotes.png","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}]},"WWDC21.jpeg":{"variants":[{"url":"\/images\/WWDCNotes\/WWDC21.jpeg","traits":["1x","light"]}],"alt":null,"type":"image","identifier":"WWDC21.jpeg"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10208-Explore-Digital-Crown-Trackpad-and-iPad-pointer-automation":{"role":"sampleCode","kind":"article","url":"\/documentation\/wwdcnotes\/wwdc21-10208-explore-digital-crown-trackpad-and-ipad-pointer-automation","type":"topic","title":"Explore Digital Crown, Trackpad, and iPad pointer automation","abstract":[{"type":"text","text":"Learn how you can interact with devices in UI Tests in Xcode 13. Discover newly-automatable input methods including iPadOS pointer, watchOS Digital Crown, and enhanced macOS trackpad scrolling APIs."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10208-Explore-Digital-Crown-Trackpad-and-iPad-pointer-automation"},"doc://WWDCNotes/documentation/WWDCNotes":{"kind":"symbol","role":"collection","title":"WWDC Notes","type":"topic","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"url":"\/documentation\/wwdcnotes"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21","url":"\/documentation\/wwdcnotes\/wwdc21","kind":"article","type":"topic","title":"WWDC21","abstract":[{"text":"Xcode 13, Swift 5.5, iOS 15, macOS 12 (Monterey), tvOS 15, watchOS 8.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"MusicKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"DocC","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit 2","type":"codeVoice"},{"text":", and more.","type":"text"}],"role":"collectionGroup","images":[{"type":"icon","identifier":"WWDC21-Icon.png"},{"type":"card","identifier":"WWDC21.jpeg"}]},"Jeehut":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/Jeehut.jpeg"}],"identifier":"Jeehut","type":"image","alt":"Profile image of Cihat Gündüz"},"https://developer.apple.com/wwdc21/10207":{"type":"download","identifier":"https:\/\/developer.apple.com\/wwdc21\/10207","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc21\/10207"},"https://x.com/Jeehut":{"titleInlineContent":[{"type":"text","text":"X\/Twitter"}],"url":"https:\/\/x.com\/Jeehut","type":"link","identifier":"https:\/\/x.com\/Jeehut","title":"X\/Twitter"},"doc://WWDCNotes/documentation/WWDCNotes/Jeehut":{"url":"\/documentation\/wwdcnotes\/jeehut","type":"topic","title":"Cihat Gündüz (64 notes)","images":[{"type":"card","identifier":"Jeehut.jpeg"},{"type":"icon","identifier":"Jeehut.jpeg"}],"abstract":[{"text":"Spatial-first Indie Developer for  Platforms. Actively contributing to Open Source since 2011!","type":"text"}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10296-Diagnose-unreliable-code-with-test-repetitions":{"type":"topic","kind":"article","abstract":[{"text":"Test repetitions can help you debug even the most unreliable code. Discover how you can use the maximum repetitions, until failure, and retry on failure testing modes within test plans, Xcode, and xcodebuild to track down bugs and crashers and make your app more stable for everyone.","type":"text"}],"url":"\/documentation\/wwdcnotes\/wwdc21-10296-diagnose-unreliable-code-with-test-repetitions","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10296-Diagnose-unreliable-code-with-test-repetitions","title":"Diagnose unreliable code with test repetitions"},"Jeehut.jpeg":{"type":"image","identifier":"Jeehut.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/Jeehut.jpeg","traits":["1x","light"]}]}}}