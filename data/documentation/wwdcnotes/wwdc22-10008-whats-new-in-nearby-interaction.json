{"metadata":{"modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC22","role":"sampleCode","title":"What‚Äôs new in Nearby Interaction"},"abstract":[{"text":"Discover how the Nearby Interaction framework can help you easily integrate Ultra Wideband (UWB) into your apps and hardware accessories. Learn how you can combine the visual-spatial power of ARKit with the radio sensitivity of the U1 chip to locate nearby stationary objects with precision. We‚Äôll also show you how you can create background interactions using UWB accessories paired via Bluetooth.","type":"text"}],"schemaVersion":{"major":0,"minor":3,"patch":0},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10008-Whats-new-in-Nearby-Interaction","interfaceLanguage":"swift"},"sampleCodeDownload":{"action":{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc22\/10008","overridingTitle":"Watch Video (28 min)","isActive":true},"kind":"sampleDownload"},"kind":"article","sections":[],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc22-10008-whats-new-in-nearby-interaction"]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22"]]},"primaryContentSections":[{"content":[{"text":"Overview","level":2,"type":"heading","anchor":"overview"},{"name":"Note","content":[{"inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/nearbyinteraction\/finding_stationary_objects_with_precision","isActive":true,"type":"reference"}],"type":"paragraph"}],"type":"aside","style":"note"},{"text":"ARKit-enhanced Nearby Interaction","level":2,"type":"heading","anchor":"ARKit-enhanced-Nearby-Interaction"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"leverages the same underlying technology that powers Precision Finding with AirTag"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"available via Nearby Interaction","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"distance and direction information is more consistently available than using Nearby Interaction alone"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"best for use cases that need to guide a user to a specific nearby object","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"best used for interacting with stationary devices","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Requires "},{"type":"codeVoice","code":"NSCameraUsageDescription"},{"type":"text","text":" purpose string in "},{"type":"text","text":"Info.plist"}]}]}],"type":"unorderedList"},{"inlineContent":[{"text":"Enable this via the new ","type":"text"},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/nearbyinteraction\/ninearbypeerconfiguration","isActive":true},{"text":"‚Äôs ","type":"text"},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/nearbyinteraction\/ninearbypeerconfiguration\/4013050-iscameraassistanceenabled","isActive":true},{"text":" property","type":"text"}],"type":"paragraph"},{"code":["let session = NISession()","","let configuration = NINearbyPeerConfiguration(..)","configuration.isCameraAssistanceEnabled = true \/\/ üëàüèª","","session.run(configuration)"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"text":"‚ö†Ô∏è Only a single ","type":"text"},{"type":"codeVoice","code":"ARSession"},{"text":" can be running for a given application.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"If you already have an ARKit experience in your app, it is necessary to share that ","type":"text"},{"code":"ARSession","type":"codeVoice"},{"text":" with the ","type":"text"},{"code":"NISession","type":"codeVoice"},{"text":":","type":"text"}],"type":"paragraph"},{"code":["let niSession = NISession()","","let arView = ARView(frame: .zero)","niSession.setARSesion(arView.session) \/\/ üëàüèª"],"type":"codeListing","syntax":"swift"},{"text":"Background sessions","level":2,"type":"heading","anchor":"Background-sessions"},{"inlineContent":[{"type":"text","text":"Until now, when the app transitions to the background, or when the user locks the screen on iOS and watchOS, any running "},{"type":"codeVoice","code":"NISession"},{"type":"text","text":"s are suspended until the application returns to the foreground."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"In iOS 16, we can connect to devices via BLE and then run a NISession in the background:"}],"type":"paragraph"},{"code":["var niSession = NISession()","","func runBackgroundSession(accessoryData: Data, peripheral: CBPeripheral) {","  \/\/ Provide the accessory's UWB configuration data, and its Bluetooth peer identifier","  let peerIdentifier = peripheral.identifier","  let config = NINearbyAccessoryConfiguration(","    accessoryData: accessoryData,","    bluetoothPeerIdentifier: peerIdentifier","  )","  session.run(config)","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"text":"This helps create ‚Äúhands-free‚Äù experiences, like having music start playing as soon as the user walks into a room.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"This background mode requires the "},{"type":"codeVoice","code":"Nearby Interaction"},{"type":"text","text":" string in the "},{"type":"codeVoice","code":"UIBackgroundModes"},{"type":"text","text":" array in your app‚Äôs "},{"type":"text","text":"Info.plist"}],"type":"paragraph"},{"text":"Third-party hardware","level":2,"type":"heading","anchor":"Third-party-hardware"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"U1-compatible development kits out of beta","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Updated specification for accessory manufacturers"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"Check the ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/nearby-interaction"},{"text":" for more details.","type":"text"}],"type":"paragraph"},{"text":"Written By","level":2,"type":"heading","anchor":"Written-By"},{"numberOfColumns":5,"columns":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","type":"image"}]}],"size":1},{"content":[{"level":3,"type":"heading","text":"Federico Zanetello","anchor":"Federico-Zanetello"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"isActive":true,"overridingTitle":"Contributed Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/zntfdr","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/zntfdr.dev","type":"reference"}]}],"size":4}],"type":"row"},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}],"type":"paragraph"},{"text":"Related Sessions","level":2,"type":"heading","anchor":"Related-Sessions"},{"items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10165-Explore-Nearby-Interaction-with-thirdparty-accessories","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10245-Design-for-spatial-interaction","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10668-Meet-Nearby-Interaction"],"type":"links","style":"list"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}],"type":"small"},{"inlineContent":[{"text":"All content copyright ¬© 2012 ‚Äì 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}],"kind":"content"}],"references":{"https://developer.apple.com/wwdc22/10008":{"type":"download","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc22\/10008","identifier":"https:\/\/developer.apple.com\/wwdc22\/10008"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22":{"kind":"article","type":"topic","role":"collectionGroup","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"url":"\/documentation\/wwdcnotes\/wwdc22","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22","title":"WWDC22","abstract":[{"type":"text","text":"Xcode 14, Swift 5.7, iOS 16, macOS 13 (Ventura), tvOS 16, watchOS 9."},{"type":"text","text":" "},{"text":"New APIs: ","type":"text"},{"code":"WeatherKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"ScreenCaptureKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Swift Regex","type":"codeVoice"},{"text":", and more.","type":"text"}]},"doc://WWDCNotes/documentation/WWDCNotes":{"kind":"symbol","title":"WWDC Notes","url":"\/documentation\/wwdcnotes","type":"topic","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"images":[{"identifier":"WWDCNotes.png","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","role":"collection"},"https://developer.apple.com/documentation/nearbyinteraction/finding_stationary_objects_with_precision":{"type":"link","title":"Sample app","url":"https:\/\/developer.apple.com\/documentation\/nearbyinteraction\/finding_stationary_objects_with_precision","identifier":"https:\/\/developer.apple.com\/documentation\/nearbyinteraction\/finding_stationary_objects_with_precision","titleInlineContent":[{"type":"text","text":"Sample app"}]},"https://developer.apple.com/documentation/nearbyinteraction/ninearbypeerconfiguration":{"type":"link","title":"NINearbyPeerConfiguration","url":"https:\/\/developer.apple.com\/documentation\/nearbyinteraction\/ninearbypeerconfiguration","identifier":"https:\/\/developer.apple.com\/documentation\/nearbyinteraction\/ninearbypeerconfiguration","titleInlineContent":[{"type":"codeVoice","code":"NINearbyPeerConfiguration"}]},"https://developer.apple.com/documentation/nearbyinteraction/ninearbypeerconfiguration/4013050-iscameraassistanceenabled":{"type":"link","title":"isCameraAssistanceEnabled","url":"https:\/\/developer.apple.com\/documentation\/nearbyinteraction\/ninearbypeerconfiguration\/4013050-iscameraassistanceenabled","identifier":"https:\/\/developer.apple.com\/documentation\/nearbyinteraction\/ninearbypeerconfiguration\/4013050-iscameraassistanceenabled","titleInlineContent":[{"type":"codeVoice","code":"isCameraAssistanceEnabled"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10165-Explore-Nearby-Interaction-with-thirdparty-accessories":{"type":"topic","title":"Explore Nearby Interaction with third-party accessories","abstract":[{"type":"text","text":"Discover how your app can interact with Ultra Wideband (UWB) third-party accessories when running on a U1-equipped device. We‚Äôll show you how to use the Nearby Interaction framework‚Äôs standards-based technology to implement precise and directionally-aware experiences with accessories. Learn about resources for getting started with accessory and app development such as development kits, sample code, and specification documents, along with supported technology providers."}],"url":"\/documentation\/wwdcnotes\/wwdc21-10165-explore-nearby-interaction-with-thirdparty-accessories","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10165-Explore-Nearby-Interaction-with-thirdparty-accessories","kind":"article","role":"sampleCode"},"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"type":"link","title":"Contributions are welcome!","url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10668-Meet-Nearby-Interaction":{"role":"sampleCode","abstract":[{"type":"text","text":"The Nearby Interaction framework streams distance and direction between opted-in Apple devices containing the U1 chip. Discover how this powerful combination of hardware and software allow you to create intuitive spatial interactions based on the relative position of two or more devices. We‚Äôll walk you through this session-based API and show you how to deliver entirely new interactive experiences ‚Äî all with privacy in mind."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10668-Meet-Nearby-Interaction","url":"\/documentation\/wwdcnotes\/wwdc20-10668-meet-nearby-interaction","type":"topic","title":"Meet Nearby Interaction","kind":"article"},"WWDCNotes.png":{"type":"image","identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10245-Design-for-spatial-interaction":{"type":"topic","title":"Design for spatial interaction","abstract":[{"type":"text","text":"Discover the principles for creating intuitive physical interactions between two or more devices, as demonstrated by Apple designers who worked on features for iPhone, HomePod mini, and AirTag. Explore how you can apply these patterns to your own app when designing features for Apple platforms, and help people using your app interact more directly with their surroundings."}],"url":"\/documentation\/wwdcnotes\/wwdc21-10245-design-for-spatial-interaction","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10245-Design-for-spatial-interaction","kind":"article","role":"sampleCode"},"https://zntfdr.dev":{"type":"link","title":"Blog","url":"https:\/\/zntfdr.dev","identifier":"https:\/\/zntfdr.dev","titleInlineContent":[{"type":"text","text":"Blog"}]},"https://avatars.githubusercontent.com/u/5277837?v=4":{"type":"image","identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","variants":[{"url":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","traits":["1x","light"]}],"alt":"Profile image of Federico Zanetello"},"https://github.com/zntfdr":{"type":"link","title":"GitHub","url":"https:\/\/github.com\/zntfdr","identifier":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"type":"text","text":"GitHub"}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"kind":"article","title":"Federico Zanetello (330 notes)","url":"\/documentation\/wwdcnotes\/zntfdr","type":"topic","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","role":"sampleCode"},"https://developer.apple.com/nearby-interaction":{"type":"link","title":"developer portal","url":"https:\/\/developer.apple.com\/nearby-interaction","identifier":"https:\/\/developer.apple.com\/nearby-interaction","titleInlineContent":[{"type":"text","text":"developer portal"}]}}}