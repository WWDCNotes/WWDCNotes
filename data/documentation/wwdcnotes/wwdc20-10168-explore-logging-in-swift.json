{"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc20-10168-explore-logging-in-swift"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","sampleCodeDownload":{"kind":"sampleDownload","action":{"type":"reference","isActive":true,"overridingTitle":"Watch Video (17 min)","identifier":"https:\/\/developer.apple.com\/wwdc20\/10168"}},"schemaVersion":{"patch":0,"major":0,"minor":3},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10168-Explore-logging-in-Swift","interfaceLanguage":"swift"},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"New Logging APIs","level":2,"anchor":"New-Logging-APIs"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Record events as they happen","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Archived on device for later retrieval","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Low performance overhead","type":"text"}]}]}]},{"type":"heading","text":"Adding Logs Steps:","level":3,"anchor":"Adding-Logs-Steps"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Import the "},{"type":"codeVoice","code":"os"},{"type":"text","text":" framework"}]}]}]},{"type":"codeListing","code":["import os"],"syntax":"swift"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Define a ","type":"text"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/os\/logger","type":"reference"},{"text":" object with:","type":"text"}]}]}],"start":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"a "},{"type":"codeVoice","code":"subsystem"},{"type":"text","text":" identifier, which is used to make it clear that a message comes from our app."}]}]},{"content":[{"inlineContent":[{"text":"a ","type":"text"},{"type":"codeVoice","code":"category"},{"text":", which differentiates messages coming from different parts of our app.","type":"text"}],"type":"paragraph"}]}]},{"type":"codeListing","code":["let logger = Logger(subsystem: \"com.example.Fruta\", category: \"giftcards\")"],"syntax":"swift"},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Add the logging action"}],"type":"paragraph"}]}],"start":3},{"type":"codeListing","code":["logger.log(\"Started a task\")"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"log"},{"text":" behaves similar to a ","type":"text"},{"type":"codeVoice","code":"print"},{"text":" statement, but it doesn’t convert logs into ","type":"text"},{"type":"codeVoice","code":"String"},{"text":"s like ","type":"text"},{"type":"codeVoice","code":"print"},{"text":" does, it optimizes the printed logs based on the type of logged data.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We can log anything that is:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"A numeric type like "},{"code":"Double","type":"codeVoice"},{"type":"text","text":" and "},{"code":"Int","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Objective-C objects with "},{"type":"codeVoice","code":"-description"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Any type that conforms to "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/swift\/customstringconvertible"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"Nonnumeric types are redacted from the log output, to make sure that no personal information are mistakenly logged. To explicitly mark those types as safe to log, we can pass the optional parameter ","type":"text"},{"code":"privacy","type":"codeVoice"},{"text":" as such:","type":"text"}]},{"type":"codeListing","code":["logger.log(\"Ordered smoothie \\(smoothieName, privacy: .public)\")"],"syntax":"swift"},{"type":"heading","text":"Retrieving Logs","level":2,"anchor":"Retrieving-Logs"},{"type":"paragraph","inlineContent":[{"text":"We can retrieve the logs by plugging the device into our mac and running the command:","type":"text"}]},{"type":"codeListing","code":["log collect --device --start '2020-06-22 9:41:00' --output fruta.logarchive"],"syntax":null},{"style":"note","name":"Note","type":"aside","content":[{"inlineContent":[{"type":"text","text":"Logs are streamlined into the "},{"code":"Console.app","type":"codeVoice"},{"type":"text","text":" when our device is connected to our mac"}],"type":"paragraph"}]},{"type":"heading","text":"Log Levels","level":2,"anchor":"Log-Levels"},{"type":"paragraph","inlineContent":[{"text":"Those are the available logging levels sorted in an increasing order of their importance:","type":"text"}]},{"type":"table","header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Log Level"}]}],[{"type":"paragraph","inlineContent":[{"text":"Description","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Persistence"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Debug"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Useful only during debugging"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Not persisted"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"Info","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Helpful but not essential for troubleshooting"}]}],[{"type":"paragraph","inlineContent":[{"text":"Persisted only during ","type":"text"},{"code":"log","type":"codeVoice"},{"text":" collect","type":"text"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"Notice (default)","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"text":"Essential for troubleshooting","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Persisted up to a storage limit"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"Error","type":"text"}]}],[{"inlineContent":[{"type":"text","text":"Error seen during execution"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Persisted up to a storage limit"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"Fault","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Bug in program","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Persisted up to a storage limit","type":"text"}],"type":"paragraph"}]]]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Not persisted or deleted logs can’t be accessed later on. We can access not persisted logs only while streamlining logs directly from the device"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"As the log level increases, the performance of that logging decreases: "},{"code":"Debug","type":"codeVoice"},{"type":"text","text":" is the most performant log level, while "},{"code":"Fault","type":"codeVoice"},{"type":"text","text":" is the least performant"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Because of the previous point, logging very slow functions at the "},{"type":"codeVoice","code":"Debug"},{"type":"text","text":" level is safe because the compiler will make sure that those aren’t executed when the debug messages are discarded"}]}]}]},{"type":"heading","text":"Formatting Logs","level":2,"anchor":"Formatting-Logs"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Logger"},{"type":"text","text":" offers many APIs that we can use to format our logs, for example:"}]},{"type":"codeListing","code":["statisticsLogger.log(","    \"\"\"","    \\(taskID) ","    \\(giftCardID, align: .left(columns: GiftCard.maxIDLength)) ","    \\(serverID) ","    \\(seconds, format: .fixed(precision: 2))","    \"\"\"",")"],"syntax":"swift"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Formatting data has no cost at run-time"}]}]},{"content":[{"inlineContent":[{"text":"There are many other ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/os\/oslogfloatformatting","isActive":true,"type":"reference"},{"text":" and ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/os\/oslogstringalignment","isActive":true,"type":"reference"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"It’s very important to remember that we shouldn’t log any private information"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"We can use the ","type":"text"},{"type":"codeVoice","code":"hash"},{"text":" formatting option as a parameter to the privacy level of our logs to detect when two logged values are the same, without revealing the actual value:","type":"text"}]}]}]},{"type":"codeListing","code":["logger.log(\"Paid with bank account: \\(accountNumber, privacy: .private(mask: .hash))\")"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Which produces an output similar to:"}]},{"type":"codeListing","code":["Paid with bank account <mask.hash:'Csf11hACSI24GHca4sf8178er=='>"],"syntax":null},{"type":"heading","text":"API Availability","level":2,"anchor":"API-Availability"},{"type":"paragraph","inlineContent":[{"text":"iOS 14, tvOS 14, watchOS 7, and macOS Big Sur:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"New Logger APIs"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"New ","type":"text"},{"code":"os_log()","type":"codeVoice"},{"text":" overloads that accept string interpolations","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Prior releases:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"os_log()","type":"codeVoice"},{"text":" overloads that accepted only formatted static strings","type":"text"}]}]}]},{"type":"heading","text":"Written By","level":2,"anchor":"Written-By"},{"type":"row","numberOfColumns":5,"columns":[{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"ATahhan"}]}],"size":1},{"content":[{"type":"heading","text":"Ammar AlTahhan","anchor":"Ammar-AlTahhan","level":3},{"inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/ATahhan","isActive":true,"type":"reference","overridingTitle":"Contributed Notes"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/github.com\/ATahhan","isActive":true,"type":"reference"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/","isActive":true,"type":"reference"}],"type":"paragraph"}],"size":4}]},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}]},{"type":"heading","text":"Related Sessions","level":2,"anchor":"Related-Sessions"},{"style":"list","type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10226-Debug-with-structured-logging","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10170-Whats-new-in-Swift"]},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"abstract":[{"type":"text","text":"Meet the latest generation of Swift unified logging APIs. Learn how to log events and errors in your app while preserving privacy. Take advantage of powerful yet readable options for formatting data — all without sacrificing performance. And we’ll show you how you can gather and process log messages to help you understand and debug unexpected behavior in your apps."}],"metadata":{"title":"Explore logging in Swift","role":"sampleCode","roleHeading":"WWDC20","modules":[{"name":"WWDC Notes"}]},"sections":[],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"]]},"references":{"https://developer.apple.com/wwdc20/10168":{"type":"download","url":"https:\/\/developer.apple.com\/wwdc20\/10168","identifier":"https:\/\/developer.apple.com\/wwdc20\/10168","checksum":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20","role":"collectionGroup","images":[{"type":"icon","identifier":"WWDC20-Icon.png"},{"type":"card","identifier":"WWDC20.jpeg"}],"url":"\/documentation\/wwdcnotes\/wwdc20","abstract":[{"type":"text","text":"Xcode 12, Swift 5.3, iOS 14, macOS 11 (Big Sur), tvOS 14, watchOS 7."},{"type":"text","text":" "},{"text":"New APIs: ","type":"text"},{"code":"WidgetKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit Testing","type":"codeVoice"},{"text":", and more.","type":"text"}],"kind":"article","title":"WWDC20"},"doc://WWDCNotes/documentation/WWDCNotes/ATahhan":{"role":"sampleCode","kind":"article","type":"topic","title":"Ammar AlTahhan (12 notes)","abstract":[{"text":"Software Engineer","type":"text"}],"images":[{"identifier":"ATahhan.jpeg","type":"card"},{"identifier":"ATahhan.jpeg","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/ATahhan","url":"\/documentation\/wwdcnotes\/atahhan"},"doc://WWDCNotes/documentation/WWDCNotes":{"title":"WWDC Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","type":"topic","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes","role":"collection","kind":"symbol","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}]},"https://developer.apple.com/documentation/os/oslogstringalignment":{"titleInlineContent":[{"type":"text","text":"alignment options"}],"type":"link","url":"https:\/\/developer.apple.com\/documentation\/os\/oslogstringalignment","title":"alignment options","identifier":"https:\/\/developer.apple.com\/documentation\/os\/oslogstringalignment"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10226-Debug-with-structured-logging":{"type":"topic","kind":"article","role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc23-10226-debug-with-structured-logging","title":"Debug with structured logging","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10226-Debug-with-structured-logging","abstract":[{"type":"text","text":"Discover the debug console in Xcode 15 and learn how you can improve your diagnostic experience through logging. Explore how you can navigate your logs easily and efficiently using advanced filtering and improved visualization. We’ll also show you how to use the dwim-print command to evaluate expressions in your code while debugging."}]},"ATahhan":{"variants":[{"url":"\/images\/ATahhan.jpeg","traits":["1x","light"]}],"type":"image","identifier":"ATahhan","alt":"Profile image of Ammar AlTahhan"},"https://developer.apple.com/documentation/os/logger":{"titleInlineContent":[{"type":"text","text":"logger"}],"type":"link","url":"https:\/\/developer.apple.com\/documentation\/os\/logger","title":"logger","identifier":"https:\/\/developer.apple.com\/documentation\/os\/logger"},"https://github.com/ATahhan":{"titleInlineContent":[{"type":"text","text":"GitHub"}],"type":"link","url":"https:\/\/github.com\/ATahhan","title":"GitHub","identifier":"https:\/\/github.com\/ATahhan"},"WWDC20-Icon.png":{"variants":[{"url":"\/images\/WWDC20-Icon.png","traits":["1x","light"]}],"type":"image","identifier":"WWDC20-Icon.png","alt":null},"https://developer.apple.com/documentation/os/oslogfloatformatting":{"titleInlineContent":[{"type":"text","text":"formatting APIs"}],"type":"link","url":"https:\/\/developer.apple.com\/documentation\/os\/oslogfloatformatting","title":"formatting APIs","identifier":"https:\/\/developer.apple.com\/documentation\/os\/oslogfloatformatting"},"https://developer.apple.com/documentation/swift/customstringconvertible":{"titleInlineContent":[{"code":"CustomStringConvertible","type":"codeVoice"}],"type":"link","url":"https:\/\/developer.apple.com\/documentation\/swift\/customstringconvertible","title":"CustomStringConvertible","identifier":"https:\/\/developer.apple.com\/documentation\/swift\/customstringconvertible"},"WWDCNotes.png":{"variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"type":"image","identifier":"WWDCNotes.png","alt":null},"https://":{"titleInlineContent":[{"type":"text","text":"Blog"}],"type":"link","url":"https:\/\/","title":"Blog","identifier":"https:\/\/"},"WWDC20.jpeg":{"variants":[{"url":"\/images\/WWDC20.jpeg","traits":["1x","light"]}],"type":"image","identifier":"WWDC20.jpeg","alt":null},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"type":"link","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"ATahhan.jpeg":{"variants":[{"url":"\/images\/ATahhan.jpeg","traits":["1x","light"]}],"type":"image","identifier":"ATahhan.jpeg","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10170-Whats-new-in-Swift":{"type":"topic","kind":"article","role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc20-10170-whats-new-in-swift","title":"What’s new in Swift","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10170-Whats-new-in-Swift","abstract":[{"type":"text","text":"Join us for an update on Swift. Discover the latest advancements in runtime performance, along with improvements to the developer experience that make your code faster to read, edit, and debug. Find out how to take advantage of new language features like multiple trailing closures. Learn about new libraries available in the SDK, and explore the growing number of APIs available as Swift Packages."}]}}}