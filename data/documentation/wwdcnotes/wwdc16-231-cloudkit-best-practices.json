{"abstract":[{"text":"CloudKit keeps app data updated across iOS, macOS, watchOS, tvOS, and the web so you can focus on building your app. Hear best practices from the CloudKit engineering team about how to take advantage of the APIs and push notifications in order to provide your users with the best experience. Learn about the ways Apple apps use CloudKit and how you can apply the same approaches in your app.","type":"text"}],"primaryContentSections":[{"content":[{"text":"Short CloudKit overview","level":2,"anchor":"Short-CloudKit-overview","type":"heading"},{"inlineContent":[{"type":"text","text":"Apple uses CloudKit in their applications, so you can be confident that it scales, because for Apple it scales to hundreds of millions of users."}],"type":"paragraph"},{"inlineContent":[{"text":"CloudKit lets you focus on building your applications and not worry about building backend services for them. It provides your users automatic authentication - if the user is logged in to iCloud on their device, they don’t need to log in separately in your app.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"A CloudKit container now includes 3 databases:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"public database - for data visible to everyone"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"private database - for a given user’s private data","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"new this year: shared database - for user data that they decided to share with others"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"Zones:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"public database has 1 default zone"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"private database has a default zone and it can have one or more custom zones","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"shared database includes some number of shared zones"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"A record always exists in a specific zone.","type":"text"}],"type":"paragraph"},{"text":"Building an app with a sync feature","level":2,"anchor":"Building-an-app-with-a-sync-feature","type":"heading"},{"inlineContent":[{"type":"text","text":"A common use case (e.g. Notes app):"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"user creates some data\/records\/documents on one of their devices","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"later, they open another device and they expect to see these documents there and be able to read\/edit them","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"The way this is implemented is that CloudKit needs to be the source of truth, and the devices should maintain a local cache of all the app data and synchronize it using CloudKit.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The recommended workflow:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"On app launch, fetch changes from the server"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Subscribe to any future changes"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Fetch changes when you receive a push"}],"type":"paragraph"}]}],"type":"orderedList"},{"text":"Subscriptions:","level":3,"anchor":"Subscriptions","type":"heading"},{"inlineContent":[{"type":"text","text":"Subscriptions let you ask the server to notify you whenever a change happens in the specified set of data. Previously you could subscribe to a specific query to a record type or to all changes in a zone."}],"type":"paragraph"},{"inlineContent":[{"text":"New in iOS 10 - ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckdatabasesubscription"},{"text":" - lets you subscribe to all changes in the whole database (private or shared).","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Types of subscription notifications:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Silent push:"}],"type":"paragraph"}]}],"type":"orderedList"},{"code":["let notificationInfo = CKNotificationInfo()","","\/\/ we only set this, but none of the UI related keys","notificationInfo.shouldSendContentAvailable = true","","\/\/ do this once. no need to ask the user for push notifications permission,","\/\/ since we won't show any visible notifications","application.registerForRemoteNotifications(…)"],"syntax":"swift","type":"codeListing"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Visual notification:"}]}]}],"type":"orderedList","start":2},{"code":["let notificationInfo = CKNotificationInfo()","","\/\/ set any of these","notificationInfo.shouldBadge = true","notificationInfo.alertBody = \"alertBody\"","notificationInfo.soundName = \"default\"","","\/\/ we need to prompt the user for push notification access:","application.registerUserNotificationSettings(…)","application.registerForRemoteNotifications(…)"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"Remember that push notifications can be coalesced, so you may only get one out of a series. Push notifications tell you that ","type":"text"},{"inlineContent":[{"type":"text","text":"something"}],"type":"emphasis"},{"text":" has changed, but not necessarily every single thing that has changed.","type":"text"}],"type":"paragraph"},{"text":"Creating a subscription:","level":3,"anchor":"Creating-a-subscription","type":"heading"},{"inlineContent":[{"text":"This only needs to be done the first time you launch an app - so we set a flag when we create a subscription and the next time we skip this part.","type":"text"}],"type":"paragraph"},{"code":["if subscriptionIsLocallyCached { return }","","let subscription = CKDatabaseSubscription(subscriptionID: \"shared-changes\")","","let notificationInfo = CKNotificationInfo()","notificationInfo.shouldSendContentAvailable = true","subscription.notificationInfo = notificationInfo","","let operation = CKModifySubscriptionsOperation(","    subscriptionsToSave: [subscription],","    subscriptionIDsToDelete: []",")","","operation.modifySubscriptionsCompletionBlock = { …","    if error != nil {","        …","    } else {","        self.subscriptionIsLocallyCached = true","    }","}","","operation.qualityOfService = .utility","self.sharedDB.add(operation)"],"syntax":"swift","type":"codeListing"},{"text":"Listening for pushes:","level":3,"anchor":"Listening-for-pushes","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"turn on “Remote notifications” and “Background fetch” capabilities"}],"type":"paragraph"}]}],"type":"unorderedList"},{"code":["func application(_ application: UIApplication,","    didReceiveRemoteNotification userInfo: [NSObject: AnyObject],","    fetchCompletionHandler completionHandler: (UIBackgroundFetchResult) -> Void) {","","    let dict = userInfo as! [String: NSObject]","    let notification = CKNotification(fromRemoteNotificationDictionary: dict)","","    if notification.subscriptionID == \"shared-changes\" {","        fetchSharedChanges {","              completionHandler(.newData)","        }","    }","}"],"syntax":"swift","type":"codeListing"},{"text":"Fetching the changes:","level":3,"anchor":"Fetching-the-changes","type":"heading"},{"inlineContent":[{"type":"text","text":"Steps:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"ask in which zones something was changed (in shared db - because there may be new zones added when a new user shares some content)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"ask which records have changed in each relevant zone"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"The server will not send you pushes about the changes you’re doing on this device, but you may receive those changes you’ve done on the list when fetching a delta download."}],"type":"paragraph"},{"inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckfetchdatabasechangesoperation\/1640473-fetchallchanges","isActive":true,"type":"reference"},{"text":": previously, in some operations you had to manually check for a flag that says there are more results waiting for you that you need to manually request (i.e. another page). Now, CloudKit does the paging automatically for you if ","type":"text"},{"code":"fetchAllChanges = true","type":"codeVoice"},{"text":" (which is the default).","type":"text"}],"type":"paragraph"},{"code":["func fetchSharedChanges(_ callback: () -> Void) {","    let changesOperation = CKFetchDatabaseChangesOperation(","        previousServerChangeToken: sharedDBChangeToken  \/\/ cached between runs","    )","","    \/\/ this gives you IDs of changed zones","    changesOperation.recordZoneWithIDChangedBlock = { … }","","    \/\/ this gives you IDs of deleted zones","    changesOperation.recordZoneWithIDWasDeletedBlock = { … }","","    \/\/ this gives you the current change token which you need to save","    \/\/ may be called multiple times if the operation fetches multiple pages of content","    \/\/ save the token each time, so in case of an error you don’t repeat all work","    changesOperation.changeTokenUpdatedBlock = { … }","","    changesOperation.fetchDatabaseChangesCompletionBlock = {","        (newToken: CKServerChangeToken?, more: Bool, error: NSError?) -> Void in","","        self.sharedDBChangeToken = newToken","        self.fetchZoneChanges(callback)","    }","","    self.sharedDB.add(operation)","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"codeVoice","code":"fetchZoneChanges()"},{"text":" looks very similar, but fetches changes for a specific zone using ","type":"text"},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckfetchrecordzonechangesoperation","isActive":true},{"text":" (you pass it a list of zones).","type":"text"}],"type":"paragraph"},{"text":"CloudKit best practices","level":2,"anchor":"CloudKit-best-practices","type":"heading"},{"text":"Automatic authentication:","level":3,"anchor":"Automatic-authentication","type":"heading"},{"inlineContent":[{"type":"text","text":"CloudKit allows you to authenticate users (if they’re logged in to iCloud) without requiring any private information."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"You use the CloudKit user record for authentication. The user record is unique per container and never changes for that user."}],"type":"paragraph"},{"code":["container.fetchUserRecordID(completionHandler: (CKRecordID?, NSError?) -> Void)"],"syntax":"swift","type":"codeListing"},{"text":"CKOperation API:","level":3,"anchor":"CKOperation-API","type":"heading"},{"inlineContent":[{"text":"The convenience API works on single items and it’s simpler to use. Every convenience API call has a ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation","type":"reference","isActive":true},{"text":" counterpart that lets you perform an operation on a batch of records.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"The ","type":"text"},{"overridingTitle":"CKOperation","overridingTitleInlineContent":[{"type":"codeVoice","code":"CKOperation"}],"identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation","type":"reference","isActive":true},{"text":" also has other advantages - for example, it lets you:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"set up dependencies between operations","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"specify quality of service and queue priorities"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"cancel operations that have started executing"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"specify if you want the operation to work over cellular network","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"limit the number of records or set of fetched keys","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"report progress"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"… and everything that ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/operation","isActive":true,"type":"reference"},{"text":" provides","type":"text"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"Watch the “"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2015\/226\/","type":"reference"},{"type":"text","text":"” talk from 2015 to learn more about "},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/operation","type":"reference","overridingTitleInlineContent":[{"type":"codeVoice","code":"NSOperation"}],"overridingTitle":"NSOperation"},{"type":"text","text":"."}],"type":"paragraph"},{"text":"Quality of service:","level":3,"anchor":"Quality-of-service","type":"heading"},{"inlineContent":[{"text":"QoS: select a quality of service (","type":"text"},{"code":".userInteractive","type":"codeVoice"},{"text":" \/ ","type":"text"},{"code":".userInitiated","type":"codeVoice"},{"text":" \/ ","type":"text"},{"code":".utility","type":"codeVoice"},{"text":" \/ ","type":"text"},{"code":".background","type":"codeVoice"},{"text":") depending on the task priority.","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"default is "},{"type":"codeVoice","code":".utility"}]}]},{"content":[{"inlineContent":[{"code":".utility","type":"codeVoice"},{"type":"text","text":" and below enable discretionary networking"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"Discretionary networking means that:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"the system decides when is the best moment to run your request, so it may take longer than you expect","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"however, all network failures will be automatically retried for you","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"the request gets a timeout period of 7 days by default","type":"text"}]}]}],"type":"unorderedList"},{"text":"Long lived operations:","level":3,"anchor":"Long-lived-operations","type":"heading"},{"inlineContent":[{"text":"If you have some operations that you want to continue\/retry if they don’t manage to complete by the time your app is terminated, iOS 9.3 adds “CloudKit long lived operations”. Once you run such operation, the system will finish it even if the app is killed by the system or the user. The request is executed even if your app isn’t running, the result is cached and is returned to you once the app restarts. Results are kept by the OS for at least 24 hours.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"To use this API:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"set "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation\/1452374-islonglived","isActive":true},{"type":"text","text":" = "},{"type":"codeVoice","code":"true"},{"type":"text","text":" on "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation","isActive":true,"overridingTitle":"CKOperation","overridingTitleInlineContent":[{"type":"codeVoice","code":"CKOperation"}]}]}]},{"content":[{"inlineContent":[{"text":"save the operation’s ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation\/3003367-operationid"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"use "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckcontainer\/3003356-fetchlonglivedoperation"},{"type":"text","text":" to get the operation object back"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"set completion blocks and run it again just like a new one","type":"text"}]}]}],"type":"unorderedList"},{"code":["CKContainer.default().fetchLongLivedOperation(withID: myOpID) {","    (operation: CKOperation?, error: NSError?) in","","    let fetchRecords = operation as! CKFetchRecordsOperation","    fetchRecords.fetchRecordsCompletionBlock = { … }","","    CKContainer.default().privateCloudDatabase.add(fetchRecords)","}"],"syntax":"swift","type":"codeListing"},{"text":"Parent references:","level":3,"anchor":"Parent-references","type":"heading"},{"inlineContent":[{"type":"text","text":"A new type of reference added this year to help you better model data, especially with sharing in mind. If your app supports sharing, it’s recommended that you set the parent reference to create a hierarchy between records."}],"type":"paragraph"},{"inlineContent":[{"text":"Example: Album ⭢ list of photos","type":"text"}],"type":"paragraph"},{"code":["let photoRecord = CKRecord(recordType: \"photo\")","photoRecord.setParent(albumRecordID)"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"What this gives you: when the user shares the album record, the whole record hierarchy under this album (photos and other data) will also be shared."}],"type":"paragraph"},{"text":"Types of errors:","level":3,"anchor":"Types-of-errors","type":"heading"},{"text":"1) Fatal error (bad request)","level":4,"anchor":"1-Fatal-error-bad-request","type":"heading"},{"inlineContent":[{"text":"Error codes like:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325203-internalerror","type":"reference","isActive":true}]}]},{"content":[{"inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325219-serverrejectedrequest"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325210-invalidarguments","isActive":true}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325225-permissionfailure","isActive":true}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"In this case, you should show an alert to the user and tell them this can’t be executed."}],"type":"paragraph"},{"text":"2) Connection\/server error","level":4,"anchor":"2-Connectionserver-error","type":"heading"},{"inlineContent":[{"type":"text","text":"Error codes like:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325220-zonebusy"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325227-serviceunavailable","isActive":true}]}]},{"content":[{"inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325202-requestratelimited","type":"reference","isActive":true}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"In this case, check for "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerrorretryafterkey"},{"type":"text","text":" and retry after specified time."}],"type":"paragraph"},{"text":"3) Errors that are returned before connection is even made","level":4,"anchor":"3-Errors-that-are-returned-before-connection-is-even-made","type":"heading"},{"inlineContent":[{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325209-networkunavailable"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"you should monitor network reachability ("},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/systemconfiguration\/scnetworkreachability-g7d"},{"type":"text","text":") and retry when the device is connected again"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325221-notauthenticated","type":"reference"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"when the user is not logged in and can’t access their private database","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"you should register at startup for ","type":"text"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsnotification\/name\/1399172-ckaccountchanged","type":"reference"},{"text":", and when it fires, recheck account status and update the UI","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"text":"Written By","level":2,"anchor":"Written-By","type":"heading"},{"columns":[{"content":[{"inlineContent":[{"type":"image","identifier":"mackuba"}],"type":"paragraph"}],"size":1},{"content":[{"type":"heading","level":3,"text":"Kuba Suder","anchor":"Kuba-Suder"},{"type":"paragraph","inlineContent":[{"isActive":true,"overridingTitle":"Contributed Notes","type":"reference","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/mackuba"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/mackuba"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/x.com\/kuba_suder"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/mackuba.eu"}]}],"size":4}],"type":"row","numberOfColumns":5},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}],"type":"paragraph"},{"text":"Related Sessions","level":2,"anchor":"Related-Sessions","type":"heading"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}],"kind":"content"}],"sections":[],"sampleCodeDownload":{"action":{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc16\/231","isActive":true,"overridingTitle":"Watch Video (42 min)"},"kind":"sampleDownload"},"metadata":{"title":"CloudKit Best Practices","modules":[{"name":"WWDC Notes"}],"role":"sampleCode","roleHeading":"WWDC16"},"kind":"article","schemaVersion":{"patch":0,"major":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16"]]},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16-231-CloudKit-Best-Practices","interfaceLanguage":"swift"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc16-231-cloudkit-best-practices"]}],"references":{"https://developer.apple.com/documentation/cloudkit/ckerror/2325220-zonebusy":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":".zoneBusy"}],"title":".zoneBusy","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325220-zonebusy","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325220-zonebusy"},"https://developer.apple.com/documentation/cloudkit/ckfetchdatabasechangesoperation/1640473-fetchallchanges":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"fetchAllChanges"}],"title":"fetchAllChanges","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckfetchdatabasechangesoperation\/1640473-fetchallchanges","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckfetchdatabasechangesoperation\/1640473-fetchallchanges"},"https://developer.apple.com/documentation/cloudkit/ckerror/2325203-internalerror":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":".internalError"}],"title":".internalError","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325203-internalerror","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325203-internalerror"},"https://developer.apple.com/documentation/cloudkit/ckerror/2325210-invalidarguments":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":".invalidArguments"}],"title":".invalidArguments","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325210-invalidarguments","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325210-invalidarguments"},"https://developer.apple.com/documentation/cloudkit/ckerror/2325219-serverrejectedrequest":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":".serverRejectedRequest"}],"title":".serverRejectedRequest","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325219-serverrejectedrequest","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325219-serverrejectedrequest"},"WWDCNotes.png":{"alt":null,"type":"image","identifier":"WWDCNotes.png","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"mackuba.jpeg":{"alt":null,"type":"image","identifier":"mackuba.jpeg","variants":[{"url":"\/images\/mackuba.jpeg","traits":["1x","light"]}]},"WWDC16.jpeg":{"alt":null,"type":"image","identifier":"WWDC16.jpeg","variants":[{"url":"\/images\/WWDC16.jpeg","traits":["1x","light"]}]},"https://developer.apple.com/documentation/cloudkit/ckerror/2325227-serviceunavailable":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":".serviceUnavailable"}],"title":".serviceUnavailable","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325227-serviceunavailable","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325227-serviceunavailable"},"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"images":[{"type":"icon","identifier":"WWDCNotes.png"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","kind":"symbol","url":"\/documentation\/wwdcnotes","title":"WWDC Notes","role":"collection"},"https://developer.apple.com/documentation/cloudkit/ckcontainer/3003356-fetchlonglivedoperation":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"CKContainer.fetchLongLivedOperation(withId:)"}],"title":"CKContainer.fetchLongLivedOperation(withId:)","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckcontainer\/3003356-fetchlonglivedoperation","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckcontainer\/3003356-fetchlonglivedoperation"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"title":"Contributions are welcome!","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"https://developer.apple.com/documentation/foundation/operation":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"NSOperation"}],"title":"NSOperation","url":"https:\/\/developer.apple.com\/documentation\/foundation\/operation","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/operation"},"mackuba":{"alt":"Profile image of Kuba Suder","type":"image","identifier":"mackuba","variants":[{"url":"\/images\/mackuba.jpeg","traits":["1x","light"]}]},"https://developer.apple.com/documentation/foundation/nsnotification/name/1399172-ckaccountchanged":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"CKAccountChangedNotification"}],"title":"CKAccountChangedNotification","url":"https:\/\/developer.apple.com\/documentation\/foundation\/nsnotification\/name\/1399172-ckaccountchanged","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsnotification\/name\/1399172-ckaccountchanged"},"https://developer.apple.com/documentation/systemconfiguration/scnetworkreachability-g7d":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"SCNetworkReachability"}],"title":"SCNetworkReachability","url":"https:\/\/developer.apple.com\/documentation\/systemconfiguration\/scnetworkreachability-g7d","identifier":"https:\/\/developer.apple.com\/documentation\/systemconfiguration\/scnetworkreachability-g7d"},"https://developer.apple.com/documentation/cloudkit/ckoperation/1452374-islonglived":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"isLongLived"}],"title":"isLongLived","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation\/1452374-islonglived","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation\/1452374-islonglived"},"https://developer.apple.com/videos/play/wwdc2015/226/":{"type":"link","titleInlineContent":[{"text":"Advanced NSOperations","type":"text"}],"title":"Advanced NSOperations","url":"https:\/\/developer.apple.com\/videos\/play\/wwdc2015\/226\/","identifier":"https:\/\/developer.apple.com\/videos\/play\/wwdc2015\/226\/"},"https://x.com/kuba_suder":{"type":"link","titleInlineContent":[{"text":"X\/Twitter","type":"text"}],"title":"X\/Twitter","url":"https:\/\/x.com\/kuba_suder","identifier":"https:\/\/x.com\/kuba_suder"},"https://developer.apple.com/documentation/cloudkit/ckoperation":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"CKOperation"}],"title":"CKOperation","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation"},"https://developer.apple.com/documentation/cloudkit/ckdatabasesubscription":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"CKDatabaseSubscription"}],"title":"CKDatabaseSubscription","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckdatabasesubscription","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckdatabasesubscription"},"https://developer.apple.com/documentation/cloudkit/ckerror/2325221-notauthenticated":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":".notAuthenticated"}],"title":".notAuthenticated","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325221-notauthenticated","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325221-notauthenticated"},"https://developer.apple.com/documentation/cloudkit/ckfetchrecordzonechangesoperation":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"CKFetchRecordZoneChangesOperation"}],"title":"CKFetchRecordZoneChangesOperation","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckfetchrecordzonechangesoperation","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckfetchrecordzonechangesoperation"},"doc://WWDCNotes/documentation/WWDCNotes/mackuba":{"type":"topic","images":[{"identifier":"mackuba.jpeg","type":"card"},{"identifier":"mackuba.jpeg","type":"icon"}],"title":"Kuba Suder (16 notes)","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/mackuba","url":"\/documentation\/wwdcnotes\/mackuba","role":"sampleCode","abstract":[{"type":"text","text":"Independent Mac & iOS developer. Sometimes freelancing, mostly working on my own stuff these days."}]},"https://mackuba.eu":{"type":"link","titleInlineContent":[{"text":"Blog","type":"text"}],"title":"Blog","url":"https:\/\/mackuba.eu","identifier":"https:\/\/mackuba.eu"},"WWDC16-Icon.png":{"alt":null,"type":"image","identifier":"WWDC16-Icon.png","variants":[{"url":"\/images\/WWDC16-Icon.png","traits":["1x","light"]}]},"https://github.com/mackuba":{"type":"link","titleInlineContent":[{"text":"GitHub","type":"text"}],"title":"GitHub","url":"https:\/\/github.com\/mackuba","identifier":"https:\/\/github.com\/mackuba"},"https://developer.apple.com/documentation/cloudkit/ckerror/2325209-networkunavailable":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":".networkUnavailable"}],"title":".networkUnavailable","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325209-networkunavailable","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325209-networkunavailable"},"https://developer.apple.com/documentation/cloudkit/ckerror/2325225-permissionfailure":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":".permissionFailure"}],"title":".permissionFailure","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325225-permissionfailure","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325225-permissionfailure"},"https://developer.apple.com/documentation/cloudkit/ckerrorretryafterkey":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"CKErrorRetryAfterKey"}],"title":"CKErrorRetryAfterKey","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerrorretryafterkey","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerrorretryafterkey"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC16":{"url":"\/documentation\/wwdcnotes\/wwdc16","title":"WWDC16","images":[{"type":"icon","identifier":"WWDC16-Icon.png"},{"type":"card","identifier":"WWDC16.jpeg"}],"role":"collectionGroup","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16","abstract":[{"type":"text","text":"Xcode 8, Swift 3.0, iOS 10, macOS 10.12 (Sierra), tvOS 10, watchOS 3."}],"kind":"article"},"https://developer.apple.com/documentation/cloudkit/ckoperation/3003367-operationid":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":"operationID"}],"title":"operationID","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation\/3003367-operationid","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckoperation\/3003367-operationid"},"https://developer.apple.com/documentation/cloudkit/ckerror/2325202-requestratelimited":{"type":"link","titleInlineContent":[{"type":"codeVoice","code":".requestRateLimited"}],"title":".requestRateLimited","url":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325202-requestratelimited","identifier":"https:\/\/developer.apple.com\/documentation\/cloudkit\/ckerror\/2325202-requestratelimited"},"https://developer.apple.com/wwdc16/231":{"type":"download","url":"https:\/\/developer.apple.com\/wwdc16\/231","checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc16\/231"}}}