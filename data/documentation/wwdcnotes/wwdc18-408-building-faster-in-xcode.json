{"kind":"article","variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc18-408-building-faster-in-xcode"]}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-408-Building-Faster-in-Xcode","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18"]]},"abstract":[{"type":"text","text":"Build your apps faster in Xcode 10. Learn how to structure your projects and tweak your code to take full advantage of all processor cores. Whether you’ve made a few small code changes you want to give a try, or you’re building your full app for release, these techniques will cut the time it takes to build a running app."}],"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"Increasing Build Efficiency via Architectural Changes","level":2,"anchor":"Increasing-Build-Efficiency-via-Architectural-Changes"},{"type":"paragraph","inlineContent":[{"text":"Sample dependency graph:","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC18-408-dependency-graph"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Parallelizing your build process:"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The smaller your modules, the less likely it is for your dependencies to be built serially. In the example above, perhaps Physics don’t need most of the utilities declared in Utilities, maybe just one or two functions. Extract those into a separate module, so that this new module and Utilities can be built in parallel, and Physics and start building as soon as this new module (now much smaller) finishes building, instead of waiting until Utilities finishes building."}]}]},{"content":[{"inlineContent":[{"text":"Inspect your project for dead code, unlinking (or removing) unused dependencies.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Testing targets should have as few dependencies as possible: test only what’s meant to be tested, and not code from other modules. Create separate testing targets for each of your modules, to improve parallelism when building testing targets.","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"text","text":"Measuring build time:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"Product","type":"text"},{"text":" → ","type":"text"},{"text":"Perform Action","type":"text"},{"text":" → ","type":"text"},{"text":"Build With Timing Summary","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Look for "},{"code":"PhaseScriptExecution","type":"codeVoice"},{"type":"text","text":" in the resulting logs after the build. If that phase is there on every build, it means your Run Scripts execution isn’t being cached."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"This setting is also available via "},{"type":"codeVoice","code":"xcodebuild"},{"type":"text","text":" CLI."}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"text","text":"Declaring Run Script input and output files:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Input files represent all the parameters your Run Script need to use to produce an output file;","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Declare input and output files for your Run Scripts, so the compiler can cache results based on input\/output and knows when it should re-run them;"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Run Scripts are always run if they don’t have input files;","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Xcode 10 introduced a new ","type":"text"},{"code":".xcfilelist","type":"codeVoice"},{"text":" file to help us declare input and output files.","type":"text"}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Understanding dependencies in Swift:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"When changing any interface in a module (e.g. creating, updating or deleting types, functions, protocols, properties, etc), all targets that depend on that module (e.g. the app’s main target) will have to build all files again. (Note from WWDC note contributor: it’s not clear from the session whether the compiler will cleverly only rebuild files that ","type":"text"},{"code":"import","type":"codeVoice"},{"text":" the referred module. From what I interpreted, it’s literally all the files.)","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"When changing only implementation of functions (not modifying interfaces), only the file being changed needs to be recompiled."}],"type":"paragraph"}]}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Configurations:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Since Xcode 10 you can turn off ","type":"text"},{"code":"Whole Module","type":"codeVoice"},{"text":" compilation mode for the ","type":"text"},{"code":"SWIFT_COMPILATION_MODE","type":"codeVoice"},{"text":" build setting for Debug builds, due to compiler improvements. Delete this setting, so it goes back to the default, which is ","type":"text"},{"code":"Incremental","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"}]}]}]}]},{"type":"heading","text":"Increasing Build Efficiency via Source Code Improvements","level":2,"anchor":"Increasing-Build-Efficiency-via-Source-Code-Improvements"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Dealing with complex expressions:"}]},{"items":[{"content":[{"inlineContent":[{"text":"Avoid using properties with ","type":"text"},{"type":"codeVoice","code":"AnyObject"},{"text":" type, because the compiler will lookup the entire code base looking for matching function\/property interfaces;","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Break down complex expressions into smaller ones (this improves compiler performance and readability for developers);"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Declare property types explicitly."}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Limiting your Objective-C ↔ Swift interface:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Keep your generated header minimal by using "},{"type":"codeVoice","code":"private"},{"type":"text","text":" on "},{"type":"codeVoice","code":"IBAction"},{"type":"text","text":"s, "},{"type":"codeVoice","code":"IBOutlet"},{"type":"text","text":"s, and "},{"type":"codeVoice","code":"@objc"},{"type":"text","text":" declarations;"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If you’re using "},{"type":"codeVoice","code":"@objc"},{"type":"text","text":" methods just to use them via "},{"type":"codeVoice","code":"#selector"},{"type":"text","text":", opt for block-based APIs where possible."}]}]}]}]}]},{"type":"heading","text":"Written By","level":2,"anchor":"Written-By"},{"type":"row","numberOfColumns":5,"columns":[{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"rogerluan"}]}],"size":1},{"content":[{"type":"heading","level":3,"anchor":"Roger-Oba","text":"Roger Oba"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/rogerluan","overridingTitle":"Contributed Notes","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/rogerluan","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/www.roger.ml","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/x.com\/rogerluan_","type":"reference"}]}],"size":4}]},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}]},{"type":"heading","text":"Related Sessions","level":2,"anchor":"Related-Sessions"},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-401-Whats-New-in-Swift","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-415-Behind-the-Scenes-of-the-Xcode-Build-Process"]},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"text":"Legal Notice","type":"text"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}]}],"schemaVersion":{"patch":0,"major":0,"minor":3},"metadata":{"modules":[{"name":"WWDC Notes"}],"title":"Building Faster in Xcode","roleHeading":"WWDC18","role":"sampleCode"},"sampleCodeDownload":{"kind":"sampleDownload","action":{"type":"reference","overridingTitle":"Watch Video (39 min)","identifier":"https:\/\/developer.apple.com\/wwdc18\/408","isActive":true}},"sections":[],"references":{"doc://WWDCNotes/documentation/WWDCNotes":{"role":"collection","images":[{"identifier":"WWDCNotes.png","type":"icon"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","type":"topic","kind":"symbol","url":"\/documentation\/wwdcnotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}]},"https://developer.apple.com/wwdc18/408":{"identifier":"https:\/\/developer.apple.com\/wwdc18\/408","url":"https:\/\/developer.apple.com\/wwdc18\/408","checksum":null,"type":"download"},"WWDC18-408-dependency-graph":{"variants":[{"url":"\/images\/WWDCNotes\/WWDC18-408-dependency-graph.png","traits":["1x","light"]}],"identifier":"WWDC18-408-dependency-graph","alt":null,"type":"image"},"WWDCNotes.png":{"identifier":"WWDCNotes.png","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}],"type":"image","alt":null},"rogerluan.jpeg":{"type":"image","identifier":"rogerluan.jpeg","alt":null,"variants":[{"url":"\/images\/WWDCNotes\/rogerluan.jpeg","traits":["1x","light"]}]},"rogerluan":{"variants":[{"url":"\/images\/WWDCNotes\/rogerluan.jpeg","traits":["1x","light"]}],"identifier":"rogerluan","alt":"Profile image of Roger Oba","type":"image"},"https://github.com/rogerluan":{"identifier":"https:\/\/github.com\/rogerluan","url":"https:\/\/github.com\/rogerluan","title":"GitHub","titleInlineContent":[{"text":"GitHub","type":"text"}],"type":"link"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"title":"Contributions are welcome!","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}]},"WWDC18-Icon.png":{"variants":[{"url":"\/images\/WWDCNotes\/WWDC18-Icon.png","traits":["1x","light"]}],"identifier":"WWDC18-Icon.png","alt":null,"type":"image"},"WWDC18.jpeg":{"identifier":"WWDC18.jpeg","variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC18.jpeg"}],"type":"image","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/rogerluan":{"url":"\/documentation\/wwdcnotes\/rogerluan","kind":"article","abstract":[{"text":"Core contributor @fastlane 🚀","type":"text"}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/rogerluan","role":"sampleCode","images":[{"identifier":"rogerluan.jpeg","type":"card"},{"identifier":"rogerluan.jpeg","type":"icon"}],"title":"Roger Oba (7 notes)"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-415-Behind-the-Scenes-of-the-Xcode-Build-Process":{"url":"\/documentation\/wwdcnotes\/wwdc18-415-behind-the-scenes-of-the-xcode-build-process","type":"topic","kind":"article","abstract":[{"text":"Ever wonder what happens when you build your project in Xcode? Learn how Xcode automates the steps required to build an application, and go behind the scenes to learn how clang, swiftc, and the linker work together to turn your source code into a working program.","type":"text"}],"title":"Behind the Scenes of the Xcode Build Process","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-415-Behind-the-Scenes-of-the-Xcode-Build-Process"},"https://x.com/rogerluan_":{"title":"X\/Twitter","url":"https:\/\/x.com\/rogerluan_","type":"link","identifier":"https:\/\/x.com\/rogerluan_","titleInlineContent":[{"text":"X\/Twitter","type":"text"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-401-Whats-New-in-Swift":{"role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc18-401-whats-new-in-swift","type":"topic","title":"What’s New in Swift","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-401-Whats-New-in-Swift","abstract":[{"type":"text","text":"Hear about the latest advancements in Swift, the safe, fast, and expressive language. Find out about improvements to build times, code size, and runtime performance. Learn how to take advantage of new features in your code that eliminate boilerplate, increase safety and security, and improve your overall development productivity."}]},"https://www.roger.ml":{"title":"Blog","url":"https:\/\/www.roger.ml","titleInlineContent":[{"type":"text","text":"Blog"}],"identifier":"https:\/\/www.roger.ml","type":"link"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18":{"url":"\/documentation\/wwdcnotes\/wwdc18","kind":"article","abstract":[{"type":"text","text":"Xcode 10, Swift 4.2, iOS 12, macOS 10.14 (Mojave), tvOS 12, watchOS 5."}],"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18","role":"collectionGroup","images":[{"identifier":"WWDC18-Icon.png","type":"icon"},{"identifier":"WWDC18.jpeg","type":"card"}],"title":"WWDC18"}}}