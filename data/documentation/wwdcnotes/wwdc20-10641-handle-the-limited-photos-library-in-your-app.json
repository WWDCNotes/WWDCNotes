{"metadata":{"modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC20","role":"sampleCode","title":"Handle the Limited Photos Library in your app"},"sampleCodeDownload":{"action":{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc20\/10641","overridingTitle":"Watch Video (14 min)"},"kind":"sampleDownload"},"variants":[{"paths":["\/documentation\/wwdcnotes\/wwdc20-10641-handle-the-limited-photos-library-in-your-app"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"content":[{"level":2,"text":"Full and Limited Photo Library Access","anchor":"Full-and-Limited-Photo-Library-Access","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Unlike previously, where full access meant being able to read everything in the user’s photo library, with the limited access, you’ll only have access to selected number of photos chosen by the user"}]}]}],"type":"unorderedList"},{"header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC20-10641-full_access_diagram"}]}],[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"WWDC20-10641-limited_access_diagram"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Full access"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Limited access"}]}]]],"type":"table"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"For apps that haven’t adopted the new API, when asking for permission, the user will be prompted to either grant a full access or only select a limited number of photos to grant access permission to, once a limited access is granted, app won’t be able to receive any updated authorization or extra photos until it asks for the permission again in the next app lifecycle"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Another way the user can update photos access is by visiting the Settings app on their iPhone and updating the given access"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":3,"text":"`PHPicker`","anchor":"PHPicker","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"UIImagePickerController"},{"type":"text","text":" replacement"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"It has improvements such as search and multi-select"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Doesn’t require the user to grant photo library access"}]}]}],"type":"unorderedList"},{"level":3,"text":"Querying for authorization status","anchor":"Querying-for-authorization-status","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"There is a new authorization status value: "},{"type":"codeVoice","code":".limited"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Also, a new enumeration is introduced: ","type":"text"},{"code":"PHAccessLevel","type":"codeVoice"},{"text":", this can be either ","type":"text"},{"code":".addOnly","type":"codeVoice"},{"text":" or ","type":"text"},{"code":".readWrite","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Now you can will need to use one of those two access levels values to query or update the current authorization status granted, here is how you can query the current status:","type":"text"}]}]}],"type":"unorderedList"},{"syntax":"swift","code":["import Photos","","let accessLevel: PHAccessLevel = .readWrite","let authorizationStatus = PHPhotoLibrary.authorizationStatus(for: accessLevel)","","switch authorizationStatus {","case .limited:","\tprint(\"limited authorization granted\")","default:","\t\/\/FIXME: Implement handling for all authorizationStatus values","\tprint(\"Not implemented\")","}"],"type":"codeListing"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Requesting an access manually will only prompt the user if the current status is undetermined, here is how you can manually request an authorization for a specific access level:"}]}]}],"type":"unorderedList"},{"syntax":"swift","code":["import Photos","","let requiredAccessLevel: PHAccessLevel = .readWrite \/\/ or .addOnly","PHPhotoLibrary.requestAuthorization(for: requiredAccessLevel) { authorizationStatus in","\tswitch authorizationStatus {","\tcase .limited:","    \tprint(\"limited authorization granted\")","\tdefault:","    \t\/\/FIXME: Implement handling for all authorizationStatus","    \tprint(\"Unimplemented\")","    \t","\t}","}"],"type":"codeListing"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"The old query and request authorization status APIs aren’t aware of the new access level and they will always return ","type":"text"},{"type":"codeVoice","code":".authorized"},{"text":" even if the access was ","type":"text"},{"type":"codeVoice","code":".limited"},{"text":", hence they are marked for future deprecation","type":"text"}]}]}],"type":"unorderedList"},{"level":4,"text":"In limited access, `PHPicker` will behave differently in these notable scenarios:","anchor":"In-limited-access-PHPicker-will-behave-differently-in-these-notable-scenarios","type":"heading"},{"items":[{"content":[{"inlineContent":[{"text":"When the app creates a ","type":"text"},{"code":"PHAsset","type":"codeVoice"},{"text":", they’re automatically included in the available photos to access for your application","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"User albums cannot be fetched nor created"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"No access to cloud shared assets or albums"}]}]}],"type":"unorderedList"},{"level":3,"text":"Control photo library management UI","anchor":"Control-photo-library-management-UI","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"To present a limited library management UI:"}],"type":"paragraph"}]}],"type":"unorderedList"},{"syntax":"swift","code":["import PhotosUI","","let library = PHPhotoLibrary.shared()","let viewController = self","","library.presentLimitedLibraryPicker(from: viewController)"],"type":"codeListing"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Changes to access can be monitored through "},{"type":"codeVoice","code":"PHPhotoLibraryChangeObserver"},{"type":"text","text":" updates"}]}]}],"type":"unorderedList"},{"type":"heading","level":3,"text":"Preventing the automatic prompt on first access","anchor":"Preventing-the-automatic-prompt-on-first-access"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Set ","type":"text"},{"code":"PHPhotoLibraryPreventAutomaticLimitedAccessAlert","type":"codeVoice"},{"text":" to ","type":"text"},{"code":"YES","type":"codeVoice"},{"text":" in app’s ","type":"text"},{"code":"info.plist","type":"codeVoice"}]}]}]},{"type":"heading","level":2,"text":"Written By","anchor":"Written-By"},{"type":"row","numberOfColumns":5,"columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"identifier":"ATahhan","type":"image"}]}]},{"size":4,"content":[{"anchor":"Ammar-AlTahhan","level":3,"text":"Ammar AlTahhan","type":"heading"},{"inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Contributed Notes"}],"type":"reference","isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/ATahhan","overridingTitle":"Contributed Notes"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/ATahhan"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference","isActive":true}]},{"type":"heading","level":2,"text":"Related Sessions","anchor":"Related-Sessions"},{"type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10105-Create-a-more-responsive-camera-experience","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10046-Improve-access-to-Photos-in-your-app","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10160-Capture-and-process-ProRAW-images","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10652-Meet-the-new-Photos-picker","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10676-Build-trust-through-better-privacy"],"style":"list"},{"type":"small","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}]},{"type":"small","inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}]}],"kind":"content"}],"abstract":[{"text":"Access the photos and videos you need for your app while preserving privacy. With the new Limited Photos Library feature, people can directly control which photos and videos an app can access to protect their private content. We’ll explore how this feature may affect your app, and take you through alternatives like PHPicker.","type":"text"}],"schemaVersion":{"patch":0,"minor":3,"major":0},"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"]]},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10641-Handle-the-Limited-Photos-Library-in-your-app","interfaceLanguage":"swift"},"kind":"article","sections":[],"references":{"WWDC20-10641-full_access_diagram":{"type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDC20-10641-full_access_diagram.png"}],"identifier":"WWDC20-10641-full_access_diagram"},"ATahhan":{"type":"image","alt":"Profile image of Ammar AlTahhan","variants":[{"traits":["1x","light"],"url":"\/images\/ATahhan.jpeg"}],"identifier":"ATahhan"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"type":"link","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"},"https://developer.apple.com/wwdc20/10641":{"type":"download","url":"https:\/\/developer.apple.com\/wwdc20\/10641","checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc20\/10641"},"doc://WWDCNotes/documentation/WWDCNotes":{"role":"collection","title":"WWDC Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"images":[{"identifier":"WWDCNotes.png","type":"icon"}],"kind":"symbol","type":"topic","url":"\/documentation\/wwdcnotes"},"WWDCNotes.png":{"alt":null,"identifier":"WWDCNotes.png","type":"image","variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"https://":{"identifier":"https:\/\/","title":"Blog","type":"link","url":"https:\/\/","titleInlineContent":[{"type":"text","text":"Blog"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10160-Capture-and-process-ProRAW-images":{"kind":"article","role":"sampleCode","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10160-Capture-and-process-ProRAW-images","url":"\/documentation\/wwdcnotes\/wwdc21-10160-capture-and-process-proraw-images","title":"Capture and process ProRAW images","abstract":[{"text":"When you support ProRAW in your app, you can help photographers easily capture and edit images by combining standard RAW information with Apple’s advanced computational photography techniques. We’ll take you through an overview of the format, including the look and feel of ProRAW images, quality metrics, and compatibility with your app. From there, we’ll explore how you can incorporate ProRAW into your app at every stage of the production pipeline, including capturing imagery with AVFoundation, storage using PhotoKit, and editing with Core Image.","type":"text"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10105-Create-a-more-responsive-camera-experience":{"kind":"article","abstract":[{"type":"text","text":"Discover how AVCapture and PhotoKit can help you create more responsive and delightful apps. Learn about the camera capture process and find out how deferred photo processing can help create the best quality photo. We’ll show you how zero shutter lag uses time travel to capture the perfect action photo, dive into building a responsive capture pipeline, and share how you can adopt the Video Effects API to recognize pre-defined gestures that trigger real-time video effects."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10105-Create-a-more-responsive-camera-experience","title":"Create a more responsive camera experience","type":"topic","url":"\/documentation\/wwdcnotes\/wwdc23-10105-create-a-more-responsive-camera-experience","role":"sampleCode"},"WWDC20.jpeg":{"alt":null,"identifier":"WWDC20.jpeg","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/WWDC20.jpeg"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10046-Improve-access-to-Photos-in-your-app":{"abstract":[{"text":"PHPicker is the simplest and most secure way to integrate the Photos library into your app — and it’s getting even better. Learn how to handle ordered selection of images in your app, as well as pre-selecting assets any time the picker is shown. And for apps that need to integrate more deeply with PhotoKit, discover how you can use PHCloudIdentifier to sync photo project content across devices, helping people easily transition their image work between iPhone, iPad, and Mac.","type":"text"}],"kind":"article","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10046-Improve-access-to-Photos-in-your-app","type":"topic","title":"Improve access to Photos in your app","url":"\/documentation\/wwdcnotes\/wwdc21-10046-improve-access-to-photos-in-your-app"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10676-Build-trust-through-better-privacy":{"type":"topic","abstract":[{"type":"text","text":"Privacy is a more important issue than ever. Learn about Apple’s privacy pillars, our approach to privacy, and how to adopt the latest features on our platforms that can help you earn customer trust, create more personal experiences, and improve engagement. Explore the transparency iOS provides when your app is recording using the microphone or camera, control over location with approximate location, tracking transparency and permissions, and much more."}],"url":"\/documentation\/wwdcnotes\/wwdc20-10676-build-trust-through-better-privacy","role":"sampleCode","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10676-Build-trust-through-better-privacy","title":"Build trust through better privacy"},"doc://WWDCNotes/documentation/WWDCNotes/ATahhan":{"url":"\/documentation\/wwdcnotes\/atahhan","title":"Ammar AlTahhan (12 notes)","kind":"article","role":"sampleCode","images":[{"type":"card","identifier":"ATahhan.jpeg"},{"type":"icon","identifier":"ATahhan.jpeg"}],"type":"topic","abstract":[{"text":"Software Engineer","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/ATahhan"},"WWDC20-10641-limited_access_diagram":{"identifier":"WWDC20-10641-limited_access_diagram","variants":[{"url":"\/images\/WWDC20-10641-limited_access_diagram.png","traits":["1x","light"]}],"type":"image","alt":null},"https://github.com/ATahhan":{"identifier":"https:\/\/github.com\/ATahhan","title":"GitHub","type":"link","url":"https:\/\/github.com\/ATahhan","titleInlineContent":[{"type":"text","text":"GitHub"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10652-Meet-the-new-Photos-picker":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10652-Meet-the-new-Photos-picker","url":"\/documentation\/wwdcnotes\/wwdc20-10652-meet-the-new-photos-picker","title":"Meet the new Photos picker","type":"topic","abstract":[{"type":"text","text":"Let people select photos and videos to use in your app without requiring full Photo Library access. Discover how the PHPicker API for iOS and Mac Catalyst ensures privacy while providing your app the features you need."}],"role":"sampleCode","kind":"article"},"ATahhan.jpeg":{"identifier":"ATahhan.jpeg","variants":[{"url":"\/images\/ATahhan.jpeg","traits":["1x","light"]}],"type":"image","alt":null},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20":{"url":"\/documentation\/wwdcnotes\/wwdc20","title":"WWDC20","type":"topic","kind":"article","role":"collectionGroup","images":[{"type":"icon","identifier":"WWDC20-Icon.png"},{"type":"card","identifier":"WWDC20.jpeg"}],"abstract":[{"type":"text","text":"Xcode 12, Swift 5.3, iOS 14, macOS 11 (Big Sur), tvOS 14, watchOS 7."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"code":"WidgetKit","type":"codeVoice"},{"type":"text","text":", "},{"code":"StoreKit Testing","type":"codeVoice"},{"type":"text","text":", and more."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"},"WWDC20-Icon.png":{"identifier":"WWDC20-Icon.png","variants":[{"traits":["1x","light"],"url":"\/images\/WWDC20-Icon.png"}],"type":"image","alt":null}}}