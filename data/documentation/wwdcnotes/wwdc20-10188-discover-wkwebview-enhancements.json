{"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10188-Discover-WKWebView-enhancements","interfaceLanguage":"swift"},"primaryContentSections":[{"kind":"content","content":[{"anchor":"iOS-in-app-browser-choices","level":2,"type":"heading","text":"iOS in-app browser choices"},{"inlineContent":[{"text":"In iOS we have mainly two ways: ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/safariservices\/sfsafariviewcontroller","isActive":true,"type":"reference"},{"text":" and ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview","isActive":true,"type":"reference"},{"text":".","type":"text"}],"type":"paragraph"},{"anchor":"SFSafariViewController","level":3,"type":"heading","text":"SFSafariViewController"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"If we don’t need deep customization, ","type":"text"},{"overridingTitleInlineContent":[{"type":"codeVoice","code":"SFSafariViewController"}],"isActive":true,"type":"reference","overridingTitle":"SFSafariViewController","identifier":"https:\/\/developer.apple.com\/documentation\/safariservices\/sfsafariviewcontroller"},{"text":" is the best choice","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Built on top of "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview","overridingTitleInlineContent":[{"type":"codeVoice","code":"WKWebView"}],"overridingTitle":"WKWebView"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"It handles everything for you"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Provides many Safari features such as:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"reader"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"content blockers"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"autofill","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"and more","type":"text"}]}]}]}]}]},{"anchor":"WKWebView","level":3,"type":"heading","text":"WKWebView"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"More customizable","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Protects your application’s code and data from the complexities of the web platform","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"The web content runs in a separate process"}],"type":"paragraph"}]}]},{"anchor":"Whats-new-in-WKWebView","level":2,"type":"heading","text":"What’s new in WKWebView"},{"anchor":"Isolating-your-app-from-web-content","level":3,"type":"heading","text":"Isolating your app from web content"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To disable javascript, use the new "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebpagepreferences\/3552422-allowscontentjavascript"},{"type":"text","text":" instead of the deprecated "},{"type":"codeVoice","code":"WKPreferences.javaScriptEnabled"}]}]},{"content":[{"inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkcontentworld","isActive":true},{"type":"text","text":" makes sure that your javascript doesn’t interfere with the website’s javascript (e.g. by declaring the same function) and vice versa:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"use ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3656442-evaluatejavascript","type":"reference","isActive":true},{"text":" and pass either ","type":"text"},{"type":"codeVoice","code":".defaultClient"},{"text":" (your own default world), ","type":"text"},{"type":"codeVoice","code":".page"},{"text":" (the webpage’s), or ","type":"text"},{"type":"codeVoice","code":".world(name:)"},{"text":" (for a custom world)","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"You can also inject ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkscriptmessagehandler","isActive":true,"type":"reference"},{"text":" in different words in order to isolate those as well","type":"text"}]}]}],"type":"unorderedList"}]}]},{"anchor":"Communicating-with-JavaScript","level":3,"type":"heading","text":"Communicating with JavaScript"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3656441-callasyncjavascript","isActive":true,"type":"reference"},{"type":"text","text":" makes reusing the same script with different values much more like native functions:"}],"type":"paragraph"}]}]},{"type":"codeListing","syntax":"swift","code":["let styleJavaScript = \"\"\"","  var element = document.getElementById(elementIDToStylize);","  if (!element) ","    return false; ","  for (const theStyle in stylesToApply)","    element.style.theStyle = stylesToApply[theStyle]; ","  return true; ","\"\"\"","","webView.callAsyncJavaScript(","\tstyleJavaScript, ","\targuments: [ ","    \"elementIDToStylize)\": \"postContainer\", ","    \"stylesToApply\": [","      \"margin\": 0, ","      \"padding-left\": \"5px\"","    ]","  ], ","  in: .defaultClient, ","  completion: { _ in","   \t\/\/ check the return value if desired ","  }",")"]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"With ","type":"text"},{"type":"codeVoice","code":"callAsyncJavaScript"},{"text":" serialization and de-serialization of argument types happens automatically","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"code":"callAsyncJavaScript","type":"codeVoice"},{"type":"text","text":" completion block is called only after the script code says so: it the script returns a promise, it will call the completion block only after the promise has been fulfilled."}]}]}]},{"anchor":"More-flexible-rendering","level":3,"type":"heading","text":"More flexible rendering"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Use ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3516411-pagezoom","isActive":true,"type":"reference"},{"text":" instead of changing the CSS zoom with JavaScript. This will make sure that the zoom is set before the page is rendered.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3516410-mediatype","type":"reference"},{"type":"text","text":" to set a custom media type (used in css queries)"}]}]}]},{"anchor":"Working-with-web-content","level":3,"type":"heading","text":"Working with web content"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Use "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3650493-find","isActive":true},{"type":"text","text":" to offer a native way to find a string in the content similarly to how Safari does"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3650490-createpdf"},{"type":"text","text":" to share the whole web view similar to how sharing in Safari works"}]}]},{"content":[{"inlineContent":[{"text":"WKWebView has learned to create Web Archives with ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3650491-createwebarchivedata"}],"type":"paragraph"}]}]},{"anchor":"Respecting-privacy","level":3,"type":"heading","text":"Respecting privacy"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Intelligent Tracking Prevention (ITP) is enabled by default on all ","type":"text"},{"code":"WKWebView","type":"codeVoice"},{"text":"s on iOS 14 and macOS 11","type":"text"}]}]}]},{"anchor":"App-bound-domains","level":3,"type":"heading","text":"App-bound domains"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"you specify which domains are the core part of the implementation of your app"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"deep interaction with the web content not core to your app is disabled, making it impossible for user data to be accidentally compromised by other domains"}]}]}]},{"inlineContent":[{"text":"Define your domains in the app ","type":"text"},{"type":"codeVoice","code":"info.plist"},{"text":":","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"xml","code":["<plist version=\"1.0\">","<dict> ","<key>WKAppBoundDomains<\/key>","<array>","\t<string>webkittens.internal.apple.com<\/string>","\t<string>pupsonsafari.internal.apple.com<\/string>","<\/array>","<\/dict>","<\/plist> "]},{"anchor":"Written-By","level":2,"type":"heading","text":"Written By"},{"numberOfColumns":5,"type":"row","columns":[{"size":1,"content":[{"inlineContent":[{"type":"image","identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4"}],"type":"paragraph"}]},{"size":4,"content":[{"anchor":"Federico-Zanetello","level":3,"text":"Federico Zanetello","type":"heading"},{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"type":"reference","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitle":"Contributed Notes","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/github.com\/zntfdr","isActive":true},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/zntfdr.dev","isActive":true}]}]}]},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","isActive":true,"type":"reference"}],"type":"paragraph"},{"anchor":"Related-Sessions","level":2,"type":"heading","text":"Related Sessions"},{"type":"links","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10032-Explore-WKWebView-additions","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10646-Whats-new-in-Web-Inspector","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10663-Whats-new-for-web-developers"],"style":"list"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}]}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc20-10188-discover-wkwebview-enhancements"]}],"sampleCodeDownload":{"kind":"sampleDownload","action":{"overridingTitle":"Watch Video (30 min)","identifier":"https:\/\/developer.apple.com\/wwdc20\/10188","isActive":true,"type":"reference"}},"kind":"article","schemaVersion":{"major":0,"minor":3,"patch":0},"metadata":{"roleHeading":"WWDC20","title":"Discover WKWebView enhancements","modules":[{"name":"WWDC Notes"}],"role":"sampleCode"},"sections":[],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20"]]},"abstract":[{"text":"WKWebView is the best way to present rich, interactive web content right within your app. Explore new APIs that help you convert apps using WebViews or UIWebViews while adding entirely new capabilities. Learn about better ways to handle JavaScript, fine tune the rendering process, export web content, and more.","type":"text"}],"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10646-Whats-new-in-Web-Inspector":{"role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc20-10646-whats-new-in-web-inspector","type":"topic","title":"What’s new in Web Inspector","kind":"article","abstract":[{"type":"text","text":"The Web Inspector makes introspection and debugging simpler than ever. Discover how you can use debugger stepping, editing cookies, and overriding network loaded resources to provide you with powerful development capabilities and help you create faster, more efficient websites."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10646-Whats-new-in-Web-Inspector"},"https://github.com/zntfdr":{"identifier":"https:\/\/github.com\/zntfdr","url":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"type":"text","text":"GitHub"}],"type":"link","title":"GitHub"},"https://developer.apple.com/documentation/webkit/wkwebview/3516410-mediatype":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3516410-mediatype","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3516410-mediatype","titleInlineContent":[{"type":"codeVoice","code":"WKWebView.mediaType"}],"type":"link","title":"WKWebView.mediaType"},"https://developer.apple.com/documentation/webkit/wkwebview/3650493-find":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3650493-find","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3650493-find","titleInlineContent":[{"type":"codeVoice","code":"find(_:configuration:completionHandler:)"}],"type":"link","title":"find(_:configuration:completionHandler:)"},"https://developer.apple.com/documentation/webkit/wkwebview/3656442-evaluatejavascript":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3656442-evaluatejavascript","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3656442-evaluatejavascript","titleInlineContent":[{"type":"codeVoice","code":"evaluateJavaScript(_:in:in:completionHandler:)"}],"type":"link","title":"evaluateJavaScript(_:in:in:completionHandler:)"},"https://avatars.githubusercontent.com/u/5277837?v=4":{"identifier":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","type":"image","alt":"Profile image of Federico Zanetello","variants":[{"url":"https:\/\/avatars.githubusercontent.com\/u\/5277837?v=4","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"kind":"article","url":"\/documentation\/wwdcnotes\/zntfdr","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","abstract":[{"type":"text","text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more."}],"type":"topic","title":"Federico Zanetello (332 notes)","role":"sampleCode"},"https://developer.apple.com/documentation/webkit/wkwebview/3516411-pagezoom":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3516411-pagezoom","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3516411-pagezoom","titleInlineContent":[{"type":"codeVoice","code":"WKWebView.pageZoom"}],"type":"link","title":"WKWebView.pageZoom"},"https://developer.apple.com/documentation/webkit/wkwebview/3656441-callasyncjavascript":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3656441-callasyncjavascript","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3656441-callasyncjavascript","titleInlineContent":[{"type":"codeVoice","code":"callAsyncJavaScript"}],"type":"link","title":"callAsyncJavaScript"},"https://developer.apple.com/wwdc20/10188":{"identifier":"https:\/\/developer.apple.com\/wwdc20\/10188","url":"https:\/\/developer.apple.com\/wwdc20\/10188","checksum":null,"type":"download"},"https://zntfdr.dev":{"identifier":"https:\/\/zntfdr.dev","url":"https:\/\/zntfdr.dev","titleInlineContent":[{"type":"text","text":"Blog"}],"type":"link","title":"Blog"},"doc://WWDCNotes/documentation/WWDCNotes":{"type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","title":"WWDC Notes","url":"\/documentation\/wwdcnotes","kind":"symbol","role":"collection","abstract":[{"text":"Session notes shared by the community for the community.","type":"text"}],"images":[{"identifier":"WWDCNotes.png","type":"icon"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10032-Explore-WKWebView-additions":{"role":"sampleCode","url":"\/documentation\/wwdcnotes\/wwdc21-10032-explore-wkwebview-additions","type":"topic","title":"Explore WKWebView additions","kind":"article","abstract":[{"type":"text","text":"Explore the latest updates to WKWebView. We’ll show you how to use APIs to manipulate web content without JavaScript, explore delegates that can help with WebRTC and Downloads, and share how you can easily create a richer web experience within your app."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10032-Explore-WKWebView-additions"},"https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller":{"identifier":"https:\/\/developer.apple.com\/documentation\/safariservices\/sfsafariviewcontroller","url":"https:\/\/developer.apple.com\/documentation\/safariservices\/sfsafariviewcontroller","titleInlineContent":[{"type":"codeVoice","code":"SFSafariViewController"}],"type":"link","title":"SFSafariViewController"},"https://developer.apple.com/documentation/webkit/wkwebview/3650491-createwebarchivedata":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3650491-createwebarchivedata","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3650491-createwebarchivedata","titleInlineContent":[{"type":"text","text":"createWebArchiveData(completionHandler:)"}],"type":"link","title":"createWebArchiveData(completionHandler:)"},"https://developer.apple.com/documentation/webkit/wkscriptmessagehandler":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkscriptmessagehandler","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkscriptmessagehandler","titleInlineContent":[{"type":"codeVoice","code":"WKScriptMessageHandler"}],"type":"link","title":"WKScriptMessageHandler"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20","role":"collectionGroup","title":"WWDC20","abstract":[{"text":"Xcode 12, Swift 5.3, iOS 14, macOS 11 (Big Sur), tvOS 14, watchOS 7.","type":"text"},{"text":" ","type":"text"},{"text":"New APIs: ","type":"text"},{"code":"WidgetKit","type":"codeVoice"},{"text":", ","type":"text"},{"code":"StoreKit Testing","type":"codeVoice"},{"type":"text","text":", and more."}],"kind":"article","images":[{"type":"icon","identifier":"WWDCNotes.png"}],"url":"\/documentation\/wwdcnotes\/wwdc20","type":"topic"},"https://wwdcnotes.github.io/WWDCNotes/documentation/wwdcnotes/contributing":{"identifier":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","url":"https:\/\/wwdcnotes.github.io\/WWDCNotes\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"type":"link","title":"Contributions are welcome!"},"https://developer.apple.com/documentation/webkit/wkwebview":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview","titleInlineContent":[{"type":"codeVoice","code":"WKWebView"}],"type":"link","title":"WKWebView"},"https://developer.apple.com/documentation/webkit/wkcontentworld":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkcontentworld","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkcontentworld","titleInlineContent":[{"type":"codeVoice","code":"WKContentWorld"}],"type":"link","title":"WKContentWorld"},"https://developer.apple.com/documentation/webkit/wkwebview/3650490-createpdf":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3650490-createpdf","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebview\/3650490-createpdf","titleInlineContent":[{"type":"codeVoice","code":"createPDF(configuration:completionHandler:)"}],"type":"link","title":"createPDF(configuration:completionHandler:)"},"WWDCNotes.png":{"identifier":"WWDCNotes.png","type":"image","alt":null,"variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10663-Whats-new-for-web-developers":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10663-Whats-new-for-web-developers","url":"\/documentation\/wwdcnotes\/wwdc20-10663-whats-new-for-web-developers","role":"sampleCode","type":"topic","kind":"article","title":"What’s new for web developers","abstract":[{"type":"text","text":"Explore the latest features and improvements for Safari and WebKit. We’ll walk you through updated web APIs, CSS and media features, JavaScript syntax, and more to help you build great experiences for people when they use your website, home screen web apps, or embedded WebKit views."}]},"https://developer.apple.com/documentation/webkit/wkwebpagepreferences/3552422-allowscontentjavascript":{"identifier":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebpagepreferences\/3552422-allowscontentjavascript","url":"https:\/\/developer.apple.com\/documentation\/webkit\/wkwebpagepreferences\/3552422-allowscontentjavascript","titleInlineContent":[{"type":"codeVoice","code":"WKWebPagePreferences.allowsContentJavaScript"}],"type":"link","title":"WKWebPagePreferences.allowsContentJavaScript"}}}