{"metadata":{"role":"sampleCode","title":"Meet StoreKit for SwiftUI","roleHeading":"WWDC23","modules":[{"name":"WWDC Notes"}]},"schemaVersion":{"minor":3,"patch":0,"major":0},"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10013-Meet-StoreKit-for-SwiftUI","interfaceLanguage":"swift"},"kind":"article","primaryContentSections":[{"content":[{"level":2,"text":"Overview","type":"heading","anchor":"overview"},{"inlineContent":[{"type":"image","identifier":"WWDC23-10013-EncapsulatedLogic"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"Assets, Localization, Style provided by the Developer","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"code":"StoreView","type":"codeVoice"},{"text":", ","type":"text"},{"code":"ProductView","type":"codeVoice"},{"text":", and ","type":"text"},{"code":"SubscriptionStoreView","type":"codeVoice"},{"text":" can be used when ","type":"text"},{"code":"StoreKit","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"SwiftUI","type":"codeVoice"},{"text":" are imported","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"StoreView(ids: [\"...\"]) { product in \/* custom icon view *\/ }"},{"type":"text","text":" presents a full screen view with a list if "},{"type":"codeVoice","code":"ProductView"},{"type":"text","text":"s"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Define your custom layout by using ","type":"text"},{"type":"codeVoice","code":"ProductView"},{"text":" directly","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Customize with "},{"type":"codeVoice","code":".productViewStyle(.large|.compact|.regular)"},{"type":"text","text":", "},{"type":"codeVoice","code":".containsBackground"},{"type":"text","text":", "},{"type":"codeVoice","code":".backgroundStyle(.clear)"},{"type":"text","text":" & more"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Customize with "},{"type":"codeVoice","code":".subscriptionStoreButtonLabel(.multiline)"},{"type":"text","text":", "},{"type":"codeVoice","code":".sbuscriptionStorePurchaseItemBackground(.thinMaterial)"},{"type":"text","text":" & more"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"New "},{"code":".onInAppPurchaseCompletion { product, result in ... }","type":"codeVoice"},{"type":"text","text":" modifier for SwiftUI (catching purchases in descending views)"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":".onInAppPurchaseStart { product in ... }"},{"type":"text","text":" for showing progress indicator"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":".subscriptionStatusTask(groupID: ...) { taskState in ... }"},{"type":"text","text":" with state cases "},{"type":"codeVoice","code":".loading"},{"type":"text","text":", "},{"type":"codeVoice","code":".failure(any Error)"},{"type":"text","text":", and "},{"type":"codeVoice","code":".success(Transaction)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Or ","type":"text"},{"code":".currentEntitlementTask(for ...) { state in ... }","type":"codeVoice"},{"text":" for non-consumable products","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Customize with "},{"code":".productIconBorder","type":"codeVoice"},{"type":"text","text":" if you want the App Store product icon look"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Create custom styles by conforming to ","type":"text"},{"code":"ProductViewStyle","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Use ","type":"text"},{"code":".storeProductsTask(for: ...)","type":"codeVoice"},{"text":" modifier in custom styles to use Apple-provided caching & loading logic","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Customize with ","type":"text"},{"code":".storeButton(.visibble|.automatic|.hidden, for: .redeemCode|.cancellation|.restorePurchase|.signIn|.policies)","type":"codeVoice"},{"text":" to control buttons shown","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"type":"image","identifier":"WWDC23-10013-AuxiliaryButtons"}],"type":"paragraph"},{"inlineContent":[{"type":"image","identifier":"WWDC23-10013-RedeemCode"}],"type":"paragraph"},{"inlineContent":[{"type":"image","identifier":"WWDC23-10013-Policies"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"New ","type":"text"},{"code":".subscriptionStoreSignInAction { ... }","type":"codeVoice"},{"text":" modifier triggered on press of ","type":"text"},{"code":".signIn","type":"codeVoice"},{"text":" store button","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":".policies"},{"type":"text","text":" shows terms and privacy policy buttons above plan list (in iOS \/ macOS)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Customize with "},{"type":"codeVoice","code":".subscriptionStorePolicyForegroundStyle(.white)"},{"type":"text","text":" for legibility on custom backgrounds"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Also ","type":"text"},{"code":".subscriptionStoreControlStyle(.buttons|automatic|.picker|.prominentPicker)","type":"codeVoice"},{"text":" available for pre-defined styles","type":"text"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"image","identifier":"WWDC23-10013-ButtonsStyle"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Use ","type":"text"},{"type":"codeVoice","code":".subscriptionSToreButtonLabel(.displayName|.price)"},{"text":" in custom style","type":"text"}]}]},{"content":[{"inlineContent":[{"code":".subscriptionStoreControlIcon { subscription, info in ... }","type":"codeVoice"},{"text":" for further styling","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Use ","type":"text"},{"code":".containerBackground(.accent.gradient, for: .subscriptionStore|Header|FullHeight)","type":"codeVoice"},{"text":" options for background","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Use ","type":"text"},{"type":"codeVoice","code":"visibleRelationships: .upgrade"},{"text":" parameter on initializer to change to “Upgrade” mode when already subscribed","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":2,"text":"Written By","type":"heading","anchor":"Written-By"},{"numberOfColumns":5,"columns":[{"content":[{"type":"paragraph","inlineContent":[{"type":"image","identifier":"Jeehut"}]}],"size":1},{"content":[{"anchor":"Cihat-G%C3%BCnd%C3%BCz","level":3,"type":"heading","text":"Cihat Gündüz"},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","isActive":true,"type":"reference","overridingTitle":"Contributed Notes","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}]},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/github.com\/Jeehut","isActive":true,"type":"reference"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/fline.dev","isActive":true,"type":"reference"},{"type":"text","text":" "},{"type":"text","text":"|"},{"type":"text","text":" "},{"identifier":"https:\/\/x.com\/Jeehut","isActive":true,"type":"reference"}]}],"size":4}],"type":"row"},{"type":"thematicBreak"},{"inlineContent":[{"type":"text","text":"Missing anything? Corrections? "},{"isActive":true,"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"reference"}],"type":"paragraph"},{"level":2,"text":"Related Sessions","type":"heading","anchor":"Related-Sessions"},{"style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10117-Whats-new-in-App-Store-Connect","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10140-Whats-new-in-StoreKit-2-and-StoreKit-Testing-in-Xcode","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10141-Whats-new-in-App-Store-server-APIs","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10148-Whats-new-in-SwiftUI","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10039-Whats-new-in-StoreKit-testing","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10114-Meet-StoreKit-2","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10659-Introducing-StoreKit-Testing-in-Xcode"],"type":"links"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}],"type":"small"},{"inlineContent":[{"text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved.","type":"text"},{"text":" ","type":"text"},{"text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries.","type":"text"},{"text":" ","type":"text"},{"text":"This website is not made by, affiliated with, nor endorsed by Apple.","type":"text"}],"type":"small"}],"kind":"content"}],"sampleCodeDownload":{"action":{"identifier":"https:\/\/developer.apple.com\/wwdc23\/10013","isActive":true,"overridingTitle":"Watch Video (36 min)","type":"reference"},"kind":"sampleDownload"},"abstract":[{"text":"Discover how you can use App Store product metadata and Xcode Previews to add in-app purchases to your app with just a few lines of code. Explore a new collection of UI components in StoreKit and learn how you can easily merchandise your products, present subscriptions in a way that helps users make informed decisions, and more.","type":"text"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc23-10013-meet-storekit-for-swiftui"]}],"sections":[],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23"]]},"references":{"doc://WWDCNotes/documentation/WWDCNotes/WWDC21-10114-Meet-StoreKit-2":{"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC21-10114-Meet-StoreKit-2","url":"\/documentation\/wwdcnotes\/wwdc21-10114-meet-storekit-2","type":"topic","role":"sampleCode","title":"Meet StoreKit 2","kind":"article","abstract":[{"type":"text","text":"StoreKit 2 delivers powerful, Swift-native APIs for in-app purchases and auto-renewable subscriptions. Learn how you can easily implement in-app purchases and subscriptions, and discover APIs for retrieving product information, handling transactions, determining product entitlements and customer status, as well as comprehensive testing support in Xcode."}]},"https://fline.dev":{"title":"Blog","titleInlineContent":[{"type":"text","text":"Blog"}],"identifier":"https:\/\/fline.dev","url":"https:\/\/fline.dev","type":"link"},"https://developer.apple.com/wwdc23/10013":{"identifier":"https:\/\/developer.apple.com\/wwdc23\/10013","type":"download","checksum":null,"url":"https:\/\/developer.apple.com\/wwdc23\/10013"},"WWDC23-10013-Policies":{"identifier":"WWDC23-10013-Policies","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10013-Policies.png"}],"type":"image"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"titleInlineContent":[{"text":"Contributions are welcome!","type":"text"}],"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","title":"Contributions are welcome!"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC20-10659-Introducing-StoreKit-Testing-in-Xcode":{"type":"topic","title":"Introducing StoreKit Testing in Xcode","url":"\/documentation\/wwdcnotes\/wwdc20-10659-introducing-storekit-testing-in-xcode","kind":"article","abstract":[{"type":"text","text":"Discover StoreKit Testing in Xcode — a local environment for testing your in-app purchases without needing to connect to App Store servers. We’ll show you how to set up a test environment, create a StoreKit configuration file, and prepare to validate receipts locally. We’ll also explain how to test a variety of in-app purchase scenarios and automate those tests with the StoreKitTest framework, and cover the latest improvements to testing in the sandbox environment."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC20-10659-Introducing-StoreKit-Testing-in-Xcode","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes":{"abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"url":"\/documentation\/wwdcnotes","title":"WWDC Notes","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","role":"collection","kind":"symbol","images":[{"type":"icon","identifier":"WWDCNotes.png"}]},"https://x.com/Jeehut":{"titleInlineContent":[{"text":"X\/Twitter","type":"text"}],"identifier":"https:\/\/x.com\/Jeehut","type":"link","url":"https:\/\/x.com\/Jeehut","title":"X\/Twitter"},"WWDC23-10013-AuxiliaryButtons":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10013-AuxiliaryButtons.png"}],"identifier":"WWDC23-10013-AuxiliaryButtons","alt":null,"type":"image"},"WWDC23-10013-ButtonsStyle":{"identifier":"WWDC23-10013-ButtonsStyle","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10013-ButtonsStyle.png"}],"type":"image"},"Jeehut":{"identifier":"Jeehut","variants":[{"url":"\/images\/WWDCNotes\/Jeehut.jpeg","traits":["1x","light"]}],"type":"image","alt":"Profile image of Cihat Gündüz"},"doc://WWDCNotes/documentation/WWDCNotes/Jeehut":{"images":[{"identifier":"Jeehut.jpeg","type":"card"},{"identifier":"Jeehut.jpeg","type":"icon"}],"type":"topic","role":"sampleCode","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/Jeehut","abstract":[{"type":"text","text":"Spatial-first Indie Developer for  Platforms. Actively contributing to Open Source since 2011!"}],"title":"Cihat Gündüz (61 notes)","kind":"article","url":"\/documentation\/wwdcnotes\/jeehut"},"https://github.com/Jeehut":{"title":"GitHub","titleInlineContent":[{"type":"text","text":"GitHub"}],"identifier":"https:\/\/github.com\/Jeehut","url":"https:\/\/github.com\/Jeehut","type":"link"},"Jeehut.jpeg":{"identifier":"Jeehut.jpeg","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/Jeehut.jpeg"}],"type":"image"},"WWDC23-10013-RedeemCode":{"identifier":"WWDC23-10013-RedeemCode","variants":[{"url":"\/images\/WWDCNotes\/WWDC23-10013-RedeemCode.png","traits":["1x","light"]}],"type":"image","alt":null},"WWDC23-Icon.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-Icon.png"}],"identifier":"WWDC23-Icon.png","alt":null,"type":"image"},"WWDCNotes.png":{"identifier":"WWDCNotes.png","alt":null,"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDCNotes.png"}],"type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10141-Whats-new-in-App-Store-server-APIs":{"title":"What’s new in App Store server APIs","url":"\/documentation\/wwdcnotes\/wwdc23-10141-whats-new-in-app-store-server-apis","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10141-Whats-new-in-App-Store-server-APIs","kind":"article","role":"sampleCode","type":"topic","abstract":[{"text":"Discover the latest updates to the App Store Server API and App Store Server Notifications. Explore the current API offerings and learn how to track subscription status with notifications, work with transactions on your server, and efficiently recover missed notifications. We’ll also show you how your server can support apps using StoreKit or StoreKit 2, and share an important deprecation in the API and suggested migration workflow.","type":"text"}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10140-Whats-new-in-StoreKit-2-and-StoreKit-Testing-in-Xcode":{"type":"topic","title":"What’s new in StoreKit 2 and StoreKit Testing in Xcode","url":"\/documentation\/wwdcnotes\/wwdc23-10140-whats-new-in-storekit-2-and-storekit-testing-in-xcode","kind":"article","abstract":[{"type":"text","text":"Get to know the latest enhancements to StoreKit 2 and StoreKit Testing in Xcode. Discover API updates for promoted in-app purchases, StoreKit messages, the Transaction model, the RenewalInfo model, and the App Store sheet for managing subscriptions. Learn how to upgrade to SHA-256 for on-device receipt validation and use APIs to create SwiftUI views."}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10140-Whats-new-in-StoreKit-2-and-StoreKit-Testing-in-Xcode","role":"sampleCode"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10148-Whats-new-in-SwiftUI":{"url":"\/documentation\/wwdcnotes\/wwdc23-10148-whats-new-in-swiftui","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10148-Whats-new-in-SwiftUI","abstract":[{"text":"Learn how you can use SwiftUI to build great apps for all Apple platforms. Explore the latest updates to SwiftUI and discover new scene types for visionOS. Simplify your data models with the latest data flow options and learn about the Inspector view. We’ll also take you through enhanced animation APIs, powerful ScrollView improvements, and a host of refinements to help you make tidier tables, improve focus and keyboard input, and so much more.","type":"text"}],"role":"sampleCode","title":"What’s new in SwiftUI","type":"topic"},"WWDC23-10013-EncapsulatedLogic":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23-10013-EncapsulatedLogic.png"}],"identifier":"WWDC23-10013-EncapsulatedLogic","alt":null,"type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23-10117-Whats-new-in-App-Store-Connect":{"title":"What’s new in App Store Connect","url":"\/documentation\/wwdcnotes\/wwdc23-10117-whats-new-in-app-store-connect","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23-10117-Whats-new-in-App-Store-Connect","kind":"article","role":"sampleCode","type":"topic","abstract":[{"type":"text","text":"Discover the latest updates to App Store Connect, the suite of tools used to manage and submit apps to the App Store. Explore how you can use the latest features to test, price, promote, and automate the management of your app more easily. We’ll also share enhancements to tools like TestFlight and the App Store Connect API."}]},"doc://WWDCNotes/documentation/WWDCNotes/WWDC22-10039-Whats-new-in-StoreKit-testing":{"url":"\/documentation\/wwdcnotes\/wwdc22-10039-whats-new-in-storekit-testing","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC22-10039-Whats-new-in-StoreKit-testing","kind":"article","role":"sampleCode","type":"topic","abstract":[{"type":"text","text":"Discover the latest tools to help you test your in-app purchases and subscriptions. We’ll show you how to bring your products from App Store Connect into StoreKit Testing in Xcode, learn about improvements to the transaction manager, and explore your in-app purchase flow in Xcode Previews. We’ll also take you through best practices when setting up an Apple ID for the sandbox environment, and show you how to create tests for refund requests, price increase consent, billing retry, and much more."}],"title":"What’s new in StoreKit testing"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC23":{"abstract":[{"type":"text","text":"Xcode 15, Swift 5.9, iOS 17, macOS 14 (Sonoma), tvOS 17, visionOS 1, watchOS 10."},{"type":"text","text":" "},{"type":"text","text":"New APIs: "},{"code":"SwiftData","type":"codeVoice"},{"type":"text","text":", "},{"code":"Observation","type":"codeVoice"},{"type":"text","text":", "},{"code":"StoreKit","type":"codeVoice"},{"type":"text","text":" views, and more."}],"url":"\/documentation\/wwdcnotes\/wwdc23","title":"WWDC23","type":"topic","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC23","role":"collectionGroup","kind":"article","images":[{"identifier":"WWDC23-Icon.png","type":"icon"},{"identifier":"WWDC23.jpeg","type":"card"}]},"WWDC23.jpeg":{"variants":[{"traits":["1x","light"],"url":"\/images\/WWDCNotes\/WWDC23.jpeg"}],"identifier":"WWDC23.jpeg","alt":null,"type":"image"}}}