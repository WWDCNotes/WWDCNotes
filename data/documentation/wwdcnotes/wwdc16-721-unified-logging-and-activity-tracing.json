{"metadata":{"title":"Unified Logging and Activity Tracing","role":"sampleCode","modules":[{"name":"WWDC Notes"}],"roleHeading":"WWDC16"},"schemaVersion":{"patch":0,"major":0,"minor":3},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/wwdcnotes\/wwdc16-721-unified-logging-and-activity-tracing"]}],"hierarchy":{"paths":[["doc:\/\/WWDCNotes\/documentation\/WWDCNotes","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16"]]},"abstract":[{"type":"text","text":"The new Unified Logging and Tracing System for iOS and macOS uses Activity Tracing for performance, consolidates kernel and user-space logging, and has many other improvements. Learn how Logging and Tracing can help you debug and troubleshoot issues with your apps."}],"identifier":{"url":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16-721-Unified-Logging-and-Activity-Tracing","interfaceLanguage":"swift"},"sampleCodeDownload":{"action":{"type":"reference","identifier":"https:\/\/developer.apple.com\/wwdc16\/721","isActive":true,"overridingTitle":"Watch Video (43 min)"},"kind":"sampleDownload"},"sections":[],"kind":"article","primaryContentSections":[{"kind":"content","content":[{"type":"heading","anchor":"Introduction","level":2,"text":"Introduction"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"One common, efficient logging mechanism for both user and kernel mode."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Maximize information collected while minimizing "},{"inlineContent":[{"type":"text","text":"observer"}],"type":"strong"},{"type":"text","text":" effect (e.g. because of breakpoints\/print you change the timing and the bug doesn’t happen anymore)."}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"os_log"},{"text":" compresses data, and defers lots of work (key point to avoid observer effect)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Designed with privacy in mind ️❤️","type":"text"}]}]}],"type":"unorderedList"},{"type":"heading","anchor":"Whats-New","level":2,"text":"What’s New"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"New tools to categorize and filter log messages","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Logging system collects caller info for you (","type":"text"},{"code":"__FILE__","type":"codeVoice"},{"text":", ","type":"text"},{"code":"_FUNCTION__","type":"codeVoice"},{"text":" etc are automatically collected)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"New type formatters (more on this later)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"New console and command-line tool"}]}]}]},{"text":"Adoption","type":"heading","anchor":"Adoption","level":2},{"inlineContent":[{"type":"text","text":"Legacy APIs ("},{"code":"NSLog","type":"codeVoice"},{"type":"text","text":") are automatically redirected into the new system."}],"type":"paragraph"},{"text":"New File Format","type":"heading","anchor":"New-File-Format","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":".tracev3"},{"type":"text","text":" stored at "},{"type":"codeVoice","code":"\/var\/db\/diagnostics"},{"type":"text","text":" with additional support files at "},{"type":"codeVoice","code":"\/var\/db\/uuidtext"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"code":".logarchive","type":"codeVoice"},{"text":" is basically a merge of the files found in the folders above, it’s used to transfer the logging to other people, bug reports","type":"text"}],"type":"paragraph"}]}]},{"text":"Subsystem and Categories","type":"heading","anchor":"Subsystem-and-Categories","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Subsystem should be the app\/framework domain (your.app.identifier)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Category are the different domains (“store”, “chat”, “account”, …)","type":"text"}]}]}]},{"text":"Logging Behavior","type":"heading","anchor":"Logging-Behavior","level":2},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Three basic levels"}],"type":"strong"},{"text":":","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Default","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Info","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Debug"}]}]}]},{"inlineContent":[{"inlineContent":[{"text":"Two special levels","type":"text"}],"type":"strong"},{"type":"text","text":":"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Fault"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Error","type":"text"}]}]}]},{"inlineContent":[{"type":"text","text":"Each "},{"inlineContent":[{"text":"basic level","type":"text"}],"type":"strong"},{"type":"text","text":" has two characteristics that can be set for system, subsystem, or category (in the Console app we can mute every single one of them, even the process, even filter by type like error -> you can even save one filter that you create ):"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Enabled (does it actually produce a log?)"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"isItStoredToDisk"},{"text":" or Memory (memory: memory buffer, saved to disk only on fault or error)","type":"text"}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"text","text":"Levels are hierarchical, therefore by setting Debug to go to disk, implies that Info (and Default) will also go to disk"}],"type":"paragraph"},{"inlineContent":[{"text":"Default behavior:","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"image","identifier":"WWDC16-721-behavior"}],"type":"paragraph"},{"text":"Privacy","type":"heading","anchor":"Privacy","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Prevent accidental logging of Personally Identifiable Information (PII)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Dynamic strings, collections, arrays, etc. are assumed to be private","type":"text"}]}]}]},{"inlineContent":[{"type":"image","identifier":"WWDC16-721-privacy"}],"type":"paragraph"},{"text":"Architecture","type":"heading","anchor":"Architecture","level":2},{"inlineContent":[{"type":"image","identifier":"WWDC16-721-architecture"}],"type":"paragraph"},{"text":"Faults and Errors","type":"heading","anchor":"Faults-and-Errors","level":2},{"inlineContent":[{"text":"Faults and Error log information are captured into a separate set of log files","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Errors represent issues discovered within a given application\/library","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Faults represent more global problems in the system","type":"text"}],"type":"paragraph"}]}]},{"text":"APIs","type":"heading","anchor":"APIs","level":2},{"inlineContent":[{"type":"image","identifier":"WWDC16-721-api"}],"type":"paragraph"},{"inlineContent":[{"type":"codeVoice","code":"os_log_create"},{"type":"text","text":":"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"takes two parameters: the name of the subsystem and the name of the category.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"creates a thread-safe singleton object that controls behavior of log messages, here’s how to use it:"}]}]}]},{"syntax":"swift","type":"codeListing","code":["os_log(log, \"This happened\")"]},{"text":"Type Formatters","type":"heading","anchor":"Type-Formatters","level":2},{"inlineContent":[{"type":"text","text":"We should use these as much as possible as these conversions will be done in the background for us (no observer effect!)"}],"type":"paragraph"},{"inlineContent":[{"identifier":"WWDC16-721-formatters","type":"image"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"More information "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/library\/archive\/documentation\/Cocoa\/Conceptual\/Strings\/Articles\/formatSpecifiers.html"},{"type":"text","text":"."}],"type":"paragraph"},{"text":"Activity API","type":"heading","anchor":"Activity-API","level":2},{"inlineContent":[{"identifier":"WWDC16-721-activity","type":"image"}],"type":"paragraph"},{"text":"Log Command Line Tool","type":"heading","anchor":"Log-Command-Line-Tool","level":2},{"inlineContent":[{"type":"image","identifier":"WWDC16-721-command"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"More info "},{"identifier":"https:\/\/developer.apple.com\/documentation\/os\/logging","isActive":true,"type":"reference"},{"type":"text","text":"."}],"type":"paragraph"},{"text":"Written By","type":"heading","anchor":"Written-By","level":2},{"type":"row","columns":[{"size":1,"content":[{"inlineContent":[{"type":"image","identifier":"zntfdr"}],"type":"paragraph"}]},{"size":4,"content":[{"type":"heading","level":3,"anchor":"Federico-Zanetello","text":"Federico Zanetello"},{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","overridingTitleInlineContent":[{"text":"Contributed Notes","type":"text"}],"overridingTitle":"Contributed Notes","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/zntfdr","type":"reference"},{"text":" ","type":"text"},{"text":"|","type":"text"},{"text":" ","type":"text"},{"isActive":true,"identifier":"https:\/\/zntfdr.dev","type":"reference"}]}]}],"numberOfColumns":5},{"inlineContent":[{"text":"Missing anything? Corrections? ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing"}],"type":"paragraph"},{"text":"Related Sessions","type":"heading","anchor":"Related-Sessions","level":2},{"type":"links","style":"list","items":["doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-405-Measuring-Performance-Using-Logging","doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16-418-Using-Time-Profiler-in-Instruments"]},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Legal Notice"}]}],"type":"small"},{"inlineContent":[{"type":"text","text":"All content copyright © 2012 – 2024 Apple Inc. All rights reserved."},{"type":"text","text":" "},{"type":"text","text":"Swift, the Swift logo, Swift Playgrounds, Xcode, Instruments, Cocoa Touch, Touch ID, FaceID, iPhone, iPad, Safari, Apple Vision, Apple Watch, App Store, iPadOS, watchOS, visionOS, tvOS, Mac, and macOS are trademarks of Apple Inc., registered in the U.S. and other countries."},{"type":"text","text":" "},{"type":"text","text":"This website is not made by, affiliated with, nor endorsed by Apple."}],"type":"small"}]}],"references":{"WWDC16-721-privacy":{"alt":null,"variants":[{"url":"\/images\/WWDC16-721-privacy.png","traits":["1x","light"]}],"identifier":"WWDC16-721-privacy","type":"image"},"https://developer.apple.com/wwdc16/721":{"url":"https:\/\/developer.apple.com\/wwdc16\/721","checksum":null,"identifier":"https:\/\/developer.apple.com\/wwdc16\/721","type":"download"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC16":{"type":"topic","abstract":[{"type":"text","text":"Xcode 8, Swift 3.0, iOS 10, macOS 10.12 (Sierra), tvOS 10, watchOS 3."}],"title":"WWDC16","url":"\/documentation\/wwdcnotes\/wwdc16","kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16","role":"collectionGroup","images":[{"identifier":"WWDC16-Icon.png","type":"icon"},{"identifier":"WWDC16.jpeg","type":"card"}]},"doc://WWDCNotes/documentation/WWDCNotes":{"images":[{"type":"icon","identifier":"WWDCNotes.png"}],"type":"topic","url":"\/documentation\/wwdcnotes","role":"collection","title":"WWDC Notes","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes","abstract":[{"type":"text","text":"Session notes shared by the community for the community."}],"kind":"symbol"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC16-418-Using-Time-Profiler-in-Instruments":{"kind":"article","type":"topic","title":"Using Time Profiler in Instruments","url":"\/documentation\/wwdcnotes\/wwdc16-418-using-time-profiler-in-instruments","abstract":[{"text":"Learn how to make your apps faster and more efficient in this introduction to Time Profiler in Instruments. Walk through how to use Time Profiler to measure your app’s performance. Learn how Time Profiler works and can be used to identify problems and verify your fixes. Discover how easy it is to improve your app’s power usage and performance by using Instruments throughout your development process.","type":"text"}],"identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC16-418-Using-Time-Profiler-in-Instruments","role":"sampleCode"},"WWDC16-721-behavior":{"alt":null,"variants":[{"url":"\/images\/WWDC16-721-behavior.png","traits":["1x","light"]}],"identifier":"WWDC16-721-behavior","type":"image"},"WWDC16.jpeg":{"alt":null,"variants":[{"url":"\/images\/WWDC16.jpeg","traits":["1x","light"]}],"identifier":"WWDC16.jpeg","type":"image"},"WWDC16-721-activity":{"alt":null,"variants":[{"url":"\/images\/WWDC16-721-activity.png","traits":["1x","light"]}],"identifier":"WWDC16-721-activity","type":"image"},"https://github.com/zntfdr":{"url":"https:\/\/github.com\/zntfdr","titleInlineContent":[{"type":"text","text":"GitHub"}],"identifier":"https:\/\/github.com\/zntfdr","type":"link","title":"GitHub"},"https://zntfdr.dev":{"url":"https:\/\/zntfdr.dev","titleInlineContent":[{"type":"text","text":"Blog"}],"identifier":"https:\/\/zntfdr.dev","type":"link","title":"Blog"},"https://wwdcnotes.com/documentation/wwdcnotes/contributing":{"url":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","titleInlineContent":[{"type":"text","text":"Contributions are welcome!"}],"identifier":"https:\/\/wwdcnotes.com\/documentation\/wwdcnotes\/contributing","type":"link","title":"Contributions are welcome!"},"WWDC16-Icon.png":{"alt":null,"variants":[{"url":"\/images\/WWDC16-Icon.png","traits":["1x","light"]}],"identifier":"WWDC16-Icon.png","type":"image"},"https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html":{"url":"https:\/\/developer.apple.com\/library\/archive\/documentation\/Cocoa\/Conceptual\/Strings\/Articles\/formatSpecifiers.html","titleInlineContent":[{"type":"text","text":"here"}],"identifier":"https:\/\/developer.apple.com\/library\/archive\/documentation\/Cocoa\/Conceptual\/Strings\/Articles\/formatSpecifiers.html","type":"link","title":"here"},"zntfdr.jpeg":{"alt":null,"variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}],"identifier":"zntfdr.jpeg","type":"image"},"WWDCNotes.png":{"alt":null,"variants":[{"url":"\/images\/WWDCNotes.png","traits":["1x","light"]}],"identifier":"WWDCNotes.png","type":"image"},"WWDC16-721-formatters":{"alt":null,"variants":[{"url":"\/images\/WWDC16-721-formatters.png","traits":["1x","light"]}],"identifier":"WWDC16-721-formatters","type":"image"},"WWDC16-721-api":{"alt":null,"variants":[{"url":"\/images\/WWDC16-721-api.png","traits":["1x","light"]}],"identifier":"WWDC16-721-api","type":"image"},"WWDC16-721-architecture":{"alt":null,"variants":[{"url":"\/images\/WWDC16-721-architecture.png","traits":["1x","light"]}],"identifier":"WWDC16-721-architecture","type":"image"},"https://developer.apple.com/documentation/os/logging":{"url":"https:\/\/developer.apple.com\/documentation\/os\/logging","titleInlineContent":[{"type":"text","text":"here"}],"identifier":"https:\/\/developer.apple.com\/documentation\/os\/logging","type":"link","title":"here"},"doc://WWDCNotes/documentation/WWDCNotes/WWDC18-405-Measuring-Performance-Using-Logging":{"url":"\/documentation\/wwdcnotes\/wwdc18-405-measuring-performance-using-logging","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/WWDC18-405-Measuring-Performance-Using-Logging","kind":"article","abstract":[{"type":"text","text":"Learn how to use signposts and logging to measure performance.  Understand how the Points of Interest instrument can be used to examine logged data. Get an introduction into creating and using custom instruments."}],"type":"topic","title":"Measuring Performance Using Logging","role":"sampleCode"},"WWDC16-721-command":{"alt":null,"variants":[{"url":"\/images\/WWDC16-721-command.png","traits":["1x","light"]}],"identifier":"WWDC16-721-command","type":"image"},"doc://WWDCNotes/documentation/WWDCNotes/zntfdr":{"type":"topic","title":"Federico Zanetello (332 notes)","url":"\/documentation\/wwdcnotes\/zntfdr","abstract":[{"text":"Software engineer with a strong passion for well-written code, thought-out composable architectures, automation, tests, and more.","type":"text"}],"kind":"article","identifier":"doc:\/\/WWDCNotes\/documentation\/WWDCNotes\/zntfdr","images":[{"type":"card","identifier":"zntfdr.jpeg"},{"type":"icon","identifier":"zntfdr.jpeg"}],"role":"sampleCode"},"zntfdr":{"alt":"Profile image of Federico Zanetello","variants":[{"url":"\/images\/zntfdr.jpeg","traits":["1x","light"]}],"identifier":"zntfdr","type":"image"}}}